import{r as n,j as e,R as Ie}from"./react-JHr-MqlU.js";import{R as bt,c as Ns}from"./react-dom-ByPjVLjt.js";import{N as Se,L as Tt,B as gs}from"./react-router-dom-BJvJlwAU.js";import{c as tt,a as Et,d as vs,e as ys,f as ge,g as Cs}from"./react-router-C9QN7SAV.js";import{M as Ss,a as ws,b as ks,c as Ps,B as At,F as Is,L as _s,I as As}from"./reactstrap-Sv9f_Q5O.js";import{B as Ms}from"./react-chartjs-2-B_DtYEyI.js";import{C as Ds,a as Ls,L as Ts,b as Es,p as Os,c as Rs,d as Fs}from"./chart.js-zNwYC2Re.js";import"./classnames-C9FZUsQl.js";import"./scheduler-DYLXRpC5.js";import"./@remix-run-TLZCGUFM.js";import"./prop-types-ZMHxiqrO.js";import"./react-transition-group-Bm7DLXUO.js";import"./@babel-G6YR9G09.js";import"./@kurkle-D8fDXNIl.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&s(x)}).observe(document,{childList:!0,subtree:!0});function r(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function s(a){if(a.ep)return;a.ep=!0;const m=r(a);fetch(a.href,m)}})();const ve={ADMIN:"admin",ENGINEER:"engineer",PROCUREMENT:"procurement",VIEWER:"viewer",ADMIN_PSE:"admin_pse",ADMIN_LOGISTIC:"admin_logistic",SUPPLIER:"supplier"},Pe={PSE:"PSE",PCD:"PCD",LOGISTIC:"LOGISTIC",SUPPLIER:"SUPPLIER"},Mt={[Pe.PSE]:{[ve.ADMIN]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!0,editable:!0}},[ve.ADMIN_PSE]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!1}},[ve.ENGINEER]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!1,editable:!1}},[ve.VIEWER]:{general:{visible:!0,editable:!1},pse:{visible:!0,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!1,editable:!1}}},[Pe.PCD]:{[ve.PROCUREMENT]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!0}},[ve.VIEWER]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!1}}},[Pe.LOGISTIC]:{[ve.ADMIN_LOGISTIC]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!0}}},[Pe.SUPPLIER]:{[ve.SUPPLIER]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!1,editable:!1}}},default:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!1,editable:!1}}},Ot=n.createContext(null),Bs=[{username:"khedi.asmoro",password:"1",department:Pe.PSE,role:ve.ADMIN},{username:"ujang.jayadi",password:"1",department:Pe.PSE,role:ve.ENGINEER},{username:"anton",password:"1",department:Pe.PSE,role:ve.ENGINEER},{username:"hanifa",password:"2",department:Pe.PCD,role:ve.PROCUREMENT},{username:"viewer.pse",password:"1",department:Pe.PSE,role:ve.VIEWER},{username:"viewer.pcd",password:"1",department:Pe.PCD,role:ve.VIEWER},{username:"admin_pse",password:"1",department:Pe.PSE,role:ve.ADMIN_PSE},{username:"admin_logistic",password:"1",department:Pe.LOGISTIC,role:ve.ADMIN_LOGISTIC},{username:"supplier",password:"1",department:Pe.SUPPLIER,role:ve.SUPPLIER}];function Us({children:t}){const[l,r]=n.useState(null),s=tt(),a=(x,u)=>{const d=Bs.find(i=>i.username===x&&i.password===u);if(d){const{password:i,...c}=d;return r(c),s("/"),!0}else return!1},m=()=>{r(null),s("/login")};return e.jsx(Ot.Provider,{value:{user:l,login:a,logout:m},children:t})}function Ee(){return n.useContext(Ot)}const Hs=[["848400K010","SWITCH ASSY, BACK DOOR OPENER","TRI"],["848400K030","SWITCH ASSY, BACK DOOR OPENER","TRI"],["893400K010","COMPUTER ASSY, CLEARANCE WARNING","DSI"],["131110E010","RING, COMPRESSION, NO.1","PT.NTPRI"],["131110E020","RING, COMPRESSION, NO.1","PT.NTPRI"],["256300E010","VALVE ASSY, EGR, NO.2","AISAN NASMOCO INDUSTRI"],["261000E020","BODY ASSY, DIESEL THROTTLE","AISAN NASMOCO INDUSTRI"],["122810Y11000","HANGER, ENGINE, NO.1","SETIA GUNA SEJATI"],["130500Y02000","GEAR ASSY, CAMSHAFT TIMING","DENSO INDONESIA CORPORATION (FAJAR)"],["25051BZ15000","CONVERTER SUB-ASSY, EXHAUST MANIFOLD","FUTABA INDONESIA"],["25051BZ26000","CONVERTER SUB-ASSY, EXHAUST MANIFOLD","FUTABA INDONESIA"],["22030BZ15000","BODY ASSY, THROTTLE W/MOTOR","AISAN NASMOCO INDUSTRI"],["90210T000200","WASHER, SEAL","ARAI RUBBER SEAL INDONESIA"],["90430T002300","GASKET","ARAI RUBBER SEAL INDONESIA"],["111150Y03000","GASKET, CYLINDER HEAD","ASTRA NIPPON GASKET INDONESIA"],["11115BZ16000","GASKET, CYLINDER HEAD","ASTRA NIPPON GASKET INDONESIA"],["171730Y03000","GASKET, EXHAUST MANIFOLD","ASTRA NIPPON GASKET INDONESIA"],["17173BZ13000","GASKET, EXHAUST MANIFOLD","ASTRA NIPPON GASKET INDONESIA"],["115110Y04000","CAP, CRANKSHAFT BEARING, NO.1","AT INDONESIA"],["115130Y04000","CAP, CRANKSHAFT BEARING, NO.3","AT INDONESIA"],["16261BZ75000","HOSE, WATER BY-PASS, NO.1","CATURINDO AGUNGJAYA RUBBER"],["16261BZ76000","HOSE, WATER BY-PASS, NO.1","CATURINDO AGUNGJAYA RUBBER"],["16264BZ38000","HOSE, WATER BY-PASS, NO.2","CATURINDO AGUNGJAYA RUBBER"],["16264BZ39000","HOSE, WATER BY-PASS, NO.2","CATURINDO AGUNGJAYA RUBBER"],["16282BZ11000","HOSE, WATER BY-PASS, NO.5","CATURINDO AGUNGJAYA RUBBER"],["89467BZ02000","SENSOR, AIR FUEL RATIO","DENSO INDONESIA CORPORATION (SIP C)"],["111910Y01000","TUBE, SPARK PLUG","FUJIKINZOKU INDONESIA"],["90406T001100","TUBE, UNION","FUJIKINZOKU INDONESIA"],["90406T001300","TUBE, UNION","FUJIKINZOKU INDONESIA"],["23209BZ10000","INJECTOR SET, FUEL","HITACHI ASTEMO BEKASI POWERTRAIN SYS"],["90466T006100","CLIP, HOSE","INDOCIPTA HASTA PERKASA"],["90466T006200","CLIP, HOSE","INDOCIPTA HASTA PERKASA"],["32101BZ10000","GEAR SUB-ASSY DRIVE PLATE & RING","INTI GANDA PERDANA"],["157080Y04000","NOZZLE SUB-ASSY, OIL","ITOKIN"],["90360T001200","BALL","JTEKT INDONESIA"],["90105T027300","BOLT, FLANGE","MEIDOH INDONESIA"],["90119T044400","BOLT, W/WASHER","MEIDOH INDONESIA"],["9004A1020000","BOLT WASHER BASED HEAD HEXAGON","MEIDOH INDONESIA"]],Q=t=>l=>{const r=l&&l.target&&typeof l.target.value=="string"?l.target.value:l;t(String(r).toUpperCase())};function He({show:t=!1,onClose:l,onSelect:r,zIndex:s=4e3,mode:a="multi"}){function m(L,q,Z){const A=((L+1)*9301+49297)%233280/233280;return Math.floor(q+A*(Z-q+1))}const x=Hs.map((L,q)=>{const Z=m(q,50,1400),R=m(q+3,20,600),A=m(q+7,10,800),Y=Number((Z*R*A/1e6).toFixed(3)),le="P"+String(1e5+m(q,1,9999)),X="S"+String(200+q%999);return{partNo:L[0],partName:L[1],supplierName:L[2],parentPartNo:le,supplierId:X,L:Z,W:R,H:A,boxM3:Y}}),[u,d]=n.useState(""),[i,c]=n.useState(""),[h,o]=n.useState(""),[p,y]=n.useState({}),[b,M]=n.useState(!1),[j,f]=n.useState(a==="multi"?{}:null),[S,N]=n.useState(1),[P,I]=n.useState(10);if(n.useEffect(()=>(t?(d(""),c(""),o(""),y({}),M(!1),f(a==="multi"?{}:null),N(1),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[t]),!t)return null;function B(){if(!b)return[];const L=(p.partNo||"").trim().toLowerCase(),q=(p.partName||"").trim().toLowerCase(),Z=(p.supplierName||"").trim().toLowerCase();return x.filter(R=>!(L&&!R.partNo.toLowerCase().includes(L)||q&&!R.partName.toLowerCase().includes(q)||Z&&!R.supplierName.toLowerCase().includes(Z)))}const D=B(),C=D.length,v=Math.max(1,Math.ceil(C/P)),U=D.slice((S-1)*P,S*P),w=()=>{N(1),y({partNo:u,partName:i,supplierName:h}),M(!0)},O=()=>{d(""),c(""),o(""),y({}),M(!1),N(1)};function F(L){f(a==="multi"?q=>({...q,[L]:!q[L]}):L)}function W(L){if(a!=="multi")return;const q=(S-1)*P,Z={};U.forEach((R,A)=>{Z[q+A]=L}),f(R=>({...R,...Z}))}function te(){if(a==="multi"){const L=Object.keys(j).filter(q=>j[q]).map(q=>D[Number(q)]);r&&r(L),l&&l()}else if(j!==null){const L=D[j];r&&r(L),l&&l()}else l&&l()}function se(L){N(Math.min(Math.max(1,L),v))}const _={flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},K={position:"sticky",top:0,zIndex:5,background:"white",padding:"1rem 1rem 0.5rem 1rem",borderBottom:"1px solid #e9ecef"},k={overflow:"auto",padding:"0 1rem 1rem 1rem",flex:"1 1 auto"};return e.jsx("div",{className:"part-picker-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:s,display:"flex",alignItems:"center",justifyContent:"center"},onMouseDown:L=>{L.target===L.currentTarget&&l()},children:e.jsxs("div",{className:"part-picker-modal",style:{background:"#fff",borderRadius:8,boxShadow:"0 2px 16px rgba(0,0,0,0.2)",zIndex:s+1,width:"min(90vw, 1200px)",position:"relative",display:"flex",flexDirection:"column",height:"min(90vh, 900px)"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"Select Parts"})}),e.jsx("button",{type:"button",className:"close",onClick:l,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:_,children:[e.jsx("div",{style:K,children:e.jsxs("div",{className:"form-row align-items-end",children:[e.jsxs("div",{className:"form-group col-12 col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{value:u,onChange:Q(d),className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{value:i,onChange:Q(c),className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{value:h,onChange:Q(o),className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-3 d-flex",children:[e.jsx("button",{className:"btn btn-primary btn-sm mr-2",onClick:w,children:"Search"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:O,children:"Clear"})]})]})}),e.jsx("div",{style:k,children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-striped table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:36},children:a==="multi"&&e.jsx("input",{type:"checkbox",onChange:L=>W(L.target.checked)})}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Part Name"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Supplier ID"}),e.jsx("th",{children:"Parent Part No"}),e.jsx("th",{children:"L (mm)"}),e.jsx("th",{children:"W (mm)"}),e.jsx("th",{children:"H (mm)"}),e.jsx("th",{children:"Box M3"})]})}),e.jsx("tbody",{children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center text-muted py-4",children:b?"No Data Found":"Click Search to view parts"})}):U.map((L,q)=>{const Z=(S-1)*P+q;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:a==="multi"?e.jsx("input",{type:"checkbox",checked:!!j[Z],onChange:()=>F(Z)}):e.jsx("input",{type:"radio",name:"part-picker-radio",checked:j===Z,onChange:()=>F(Z)})}),e.jsx("td",{children:L.partNo}),e.jsx("td",{className:"text-left",children:L.partName}),e.jsx("td",{children:L.supplierName}),e.jsx("td",{children:L.supplierId}),e.jsx("td",{children:L.parentPartNo}),e.jsx("td",{children:L.L}),e.jsx("td",{children:L.W}),e.jsx("td",{children:L.H}),e.jsx("td",{children:L.boxM3})]},Z)})})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>se(1),children:"<<"}),e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>se(Math.max(1,S-1)),children:"<"}),[...Array(v).keys()].map(L=>e.jsx("button",{className:`btn btn-sm mr-1 ${S===L+1?"btn-primary":"btn-light"}`,onClick:()=>se(L+1),children:L+1},L)),e.jsx("button",{className:"btn btn-sm btn-light",onClick:()=>se(Math.min(v,S+1)),children:">"}),e.jsxs("span",{className:"ml-2 small text-muted",children:["Total: ",C]})]}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:te,children:"Add Selected"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:l,children:"Cancel"})]})]})]})})}const Ws=({filters:t,setters:l,onSearch:r,onClear:s,onPersonPicker:a,onDestinationPicker:m,destinations:x})=>{const[u,d]=n.useState(!1),i=c=>{l.setPartNo(c.partNo),l.setPartName(c.partName),l.setSupplierCode(c.supplierId),l.setSupplierName(c.supplierName)};return[...new Set(x.map(c=>c.destCode))],e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CPS/PSI/ECI No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.cpsNo,onChange:c=>l.setCpsNo(c.target.value),placeholder:"CPS/PSI/ECI No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CFC/Model"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.model,onChange:c=>l.setModel(c.target.value),placeholder:"Model"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.destCode,onChange:c=>l.setDestCode(c.target.value),placeholder:"Dest Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:m,children:e.jsx("i",{className:"fas fa-search"})})}),e.jsx("input",{type:"text",className:"form-control form-control-sm ml-2",value:t.destCountry,readOnly:!0,placeholder:"Country Code - Country"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Part No - Part Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.partNo,onChange:c=>l.setPartNo(c.target.value),placeholder:"Part No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>d(!0),children:e.jsx("i",{className:"fas fa-search"})})}),e.jsx("input",{type:"text",className:"form-control form-control-sm ml-2",value:t.partName,readOnly:!0,placeholder:"Part Name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"From"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.fromUser,onChange:c=>l.setFromUser(c.target.value),placeholder:"From"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Ref CPS No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.refCpsNo,onChange:c=>l.setRefCpsNo(c.target.value),placeholder:"Ref CPS No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.cfcPjt,onChange:c=>l.setCfcPjt(c.target.value),placeholder:"CFC/PJT"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CPS/PSI/ECI Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:t.cpsPsiEci,onChange:c=>l.setCpsPsiEci(c.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"CPS",children:"CPS"}),e.jsx("option",{value:"PSI",children:"PSI"}),e.jsx("option",{value:"ECI",children:"ECI"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code - Supplier Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm mr-2",value:t.supplierCode,readOnly:!0,placeholder:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.supplierName,readOnly:!0,placeholder:"Supplier Name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"To"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t.toUser,onChange:c=>l.setToUser(c.target.value),placeholder:"To"})]})]})]}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm mr-2",onClick:r,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:s,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx(He,{show:u,onClose:()=>d(!1),onSelect:i,mode:"single"})]})};function qe({currentPage:t,totalPages:l,totalItems:r,pageSize:s,onPageChange:a,className:m=""}){const x=()=>{if(l<=1)return null;const u=[],d=5;let i=Math.max(1,t-Math.floor(d/2)),c=Math.min(l,i+d-1);c-i+1<d&&(i=Math.max(1,c-d+1)),i>1&&(u.push(e.jsx("button",{className:`btn btn-sm ${t===1?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>a(1),children:"1"},1)),i>2&&u.push(e.jsx("span",{className:"mx-1",children:"..."},"start-ellipsis")));for(let h=i;h<=c;h++)u.push(e.jsx("button",{className:`btn btn-sm ${t===h?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>a(h),children:h},h));return c<l&&(c<l-1&&u.push(e.jsx("span",{className:"mx-1",children:"..."},"end-ellipsis")),u.push(e.jsx("button",{className:`btn btn-sm ${t===l?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>a(l),children:l},l))),u};return l<=1?null:e.jsxs("div",{className:`d-flex justify-content-between align-items-center mt-3 bg-light p-2 border rounded ${m}`,children:[e.jsxs("div",{className:"small text-muted",children:["Showing ",(t-1)*s+1," to ",Math.min(t*s,r)," of ",r," entries"]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary mr-2",disabled:t===1,onClick:()=>a(1),children:e.jsx("i",{className:"fas fa-angle-double-left"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary mr-2",disabled:t===1,onClick:()=>a(t-1),children:e.jsx("i",{className:"fas fa-angle-left"})}),x(),e.jsx("button",{className:"btn btn-sm btn-outline-secondary ml-2",disabled:t===l,onClick:()=>a(t+1),children:e.jsx("i",{className:"fas fa-angle-right"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary ml-2",disabled:t===l,onClick:()=>a(l),children:e.jsx("i",{className:"fas fa-angle-double-right"})})]})]})}function $s({filteredCps:t,page:l,perPage:r,setPage:s,setPerPage:a,onEdit:m,onClone:x}){const u=t.slice((l-1)*r,l*r),d=i=>i.includes("CPS")?"CPS":i.includes("PCI")?"PCI":i.includes("ECI")?"ECI":"";return e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{fontSize:"10pt"},children:"No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"CPS/PCI/ECI No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Type"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Ref CPS No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Part No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Project Code"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Model"}),e.jsx("th",{style:{fontSize:"10pt"},children:"From"}),e.jsx("th",{style:{fontSize:"10pt"},children:"To"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Status"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Submit Date"}),e.jsx("th",{style:{width:160},children:"Action"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"text-center py-4 text-muted",children:"No Data Found"})}):u.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontSize:"10pt"},children:(l-1)*r+c+1}),e.jsx("td",{style:{fontSize:"10pt"},children:i.cpsNo}),e.jsx("td",{style:{fontSize:"10pt"},children:d(i.cpsNo)}),e.jsx("td",{style:{fontSize:"10pt"},children:i.refCpsNo}),e.jsx("td",{style:{fontSize:"10pt"},children:i.partNo}),e.jsx("td",{style:{fontSize:"10pt"},children:i.cfcPjtCode}),e.jsx("td",{style:{fontSize:"10pt"},children:i.model}),e.jsx("td",{style:{fontSize:"10pt"},children:i.fromUser}),e.jsx("td",{style:{fontSize:"10pt"},children:i.toUser}),e.jsx("td",{style:{fontSize:"10pt"},children:i.status}),e.jsx("td",{style:{fontSize:"10pt"},children:i.issueDate}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>alert("View placeholder"),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info mr-1",onClick:()=>m(i),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>x(i),children:e.jsx("i",{className:"fas fa-clone"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>alert("Delete placeholder"),children:e.jsx("i",{className:"fas fa-trash"})})]})]},c))})]})}),e.jsx(qe,{currentPage:l,totalItems:t.length,itemsPerPage:r,onPageChange:s,onItemsPerPageChange:i=>{a(i),s(1)}})]})}function qs({current:t,partNoQuery:l,partNameQuery:r,supplierQuery:s,onPartNoChange:a,onPartNameChange:m,onSupplierChange:x,onGo:u}){return e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("h5",{className:"mb-0 mr-3",children:"Select part"})}),e.jsxs("div",{className:"row mt-2",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Part No",value:l,onChange:d=>a(d.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Part Name",value:r,onChange:d=>m(d.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Supplier Name",value:s,onChange:d=>x(d.target.value)})]}),e.jsx("div",{className:"col-md-3 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-sm btn-primary w-100",type:"button",onClick:u,children:"Go"})})]})]})}function Rt({count:t=1,isPseUser:l}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((r,s)=>e.jsxs(Ie.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty"}),!l&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Price"}),!l&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Sum"})]},`matLeafHdr-${s}`))})}function Ft({arr:t=[],count:l=1,isPseUser:r}){return e.jsx(e.Fragment,{children:Array.from({length:l}).map((s,a)=>{const m=t[a]||{};return e.jsxs(Ie.Fragment,{children:[e.jsx("td",{className:"align-middle",children:m.materialNo??"-"}),e.jsx("td",{className:"text-right",children:m.qty??"-"}),!r&&e.jsx("td",{className:"text-right",children:m.price??"-"}),!r&&e.jsx("td",{className:"text-right",children:m.sum??"-"})]},`matLeafData-${a}`)})})}function Ks({count:t=10,isPseUser:l}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((r,s)=>e.jsx("th",{colSpan:l?2:4,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:s===0?"Box":`Inner ${s}`},`innerGroupHdr-${s}`))})}function zs({count:t=10,isPseUser:l}){return e.jsx(Rt,{count:t,isPseUser:l})}function Bt({data:t=[],count:l=10,isPseUser:r}){return e.jsx(Ft,{arr:t,count:l,isPseUser:!0})}function Vs({count:t=1}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((l,r)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:2,children:r===0?"Module":`Outer ${r}`},`outerGrp-${r}`))})}function Gs({count:t=10,isPseUser:l}){return e.jsx(Rt,{count:t,isPseUser:l})}function Ut({data:t=[],count:l=10,isPseUser:r}){return e.jsx(Ft,{arr:t,count:l,isPseUser:r})}function Ys(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Inner"}),e.jsx("th",{className:"align-middle",children:"Outer"}),e.jsx("th",{className:"align-middle",children:"Material"}),e.jsx("th",{className:"align-middle",children:"Labor"}),e.jsx("th",{className:"align-middle",children:"Inland"})]})}function Ht({data:t={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:t.subTotalInner??"-"}),e.jsx("td",{className:"align-middle",children:t.subTotalOuter??"-"}),e.jsx("td",{className:"align-middle",children:t.subTotalMaterial??"-"}),e.jsx("td",{className:"align-middle",children:t.subTotalLabor??"-"}),e.jsx("td",{className:"align-middle",children:t.subTotalInland??"-"})]})}function Js(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Receiving"}),e.jsx("th",{className:"align-middle",children:"Inspection"}),e.jsx("th",{className:"align-middle",children:"Dlvr Course"}),e.jsx("th",{className:"align-middle",children:"Pallet Supply"}),e.jsx("th",{className:"align-middle",children:"Binding"}),e.jsx("th",{className:"align-middle",children:"Sort & Supply"}),e.jsx("th",{className:"align-middle",children:"Pick & Packing"}),e.jsx("th",{className:"align-middle",children:"Vanning"}),e.jsx("th",{className:"align-middle",children:"Box/Valet Rtrn"}),e.jsx("th",{className:"align-middle",children:"Mix Van"}),e.jsx("th",{className:"align-middle",children:"Lashing"}),e.jsx("th",{className:"align-middle",children:"Total Time Req"}),e.jsx("th",{className:"align-middle",children:"Others"})]})}function Qs(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Current"}),e.jsx("th",{className:"align-middle",children:"DL"}),e.jsx("th",{className:"align-middle",children:"IDL"}),e.jsx("th",{className:"align-middle",children:"Facility Others"})]})}function Wt({labor:t={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:t.receiving??"-"}),e.jsx("td",{className:"align-middle",children:t.inspection??"-"}),e.jsx("td",{className:"align-middle",children:t.deliveryCourse??"-"}),e.jsx("td",{className:"align-middle",children:t.palletSupply??"-"}),e.jsx("td",{className:"align-middle",children:t.binding??"-"}),e.jsx("td",{className:"align-middle",children:t.sorting??"-"}),e.jsx("td",{className:"align-middle",children:t.pickPacking??"-"}),e.jsx("td",{className:"align-middle",children:t.vanning??"-"}),e.jsx("td",{className:"align-middle",children:t.boxValetReturn??"-"}),e.jsx("td",{className:"align-middle",children:t.mixVan??"-"}),e.jsx("td",{className:"align-middle",children:t.lashing??"-"}),e.jsx("td",{className:"align-middle",children:t.totalTimeReq??"-"}),e.jsx("td",{className:"align-middle",children:t.others??"-"})]})}function $t({labor:t={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:t.laborCostCurrent??"-"}),e.jsx("td",{className:"align-middle",children:t.laborCostDL??"-"}),e.jsx("td",{className:"align-middle",children:t.laborCostIDL??"-"}),e.jsx("td",{className:"align-middle",children:t.laborCostFacility??"-"})]})}function Zs(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Pack Time (V-PASS)"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Inland Cost (m³)"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Diff"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Milkrun Cost"})]})}function qt({inland:t={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:t.packTimeVPass??"-"}),e.jsx("td",{className:"align-middle",children:t.costM3??"-"}),e.jsx("td",{className:"align-middle",children:t.diff??"-"}),e.jsx("td",{className:"align-middle",children:t.milkrunCost??"-"})]})}function Kt(t=0,l=0,r=!1){const s=[],a=(u,d)=>s.push({key:u,w:d});a("action",50),a("recNo",80),a("cpsNo",140),a("partNo",160),a("partName",260),a("parentNo",140),a("supplierCode",140),a("supplierName",200),a("weightPerPc",100),a("qtyPerBox",100),r||(a("subInner",120),a("subOuter",120),a("subMaterial",120),a("subLabor",120),a("subInland",120),a("diffPct",100));for(let u=0;u<t;u++)a(`in_matNo_${u}`,100),a(`in_qty_${u}`,50),r||(a(`in_price_${u}`,70),a(`in_sum_${u}`,100));for(let u=0;u<l;u++)a(`out_matNo_${u}`,100),a(`out_qty_${u}`,50),r||(a(`out_price_${u}`,70),a(`out_sum_${u}`,100));r||(a("lab_mh_receiving",90),a("lab_mh_inspection",90),a("lab_mh_deliveryCourse",120),a("lab_mh_palletSupply",110),a("lab_mh_binding",90),a("lab_mh_sorting",120),a("lab_mh_pickPacking",120),a("lab_mh_vanning",90),a("lab_mh_boxValetReturn",120),a("lab_mh_mixVan",90),a("lab_mh_lashing",90),a("lab_mh_totalTimeReq",110),a("lab_mh_others",90),a("lab_cost_direct",90),a("lab_cost_indirect",90),a("lab_cost_subTotal",100),a("lab_cost_costPerPc",110),a("inland_trucking",150),a("inland_clp",120),a("inland_delivery",70),a("inland_total",100));const m=s.reduce((u,d)=>u+d.w,0);return{colGroup:e.jsx("colgroup",{children:s.map((u,d)=>e.jsx("col",{style:{width:`${u.w}px`,minWidth:`${u.w}px`}},`${u.key}-${d}`))}),totalWidth:m,cols:s}}function Xs(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Name"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Parent No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Code"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Name"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Weight/pc"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty/Box"})]})}function zt({part:t}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:t.partNo??"-"}),e.jsx("td",{className:"align-middle",children:t.partName??t.name??"-"}),e.jsx("td",{className:"align-middle",children:t.parentNo??"-"}),e.jsx("td",{className:"align-middle",children:t.supplierCode??"-"}),e.jsx("td",{className:"align-middle",children:t.supplierName??"-"}),e.jsx("td",{className:"align-middle",children:t.weightPerPc??"-"}),e.jsx("td",{className:"align-middle",children:t.qtyPerBox??"-"})]})}function en({current:t={},scrollRef:l,onScroll:r,isPseUser:s,innerCount:a,outerCount:m}){const x=t.inner||[],u=t.outer||[],d=t.labor||{},i=t.inland||{},{colGroup:c,totalWidth:h}=Kt(a,m,s);return e.jsx("div",{className:"mb-3",children:e.jsx("div",{ref:l,onScroll:r,className:"table-responsive mt-2",style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center table-font-size-10pt",style:{minWidth:`${h}px`,tableLayout:"fixed"},children:[c,e.jsxs("thead",{children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap"}),e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"No"}),e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"CPS No"}),e.jsx("th",{rowSpan:2,colSpan:7,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Part Info"}),!s&&e.jsx("th",{rowSpan:2,colSpan:5,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Sub Total Costs"}),!s&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Diff (%)"}),e.jsx("th",{colSpan:a*(s?2:4),className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inner Info"}),e.jsx("th",{colSpan:m*(s?2:4),className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Outer Info"}),!s&&e.jsx("th",{colSpan:17,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Labor"}),!s&&e.jsx("th",{colSpan:4,rowSpan:2,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inland"})]}),e.jsxs("tr",{children:[e.jsx(Ks,{count:a,isPseUser:s}),e.jsx(Vs,{count:m,isPseUser:s}),!s&&e.jsx("th",{colSpan:13,className:"align-align-middle border text-center tbl-row1-hdr text-nowrap",children:"Man Hour Requirement"}),!s&&e.jsx("th",{colSpan:4,className:"align-align-middle border text-center tbl-row1-hdr text-nowrap",children:"Labor Cost"})]}),e.jsxs("tr",{children:[e.jsx(Xs,{}),!s&&e.jsx(Ys,{}),e.jsx(zs,{count:a,isPseUser:s}),e.jsx(Gs,{count:m,isPseUser:s}),!s&&e.jsx(Js,{}),!s&&e.jsx(Qs,{}),!s&&e.jsx(Zs,{})]})]}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"align-middle",children:t.recNo??"-"}),e.jsx("td",{className:"align-middle",children:t.cpsNo??"-"}),e.jsx(zt,{part:t}),!s&&e.jsx(Ht,{data:t}),!s&&e.jsx("td",{className:"align-middle",children:t.diffPct??"-"}),e.jsx(Bt,{data:x,count:a,isPseUser:s}),e.jsx(Ut,{data:u,count:m,isPseUser:s}),!s&&e.jsx(Wt,{labor:d}),!s&&e.jsx($t,{labor:d}),!s&&e.jsx(qt,{inland:i})]})})]})})})}function tn({filteredParts:t=[],onSelectPart:l,scrollRef:r,onScroll:s,isPseUser:a,innerCount:m,outerCount:x}){const{colGroup:u,totalWidth:d,cols:i}=Kt(m,x,a);return e.jsx("div",{className:"mb-1",children:e.jsx("div",{ref:r,onScroll:s,className:"table-responsive",style:{maxHeight:400,overflowY:"auto",overflowX:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center table-font-size-10pt",style:{minWidth:`${d}px`,tableLayout:"fixed"},children:[u,e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:i.length,className:"text-center text-muted py-3",children:"No results"})}):t.map((c,h)=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:e.jsx("input",{type:"checkbox",onChange:()=>l(c)})}),e.jsx("td",{className:"align-middle",children:c.recNo??"-"}),e.jsx("td",{className:"align-middle",children:c.cpsNo??"-"}),e.jsx(zt,{part:c}),!a&&e.jsx(Ht,{data:c}),!a&&e.jsx("td",{className:"align-middle",children:c.diffPct??"-"}),e.jsx(Bt,{data:c.inner,count:m,isPseUser:a}),e.jsx(Ut,{data:c.outer,count:x,isPseUser:a}),!a&&e.jsx(Wt,{labor:c.labor}),!a&&e.jsx($t,{labor:c.labor}),!a&&e.jsx(qt,{inland:c.inland})]},h))})]})})})}function sn({isOpen:t=!1,onClose:l=()=>{},parts:r=[],current:s={},onSelectPart:a=()=>{}}){const[m,x]=n.useState(""),[u,d]=n.useState(""),[i,c]=n.useState(""),{user:h}=Ee(),o=h&&h.department==="PSE"&&!["pic","sh","dph"].includes(h.role),p=n.useRef(null),y=n.useRef(null),b=n.useRef(!1),M=(N,P)=>{b.current||(b.current=!0,P.current&&N.current&&(P.current.scrollLeft=N.current.scrollLeft),b.current=!1)},j=n.useMemo(()=>r.filter(N=>{const P=m.trim().toLowerCase(),I=u.trim().toLowerCase(),B=i.trim().toLowerCase(),D=P===""||N.partNo&&N.partNo.toLowerCase().includes(P),C=I===""||N.name&&N.name.toLowerCase().includes(I),v=B===""||N.supplier&&N.supplier.toLowerCase().includes(B);return D&&C&&v}),[r,m,u,i]),f=n.useMemo(()=>{const N=[s,...j];return Math.max(...N.map(P=>{var I;return((I=P.inner)==null?void 0:I.length)||0}))},[s,j]),S=n.useMemo(()=>{const N=[s,...j];return Math.max(...N.map(P=>{var I;return((I=P.outer)==null?void 0:I.length)||0}))},[s,j]);return t?e.jsx("div",{className:"np-modal-backdrop multi-parts-modal",style:{zIndex:3e3},onMouseDown:N=>{N.target===N.currentTarget&&l()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1200,width:"100%",display:"flex",flexDirection:"column",height:"700px",maxHeight:"700px",minHeight:"700px"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"CPS Comparison"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:l,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsx("div",{className:"card-body",style:{verticalAlign:"top",paddingBottom:0,maxHeight:"fit-content"},children:e.jsx(qs,{current:s,partNoQuery:m,partNameQuery:u,supplierQuery:i,onPartNoChange:x,onPartNameChange:d,onSupplierChange:c,onGo:()=>{}})}),e.jsx("hr",{className:"my-0"}),e.jsxs("div",{className:"card-body",style:{flex:1,display:"flex",flexDirection:"column",paddingTop:"8px",paddingBottom:"8px"},children:[e.jsx(en,{current:s,scrollRef:p,onScroll:()=>M(p,y),isPseUser:o,innerCount:f,outerCount:S}),e.jsx("hr",{style:{margin:"8px 0"}}),e.jsx(tn,{filteredParts:j,onSelectPart:a,scrollRef:y,onScroll:()=>M(y,p),isPseUser:o,innerCount:f,outerCount:S})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:()=>{},children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:l,children:"Close"})]}),e.jsx("style",{children:`
          .multi-parts-modal .np-modal { max-width: 1200px; height: 700px; min-height: 700px; max-height: 700px; }
          .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: flex; align-items: center; justify-content: center; padding: 1rem; }
          .np-modal { width: 100%; height: 700px; min-height: 700px; max-height: 700px; }
          .table-sm td, .table-sm th { vertical-align: middle; white-space: nowrap; }
          .card-body { vertical-align: top; }
        `})]})}):null}function Ke({show:t,onClose:l,onAdd:r,selectionMode:s="multi"}){const[a,m]=n.useState([]),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(""),[o,p]=n.useState(""),[y,b]=n.useState(""),[M,j]=n.useState(""),[f,S]=n.useState(""),[N,P]=n.useState(s==="multi"?[]:null),[I,B]=n.useState([]),[D,C]=n.useState(1),v=15;n.useEffect(()=>{fetch("/packing-cost-fe/models.json").then(L=>L.json()).then(L=>{m(L),B(L)})},[]),n.useEffect(()=>{t&&(u(""),i(""),h(""),p(""),b(""),j(""),S(""),P(s==="multi"?[]:null),B(a),C(1))},[t,s]);const U=k=>{P(s==="multi"?L=>L.includes(k)?L.filter(q=>q!==k):[...L,k]:k)},w=()=>{const k=a.filter(L=>L.model_code.toLowerCase().includes(x.toLowerCase())&&L.model_name.toLowerCase().includes(d.toLowerCase())&&(L.model_cfc||"").toLowerCase().includes(c.toLowerCase())&&(L.destination_code||"").toLowerCase().includes(o.toLowerCase())&&(L.model_implementation_period||"").toLowerCase().includes(y.toLowerCase())&&(L.model_type||"").toLowerCase().includes(M.toLowerCase())&&L.model_remark.toLowerCase().includes(f.toLowerCase()));B(k),C(1)},O=()=>{u(""),i(""),h(""),p(""),b(""),j(""),S(""),B(a),C(1)},F=()=>{if(typeof r=="function")if(s==="multi")r(N.map(k=>a.find(L=>L.model_code===k)));else{const k=a.find(L=>L.model_code===N);r(k)}P(s==="multi"?[]:null),typeof l=="function"&&l()},W=D*v,te=W-v,se=I.slice(te,W),_=Math.ceil(I.length/v);if(!t)return null;const K=e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",inset:0,zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"modal-dialog modal-lg",role:"document",style:{zIndex:2100},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Model"}),e.jsx("button",{type:"button",className:"close",onClick:l,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row align-items-end mb-3",children:[e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Model Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:x,onChange:k=>u(k.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:k=>i(k.target.value)})]}),e.jsxs("div",{className:"form-group col-md-1",children:[e.jsx("label",{className:"small",children:"CFC"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:k=>h(k.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Dest Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:k=>p(k.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Impl. Period"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,onChange:k=>b(k.target.value)})]}),e.jsxs("div",{className:"form-group col-md-1",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:M,onChange:k=>j(k.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2 text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-1",onClick:w,type:"button",children:"Search"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:O,type:"button",children:"Clear"})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Model Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"CFC"}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Impl. Period"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Remark"}),e.jsx("th",{children:"Katashiiki"})]})}),e.jsx("tbody",{children:se.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No models found"})}):se.map(k=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:s==="multi"?"checkbox":"radio",name:"model-selection",checked:s==="multi"?N.includes(k.model_code):N===k.model_code,onChange:()=>U(k.model_code)})}),e.jsx("td",{children:k.model_code}),e.jsx("td",{children:k.model_name}),e.jsx("td",{children:k.model_cfc}),e.jsx("td",{children:k.model_destination_code}),e.jsx("td",{children:k.model_implementation_period}),e.jsx("td",{children:k.model_type}),e.jsx("td",{children:k.model_remark}),e.jsx("td",{children:Array.isArray(k.katashiki)&&k.katashiki.length>0?k.katashiki.map((L,q)=>e.jsxs("span",{className:"badge badge-primary mr-1",children:[L.string," : ",L.number]},q)):"-"})]},k.model_code))})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>C(k=>Math.max(1,k-1)),disabled:D===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",D," of ",_]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>C(k=>Math.min(_,k+1)),disabled:D===_,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:F,type:"button",disabled:s==="multi"?N.length===0:!N,children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:l,type:"button",children:"Cancel"})]})]})]})})});return bt.createPortal(K,typeof document<"u"?document.body:null)}function nn({show:t=!1,onClose:l=()=>{},onAdd:r=()=>{},selectionMode:s="single",zIndex:a=1050,filter:m="all"}){const[x,u]=n.useState([]),[d,i]=n.useState(""),[c,h]=n.useState(1),[o,p]=n.useState(""),[y,b]=n.useState(""),[M,j]=n.useState(""),[f,S]=n.useState(s==="multi"?[]:null),[N,P]=n.useState([]),I=15;n.useEffect(()=>{fetch("/packing-cost-fe/materials.json").then(K=>K.json()).then(K=>u(K)).catch(K=>console.error("Error fetching materials:",K))},[]),n.useEffect(()=>{t&&(P([]),i(""),h(1))},[t]);function B(_){S(s==="multi"?K=>K.includes(_)?K.filter(k=>k!==_):[...K,_]:_)}const D=()=>{let _=x;if(m){const K=m.toLowerCase();K==="module"?_=_.filter(k=>k.materialType.toLowerCase()==="outer"||k.materialType.toLowerCase()==="module"):K==="outer"?_=_.filter(k=>k.materialType.toLowerCase()==="outer"||k.materialType.toLowerCase()==="module"):K==="inner"?_=_.filter(k=>k.materialType.toLowerCase()==="inner"||k.materialType.toLowerCase()==="box"):K==="box"&&(_=_.filter(k=>k.materialType.toLowerCase()==="inner"||k.materialType.toLowerCase()==="box"))}_=_.filter(K=>(K.materialNo||"").toLowerCase().includes(o.toLowerCase())&&(K.materialName||"").toLowerCase().includes(y.toLowerCase())&&(K.materialType||"").toLowerCase().includes(M.toLowerCase())),P(_),h(1)},C=()=>{p(""),b(""),j("");let _=x;if(m){const K=m.toLowerCase();K==="module"?_=_.filter(k=>k.materialType.toLowerCase()==="module"):K==="outer"?_=_.filter(k=>k.materialType.toLowerCase()==="outer"):K==="inner"?_=_.filter(k=>k.materialType.toLowerCase()==="inner"||k.materialType.toLowerCase()==="box"):K==="box"&&(_=_.filter(k=>k.materialType.toLowerCase()==="box"))}P(_),h(1)},v=()=>{var _;if(typeof r=="function")if(s==="multi"){const K=f.map(k=>{var q;const L=x.find(Z=>Z.materialNo===k);return{...L,supplierName:((q=L.supplier)==null?void 0:q.supplier_name)||L.supplierName}});r(K)}else{const K=x.find(L=>L.materialNo===f);console.log("Selected material:",K);const k={...K,supplierName:((_=K.supplier)==null?void 0:_.supplier_name)||K.supplierName};r(k)}S(s==="multi"?[]:null),typeof l=="function"&&l()},U=c*I,w=U-I,O=N.slice(w,U),F=Math.ceil(N.length/I),W=_=>typeof _!="number"?_:_.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),te=_=>typeof _!="number"?_:_.toLocaleString("en-US");if(!t)return null;const se=e.jsx("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)",zIndex:a},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Material"}),e.jsx("button",{type:"button",className:"close",onClick:l,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row align-items-end mb-3",children:[e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small",children:"Material No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:Q(p)})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small",children:"Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,onChange:Q(b)})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:M,onChange:Q(j)})]}),e.jsxs("div",{className:"form-group col-md-2 text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-1",onClick:D,type:"button",children:"Search"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:C,type:"button",children:"Clear"})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Material No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{textAlign:"right"},children:"L"}),e.jsx("th",{style:{textAlign:"right"},children:"W"}),e.jsx("th",{style:{textAlign:"right"},children:"H"}),e.jsx("th",{style:{textAlign:"right"},children:"Inner"}),e.jsx("th",{style:{textAlign:"right"},children:"Outer"})]})}),e.jsx("tbody",{children:O.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No materials found"})}):O.map(_=>{var K;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:s==="multi"?"checkbox":"radio",name:"material-selection",checked:s==="multi"?f.includes(_.materialNo):f===_.materialNo,onChange:()=>B(_.materialNo)})}),e.jsx("td",{children:_.materialNo}),e.jsx("td",{children:_.materialName}),e.jsx("td",{children:_.materialType}),e.jsx("td",{children:((K=_.supplier)==null?void 0:K.supplier_name)||_.supplierName||""}),e.jsx("td",{style:{textAlign:"right"},children:te(_.dimension_length)}),e.jsx("td",{style:{textAlign:"right"},children:te(_.dimension_width)}),e.jsx("td",{style:{textAlign:"right"},children:te(_.dimension_height)}),e.jsx("td",{style:{textAlign:"right"},children:W(_.dimension_inner_length*_.dimension_inner_width*_.dimension_inner_height/1e6)}),e.jsx("td",{style:{textAlign:"right"},children:W(_.dimension_outer_length*_.dimension_outer_width*_.dimension_outer_height/1e6)})]},_.materialNo)})})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>h(_=>Math.max(1,_-1)),disabled:c===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",c," of ",F]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>h(_=>Math.min(F,_+1)),disabled:c===F,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary",onClick:v,type:"button",children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:l,type:"button",children:"Cancel"})]})]})]})})});return bt.createPortal(se,typeof document<"u"?document.body:null)}function ln(t){const{config:l,cpsNo:r,setCpsNo:s,refCpsNo:a,setRefCpsNo:m,cfcPjtCode:x,setCfcPjtCode:u,model:d,setModel:i,partNo:c,setPartNo:h,partName:o,setPartName:p,supplier:y,setSupplier:b,plantCode:M,setPlantCode:j,dockCode:f,setDockCode:S,openPartPicker:N,openModelPicker:P,setComparisonOpen:I}=t;return e.jsxs("div",{children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"CPS/PSI/ECI No."})}),e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:B=>s(B.target.value),disabled:!l.editable,readOnly:!0,placeholder:"CPSxxxx..."})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"CFC/Model"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:B=>i(B.target.value),disabled:!l.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:P,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Part No"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:B=>h(B.target.value),disabled:!l.editable}),e.jsxs("div",{className:"input-group-append",children:[e.jsx("button",{id:"partPickerBtn",type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part",onClick:N,children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Compare",style:{marginLeft:6},onClick:()=>I(!0),children:"Compare"})]})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Ref CPS No."})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:a,onChange:B=>m(B.target.value),disabled:!l.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Ref CPS",onClick:()=>alert("Search Ref CPS placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Project Code"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:x,onChange:B=>u(B.target.value),disabled:!l.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>alert("Search CFC/PJT placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Part Name"})}),e.jsx("input",{className:"form-control form-control-sm",value:o,readOnly:!0})]})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Supplier"})}),e.jsx("input",{className:"form-control form-control-sm",value:y,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Plant Code"}),e.jsx("input",{className:"form-control form-control-sm",value:M,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Dock Code"}),e.jsx("input",{className:"form-control form-control-sm",value:f,readOnly:!0})]})]})]})}function an(t){const{config:l,pseOpen:r,setPseOpen:s,packingPlantCurr:a,setPackingPlantCurr:m,packingPlantNext:x,setPackingPlantNext:u,vanningPlantCurr:d,setVanningPlantCurr:i,vanningPlantNext:c,setVanningPlantNext:h,orderPatternCurr:o,setOrderPatternCurr:p,orderPatternNext:y,setOrderPatternNext:b,category:M,setCategory:j,katashiki:f,setKatashiki:S,importerLineProcess:N,setImporterLineProcess:P,caseCode:I,setCaseCode:B,boxNumber:D,setBoxNumber:C,renban:v,setRenban:U,renbanEff:w,setRenbanEff:O,packingProcessBoxing:F,setPackingProcessBoxing:W,packingProcessStacking:te,setPackingProcessStacking:se,pseOuterRows:_,setPseOuterRows:K,newPseOuter:k,setNewPseOuter:L,openMaterialPicker:q}=t,[Z,R]=n.useState(!1),[A,Y]=n.useState(null),le=()=>{if(!k.materialNo.trim()){alert("Enter Pack Material No");return}K(T=>[...T,{...k}]),L({materialNo:"",suffix:"",name:"",supplier:"",L:"",W:"",H:"",wtPerPc:"",qty:"",totalWt:""}),R(!1)},X=T=>{K(J=>J.filter((H,ee)=>ee!==T))},ne=(T,J,H)=>{const ee=_.map((g,E)=>{if(E===T){const G={...g,[J]:H};return(J==="qty"||J==="wtPerPc")&&(G.totalWt=(parseFloat(G.qty)||0)*(parseFloat(G.wtPerPc)||0)),G}return g});K(ee)},oe=(T,J)=>{const H=A===J;return e.jsxs("tr",{children:[e.jsx("td",{children:H?e.jsxs("div",{className:"input-group",children:[e.jsx("input",{value:T.materialNo,onChange:ee=>ne(J,"materialNo",ee.target.value),className:"form-control form-control-sm"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",onClick:()=>q(J===0?"Module":"outer",J),children:e.jsx("i",{className:"fas fa-search"})})})]}):T.materialNo}),e.jsx("td",{children:H?e.jsx("input",{readOnly:!0,value:T.suffix,onChange:ee=>ne(J,"suffix",ee.target.value),className:"form-control form-control-sm"}):T.suffix}),e.jsx("td",{children:T.name}),e.jsx("td",{children:T.supplier}),e.jsx("td",{children:H?e.jsx("input",{readOnly:!0,value:T.L,onChange:ee=>ne(J,"L",ee.target.value),className:"form-control form-control-sm"}):T.L}),e.jsx("td",{children:H?e.jsx("input",{readOnly:!0,value:T.W,onChange:ee=>ne(J,"W",ee.target.value),className:"form-control form-control-sm"}):T.W}),e.jsx("td",{children:H?e.jsx("input",{readOnly:!0,value:T.H,onChange:ee=>ne(J,"H",ee.target.value),className:"form-control form-control-sm"}):T.H}),e.jsx("td",{children:H?e.jsx("input",{value:T.wtPerPc,onChange:ee=>ne(J,"wtPerPc",ee.target.value),className:"form-control form-control-sm"}):T.wtPerPc}),e.jsx("td",{children:H?e.jsx("input",{value:T.qty,onChange:ee=>ne(J,"qty",ee.target.value),className:"form-control form-control-sm"}):T.qty}),e.jsx("td",{children:T.totalWt}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-link",children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-link",children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:H?e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>Y(null),disabled:!l.editable,children:"Save"}):e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:ee=>{ee.stopPropagation(),X(J)},disabled:!l.editable,children:e.jsx("i",{className:"fas fa-trash"})})})]},J)};return e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>s(T=>!T),children:[e.jsx("i",{className:`fas ${r?"fa-chevron-down":"fa-chevron-right"} mr-2`}),e.jsx("strong",{children:"PSE Information"})]}),r&&e.jsx("div",{className:"card card-body mt-2",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Plant (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:a,onChange:T=>m(T.target.value),disabled:!l.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Packing Plant (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:x,onChange:T=>u(T.target.value),disabled:!l.editable})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Vanning Plant (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:T=>i(T.target.value),disabled:!l.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Vanning Plant (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:T=>h(T.target.value),disabled:!l.editable})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Order Pattern (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:o,onChange:T=>p(T.target.value),disabled:!l.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Order Pattern (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:y,onChange:T=>b(T.target.value),disabled:!l.editable})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsx("label",{className:"small mb-1",children:"Category"}),e.jsxs("select",{className:"form-control form-control-sm",value:M,onChange:T=>j(T.target.value),disabled:!l.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"Trim",children:"Trim"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"kat-wrap mb-3",children:[e.jsx("div",{className:"kat-title",children:"Katashiiki"}),e.jsx("div",{className:"kat-flex",children:e.jsx("div",{className:"kat-list",children:f.length===0?e.jsx("div",{className:"kat-empty text-muted",children:e.jsx("span",{children:"No data katashiiki."})}):f.map((T,J)=>e.jsx("div",{className:"kat-item",children:e.jsxs("div",{className:"kat-box",children:[e.jsxs("div",{className:"kat-label",children:[T.string,":"]}),e.jsx("input",{type:"number",className:"kat-input kat-input-num",placeholder:"0",value:T.number,onChange:H=>{const ee=Number(H.target.value);S(g=>{const E=[...g];return E[J]={...E[J],number:ee},E})},disabled:!0})]})},J))})})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Importer Line Process"}),e.jsx("input",{className:"form-control form-control-sm",value:N,onChange:T=>P(T.target.value),disabled:!l.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Case Code"}),e.jsx("input",{className:"form-control form-control-sm",value:I,onChange:T=>B(T.target.value),disabled:!l.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Box Number"}),e.jsx("input",{className:"form-control form-control-sm",value:D,onChange:T=>C(T.target.value),disabled:!l.editable})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Renban"}),e.jsx("input",{className:"form-control form-control-sm",value:v,onChange:T=>U(T.target.value),disabled:!l.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Renban Eff"}),e.jsx("input",{className:"form-control form-control-sm",value:w,onChange:T=>O(T.target.value),disabled:!l.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Process - Boxing"}),e.jsxs("select",{className:"form-control form-control-sm",value:F,onChange:T=>W(T.target.value),disabled:!l.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"SUPPLIER",children:"SUPPLIER"})]})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Process - Stacking"}),e.jsxs("select",{className:"form-control form-control-sm",value:te,onChange:T=>se(T.target.value),disabled:!l.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"TMMIN",children:"TMMIN"})]})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"small mb-1",children:"OUTER (Pack Material)"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{Y(null),R(!0)},disabled:Z||!l.editable,children:"Add"})})]}),e.jsx("div",{className:"table-responsive mt-2",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 small",children:[e.jsx("thead",{style:{backgroundColor:"#cfcfcfff"},children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{style:{width:30},children:"No"}),e.jsx("th",{style:{width:120},children:"Pack Material No"}),e.jsx("th",{style:{width:40},children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{width:60},children:"L"}),e.jsx("th",{style:{width:60},children:"W"}),e.jsx("th",{style:{width:60},children:"H"}),e.jsx("th",{style:{width:60},children:"Wt/pc"}),e.jsx("th",{style:{width:60},children:"Qty"}),e.jsx("th",{style:{width:80},children:"Total Wt"}),e.jsx("th",{style:{width:10},children:"msds"}),e.jsx("th",{style:{width:10},children:"draw"}),e.jsx("th",{style:{width:80},children:"Action"})]})}),e.jsxs("tbody",{children:[_.length===0&&!Z?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-3",children:"No Data Found"})}):_.map(oe),Z&&e.jsxs("tr",{children:[e.jsx("td",{children:"+"}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:k.materialNo,onChange:T=>L(J=>({...J,materialNo:T.target.value}))}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>q("Outer","new"),disabled:!l.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:k.suffix,onChange:T=>L(J=>({...J,suffix:T.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:k.name})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:k.supplier})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:k.L,onChange:T=>L(J=>({...J,L:T.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:k.W,onChange:T=>L(J=>({...J,W:T.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:k.H,onChange:T=>L(J=>({...J,H:T.target.value}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:k.wtPerPc,onChange:T=>L(J=>({...J,wtPerPc:T.target.value,totalWt:(parseFloat(T.target.value)||0)*(parseFloat(J.qty)||0)}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:k.qty,onChange:T=>L(J=>({...J,qty:T.target.value,totalWt:(parseFloat(T.target.value)||0)*(parseFloat(J.wtPerPc)||0)}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:k.totalWt})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:le,disabled:!l.editable,children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>R(!1),disabled:!l.editable,children:"Cancel"})]})})]})]})]})})]})]})})]})})}const rn=Ie.memo(({file:t,index:l,onRemove:r})=>{const[s,a]=n.useState(null);n.useEffect(()=>{if(!t)return;const x=URL.createObjectURL(t);return a(x),()=>URL.revokeObjectURL(x)},[t]);const m=n.useCallback(()=>{r(l)},[l,r]);return s?e.jsxs("div",{style:{position:"relative",display:"inline-block",marginRight:"10px",marginBottom:"10px"},children:[e.jsx("img",{src:s,alt:t.name,className:"border",style:{width:"100px",height:"100px",objectFit:"cover"}}),e.jsx("button",{onClick:m,className:"btn btn-danger btn-sm",style:{position:"absolute",top:"0",right:"0",borderRadius:"50%",width:"24px",height:"24px",lineHeight:"1",padding:"0"},children:"×"})]}):null}),on=({config:t,imagesPart:l,setImagesPart:r,imagesPacking:s,setImagesPacking:a,imagesOuter:m,setImagesOuter:x,imagesQkp:u,setImagesQkp:d,imagesBkp:i,setImagesBkp:c,imagesOpen:h,setImagesOpen:o})=>{const p=j=>f=>{const S=f.target.value;j(N=>({...N,caption:S}))},y=j=>f=>{const S=Array.from(f.target.files);S.length>0&&j(N=>({...N,files:[...N.files,...S]}))},b=j=>f=>{j(S=>{const N=[...S.files];return N.splice(f,1),{...S,files:N}})},M=[{id:"part",title:"Part Images",state:l,setter:r},{id:"packing",title:"Packing Images",state:s,setter:a},{id:"outer",title:"Outer Images",state:m,setter:x},{id:"qkp",title:"QKP Images",state:u,setter:d},{id:"bkp",title:"BKP Images",state:i,setter:c}];return e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>o(j=>!j),"aria-expanded":h,"aria-controls":"imagesSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${h?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Images"]})}),h&&e.jsx("div",{id:"imagesSection",children:e.jsx("div",{className:"row mt-2",children:M.map(({id:j,title:f,state:S,setter:N})=>e.jsxs("div",{className:"col-md-6 mt-2",children:[e.jsx("label",{className:"small",children:f}),e.jsxs("div",{className:"border p-2 mb-2",children:[e.jsx("textarea",{value:S.caption,onChange:p(N),placeholder:"Enter a caption...",rows:"2",className:"form-control mb-2",disabled:!t.editable}),e.jsx("div",{className:"d-flex flex-wrap",children:S.files.length===0?e.jsx("div",{className:"text-muted small",children:"No images"}):S.files.map((P,I)=>e.jsx(rn,{file:P,index:I,onRemove:b(N)},`${P.name}-${P.lastModified}-${I}`))}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:`${j}-image-input`,className:"btn btn-sm btn-outline-primary",children:"+ Add"}),e.jsx("input",{type:"file",id:`${j}-image-input`,accept:".jpg,.jpeg,.png",multiple:!0,style:{display:"none"},onChange:y(N),disabled:!t.editable})]})]})]},j))})})]})};function cn(t){const{config:l,innerRows:r,setInnerRows:s,newInner:a,setNewInner:m,handleRemoveInnerRow:x,openMaterialPicker:u,materials:d}=t,[i,c]=n.useState(!1),[h,o]=n.useState(null),p=n.useRef(null);n.useEffect(()=>{h!==null&&p.current&&p.current.focus()},[h]);const y=()=>{if(!a.materialNo.trim()){alert("Enter Pack Material No");return}s(j=>[...j,{...a}]),m({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})},b=(j,f,S)=>{const N=r.map((P,I)=>I===j?{...P,[f]:S}:P);s(N)},M=(j,f)=>{const S=d.find(N=>N.materialNo===j);if(console.log("Blurred ->>"),S){console.log("Material FOund -->",JSON.stringify(S));const N={name:S.materialName,supplierName:S.supplier.supplier_name,L:S.dimension_inner_length,W:S.dimension_inner_width,H:S.dimension_inner_height};if(f==="new")console.log("New Inner -->",a),m(P=>({...P,...N}));else{const P=r.map((I,B)=>B===f?{...I,...N}:I);s(P)}}};return e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"small mb-1",children:"INNER (Pack Material)"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{o(null),c(!0)},disabled:i||!l.editable,children:"Add"})})]}),e.jsx("div",{className:"table-responsive mt-2",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 small",children:[e.jsx("thead",{style:{backgroundColor:"#cfcfcfff"},children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{style:{width:30},children:"No"}),e.jsx("th",{style:{width:120},children:"Pack Material No"}),e.jsx("th",{style:{width:40},children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{width:60},children:"L"}),e.jsx("th",{style:{width:60},children:"W"}),e.jsx("th",{style:{width:60},children:"H"}),e.jsx("th",{style:{width:60},children:"Wt/pc"}),e.jsx("th",{style:{width:60},children:"Qty"}),e.jsx("th",{style:{width:80},children:"Total Wt"}),e.jsx("th",{style:{width:10},children:"msds"}),e.jsx("th",{style:{width:10},children:"draw"}),e.jsx("th",{style:{width:80},children:"Action"})]})}),e.jsxs("tbody",{children:[r.length===0&&!i?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-3",children:"No Data Found"})}):r.map((j,f)=>h===f?e.jsxs("tr",{children:[e.jsx("td",{children:f+1}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{ref:p,value:j.materialNo,onChange:N=>b(f,"materialNo",N.target.value),onBlur:N=>M(N.target.value,f),className:"form-control form-control-sm",disabled:!l.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>u(f===0?"box":"inner",f),disabled:!l.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{value:j.suffix,onChange:N=>b(f,"suffix",N.target.value),readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.name,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.supplierName,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.L,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.W,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.H,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.wtPerPc,onChange:N=>b(f,"wtPerPc",N.target.value),className:"form-control form-control-sm",disabled:!l.editable})}),e.jsx("td",{children:e.jsx("input",{value:j.qty,onChange:N=>b(f,"qty",N.target.value),className:"form-control form-control-sm",disabled:!l.editable})}),e.jsx("td",{children:(Number(j.wtPerPc||0)*Number(j.qty||0)).toFixed(2)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show MSDS doc for "+j.materialNo),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show Drawing doc for "+j.materialNo),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>o(null),disabled:!l.editable,children:"Save"})})]},f):e.jsxs("tr",{onClick:()=>{l.editable&&(o(f),c(!1))},children:[e.jsx("td",{children:f+1}),e.jsx("td",{children:j.materialNo}),e.jsx("td",{children:j.suffix}),e.jsx("td",{children:j.name}),e.jsx("td",{children:j.supplierName}),e.jsx("td",{children:j.L}),e.jsx("td",{children:j.W}),e.jsx("td",{children:j.H}),e.jsx("td",{children:j.wtPerPc}),e.jsx("td",{children:j.qty}),e.jsx("td",{children:(Number(j.wtPerPc||0)*Number(j.qty||0)).toFixed(2)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:N=>{N.stopPropagation(),alert("Show MSDS doc for "+j.materialNo)},children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:N=>{N.stopPropagation(),alert("Show Drawing doc for "+j.materialNo)},children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:N=>{N.stopPropagation(),x(f)},disabled:!l.editable,children:e.jsx("i",{className:"fas fa-trash"})})})]},f)),i&&e.jsxs("tr",{children:[e.jsx("td",{children:"+"}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:a.materialNo,onChange:j=>m(f=>({...f,materialNo:j.target.value})),onBlur:j=>M(j.target.value,"new")}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>u(r.length===0?"box":"inner"),disabled:!l.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:a.suffix,onChange:j=>m(f=>({...f,suffix:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:a.name,onChange:j=>m(f=>({...f,name:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:a.supplierName,onChange:j=>m(f=>({...f,supplierName:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:a.L,onChange:j=>m(f=>({...f,L:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:a.W,onChange:j=>m(f=>({...f,W:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:a.H,onChange:j=>m(f=>({...f,H:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:a.wtPerPc,onChange:j=>m(f=>({...f,wtPerPc:j.target.value}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:a.qty,onChange:j=>m(f=>({...f,qty:j.target.value}))})}),e.jsx("td",{children:"-"}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show MSDS doc for new material"),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show Drawing doc for new material"),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:y,disabled:!l.editable,children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>{m({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),c(!1)},disabled:!l.editable,children:"Cancel"})]})})]})]})]})})]})})}function dn(t){const{packingOpen:l,setPackingOpen:r}=t;return e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>r(s=>!s),"aria-expanded":l,"aria-controls":"packingSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${l?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Packing"]})}),l&&e.jsx("div",{id:"packingSection",children:e.jsx(cn,{...t})})]})})}function mn(t){const{config:l,logisticOpen:r,setLogisticOpen:s,tmmindDestDockCode:a,setTmmindDestDockCode:m,logisticRemark:x,setLogisticRemark:u,processType:d,setProcessType:i,addressRack:c,setAddressRack:h}=t;return e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>s(o=>!o),"aria-expanded":r,"aria-controls":"logisticSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${r?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Logistic Information"]})}),r&&e.jsxs("div",{id:"logisticSection",className:"mt-2",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"TMMIN Dest Dock Code"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{className:"form-control form-control-sm",value:a,onChange:o=>m(o.target.value),disabled:!l.editable,placeholder:"Dock Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Address Rack"}),e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:o=>h(o.target.value),disabled:!l.editable,placeholder:"Address Rack"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Remark"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:3,value:x,onChange:o=>u(o.target.value),disabled:!l.editable,placeholder:"Remark"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Process Type"}),e.jsx("div",{children:["N","W","X","Y"].map(o=>e.jsxs("label",{className:"mr-3",children:[e.jsx("input",{type:"radio",name:"processType",value:o,checked:d===o,onChange:()=>i(o),disabled:!l.editable})," ",o]},o))})]})]})]})}const hn=t=>({cpsNo:t.cpsNo,refCpsNo:t.refCpsNo,issueDate:t.issueDate,effectiveDate:t.effectiveDate,cfcPjtCode:t.cfcPjtCode,model:t.model,partNo:t.partNo,partName:t.partName,supplier:t.supplier,plantCode:t.plantCode,dockCode:t.dockCode,pseInfo:{packingPlantCurr:t.pseInfo.packingPlantCurr,packingPlantNext:t.pseInfo.packingPlantNext,vanningPlantCurr:t.pseInfo.vanningPlantCurr,vanningPlantNext:t.pseInfo.vanningPlantNext,orderPatternCurr:t.pseInfo.orderPatternCurr,orderPatternNext:t.pseInfo.orderPatternNext,category:t.pseInfo.category,katashiki:t.pseInfo.katashiki,importerLineProcess:t.pseInfo.importerLineProcess,caseCode:t.pseInfo.caseCode,boxNumber:t.pseInfo.boxNumber,renban:t.pseInfo.renban,renbanEff:t.pseInfo.renbanEff,packingProcessBoxing:t.pseInfo.packingProcessBoxing,packingProcessStacking:t.pseInfo.packingProcessStacking},images:{part:t.images.part,packing:t.images.packing,outer:t.images.outer,qkp:t.images.qkp,bkp:t.images.bkp},packing:{outerModuleType:t.packing.outerModuleType,outerDimension:t.packing.outerDimension,innerVolume:t.packing.innerVolume,outerVolume:t.packing.outerVolume,innerRows:t.packing.innerRows},notes:t.notes,logistic:{tmmindDestDockCode:t.logistic.tmmindDestDockCode,logisticRemark:t.logistic.logisticRemark,processType:t.logistic.processType,addressRack:t.logistic.addressRack}}),un=t=>{t.setCpsNo(""),t.setRefCpsNo(""),t.setIssueDate(""),t.setEffectiveDate(""),t.setCfcPjtCode(""),t.setModel(""),t.setPartNo(""),t.setPartName(""),t.setSupplier(""),t.setPlantCode(""),t.setDockCode(""),t.setPseOpen(!1),t.setPackingPlantCurr(""),t.setPackingPlantNext(""),t.setVanningPlantCurr(""),t.setVanningPlantNext(""),t.setOrderPatternCurr(""),t.setOrderPatternNext(""),t.setCategory(""),t.setKatashiki({AD:"",AU:"",AF:"",AX:""}),t.setImporterLineProcess(""),t.setCaseCode(""),t.setBoxNumber(""),t.setRenban(""),t.setRenbanEff(""),t.setPackingProcessBoxing(""),t.setPackingProcessStacking(""),t.setImagesPart({caption:"",files:[]}),t.setImagesPacking({caption:"",files:[]}),t.setImagesOuter({caption:"",files:[]}),t.setImagesQkp({caption:"",files:[]}),t.setImagesBkp({caption:"",files:[]}),t.setOuterModuleType(""),t.setOuterMaterialName(""),t.setOuterDimension({L:"",W:"",H:""}),t.setInnerVolume(""),t.setOuterVolume(""),t.setInnerRows([]),t.setNotes(""),t.setNewInner({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),t.setLogisticOpen(!0),t.setTmmindDestDockCode(""),t.setLogisticRemark(""),t.setProcessType("N"),t.setAddressRack("")};function xn({show:t,onClose:l,onSave:r,editData:s,config:a}){const[m,x]=n.useState("general"),[u,d]=n.useState({current:{},comparisons:[]}),[i,c]=n.useState([]),[h,o]=n.useState([]),[p,y]=n.useState(""),[b,M]=n.useState(""),[j,f]=n.useState(""),[S,N]=n.useState(""),[P,I]=n.useState(""),[B,D]=n.useState(""),[C,v]=n.useState(""),[U,w]=n.useState(""),[O,F]=n.useState(""),[W,te]=n.useState(""),[se,_]=n.useState(""),[K,k]=n.useState(!1),[L,q]=n.useState(""),[Z,R]=n.useState(""),[A,Y]=n.useState(""),[le,X]=n.useState(""),[ne,oe]=n.useState(""),[T,J]=n.useState(""),[H,ee]=n.useState(""),[g,E]=n.useState([]),[G,V]=n.useState(""),[ie,ue]=n.useState(""),[fe,Ce]=n.useState(""),[z,$]=n.useState(""),[ae,de]=n.useState(""),[re,xe]=n.useState(""),[Ne,je]=n.useState(""),[De,_e]=n.useState([]),[We,$e]=n.useState({materialNo:"",suffix:"",name:"",supplier:"",L:"",W:"",H:"",wtPerPc:"",qty:"",totalWt:""}),[ze,Oe]=n.useState({caption:"",files:[]}),[Ve,Re]=n.useState({caption:"",files:[]}),[Ge,Fe]=n.useState({caption:"",files:[]}),[Ye,Be]=n.useState({caption:"",files:[]}),[Je,st]=n.useState({caption:"",files:[]}),[Qt,dt]=n.useState(""),[mt,Ue]=n.useState([]),[vt,nt]=n.useState(""),[ht,Qe]=n.useState({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),[Zt,Xt]=n.useState(!0),[es,ts]=n.useState(!0),[ss,yt]=n.useState(!1),[ns,ut]=n.useState(!1),[ls,xt]=n.useState(!1),[as,pt]=n.useState(!1),[Ct,rs]=n.useState("all"),[os,is]=n.useState(null),[cs,jt]=n.useState(!0),[St,lt]=n.useState(""),[wt,at]=n.useState(""),[kt,rt]=n.useState("N"),[Pt,ot]=n.useState("");n.useEffect(()=>{fetch("/packing-cost-fe/cpsComparison.json").then(he=>he.json()).then(he=>d(he)),fetch("/materials.json").then(he=>he.json()).then(he=>c(he)),fetch("/models.json").then(he=>he.json()).then(he=>o(he))},[]),n.useEffect(()=>{!s&&B&&C&&y(`${B}-${C}`)},[s,B,C]);const ds=u.current,ms=u.comparisons;n.useEffect(()=>{t&&(s?(y(s.cpsNo||""),M(s.refCpsNo||""),f(s.issueDate||""),N(s.effectiveDate||""),I(s.cfcPjtCode||""),D(s.model||""),v(s.partNo||""),w(s.partName||""),F(s.supplier||""),te(s.plantCode||""),_(s.dockCode||""),s.pseInfo&&(q(s.pseInfo.packingPlantCurr||""),R(s.pseInfo.packingPlantNext||""),Y(s.pseInfo.vanningPlantCurr||""),X(s.pseInfo.vanningPlantNext||""),oe(s.pseInfo.orderPatternCurr||""),J(s.pseInfo.orderPatternNext||""),ee(s.pseInfo.category||""),E(s.pseInfo.katashiki||[]),V(s.pseInfo.importerLineProcess||""),ue(s.pseInfo.caseCode||""),Ce(s.pseInfo.boxNumber||""),$(s.pseInfo.renban||""),de(s.pseInfo.renbanEff||""),xe(s.pseInfo.packingProcessBoxing||""),je(s.pseInfo.packingProcessStacking||""),_e(s.pseInfo.outerRows||[])),s.images&&(Oe(s.images.part||{caption:"",files:[]}),Re(s.images.packing||{caption:"",files:[]}),Fe(s.images.outer||{caption:"",files:[]}),Be(s.images.qkp||{caption:"",files:[]}),st(s.images.bkp||{caption:"",files:[]})),s.packing&&(dt(s.packing.innerVolume||""),Ue(s.packing.innerRows||[])),nt(s.notes||""),s.logistic&&(lt(s.logistic.tmmindDestDockCode||""),at(s.logistic.logisticRemark||""),rt(s.logistic.processType||"N"),ot(s.logistic.addressRack||""))):(y(""),M(""),f(""),N(""),I(""),D(""),v(""),w(""),F(""),te(""),_(""),k(!1),q(""),R(""),Y(""),X(""),oe(""),J(""),ee(""),E([]),V(""),ue(""),Ce(""),$(""),de(""),xe(""),je(""),_e([]),Oe({caption:"",files:[]}),Re({caption:"",files:[]}),Fe({caption:"",files:[]}),Be({caption:"",files:[]}),st({caption:"",files:[]}),dt(""),Ue([]),nt(""),Qe({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),jt(!0),lt(""),at(""),rt("N"),ot("")))},[t,s]);function hs(){if(!ht.materialNo.trim()){alert("Enter Pack Material No");return}Ue(ce=>[...ce,{...ht}]),Qe({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})}function us(ce){Ue(he=>he.filter((Me,Le)=>Le!==ce))}function xs(ce){ce&&(v(ce.partNo),w(ce.partName),F(ce.supplierName)),ut(!1)}const ps=()=>{const ce=hn({cpsNo:p,refCpsNo:b,issueDate:j,effectiveDate:S,cfcPjtCode:P,model:B,partNo:C,partName:U,supplier:O,plantCode:W,dockCode:se,pseInfo:{packingPlantCurr:L,packingPlantNext:Z,vanningPlantCurr:A,vanningPlantNext:le,orderPatternCurr:ne,orderPatternNext:T,category:H,katashiki:g,importerLineProcess:G,caseCode:ie,boxNumber:fe,renban:z,renbanEff:ae,packingProcessBoxing:re,packingProcessStacking:Ne,outerRows:De},images:{part:ze,packing:Ve,outer:Ge,qkp:Ye,bkp:Je},packing:{innerVolume:Qt,innerRows:mt},notes:vt,logistic:{tmmindDestDockCode:St,logisticRemark:wt,processType:kt,addressRack:Pt}});r(ce),It()},It=()=>{un({setCpsNo:y,setRefCpsNo:M,setIssueDate:f,setEffectiveDate:N,setCfcPjtCode:I,setModel:D,setPartNo:v,setPartName:w,setSupplier:F,setPlantCode:te,setDockCode:_,setPseOpen:k,setPackingPlantCurr:q,setPackingPlantNext:R,setVanningPlantCurr:Y,setVanningPlantNext:X,setOrderPatternCurr:oe,setOrderPatternNext:J,setCategory:ee,setKatashiki:E,setImporterLineProcess:V,setCaseCode:ue,setBoxNumber:Ce,setRenban:$,setRenbanEff:de,setPackingProcessBoxing:xe,setPackingProcessStacking:je,setPseOuterRows:_e,setNewPseOuter:$e,setImagesPart:Oe,setImagesPacking:Re,setImagesOuter:Fe,setImagesQkp:Be,setImagesBkp:st,setInnerVolume:dt,setInnerRows:Ue,setNotes:nt,setNewInner:Qe,setLogisticOpen:jt,setTmmindDestDockCode:lt,setLogisticRemark:at,setProcessType:rt,setAddressRack:ot}),l()};function js(ce){if(ce)if(Array.isArray(ce))D(ce.map(he=>he.model_code).join(", "));else{D(ce.model_code||"");const he=h.find(Me=>Me.model_code===ce.model_code);he&&(E(he.katashiki||[]),I(he.model_cfc||""))}xt(!1)}function fs(ce){if(ce){const he=os,Me=Ct.toLowerCase();if(Me==="outer"||Me==="module"||Me==="outer-material"){const Le=Me==="outer-material",Ae={materialNo:ce.materialNo,name:ce.materialName,[Le?"supplierName":"supplier"]:ce.supplierName,L:ce.dimension_length,W:ce.dimension_width,H:ce.dimension_height,wtPerPc:ce.unitWeight};if(he==="new")Le?setNewOuter(we=>({...we,...Ae})):$e(we=>({...we,...Ae}));else if(he===null)setNewOuter(we=>({...we,...Ae}));else if(Le){const we=[...outerRows];we[he]={...we[he],...Ae},setOuterRows(we)}else{const we=[...De];we[he]={...we[he],...Ae},_e(we)}}else if(Me==="inner"||Me==="box"){const Le={materialNo:ce.materialNo,name:ce.materialName,supplierName:ce.supplierName,L:ce.dimension_inner_length,W:ce.dimension_inner_width,H:ce.dimension_inner_height,wtPerPc:ce.unitWeight};if(he==="new"||he===null)Qe(Ae=>({...Ae,...Le}));else{const Ae=[...mt];Ae[he]={...Ae[he],...Le},Ue(Ae)}}}pt(!1)}const bs=()=>xt(!0),_t=(ce,he=null)=>{rs(ce),is(he),pt(!0)};return t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:ce=>{ce.target===ce.currentTarget&&l()},children:[e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1200},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:s?"CPS - Edit":"CPS - New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:l,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[a.general.visible&&e.jsxs(e.Fragment,{children:[e.jsx(ln,{config:a.general,cpsNo:p,setCpsNo:Q(y),refCpsNo:b,setRefCpsNo:Q(M),cfcPjtCode:P,setCfcPjtCode:Q(I),model:B,setModel:Q(D),partNo:C,setPartNo:Q(v),partName:U,setPartName:Q(w),supplier:O,setSupplier:Q(F),plantCode:W,setPlantCode:Q(te),dockCode:se,setDockCode:Q(_),openPartPicker:()=>ut(!0),openModelPicker:bs,setComparisonOpen:yt}),a.pse.visible&&e.jsx("hr",{})]}),a.pse.visible&&e.jsxs(e.Fragment,{children:[e.jsx(an,{config:a.pse,pseOpen:K,setPseOpen:k,packingPlantCurr:L,setPackingPlantCurr:Q(q),packingPlantNext:Z,setPackingPlantNext:Q(R),vanningPlantCurr:A,setVanningPlantCurr:Q(Y),vanningPlantNext:le,setVanningPlantNext:Q(X),orderPatternCurr:ne,setOrderPatternCurr:Q(oe),orderPatternNext:T,setOrderPatternNext:Q(J),category:H,setCategory:Q(ee),katashiki:g,setKatashiki:E,importerLineProcess:G,setImporterLineProcess:Q(V),caseCode:ie,setCaseCode:Q(ue),boxNumber:fe,setBoxNumber:Q(Ce),renban:z,setRenban:Q($),renbanEff:ae,setRenbanEff:Q(de),packingProcessBoxing:re,setPackingProcessBoxing:Q(xe),packingProcessStacking:Ne,setPackingProcessStacking:Q(je),pseOuterRows:De,setPseOuterRows:_e,newPseOuter:We,setNewPseOuter:$e,openMaterialPicker:_t}),a.images.visible&&e.jsx("hr",{})]}),a.images.visible&&e.jsxs(e.Fragment,{children:[e.jsx(on,{config:a.images,imagesOpen:Zt,setImagesOpen:Xt,imagesPart:ze,setImagesPart:Oe,imagesPacking:Ve,setImagesPacking:Re,imagesOuter:Ge,setImagesOuter:Fe,imagesQkp:Ye,setImagesQkp:Be,imagesBkp:Je,setImagesBkp:st}),a.packing.visible&&e.jsx("hr",{})]}),a.packing.visible&&e.jsxs(e.Fragment,{children:[e.jsx(dn,{config:a.packing,materials:i,packingOpen:es,setPackingOpen:ts,innerRows:mt,setInnerRows:Ue,newInner:ht,setNewInner:Qe,handleAddInnerRow:hs,handleRemoveInnerRow:us,openMaterialPicker:_t}),a.logistic.visible&&e.jsx("hr",{})]}),a.logistic.visible&&e.jsx(mn,{config:a.logistic,logisticOpen:cs,setLogisticOpen:jt,tmmindDestDockCode:St,setTmmindDestDockCode:lt,logisticRemark:wt,setLogisticRemark:at,processType:kt,setProcessType:rt,addressRack:Pt,setAddressRack:ot}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Note"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:vt,onChange:Q(nt)})]})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-secondary",onClick:It,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary ml-2",onClick:ps,children:"Save"}),e.jsx("button",{className:"btn btn-success ml-2",onClick:()=>alert("Submit action to be implemented."),children:"Submit"})]})]}),e.jsx("style",{children:`
          .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
          .np-modal { width: 100%; max-height: 95vh; overflow: auto; z-index: 2001; }
          .table-sm td, .table-sm th { vertical-align: middle; }
        `})]}),e.jsx(sn,{isOpen:ss,onClose:()=>yt(!1),parts:ms,current:ds,extraClass:"multi-parts-comparison"}),e.jsx(He,{show:ns,onClose:()=>ut(!1),onSelect:xs,zIndex:4e3,mode:"single"}),e.jsx(Ke,{show:ls,onClose:()=>xt(!1),onAdd:js,selectionMode:"single"}),e.jsx(nn,{show:as,onClose:()=>pt(!1),onAdd:fs,zIndex:3e3,filter:Ct})]}):null}const Dt=[{userId:"12345",name:"Rollin Khaider",dept:"PSE",role:"Dept Head"},{userId:"22345",name:"Asep Sumarna",dept:"PPM",role:"Section Head"},{userId:"32345",name:"Khalil Gibran",dept:"PSE",role:"Staff"},{userId:"42345",name:"Jaka T. Mulyo",dept:"PCD",role:"Staff"},{userId:"52345",name:"W.H. Jeanette",dept:"PPM",role:"Staff"}];function pn({show:t=!1,onClose:l,onSelect:r}){const[s,a]=n.useState({userId:"",name:"",dept:"",role:""}),[m,x]=n.useState(null);if(!t)return null;const u=c=>{a({...s,[c.target.name]:c.target.value})},d=()=>a({userId:"",name:"",dept:"",role:""}),i=Dt.filter(c=>(!s.userId||c.userId.includes(s.userId))&&(!s.name||c.name.toLowerCase().includes(s.name.toLowerCase()))&&(!s.dept||c.dept.toLowerCase().includes(s.dept.toLowerCase()))&&(!s.role||c.role.toLowerCase().includes(s.role.toLowerCase())));return e.jsxs("div",{className:"np-modal-backdrop",style:{zIndex:3e3},children:[e.jsxs("div",{className:"np-modal card card-outline card-info",style:{maxWidth:600},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0",style:{fontSize:20},children:e.jsx("b",{children:"Select a Person"})}),e.jsx("button",{className:"btn btn-tool ml-auto",onClick:l,children:e.jsx("span",{style:{fontSize:25},children:"×"})})]}),e.jsxs("div",{className:"card-body pb-2",children:[e.jsxs("div",{className:"form-row align-items-end",children:[e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"User Id"}),e.jsx("input",{name:"userId",className:"form-control form-control-sm",value:s.userId,onChange:u})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Name"}),e.jsx("input",{name:"name",className:"form-control form-control-sm",value:s.name,onChange:u})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small mb-1",children:"Dept"}),e.jsx("input",{name:"dept",className:"form-control form-control-sm",value:s.dept,onChange:u})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Role"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{name:"role",className:"form-control form-control-sm",value:s.role,onChange:u}),e.jsxs("div",{className:"input-group-append",children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:d,children:e.jsx("i",{className:"fas fa-times"})})]})]})]})]}),e.jsx("div",{style:{maxHeight:260,overflowY:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"User ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Dept"}),e.jsx("th",{children:"Role"})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center text-muted",children:"No Data Found"})}):i.map((c,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"radio",checked:m===c.userId,onChange:()=>x(c.userId)})}),e.jsx("td",{children:c.userId}),e.jsx("td",{children:c.name}),e.jsx("td",{children:c.dept}),e.jsx("td",{children:c.role})]},c.userId))})]})})]}),e.jsx("div",{className:"card-footer text-right",children:e.jsxs("button",{className:"btn btn-success",disabled:!m,onClick:()=>{const c=Dt.find(h=>h.userId===m);c&&r&&r(c),l&&l()},children:[e.jsx("i",{className:"fas fa-check mr-1"})," Select"]})})]}),e.jsx("style",{children:`
        .np-modal-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.35);
          z-index: 3000;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 1rem;
        }
        .np-modal { width: 100%; z-index: 3001; }
        .table-sm td, .table-sm th { vertical-align: middle; }
      `})]})}const et=[{destCode:"301B",code:"TAR",country:"ARGENTINA",company:"Toyota Argentina"},{destCode:"301B",code:"TASA",country:"ARGENTINA",company:"Toyota Argentina S.A."},{destCode:"537B",code:"TSM",country:"AFRIKA",company:"Toyota South Africa Motors"},{destCode:"709B",code:"TKM",country:"INDIA",company:"Toyota Kirloskar Motor"},{destCode:"715B",code:"TMV",country:"VIETNAM",company:"Toyota Motor Vietnam"},{destCode:"717C",code:"IMC",country:"PAKISTAN",company:"Indus Motor Company"},{destCode:"721B",code:"KUO",country:"KUOZUI",company:"Kuozui Motors"},{destCode:"721C",code:"KUO",country:"KUOZUI",company:"Kuozui Motors"},{destCode:"722C",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"722F",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"722B",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"811C",code:"TMP",country:"PHILIPINE",company:"Toyota Motor Philippines"},{destCode:"812B",code:"UMW",country:"MALAYSIA",company:"UMW Toyota Motor"},{destCode:"812K",code:"UMW",country:"MALAYSIA",company:"UMW Toyota Motor"},{destCode:"547A",code:"TEE",country:"MESIR",company:"Toyota Egypt Enterprise"},{destCode:"303B",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"303E",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"303D",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"D55E",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"704B",code:"TMY",country:"MYANMAR",company:"Toyota Motor Myanmar"},{destCode:"705A",code:"CAM",country:"CAMBOJA",company:"Cambodia Toyota Motor"},{destCode:"709C",code:"TKAP",country:"INDIA 2",company:"Toyota Kirloskar Auto Parts"},{destCode:"709D",code:"TIEI",country:"INDIA 3",company:"Toyota Industries Engine India"},{destCode:"722S",code:"STM",country:"SIAM THAILAND",company:"Siam Toyota Motor"},{destCode:"811W",code:"TAP",country:"PHILIPINE 2",company:"Toyota Auto Parts Philippines"},{destCode:"807B",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"},{destCode:"807D",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"},{destCode:"807J",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"}],jn=[{id:1,cpsNo:"CPS-2024-001",refCpsNo:"",issueDate:"2024-07-01",effectiveDate:"2024-07-10",dpiNo:"DPI-2024-001",cfcPjtCode:"PJT-A",model:"579W",partNo:"90466T006200",partName:"CLIP, MOULDING",supplier:"Supplier A",plantCode:"TMMIN",dockCode:"D01",pseInfo:{packingPlantCurr:"PLANT-1",packingPlantNext:"PLANT-1",vanningPlantCurr:"VPLANT-A",vanningPlantNext:"VPLANT-A",orderPatternCurr:"A1",orderPatternNext:"A1",category:"CAT-1",katashiki:{AD:"AD1",AU:"AU1",AF:"AF1",AX:"AX1"},importerLineProcess:"ILP-1",caseCode:"CC-001",boxNumber:"B-001",renban:"R-001",renbanEff:"2024-07-10",packingProcessBoxing:"Manual",packingProcessStacking:"Auto"},images:{part:{caption:"Part Image",files:[]},packing:{caption:"Packing Image",files:[]},outer:{caption:"Outer Image",files:[]},qkp:{caption:"QKP Image",files:[]},bkp:{caption:"BKP Image",files:[]}},packing:{outerModuleType:"MOD-A",outerDimension:{L:"100",W:"80",H:"60"},innerVolume:"0.0384",outerVolume:"0.048",innerRows:[{materialNo:"MAT-001",suffix:"S1",name:"Inner Box",parent:"",supplierId:"SUP-001",supplierName:"Supplier Inner",L:"50",W:"40",H:"30",wtPerPc:"0.1",qty:"10"}]},notes:"This is a note for the first CPS.",numParts:5,fromUser:"User A",toUser:"User B",status:"Approved"},{id:2,cpsNo:"CPS-2024-002",refCpsNo:"CPS-2024-001",issueDate:"2024-07-05",effectiveDate:"2024-07-15",dpiNo:"DPI-2024-002",cfcPjtCode:"PJT-B",model:"579W",partNo:"32101BZ10000",partName:"Part B",supplier:"Supplier B",plantCode:"TMMIN",dockCode:"D02",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:8,fromUser:"User C",toUser:"User D",status:"Submitted"},{id:3,cpsNo:"CPS-2024-003",refCpsNo:"",issueDate:"2024-07-12",effectiveDate:"2024-07-20",dpiNo:"DPI-2024-003",cfcPjtCode:"PJT-C",model:"579W",partNo:"90466T006200",partName:"Part C",supplier:"Supplier C",plantCode:"TMMIN",dockCode:"D03",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:3,fromUser:"User E",toUser:"User F",status:"Draft"},{id:4,cpsNo:"CPS-2024-004",refCpsNo:"",issueDate:"2024-07-15",effectiveDate:"2024-07-25",dpiNo:"DPI-2024-004",cfcPjtCode:"PJT-A",model:"579W",partNo:"32101BZ10000",partName:"Part D",supplier:"Supplier D",plantCode:"TMMIN",dockCode:"D04",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:12,fromUser:"User A",toUser:"User G",status:"Rejected"},{id:5,cpsNo:"CPS-2024-005",refCpsNo:"CPS-2024-004",issueDate:"2024-07-20",effectiveDate:"2024-08-01",dpiNo:"DPI-2024-005",cfcPjtCode:"PJT-D",model:"579W",partNo:"90466T006200",partName:"Part E",supplier:"Supplier E",plantCode:"TMMIN",dockCode:"D05",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:7,fromUser:"User H",toUser:"User I",status:"Approved"}],fn=({onNewCps:t,onUpload:l,onDownload:r,onCreatePsi:s,onCreateEci:a,onComparePcs:m})=>e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:t,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create CPS"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:s,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create PSI"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:a,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create ECI"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-info",onClick:m,children:[e.jsx("i",{className:"fas fa-exchange-alt mr-1"})," Compare PCS"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary ml-2",title:"Upload",onClick:l,children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary ml-1",title:"Download Template",onClick:r,children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]});function Nt({show:t,onClose:l,onAdd:r,selectionMode:s="multi"}){const[a,m]=n.useState([]),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(""),[o,p]=n.useState(s==="multi"?[]:null),[y,b]=n.useState([]),[M,j]=n.useState(1),f=15;n.useEffect(()=>{fetch("/packing-cost-fe/destinations.json").then(O=>O.json()).then(O=>{m(O),b(O)})},[]),n.useEffect(()=>{t&&(u(""),i(""),h(""),p(s==="multi"?[]:null),b(a),j(1))},[t,s,a]);const S=w=>{p(s==="multi"?O=>O.includes(w)?O.filter(F=>F!==w):[...O,w]:w)},N=()=>{const w=a.filter(O=>O.destCode.toLowerCase().includes(x.toLowerCase())&&O.code.toLowerCase().includes(d.toLowerCase())&&O.country.toLowerCase().includes(c.toLowerCase()));b(w),j(1)},P=()=>{u(""),i(""),h(""),b(a),j(1)},I=()=>{if(typeof r=="function")if(s==="multi")r(o.map(w=>a.find(O=>O.destCode===w)));else{const w=a.find(O=>O.destCode===o);r(w)}p(s==="multi"?[]:null),typeof l=="function"&&l()},B=M*f,D=B-f,C=y.slice(D,B),v=Math.ceil(y.length/f);if(!t)return null;const U=e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",inset:0,zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"modal-dialog modal-lg",role:"document",style:{zIndex:2100},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Destination"}),e.jsx("button",{type:"button",className:"close",onClick:l,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"d-flex align-items-end mb-3",children:[e.jsxs("div",{style:{flex:"0 0 20%",paddingRight:"0.5rem"},children:[e.jsx("label",{className:"small",children:"Dest Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:x,onChange:w=>u(w.target.value)})]}),e.jsxs("div",{style:{flex:"0 0 20%",paddingRight:"0.5rem"},children:[e.jsx("label",{className:"small",children:"Dest Country Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:w=>i(w.target.value)})]}),e.jsxs("div",{style:{flex:"0 0 40%",paddingRight:"0.5rem"},children:[e.jsx("label",{className:"small",children:"Country Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:w=>h(w.target.value)})]}),e.jsxs("div",{style:{flex:"1 1 auto"},className:"text-right",children:[e.jsxs("button",{className:"btn btn-sm btn-primary mr-1",onClick:N,type:"button",children:["Filter ",e.jsx("i",{className:"fas fa-search"})]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:P,type:"button",children:["Clear ",e.jsx("i",{className:"fas fa-times"})]})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Dest Country Code"}),e.jsx("th",{children:"Country Name"})]})}),e.jsx("tbody",{children:C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No destinations found"})}):C.map(w=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:s==="multi"?"checkbox":"radio",name:"destination-selection",checked:s==="multi"?o.includes(w.destCode):o===w.destCode,onChange:()=>S(w.destCode)})}),e.jsx("td",{children:w.destCode}),e.jsx("td",{children:w.code}),e.jsx("td",{children:w.country})]},w.destCode))})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>j(w=>Math.max(1,w-1)),disabled:M===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",M," of ",v]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>j(w=>Math.min(v,w+1)),disabled:M===v,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:I,type:"button",children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:l,type:"button",children:"Cancel"})]})]})]})})});return bt.createPortal(U,typeof document<"u"?document.body:null)}const bn=()=>{const{user:t}=Ee(),r=(()=>{if(t&&t.department&&t.role){const $=Mt[t.department];if($&&$[t.role])return $[t.role]}return Mt.default})(),[s,a]=n.useState(jn),[m,x]=n.useState([]),[u,d]=n.useState(!1),[i,c]=n.useState(null),[h,o]=n.useState(!1),[p,y]=n.useState(null),[b,M]=n.useState(!1),[j,f]=n.useState(""),[S,N]=n.useState(""),[P,I]=n.useState(""),[B,D]=n.useState(""),[C,v]=n.useState(""),[U,w]=n.useState(""),[O,F]=n.useState(""),[W,te]=n.useState(""),[se,_]=n.useState(""),[K,k]=n.useState(""),[L,q]=n.useState(""),[Z,R]=n.useState(""),[A,Y]=n.useState(""),[le,X]=n.useState(""),[ne,oe]=n.useState({currentPage:1,perPage:5}),T=()=>{f(""),N(""),I(""),D(""),v(""),w(""),F(""),te(""),_(""),k(""),q(""),R(""),Y(""),X(""),x([])},J=$=>{const ae=Ce,de=s.filter(re=>(ae.cpsNo?re.cpsNo.includes(ae.cpsNo):!0)&&(ae.refCpsNo?re.refCpsNo.includes(ae.refCpsNo):!0)&&(ae.model?re.model.toLowerCase().includes(ae.model.toLowerCase()):!0)&&(ae.partNo?re.partNo.includes(ae.partNo):!0)&&(ae.cfcPjt?re.cfcPjtCode.includes(ae.cfcPjt):!0)&&(ae.fromUser?new Date(re.issuedDate)>=new Date(ae.fromUser):!0)&&(ae.toUser?new Date(re.issuedDate)<=new Date(ae.toUser):!0)&&(ae.status?re.status===ae.status:!0)&&(ae.destCode?re.destCode===ae.destCode:!0)&&(ae.cpsPsiEci?re.docType===ae.cpsPsiEci:!0));x(de),oe(re=>({...re,currentPage:1}))},H=$=>{let ae;if(i)ae=s.map(de=>de.id===i.id?{...de,...$}:de);else{const de=s.length>0?Math.max(...s.map(re=>re.id))+1:1;ae=[...s,{...$,id:de}]}a(ae),x(ae),d(!1),c(null)},ee=$=>{c($),d(!0)},g=$=>{const ae=s.length>0?Math.max(...s.map(je=>je.id))+1:1,de={...$,id:ae,refCpsNo:$.cpsNo,cpsNo:""},re=m.findIndex(je=>je.id===$.id),xe=[...s,de],Ne=[...m];Ne.splice(re+1,0,de),a(xe),x(Ne)},E=()=>{d(!1),c(null)},G=()=>{console.log("Create PSI clicked")},V=()=>{console.log("Create ECI clicked")},ie=()=>{console.log("Compare PCS clicked")},ue=$=>{y($),o(!0)},fe=$=>{k($.destCode.toUpperCase()),q($.country.toUpperCase()),M(!1)},Ce={cpsNo:j,refCpsNo:S,model:P,partNo:B,partName:C,cfcPjt:U,fromUser:O,toUser:W,status:se,destCode:K,destCountry:L,cpsPsiEci:Z,supplierCode:A,supplierName:le},z={setCpsNo:$=>f($.toUpperCase()),setRefCpsNo:$=>N($.toUpperCase()),setModel:$=>I($.toUpperCase()),setPartNo:$=>D($.toUpperCase()),setPartName:$=>v($.toUpperCase()),setCfcPjt:$=>w($.toUpperCase()),setFromUser:$=>F($.toUpperCase()),setToUser:$=>te($.toUpperCase()),setStatus:$=>_($.toUpperCase()),setDestCode:$=>k($.toUpperCase()),setDestCountry:$=>q($.toUpperCase()),setCpsPsiEci:$=>R($.toUpperCase()),setSupplierCode:$=>Y($.toUpperCase()),setSupplierName:$=>X($.toUpperCase())};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-secondary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"CPS List"})}),e.jsx(fn,{onNewCps:()=>d(!0),onCreatePsi:G,onCreateEci:V,onComparePcs:ie})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(Ws,{filters:Ce,setters:z,onSearch:()=>J(),onClear:T,onPersonPicker:ue,onDestinationPicker:()=>M(!0),destinations:et}),e.jsx("hr",{}),e.jsx($s,{filteredCps:m,page:ne.currentPage,perPage:ne.perPage,setPage:$=>oe(ae=>({...ae,currentPage:$})),setPerPage:$=>oe(ae=>({...ae,perPage:$})),onEdit:ee,onClone:g})]})]}),e.jsx(xn,{show:u,onClose:E,onSave:H,editData:i,config:r}),h&&e.jsx(pn,{show:h,onClose:()=>o(!1),onSelect:$=>{o(!1)}}),e.jsx(Nt,{show:b,onClose:()=>M(!1),onAdd:fe,selectionMode:"single"})]})};function Nn({show:t=!1,onClose:l,initial:r=null,onSave:s,onSubmit:a}){const m={dpiNo:"",refDpiNo:"",issuedDate:"",effectiveDate:"",cfcPjt:"",model:"",from:"",to:"",supplier:"",numParts:0,numCps:0,status:"Draft",notes:""},[x,u]=n.useState(r||m),[d,i]=n.useState([]);if(n.useEffect(()=>(t?(u(r||m),i(r&&r.parts||[]),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[t,r]),!t)return null;function c(f){const{name:S,value:N}=f.target;u(P=>({...P,[S]:N}))}function h(){const f={cps:"",partNo:"",suffix:"",name:"",parent:"",supplierCode:"",supplierName:"",L:"",W:"",H:"",wtPc:"",qtyBox:"",totalWt:""};i(S=>[...S,f])}function o(f,S,N){i(P=>P.map((I,B)=>B===f?{...I,[S]:N}:I))}function p(f){i(S=>S.filter((N,P)=>P!==f))}async function y(f){return await new Promise(S=>setTimeout(S,200)),null}async function b(){const f=(x.refDpiNo||"").trim();if(f)try{const S=await y(f);S&&(u(N=>({...N,...S})),i(S.parts||[]))}catch(S){console.error("fetch dpi by ref failed",S)}}function M(f){f&&f.preventDefault&&f.preventDefault();const S={...x,status:"Draft",parts:d};s&&s(S)}function j(f){f&&f.preventDefault&&f.preventDefault();const S={...x,status:"Submitted",parts:d};a&&a(S)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,role:"dialog","aria-modal":"true",children:e.jsx("div",{className:"modal-dialog modal-xl",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"DPI New"})}),e.jsx("button",{type:"button",className:"close",onClick:l,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:e.jsx("strong",{children:"DPI No."})}),e.jsx("input",{name:"dpiNo",className:"form-control form-control-sm",value:x.dpiNo,onChange:c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CFC / PJT"}),e.jsx("input",{name:"cfcPjt",className:"form-control form-control-sm",value:x.cfcPjt,onChange:c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Issued Date"}),e.jsx("input",{type:"date",name:"issuedDate",className:"form-control form-control-sm",value:x.issuedDate,onChange:c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"From"}),e.jsx("input",{name:"from",className:"form-control form-control-sm",value:x.from,onChange:c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier"}),e.jsx("input",{name:"supplier",className:"form-control form-control-sm",value:x.supplier,onChange:c})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:e.jsx("strong",{children:"DPI Ref No."})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{name:"refDpiNo",className:"form-control form-control-sm",value:x.refDpiNo,onChange:c,onBlur:b}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model"}),e.jsx("input",{name:"model",className:"form-control form-control-sm",value:x.model,onChange:c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Effective Date"}),e.jsx("input",{type:"date",name:"effectiveDate",className:"form-control form-control-sm",value:x.effectiveDate,onChange:c})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"To"}),e.jsx("input",{name:"to",className:"form-control form-control-sm",value:x.to,onChange:c})]})]})]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3 mb-2",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"fas fa-chevron-down"})," ",e.jsx("strong",{children:"Parts"})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:h,children:[e.jsx("i",{className:"fas fa-plus"})," add"]})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"CPS"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Parent"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"L"}),e.jsx("th",{children:"W"}),e.jsx("th",{children:"H"}),e.jsx("th",{children:"Wt/pc"}),e.jsx("th",{children:"Qty/box"}),e.jsx("th",{children:"Total Wt"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsx("tbody",{children:d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-4",children:'No parts. Click "add" to insert a new part.'})}):d.map((f,S)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.cps,onChange:N=>o(S,"cps",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.partNo,onChange:N=>o(S,"partNo",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.suffix,onChange:N=>o(S,"suffix",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.name,onChange:N=>o(S,"name",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.parent,onChange:N=>o(S,"parent",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.supplierCode,onChange:N=>o(S,"supplierCode",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.supplierName,onChange:N=>o(S,"supplierName",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.L,onChange:N=>o(S,"L",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.W,onChange:N=>o(S,"W",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.H,onChange:N=>o(S,"H",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.wtPc,onChange:N=>o(S,"wtPc",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.qtyBox,onChange:N=>o(S,"qtyBox",N.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:f.totalWt,onChange:N=>o(S,"totalWt",N.target.value)})}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Edit",children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>p(S),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},S))})]})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{children:e.jsx("strong",{children:"Note :"})}),e.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:x.notes,onChange:f=>u(S=>({...S,notes:f.target.value}))})]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-success mr-2",onClick:M,children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,children:"Submit"})]})]})]})})}),e.jsx("div",{className:"modal-backdrop fade show"})]})}function gn(t){console.log("Props received by SearchSection:",t);const{filters:l,setters:r,onSearch:s,onClear:a,onPartSearch:m,onModelSearch:x,onDpiSearch:u,onSearchDestination:d,onSearchSupplier:i}=t,{modelCfc:c,destCode:h,partNo:o,supplierCode:p,cpsNo:y,implementationPeriod:b}=l||{},{setModelCfc:M,setDestCode:j,setPartNo:f,setSupplierCode:S,setCpsNo:N,setImplementationPeriod:P}=r||{},[I,B]=n.useState(""),D=U=>{if(U.key===" "||U.key===","){U.preventDefault();const w=I.trim();w&&f(O=>[...new Set([...O,w])]),B("")}},C=U=>{f(w=>w.filter(O=>O!==U))},v=()=>{console.log("Search button clicked in SearchSection"),s?s():console.error("onSearch prop is NOT DEFINED in SearchSection. Check the parent component.")};return e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Model CFC"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:c||"",onChange:Q(M),placeholder:"Model CFC"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Model CFC",onClick:x,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Implementation Period"}),e.jsx("div",{className:"input-group input-group-sm",children:e.jsx("input",{className:"form-control form-control-sm",value:b||"",onChange:Q(P),placeholder:"Implementation Period"})})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"4px"},children:[o&&o.map(U=>e.jsxs("span",{className:"badge badge-primary",style:{display:"flex",alignItems:"center",padding:"4px 8px"},children:[U,e.jsx("button",{type:"button",className:"close","aria-label":"Remove",onClick:()=>C(U),style:{color:"white",marginLeft:"8px",textShadow:"none",opacity:1,fontSize:"1rem"},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},U)),e.jsx("input",{style:{border:"none",outline:"none",flex:"1",minWidth:"100px"},value:I,onChange:Q(B),onKeyDown:D,placeholder:"Type and press space"})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part No",onClick:m,children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:h||"",onChange:Q(j),placeholder:"Dest Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Dest Code",onClick:d,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"CPS No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:y||"",onChange:Q(N),placeholder:"CPS No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search CPS No",onClick:u,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:p||"",onChange:Q(S),placeholder:"Supplier Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Supplier",onClick:i,children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})}),e.jsxs("div",{className:"col-12 d-flex",children:[e.jsx("div",{className:"col-md-6"}),e.jsxs("div",{className:"col-md-6 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:v,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:a,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})]})]})})}function Vt({count:t=1}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((l,r)=>e.jsx(Ie.Fragment,{children:r===0?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Length"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Width"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Height"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Volume Inner"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Volume Outer"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Usage"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Source"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Usage"})]})},`matLeafHdr-${r}`))})}function Gt({arr:t=[],count:l=1}){return e.jsx(e.Fragment,{children:t.map((r,s)=>e.jsx(Ie.Fragment,{children:s===0?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:r.material_no||"-"}),e.jsx("td",{children:r.dimension_length||"-"}),e.jsx("td",{children:r.dimension_width||"-"}),e.jsx("td",{children:r.dimension_height||"-"}),e.jsx("td",{children:r.volume_inner||"-"}),e.jsx("td",{children:r.volume_outer||"-"}),e.jsx("td",{children:r.qty||"-"}),e.jsx("td",{children:r.source||"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:r.material_no||"+"}),e.jsx("td",{children:r.qty||"+"})]})},`matLeafCell-${s}`))})}function vn({count:t=1}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((l,r)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:r===0?8:2,children:r===0?"Box":`Inner ${r}`},`innerGrp-${r}`))})}const yn=({count:t})=>e.jsx(Vt,{count:t}),Cn=({data:t,count:l})=>e.jsx(Gt,{arr:t,count:l});function Sn({count:t=1}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((l,r)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:r===0?8:2,children:r===0?"Module":`Outer ${r}`},`outerGrp-${r}`))})}const wn=({count:t})=>e.jsx(Vt,{count:t}),kn=({data:t,count:l})=>e.jsx(Gt,{arr:t,count:l});function Pn({checked:t}){return e.jsxs(e.Fragment,{children:[t.includes("destination")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Destination"}),t.includes("model")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Model"}),t.includes("impl_period")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Impl Period"}),t.includes("cps_no")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"CPS No"})]})}function In({mainInfo:t,checked:l}){var x,u,d,i;const{destination:r,model_name:s,impl_period:a,cps_no:m}=t||{};return e.jsxs(e.Fragment,{children:[l.includes("destination")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((d=(u=(x=t==null?void 0:t.cps)==null?void 0:x.model)==null?void 0:u.destination)==null?void 0:d.code)??"-"}),l.includes("model")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(t==null?void 0:t.model_code)??"-"}),l.includes("impl_period")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(t==null?void 0:t.implementation_period)??"-"}),l.includes("cps_no")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((i=t==null?void 0:t.cps)==null?void 0:i.cps_no)??"-"})]})}function _n({checked:t}){return e.jsxs(e.Fragment,{children:[t.includes("part_no_part")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part No "}),t.includes("part_name")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Name"}),t.includes("parent_part")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Parent Part"}),t.includes("supplier_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Code"}),t.includes("supplier_name")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Supplier Name"}),t.includes("part_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Status"}),t.includes("dtl_part_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Dtl Part Status"}),t.includes("pack_spec_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Pack Spec Status"}),t.includes("weight_pc")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Weight/Pc (Kg)"}),t.includes("qty_box")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty/Box"})]})}function An({partInfo:t,checked:l}){var r,s;return e.jsxs(e.Fragment,{children:[l.includes("part_no_part")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t.part_no??"-"}),l.includes("part_name")&&e.jsx("td",{className:"align-middle",children:t.part_name??"-"}),l.includes("parent_part")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t.parent_no??"-"}),l.includes("supplier_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((r=t.supplier)==null?void 0:r.supplier_code)??"-"}),l.includes("supplier_name")&&e.jsx("td",{className:"align-middle",children:((s=t.supplier)==null?void 0:s.supplier_name)??"-"}),l.includes("part_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t.part_status??"-"}),l.includes("dtl_part_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t.detail_part_status??"-"}),l.includes("pack_spec_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t.packing_spec_status??"-"}),l.includes("weight_pc")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t.weightPerPc??"-"}),l.includes("qty_box")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t.qtyPerBox??"-"})]})}function Mn({checked:t}){const l=t.includes("packing_plant_current")||t.includes("packing_plant_next"),r=[t.includes("packing_plant_current"),t.includes("packing_plant_next")].filter(Boolean).length,s=t.includes("vanning_plant_current")||t.includes("vanning_plant_next"),a=[t.includes("vanning_plant_current"),t.includes("vanning_plant_next")].filter(Boolean).length,m=t.includes("order_pattern_current")||t.includes("order_pattern_next"),x=[t.includes("order_pattern_current"),t.includes("order_pattern_next")].filter(Boolean).length,u=t.includes("katashiiki"),d=t.includes("packing_process_boxing")||t.includes("packing_process_stacking"),i=[t.includes("packing_process_boxing"),t.includes("packing_process_stacking")].filter(Boolean).length;return e.jsxs(e.Fragment,{children:[l&&e.jsx("th",{colSpan:r,className:"align-middle border text-center tbl-row2-hdr",children:"Packing Plant"}),s&&e.jsx("th",{colSpan:a,className:"align-middle border text-center tbl-row2-hdr",children:"Vanning Plant"}),m&&e.jsx("th",{colSpan:x,className:"align-middle border text-center tbl-row2-hdr",children:"Order Pattern"}),u&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Katashiiki"}),t.includes("importer_line_process")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Importer Line Process"}),t.includes("case_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Case code"}),t.includes("box_number")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Box Number"}),t.includes("renban")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Renban"}),t.includes("renban_eff")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Renban Eff"}),d&&e.jsx("th",{colSpan:i,className:"align-middle border text-center tbl-row2-hdr",children:"Packing Process"})]})}function Dn({checked:t}){return e.jsxs(e.Fragment,{children:[t.includes("packing_plant_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),t.includes("packing_plant_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),t.includes("vanning_plant_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),t.includes("vanning_plant_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),t.includes("order_pattern_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),t.includes("order_pattern_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),t.includes("packing_process_boxing")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Boxing"}),t.includes("packing_process_stacking")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Stacking"})]})}function Ln({pseInfo:t,checked:l}){const{packing_plant_curr:r,packing_plant_next:s,vanning_plant_curr:a,vanning_plant_next:m,order_pattern_curr:x,order_pattern_next:u,katashiki:d,importer_line_process:i,case_code:c,box_number:h,renban:o,renban_eff:p,packing_process_boxing:y,packing_process_stacking:b}=t||{};return e.jsxs(e.Fragment,{children:[l.includes("packing_plant_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:r??"-"}),l.includes("packing_plant_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s??"-"}),l.includes("vanning_plant_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:a??"-"}),l.includes("vanning_plant_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:m??"-"}),l.includes("order_pattern_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:x??"-"}),l.includes("order_pattern_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:u??"-"}),l.includes("katashiiki")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:Array.isArray(d)&&d.length>0?d.map((M,j)=>e.jsxs("span",{className:"badge badge-primary mr-1",children:[M.string," : ",M.number]},j)):"-"}),l.includes("importer_line_process")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:i??"-"}),l.includes("case_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:c??"-"}),l.includes("box_number")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:h??"-"}),l.includes("renban")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:o??"-"}),l.includes("renban_eff")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:p??"-"}),l.includes("packing_process_boxing")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:y??"-"}),l.includes("packing_process_stacking")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:b??"-"})]})}function Tn({checked:t}){return e.jsxs(e.Fragment,{children:[t.includes("dock_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Dock Code"}),t.includes("address")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Address"}),t.includes("process_type")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Process Type"})]})}function En({logisticInfo:t,checked:l}){const{dock_code:r,address_rack:s,process_type:a}=t||{};return e.jsxs(e.Fragment,{children:[l.includes("dock_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:r??"-"}),l.includes("address")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s??"-"}),l.includes("process_type")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:a??"-"})]})}const it={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},content:{position:"relative",background:"#fff",padding:"20px",borderRadius:"5px",maxWidth:"80vw",maxHeight:"80vh"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},image:{maxWidth:"calc(80vw - 40px)",maxHeight:"calc(80vh - 40px)"}};function On({imageUrl:t,isOpen:l,onClose:r}){return!l||!t?null:e.jsx("div",{style:it.overlay,onClick:r,children:e.jsxs("div",{style:it.content,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{style:it.closeButton,onClick:r,children:"×"}),e.jsx("img",{src:t,alt:"Enlarged view",style:it.image})]})})}function Rn({checked:t}){return e.jsxs(e.Fragment,{children:[t.includes("part_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part"}),t.includes("packing_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Packing"}),t.includes("outer_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Outer"}),t.includes("qkp_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qkp"}),t.includes("bkp_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Bkp"})]})}function Ze({files:t}){const[l,r]=n.useState(!1);if(!t||t.length===0)return"-";const s=t[0],a=()=>r(!0),m=()=>r(!1);return e.jsxs(e.Fragment,{children:[e.jsx("img",{src:s,alt:"thumbnail",style:{width:"50px",height:"auto",cursor:"pointer"},onClick:a}),e.jsx(On,{imageUrl:s,isOpen:l,onClose:m})]})}function Fn({images:t,checked:l}){const{part:r,packing:s,outer:a,qkp:m,bkp:x}=t||{};return e.jsxs(e.Fragment,{children:[l.includes("part_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ze,{files:r==null?void 0:r.files})}),l.includes("packing_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ze,{files:s==null?void 0:s.files})}),l.includes("outer_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ze,{files:a==null?void 0:a.files})}),l.includes("qkp_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ze,{files:m==null?void 0:m.files})}),l.includes("bkp_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ze,{files:x==null?void 0:x.files})})]})}function Bn({rows:t,visibleRows:l,page:r,perPage:s,total:a,totalPages:m,goToPage:x,setPerPage:u,checked:d}){var D,C,v,U,w;const i=((D=l[0])==null?void 0:D.cps)||{},c=((v=(C=i.packing)==null?void 0:C.inner)==null?void 0:v.length)||1,h=((w=(U=i.packing)==null?void 0:U.outer)==null?void 0:w.length)||1,p=["part_no_part","part_name","parent_part","supplier_code","supplier_name","part_status","dtl_part_status","pack_spec_status","weight_pc","qty_box"].filter(O=>d.includes(O)).length,y=p>0,M=["packing_plant_current","packing_plant_next","vanning_plant_current","vanning_plant_next","order_pattern_current","order_pattern_next","katashiiki_ad","katashiiki_au","katashiiki_af","katashiiki_ax","importer_line_process","case_code","box_number","renban","renban_eff","packing_process_boxing","packing_process_stacking"].filter(O=>d.includes(O)).length,j=M>0,S=["dock_code","address","process_type"].filter(O=>d.includes(O)).length,N=S>0,I=["part_image","packing_image","outer_image","qkp_image","bkp_image"].filter(O=>d.includes(O)).length,B=I>0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"table-responsive mt-2",style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center",style:{tableLayout:"fixed",width:"auto"},children:[e.jsxs("thead",{style:{fontSize:"8pt"},children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"No"}),e.jsx(Pn,{checked:d}),y&&e.jsx("th",{colSpan:p,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Part Information"}),j&&e.jsx("th",{colSpan:M,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"PSE Information"}),N&&e.jsx("th",{colSpan:S,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Logistic Information"}),B&&e.jsx("th",{colSpan:I,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Images"}),e.jsx("th",{colSpan:c>0?c*2+6:0,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inner Materials"}),e.jsx("th",{colSpan:h>0?h*2+6:0,className:"align-middle border text-center tbl-row1-hdr text-nowrap\\",children:"Outer Materials"})]}),e.jsxs("tr",{children:[e.jsx(_n,{checked:d}),e.jsx(Mn,{checked:d}),e.jsx(Tn,{checked:d}),e.jsx(Rn,{checked:d}),e.jsx(vn,{count:c}),e.jsx(Sn,{count:h})]}),e.jsxs("tr",{children:[e.jsx(Dn,{checked:d}),e.jsx(yn,{count:c}),e.jsx(wn,{count:h})]})]}),e.jsx("tbody",{style:{fontSize:"8pt"},children:l.map((O,F)=>{var L,q;const W=O.cps||{},te=W.pse_info||{},se=W.logistic_info||{},_=W.images||{},K=((L=W.packing)==null?void 0:L.inner)||[],k=((q=W.packing)==null?void 0:q.outer)||[];return W.labor,W.inland,e.jsxs("tr",{children:[e.jsx("td",{children:(r-1)*s+F+1}),e.jsx(In,{mainInfo:O,checked:d}),e.jsx(An,{partInfo:W,checked:d}),e.jsx(Ln,{pseInfo:te,checked:d}),e.jsx(En,{logisticInfo:se,checked:d}),e.jsx(Fn,{images:_,checked:d}),e.jsx(Cn,{data:K,count:c}),e.jsx(kn,{data:k,count:h})]},F)})})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>x(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>x(Math.max(1,r-1)),children:"<"}),[...Array(m).keys()].map(O=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${r===O+1?"btn-primary":"btn-light"}`,onClick:()=>x(O+1),children:O+1},O)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>x(Math.min(m,r+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",a]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[s," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{u(10),x(1)},children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{u(25),x(1)},children:"25"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{u(50),x(1)},children:"50"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})}function Un({onViewDpi:t,onUpload:l,onTemplate:r,onCreateDpi:s,onCreatePci:a,onToggleColumnSelector:m,viewDpiDisabled:x}){return e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:t,title:"View DPI",disabled:x,children:[e.jsx("i",{className:"fas fa-eye"})," View DPI"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:m,title:"Select Columns",children:e.jsx("i",{className:"fas fa-cog"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:l,title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-2",onClick:r,title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})}const Te=[{value:"main_info",label:"Main Info",children:[{value:"destination",label:"Destination"},{value:"model",label:"Model"},{value:"impl_period",label:"Implementation Period"},{value:"cps_no",label:"CPS No"}]},{value:"part_info",label:"Part Info",children:[{value:"part_no_part",label:"Part No"},{value:"part_name",label:"Part Name"},{value:"parent_part",label:"Parent Part"},{value:"supplier_code",label:"Supplier Code"},{value:"supplier_name",label:"Supplier Name"},{value:"part_status",label:"Part Status"},{value:"dtl_part_status",label:"Dtl Part Status"},{value:"pack_spec_status",label:"Pack Spec Status"},{value:"weight_pc",label:"Weight/Pc"},{value:"qty_box",label:"Qty/Box"}]},{value:"pse_info",label:"PSE Info",children:[{value:"packing_plant",label:"Packing Plant",children:[{value:"packing_plant_current",label:"Current"},{value:"packing_plant_next",label:"Next"}]},{value:"vanning_plant",label:"Vanning Plant",children:[{value:"vanning_plant_current",label:"Current"},{value:"vanning_plant_next",label:"Next"}]},{value:"order_pattern",label:"Order Pattern",children:[{value:"order_pattern_current",label:"Current"},{value:"order_pattern_next",label:"Next"}]},{value:"katashiiki",label:"Katashiiki"},{value:"importer_line_process",label:"Importer Line Process"},{value:"case_code",label:"Case Code"},{value:"box_number",label:"Box Number"},{value:"renban",label:"Renban"},{value:"renban_eff",label:"Renban Eff"},{value:"packing_process",label:"Packing Process",children:[{value:"packing_process_boxing",label:"Boxing"},{value:"packing_process_stacking",label:"Stacking"}]}]},{value:"logistic_info",label:"Logistic Info",children:[{value:"dock_code",label:"Dock Code"},{value:"address",label:"Address"},{value:"process_type",label:"Process Type"}]},{value:"images",label:"Images",children:[{value:"part_image",label:"Part"},{value:"packing_image",label:"Packing"},{value:"outer_image",label:"Outer"},{value:"qkp_image",label:"QKP"},{value:"bkp_image",label:"BKP"}]},{value:"inner_materials",label:"Inner Materials",children:[{value:"box",label:"Box",children:[{value:"box_mat_no",label:"Mat No"},{value:"box_length",label:"Length"},{value:"box_width",label:"Width"},{value:"box_height",label:"Height"},{value:"box_volume_inner",label:"Volume Inner"},{value:"box_volume_outer",label:"Volume Outer"},{value:"box_usage",label:"Usage"},{value:"box_source",label:"Source"}]},...[...Array(9).keys()].map(t=>({value:`outer_${t+1}`,label:`Outer ${t+1}`,children:[{value:`outer_${t+1}_mat_no`,label:"Mat No"},{value:`outer_${t+1}_usage`,label:"Usage"}]}))]},{value:"outer_materials",label:"Outer Materials",children:[{value:"module",label:"Module",children:[{value:"module_mat_no",label:"Mat No"},{value:"module_length",label:"Length"},{value:"module_width",label:"Width"},{value:"module_height",label:"Height"},{value:"module_volume_inner",label:"Volume Inner"},{value:"module_usage",label:"Usage"}]}]}],Hn=({isOpen:t,toggle:l,checked:r,onCheckedChange:s})=>{const[a,m]=n.useState([]);n.useEffect(()=>{if(t){let h=[...r],o=!1;const p=y=>{y.forEach(b=>{b.children&&(b.children.every(j=>h.includes(j.value))&&!h.includes(b.value)&&(h.push(b.value),o=!0),p(b.children))})};p(Te),o&&s([...new Set(h)])}},[t,r,s]);const x=(h,o=[])=>(h.children&&h.children.forEach(p=>{o.push(p.value),x(p,o)}),o),u=(h,o)=>{var p;for(const y of o){if((p=y.children)!=null&&p.some(b=>b.value===h))return y;if(y.children){const b=u(h,y.children);if(b)return b}}return null},d=h=>{let o=[...r];const p=o.includes(h.value),y=x(h);if(p){o=o.filter(M=>M!==h.value&&!y.includes(M));let b=u(h.value,Te);for(;b;)o=o.filter(M=>M!==b.value),b=u(b.value,Te)}else{o.push(h.value),h.children&&o.push(...y);let b=u(h.value,Te);for(;b;)b.children.every(j=>o.includes(j.value))&&(o.includes(b.value)||o.push(b.value)),b=u(b.value,Te)}s([...new Set(o)])},i=h=>{m(o=>o.includes(h)?o.filter(p=>p!==h):[...o,h])},c=(h,o=0)=>h.map(p=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",paddingLeft:`${o*20}px`},children:[p.children&&e.jsx("span",{style:{cursor:"pointer",marginRight:"5px"},onClick:()=>i(p.value),children:a.includes(p.value)?"−":"+"}),e.jsx(Is,{check:!0,style:{margin:0,marginLeft:p.children?"0":"20px"},children:e.jsxs(_s,{check:!0,children:[e.jsx(As,{type:"checkbox",checked:r.includes(p.value),onChange:()=>d(p)})," ",o===0?e.jsx("strong",{children:p.label}):p.label]})})]}),p.children&&a.includes(p.value)&&e.jsx("div",{children:c(p.children,o+1)})]},p.value));return e.jsxs(Ss,{isOpen:t,toggle:l,zIndex:9999,size:"lg",children:[e.jsx(ws,{toggle:l,children:"Column Selection"}),e.jsx(ks,{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:c(Te.slice(0,3))}),e.jsx("div",{className:"col-md-4",children:c(Te.slice(3,5))}),e.jsx("div",{className:"col-md-4",children:c(Te.slice(5))})]})}),e.jsxs(Ps,{children:[e.jsx(At,{color:"primary",onClick:l,children:"Apply"}),e.jsx(At,{color:"secondary",onClick:l,children:"Cancel"})]})]})};function gt({show:t=!1,onClose:l,onSelect:r,zIndex:s=4e3,mode:a="single"}){const[m,x]=n.useState([]),[u,d]=n.useState(""),[i,c]=n.useState(""),[h,o]=n.useState({code:"",name:""}),[p,y]=n.useState(!1),[b,M]=n.useState(null),[j,f]=n.useState(1),[S,N]=n.useState(10);if(n.useEffect(()=>{fetch("/suppliers.json").then(_=>_.json()).then(_=>x(_)).catch(_=>console.error("Failed to load suppliers:",_))},[]),n.useEffect(()=>(t?(d(""),c(""),o({code:"",name:""}),y(!1),M(null),f(1),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[t]),!t)return null;function P(){f(1),y(!0),o({code:u,name:i})}function I(){f(1),d(""),c(""),o({code:"",name:""}),y(!1)}function B(){if(!p)return[];const _=h.code.trim().toLowerCase(),K=h.name.trim().toLowerCase();return m.filter(k=>!(_&&!k.code.toLowerCase().includes(_)||K&&!k.name.toLowerCase().includes(K)))}const D=B(),C=D.length,v=Math.max(1,Math.ceil(C/S)),U=D.slice((j-1)*S,j*S);function w(_){M(a==="multi"?K=>({...K,[_]:!K[_]}):_)}function O(){if(b!==null){const _=D[b];r&&r(_),l&&l()}else l&&l()}function F(_){f(Math.min(Math.max(1,_),v))}const W={flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},te={position:"sticky",top:0,zIndex:5,background:"white",padding:"1rem 1rem 0.5rem 1rem",borderBottom:"1px solid #e9ecef"},se={overflow:"auto",padding:"0 1rem 1rem 1rem"};return e.jsx("div",{className:"supplier-picker-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:s,display:"flex",alignItems:"center",justifyContent:"center"},onMouseDown:_=>{_.target===_.currentTarget&&l()},children:e.jsxs("div",{className:"supplier-picker-modal",style:{background:"#fff",borderRadius:8,boxShadow:"0 2px 16px rgba(0,0,0,0.2)",zIndex:s+1,width:"100%",maxWidth:800,minHeight:400,display:"flex",flexDirection:"column",height:"min(90vh, 700px)"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"Select Supplier"})}),e.jsx("button",{type:"button",className:"close",onClick:l,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:W,children:[e.jsxs("div",{style:te,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12 col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsx("input",{value:u,onChange:Q(d),className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{value:i,onChange:Q(c),className:"form-control form-control-sm"})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"col-12 text-right mb-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:P,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:I,children:[e.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]})})]}),e.jsx("div",{style:se,children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-striped table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:36}}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Address"})]})}),e.jsx("tbody",{children:U.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:p?"No Data Found":"Please click Search to begin"})}):U.map((_,K)=>{const k=(j-1)*S+K;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"radio",name:"supplier-picker-radio",checked:b===k,onChange:()=>w(k)})}),e.jsx("td",{children:_.code}),e.jsx("td",{children:_.name}),e.jsx("td",{children:_.address})]},k)})})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>F(1),disabled:j<=1,children:"<<"}),e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>F(j-1),disabled:j<=1,children:"<"}),e.jsxs("span",{className:"mr-1",children:["Page ",j," of ",v]}),e.jsx("button",{className:"btn btn-sm btn-light",onClick:()=>F(j+1),disabled:j>=v,children:">"}),e.jsx("button",{className:"btn btn-sm btn-light ml-1",onClick:()=>F(v),disabled:j>=v,children:">>"}),e.jsxs("span",{className:"ml-2 small text-muted",children:["Total: ",C]})]}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:O,disabled:b===null,children:"Add Selected"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:l,children:"Cancel"})]})]})]})})}function Wn(){const[t,l]=n.useState(""),[r,s]=n.useState(""),[a,m]=n.useState([]),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(""),[o,p]=n.useState(!1),[y,b]=n.useState(!1),[M,j]=n.useState(!1),[f,S]=n.useState(!1),[N,P]=n.useState(!1),[I,B]=n.useState(!1),[D,C]=n.useState(!1),[v,U]=n.useState(["main_info","destination","model","impl_period","cps_no","part_info","part_no_part","part_name","parent_part","supplier_code","supplier_name","part_status","dtl_part_status","pack_spec_status","weight_pc","qty_box","pse_info","packing_plant","packing_plant_current","packing_plant_next","vanning_plant","vanning_plant_current","vanning_plant_next","order_pattern","order_pattern_current","order_pattern_next","katashiiki","importer_line_process","case_code","box_number","renban","renban_eff","packing_process","packing_process_boxing","packing_process_stacking","logistic_info","dock_code","address","process_type","images","part_image","packing_image","outer_image","qkp_image","bkp_image"]),[w,O]=n.useState([]),[F,W]=n.useState([]),[te,se]=n.useState(!1),[_,K]=n.useState(10),[k,L]=n.useState(1),q=w.length,Z=Math.max(1,Math.ceil(q/_));n.useEffect(()=>{fetch("/packing-cost-fe/dpi.json").then($=>{if(!$.ok)throw new Error("Network response was not ok");return $.json()}).then($=>{const de=[...$.dpiData||[]].sort((re,xe)=>(xe.implementation_period||"").localeCompare(re.implementation_period||""));W(de),O([]),se(!1)}).catch($=>{console.error("Error fetching DPI data:",$)})},[]);function R(){if(se(!0),!t&&(!a||a.length===0)&&!r&&!x&&!d&&!c){O(F),L(1);return}console.log("Filtering with modelCfc:",t);let $=[...F];if(t&&($=$.filter(de=>{var re;return(re=de.model_cfc)==null?void 0:re.toLowerCase().includes(t.toLowerCase())})),a&&a.length>0){const de=a.map(re=>re.toLowerCase());$=$.filter(re=>{var xe,Ne,je;return de.includes((xe=re.part_no)==null?void 0:xe.toLowerCase())||de.includes((je=(Ne=re.cps)==null?void 0:Ne.part_no)==null?void 0:je.toLowerCase())})}r&&($=$.filter(de=>{var re,xe,Ne,je;return(je=(Ne=(xe=(re=de.cps)==null?void 0:re.model)==null?void 0:xe.destination)==null?void 0:Ne.code)==null?void 0:je.toLowerCase().includes(r.toLowerCase())})),x&&($=$.filter(de=>{var re,xe,Ne;return(Ne=(xe=(re=de.cps)==null?void 0:re.supplier)==null?void 0:xe.supplier_code)==null?void 0:Ne.toLowerCase().includes(x.toLowerCase())})),d&&($=$.filter(de=>{var re,xe;return(xe=(re=de.cps)==null?void 0:re.cps_no)==null?void 0:xe.toLowerCase().includes(d.toLowerCase())})),c&&($=$.filter(de=>{var re;return(re=de.implementation_period)==null?void 0:re.toLowerCase().includes(c.toLowerCase())}));const ae=$.sort((de,re)=>(re.implementation_period||"").localeCompare(de.implementation_period||""));O(ae),L(1),se(!1)}function A(z){z&&z.model_cfc&&l(z.model_cfc),j(!1)}function Y(z){z&&s(z.destCode),B(!1)}function le(z){z&&u(z.code),C(!1)}function X(z){if(z&&z.length>0){const $=z.map(ae=>ae.partNo);m(ae=>[...new Set([...ae,...$])])}b(!1)}function ne(){l(""),s(""),m([]),u(""),i(""),h(""),O(F),L(1),se(!1)}function oe(){p(!0)}function T(){alert("Create PCI - placeholder")}function J(){alert("Upload placeholder")}function H(){const z=document.createElement("a");z.href="/packing-cost-fe/DPI Upload Template.xlsx",z.setAttribute("download","DPI Upload Template.xlsx"),document.body.appendChild(z),z.click(),document.body.removeChild(z)}function ee(){P(z=>!z)}function g(z){U(z)}function E(){const z=window.open("","_blank","fullscreen=yes");z.document.write("<html><head><title>DPI View</title>"),z.document.write('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />'),z.document.write('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">'),z.document.write("</head><body>"),z.document.write('<button id="download-pdf">Download PDF</button>'),z.document.write('<button id="download-csv">Download CSV</button>'),z.document.write('<div id="dpi-content" class="card card-outline card-primary"></div>'),z.document.write("</body></html>"),z.document.close();const $=document.getElementById("result-section").innerHTML,ae=z.document.getElementById("dpi-content");ae&&(ae.innerHTML=$),z.document.getElementById("download-pdf").addEventListener("click",()=>z.print()),z.document.getElementById("download-csv").addEventListener("click",()=>{const de=ae.querySelector("table");let re=[];for(const De of de.rows){const _e=[];for(const We of De.cells)_e.push(We.innerText);re.push(_e.join(","))}const xe="data:text/csv;charset=utf-8,"+re.join("\\n"),Ne=encodeURI(xe),je=document.createElement("a");je.setAttribute("href",Ne),je.setAttribute("download","dpi_data.csv"),document.body.appendChild(je),je.click(),document.body.removeChild(je)})}function G(z){const $=Math.min(Math.max(1,z),Z);L($)}const V=w.slice((k-1)*_,k*_);function ie(z){const $={dpiNo:z.dpiNo||"",refDpiNo:z.refDpiNo||"",issuedDate:z.issuedDate||"",effectiveDate:z.effectiveDate||"",cfcPjt:z.cfcPjt||"",model:z.model||"",parts:z.parts||[],numCps:z.numCps||0,supplier:z.supplier||"",fromUser:z.from||"",toUser:z.to||"",status:"Draft",raw:z};O(ae=>[$,...ae]),p(!1),L(1)}function ue(z){const $={dpiNo:z.dpiNo||"",refDpiNo:z.refDpiNo||"",issuedDate:z.issuedDate||"",effectiveDate:z.effectiveDate||"",cfcPjt:z.cfcPjt||"",model:z.model||"",parts:z.parts||[],numCps:z.numCps||0,supplier:z.supplier||"",fromUser:z.from||"",toUser:z.to||"",status:"Submitted",raw:z};O(ae=>[$,...ae]),p(!1),L(1)}const fe={modelCfc:t,destCode:r,partNo:a,supplierCode:x,cpsNo:d,implementationPeriod:c},Ce={setModelCfc:l,setDestCode:s,setPartNo:m,setSupplierCode:u,setCpsNo:i,setImplementationPeriod:h};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"DPI List"})}),e.jsx(Un,{onViewDpi:E,onUpload:J,onTemplate:H,onCreateDpi:oe,onCreatePci:T,onToggleColumnSelector:ee,viewDpiDisabled:w.length===0})]}),e.jsx(gn,{filters:fe,setters:Ce,onSearch:R,onClear:ne,onPartSearch:()=>b(!0),onModelSearch:()=>j(!0),onDpiSearch:()=>S(!0),onSearchDestination:()=>B(!0),onSearchSupplier:()=>C(!0)}),e.jsx("div",{id:"result-section",children:e.jsx(Bn,{rows:w,visibleRows:V,page:k,perPage:_,total:q,totalPages:Z,goToPage:G,setPerPage:K,checked:v,hasSearched:te})})]}),e.jsx(Nn,{show:o,onClose:()=>p(!1),onSave:ie,onSubmit:ue}),e.jsx(He,{show:y,onClose:()=>b(!1),onSelect:X,mode:"multi"}),e.jsx(Ke,{show:M,onClose:()=>j(!1),onAdd:A,selectionMode:"single"}),e.jsx(Nt,{show:I,onClose:()=>B(!1),onAdd:Y,selectionMode:"single"}),e.jsx(gt,{show:D,onClose:()=>C(!1),onSelect:le,mode:"single"}),e.jsx(Hn,{isOpen:N,toggle:ee,checked:v,onCheckedChange:g})]})}function $n({show:t,onClose:l,onPick:r,initialSelected:s=[]}){const[a,m]=n.useState([]),[x,u]=n.useState([]),[d,i]=n.useState(1),[c,h]=n.useState(10),[o,p]=n.useState({}),[y,b]=n.useState({code:"",country:""});n.useEffect(()=>{if(t){m(et),u(et);const C={};s.forEach(v=>{C[v]=!0}),p(C)}},[t,s]);function M(){let C=a;y.code&&(C=C.filter(v=>v.destCode.toLowerCase().includes(y.code.toLowerCase()))),y.country&&(C=C.filter(v=>v.country.toLowerCase().includes(y.country.toLowerCase()))),u(C),i(1)}function j(){b({code:"",country:""}),u(a),i(1)}function f(C){p(v=>({...v,[C]:!v[C]}))}function S(C){const v={};C.target.checked&&B.forEach(U=>v[U.destCode]=!0),p(v)}function N(){const C=Object.keys(o).filter(U=>o[U]),v=a.filter(U=>C.includes(U.destCode));r(v)}const P=x.length,I=Math.ceil(P/c),B=x.slice((d-1)*c,d*c),D=B.length>0&&B.every(C=>o[C.destCode]);return t?e.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Destination Code Picker"}),e.jsx("button",{type:"button",className:"close",onClick:l,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"card card-outline card-primary",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-end",children:[e.jsx("div",{className:"col-md-5",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Destination Code"}),e.jsx("input",{type:"text",className:"form-control",value:y.code,onChange:C=>b(v=>({...v,code:C.target.value}))})]})}),e.jsx("div",{className:"col-md-5",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Country"}),e.jsx("input",{type:"text",className:"form-control",value:y.country,onChange:C=>b(v=>({...v,country:C.target.value}))})]})}),e.jsx("div",{className:"col-md-2",children:e.jsxs("div",{className:"form-group",children:[e.jsx("button",{className:"btn btn-primary",onClick:M,children:"Search"}),e.jsx("button",{className:"btn btn-secondary ml-2",onClick:j,children:"Clear"})]})})]})})}),e.jsxs("div",{className:"card mt-3",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Results"})}),e.jsx("div",{className:"card-body p-0",style:{maxHeight:"300px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-bordered table-hover table-head-fixed",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:D,onChange:S})}),e.jsx("th",{children:"Destination Code"}),e.jsx("th",{children:"Country"}),e.jsx("th",{children:"Company"})]})}),e.jsx("tbody",{children:B.map(C=>e.jsxs("tr",{onClick:()=>f(C.destCode),style:{cursor:"pointer",fontSize:"0.8rem"},children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:!!o[C.destCode],readOnly:!0})}),e.jsx("td",{children:C.destCode}),e.jsx("td",{children:C.country}),e.jsx("td",{children:C.company})]},C.destCode))})]})}),e.jsxs("div",{className:"card-footer d-flex justify-content-between",children:[e.jsx("div",{children:e.jsxs("select",{value:c,onChange:C=>h(Number(C.target.value)),className:"form-control-sm",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"})]})}),e.jsx("nav",{children:e.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[e.jsx("li",{className:`page-item ${d===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(C=>C-1),children:"«"})}),[...Array(I).keys()].map(C=>e.jsx("li",{className:`page-item ${C+1===d?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(C+1),children:C+1})},C)),e.jsx("li",{className:`page-item ${d===I?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>i(C=>C+1),children:"»"})})]})})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:N,children:"Pick Selected"})]})]})})}):null}function qn({form:t,change:l,setShowPartPicker:r,setShowModelPicker:s,setShowDestCodePicker:a,handleCalculate:m,handleClear:x,onModelRemove:u,onPartRemove:d,onModelCfcKeyDown:i,onPartKeyDown:c,onDestCodeRemove:h}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model CFC"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:[t.modelCfc.map(o=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[o,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>u(o),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},o)),e.jsx("input",{type:"text",name:"modelCfcInput",value:t.modelCfcInput,onChange:l,onKeyDown:i,style:{border:"none",outline:"none",flexGrow:1,padding:0,margin:0,height:"20px"}})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Model CFC",onClick:()=>s(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Implementation Period"}),e.jsxs("select",{className:"form-control form-control-sm",name:"period",value:t.period,onChange:l,children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"01.2025"}),e.jsx("option",{children:"02.2025"})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:Array.isArray(t.destCode)&&t.destCode.map(o=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[o,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>h(o),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},o))}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Dest Code",onClick:()=>a(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Part"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:[Array.isArray(t.part)&&t.part.map(o=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[o,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>d(o),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},o)),e.jsx("input",{type:"text",name:"partInput",value:t.partInput,onChange:l,onKeyDown:c,style:{border:"none",outline:"none",flexGrow:1,padding:0,margin:0,height:"20px"}})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part",onClick:()=>r(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-end my-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:m,children:[e.jsx("i",{className:"fas fa-calculator mr-1"})," Calculate"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:x,children:[e.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]})]})}function Kn({count:t=10}){return e.jsx(e.Fragment,{children:Array.from({length:t}).map((l,r)=>e.jsxs(Ie.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Part No"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Qty"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Price"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Sum"})]},`mat-leaf-hdr-${r}`))})}function zn({arr:t=[],count:l=10}){const r=[];for(let s=0;s<l;s++){const a=t[s];r.push(e.jsxs(Ie.Fragment,{children:[e.jsx("td",{className:"align-middle",children:(a==null?void 0:a.materialNo)??"-"}),e.jsx("td",{className:"align-middle",children:(a==null?void 0:a.qty)??"-"}),e.jsx("td",{className:"align-middle",children:(a==null?void 0:a.price)??"-"}),e.jsx("td",{className:"align-middle",children:(a==null?void 0:a.sum)??"-"})]},`mat-leaf-cell-${s}`))}return e.jsx(e.Fragment,{children:r})}const Yt=({part:t})=>{var d,i,c,h,o,p,y;const[l,r]=n.useState({inner:!0,outer:!0,labor:!0,inland:!0}),s=b=>{r(M=>({...M,[b]:!M[b]}))};if(!t)return null;const a=b=>{if(b==null||b==="")return"";const M=Number(b);return isNaN(M)?String(b):M.toFixed(2)},m=(b,M)=>{const j=M.toLowerCase(),f=l[j],S=10,N=[];for(let P=1;P<=S;P++)N.push(e.jsxs("th",{colSpan:"4",children:["Material ",P]},`material-header-${M}-${P}`));return e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>s(j),children:[e.jsx("i",{className:`fas ${f?"fa-chevron-down":"fa-chevron-right"} mr-2`}),M.toUpperCase()]}),f&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"2000px"},children:[e.jsxs("thead",{style:{backgroundColor:"#e9ecef"},children:[e.jsx("tr",{children:N}),e.jsx("tr",{children:e.jsx(Kn,{count:S})})]}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx(zn,{arr:b,count:S})})})]})})]})},x=(b,M)=>{const j=l.labor;return!b||!M?null:e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>s("labor"),children:[e.jsx("i",{className:`fas ${j?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"LABOR"]}),j&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"1500px"},children:[e.jsx("thead",{style:{backgroundColor:"#e9ecef"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Receiving"}),e.jsx("th",{children:"Inspection"}),e.jsx("th",{children:"Delivery Course (Pallet)"}),e.jsx("th",{children:"Supply"}),e.jsx("th",{children:"Binding"}),e.jsx("th",{children:"Sorting & Supply"}),e.jsx("th",{children:"Pick & Packing"}),e.jsx("th",{children:"Vanning"}),e.jsx("th",{children:"Box/Valet Return"}),e.jsx("th",{children:"Mix Van"}),e.jsx("th",{children:"Lashing"}),e.jsx("th",{children:"Total Time"}),e.jsx("th",{children:"Requirement"}),e.jsx("th",{children:"Current DL"}),e.jsx("th",{children:"IDL"}),e.jsx("th",{children:"Facility Others"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:a(b.receiving)}),e.jsx("td",{children:a(b.inspection)}),e.jsx("td",{children:a(b.deliveryCourse)}),e.jsx("td",{children:a(b.supply)}),e.jsx("td",{children:a(b.binding)}),e.jsx("td",{children:a(b.sortingSupply)}),e.jsx("td",{children:a(b.pickPacking)}),e.jsx("td",{children:a(b.vanning)}),e.jsx("td",{children:a(b.boxValetReturn)}),e.jsx("td",{children:a(b.mixVan)}),e.jsx("td",{children:a(b.lashing)}),e.jsx("td",{children:a(b.totalTime)}),e.jsx("td",{children:a(b.requirement)}),e.jsx("td",{children:a(b.currentDL)}),e.jsx("td",{children:a(M.idl)}),e.jsx("td",{children:a(M.facility)})]})})]})})]})},u=b=>{const M=l.inland;return b?e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>s("inland"),children:[e.jsx("i",{className:`fas ${M?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"INLAND"]}),M&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"800px"},children:[e.jsx("thead",{style:{backgroundColor:"#e9ecef"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Pack Time (V-PASS)"}),e.jsx("th",{children:"Inland Cost"}),e.jsx("th",{children:"Inland Cost M3"}),e.jsx("th",{children:"Diff"}),e.jsx("th",{children:"Milkrun cost"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:b.packing_time||"-"}),e.jsx("td",{children:a(b.inland_cost)||"-"}),e.jsx("td",{children:a(b.inlandCostM3)||"-"}),e.jsx("td",{children:b.diff||"-"}),e.jsx("td",{children:a(b.milkrun_cost)||"-"})]})})]})})]}):null};return e.jsx("td",{colSpan:"32",children:e.jsxs("div",{className:"p-2",children:[m((i=(d=t.cps)==null?void 0:d.packing)==null?void 0:i.inner,"Inner"),m((h=(c=t.cps)==null?void 0:c.packing)==null?void 0:h.outer,"Outer"),x((o=t.cps)==null?void 0:o.manhour,(p=t.cps)==null?void 0:p.labor),u((y=t.cps)==null?void 0:y.inland)]})})},be=t=>{if(t==null||t==="")return"";const l=Number(t);return isNaN(l)?String(t):l.toFixed(2)};function Vn({parts:t,selectedRows:l,handleCheckboxChange:r,page:s,perPage:a,remarks:m,handleRemarkChange:x,expandedRows:u,handleToggleExpand:d,threshold_percentage:i=5}){const c=Array.isArray(t)?t:[];return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm text-center w-100",style:{fontSize:"8pt"},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{backgroundColor:"#dee2e6"},children:[e.jsx("th",{rowSpan:2,style:{width:40},children:e.jsx("input",{type:"checkbox",checked:c.length>0&&c.every((h,o)=>l&&l[(s-1)*a+o]),onChange:h=>{const o=h.target.checked,p={...l||{}};c.forEach((y,b)=>{p[(s-1)*a+b]=o}),r(p)}})}),e.jsx("th",{rowSpan:2,style:{width:40}}),e.jsx("th",{rowSpan:2,style:{width:40},children:"No"}),e.jsx("th",{rowSpan:2,children:"Model CFC"}),e.jsx("th",{rowSpan:2,children:"Dest Code"}),e.jsx("th",{rowSpan:2,children:"Implementation Period"}),e.jsx("th",{rowSpan:2,children:"Part No"}),e.jsx("th",{rowSpan:2,children:"Suffix"}),e.jsx("th",{rowSpan:2,children:"Part Name"}),e.jsx("th",{rowSpan:2,children:"Parent Part No"}),e.jsx("th",{rowSpan:2,children:"Supplier Code"}),e.jsx("th",{rowSpan:2,children:"Supplier Name"}),e.jsx("th",{rowSpan:2,children:"L"}),e.jsx("th",{rowSpan:2,children:"W"}),e.jsx("th",{rowSpan:2,children:"H"}),e.jsx("th",{rowSpan:2,children:"Box M3"}),e.jsx("th",{colSpan:3,children:"INNER"}),e.jsx("th",{colSpan:3,children:"OUTER"}),e.jsx("th",{colSpan:3,children:"MATERIAL"}),e.jsx("th",{colSpan:3,children:"LABOR"}),e.jsx("th",{colSpan:3,children:"INLAND"}),e.jsx("th",{colSpan:3,children:"TOTAL"}),e.jsx("th",{rowSpan:2,children:"Remark"})]}),e.jsx("tr",{style:{backgroundColor:"#dee2e6"},children:[...Array(6)].map((h,o)=>e.jsxs(Ie.Fragment,{children:[e.jsx("th",{children:"Prev"}),e.jsx("th",{children:"Current"}),e.jsx("th",{children:"Diff"})]},o))})]}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:35,className:"text-center py-4 text-muted",children:"No Data Found"})}):c.map((h,o)=>{var j,f,S,N,P,I,B,D,C,v,U,w,O,F,W,te,se,_,K,k,L,q,Z,R,A,Y,le,X,ne,oe,T,J,H,ee,g,E,G,V,ie,ue,fe,Ce;if(!h)return null;const p=(s-1)*a+o,y=u&&u[p];Number(((f=(j=h.subtotals)==null?void 0:j.total)==null?void 0:f.total)??0),Number(((N=(S=h.subtotals)==null?void 0:S.total)==null?void 0:N.prev_year)??0);const b=Number(((I=(P=h.subtotals)==null?void 0:P.total)==null?void 0:I.diff)??0),M=b>i;return e.jsxs(Ie.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:!!(l&&l[p]),onChange:z=>{const $={...l||{},[p]:z.target.checked};r($)}})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-xs btn-link",onClick:()=>d(p),children:e.jsx("i",{className:`fas ${y?"fa-chevron-up":"fa-chevron-down"}`})})}),e.jsx("td",{children:p+1}),e.jsx("td",{children:h.modelCfc}),e.jsx("td",{children:h.destination}),e.jsx("td",{children:h.implementationPeriod}),e.jsx("td",{children:h.partNo}),e.jsx("td",{children:h.suffix}),e.jsx("td",{children:h.partName}),e.jsx("td",{children:h.parentPartNo}),e.jsx("td",{children:h.supplierCode}),e.jsx("td",{children:h.supplierName}),e.jsx("td",{children:be(h.L)}),e.jsx("td",{children:be(h.W)}),e.jsx("td",{children:be(h.H)}),e.jsx("td",{children:be(h.boxM3)}),e.jsx("td",{children:be((D=(B=h.subtotals)==null?void 0:B.inner)==null?void 0:D.prev_year)}),e.jsx("td",{children:be((v=(C=h.subtotals)==null?void 0:C.inner)==null?void 0:v.total)}),e.jsx("td",{children:be((w=(U=h.subtotals)==null?void 0:U.inner)==null?void 0:w.diff)}),e.jsx("td",{children:be((F=(O=h.subtotals)==null?void 0:O.outer)==null?void 0:F.prev_year)}),e.jsx("td",{children:be((te=(W=h.subtotals)==null?void 0:W.outer)==null?void 0:te.total)}),e.jsx("td",{children:be((_=(se=h.subtotals)==null?void 0:se.outer)==null?void 0:_.diff)}),e.jsx("td",{children:be((k=(K=h.subtotals)==null?void 0:K.material)==null?void 0:k.prev_year)}),e.jsx("td",{children:be((q=(L=h.subtotals)==null?void 0:L.material)==null?void 0:q.total)}),e.jsx("td",{children:be((R=(Z=h.subtotals)==null?void 0:Z.material)==null?void 0:R.diff)}),e.jsx("td",{children:be((Y=(A=h.subtotals)==null?void 0:A.labor)==null?void 0:Y.prev_year)}),e.jsx("td",{children:be((X=(le=h.subtotals)==null?void 0:le.labor)==null?void 0:X.total)}),e.jsx("td",{children:be((oe=(ne=h.subtotals)==null?void 0:ne.labor)==null?void 0:oe.diff)}),e.jsx("td",{children:be((J=(T=h.subtotals)==null?void 0:T.inland)==null?void 0:J.prev_year)}),e.jsx("td",{children:be((ee=(H=h.subtotals)==null?void 0:H.inland)==null?void 0:ee.total)}),e.jsx("td",{children:be((E=(g=h.subtotals)==null?void 0:g.inland)==null?void 0:E.diff)}),e.jsx("td",{children:be((V=(G=h.subtotals)==null?void 0:G.total)==null?void 0:V.prev_year)}),e.jsx("td",{children:be((ue=(ie=h.subtotals)==null?void 0:ie.total)==null?void 0:ue.total)}),e.jsx("td",{style:{color:b>i?"red":void 0,fontWeight:b>i?"bold":void 0},children:be((Ce=(fe=h.subtotals)==null?void 0:fe.total)==null?void 0:Ce.diff)}),e.jsx("td",{children:M?e.jsx("textarea",{className:"form-control form-control-sm",style:{minWidth:220,width:"100%"},value:m&&m[p]||"",onChange:z=>x(p,z.target.value),placeholder:"Enter remark",rows:3}):null})]}),y&&e.jsx("tr",{className:"expandable-row",children:e.jsx(Yt,{part:h})})]},p)})})]})})}function Gn({page:t,totalPages:l,goToPage:r,perPage:s}){return e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-2",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>r(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>r(Math.max(1,t-1)),children:"<"}),[...Array(l).keys()].map(a=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${t===a+1?"btn-primary":"btn-light"}`,onClick:()=>r(a+1),children:a+1},a)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>r(Math.min(l,t+1)),children:">"})]}),e.jsx("div",{className:"form-inline small",children:e.jsxs("span",{className:"mr-3",children:[s," per page"]})})]})}const ft={part:[],partInput:"",period:"All",destCode:[],modelCfc:[],modelCfcInput:"",type:"PxP"};function Yn({show:t=!1,onClose:l,onSave:r}){const[s,a]=n.useState(ft),[m,x]=n.useState([]),[u,d]=n.useState([]),[i,c]=n.useState(5),[h,o]=n.useState(1),[p,y]=n.useState(!1),[b,M]=n.useState(!1),[j,f]=n.useState(!1),[S,N]=n.useState({}),[P,I]=n.useState({}),[B,D]=n.useState({}),[C,v]=n.useState([]);if(n.useEffect(()=>(t?(a(ft),x([]),d([]),o(1),D({}),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[t]),n.useEffect(()=>{fetch("/packing-cost-fe/generatedData.json").then(E=>E.json()).then(E=>{v(E.cpsData)}).catch(E=>console.error("Error loading generated data:",E))},[]),!t)return null;function U(g){const{name:E,value:G}=g.target;a(V=>({...V,[E]:G}))}function w(g){if(g.key===" "&&s.modelCfcInput.trim()){g.preventDefault();const E=s.modelCfcInput.trim();a(G=>G.modelCfc.includes(E)?{...G,modelCfcInput:""}:{...G,modelCfc:[...G.modelCfc,E],modelCfcInput:""})}}function O(g){if(g.key===" "&&s.partInput.trim()){g.preventDefault();const E=s.partInput.trim();a(G=>G.part.includes(E)?{...G,partInput:""}:{...G,part:[...G.part,E],partInput:""}),d(G=>G.some(ie=>ie.partNo===E)?G:[...G,{partNo:E}])}}function F(){addPart()}const W=g=>String(g??"").trim().toUpperCase(),te=()=>{var G,V;if(!C||C.length===0){console.error("CPS data is not loaded yet."),x([]);return}let g=C;if(((G=s.modelCfc)==null?void 0:G.length)>0){const ie=new Set(s.modelCfc.map(W));g=C.filter(ue=>ie.has(W(ue.model_cfc)))}let E=[];(u==null?void 0:u.length)>0?E=u.flatMap(ie=>{const ue=W(ie.partNo),fe=g.filter(z=>W(z.part_no??z.partNo)===ue);return fe.length>0?fe.map(z=>_(z,ie)):ie.partName?[{...ie,partNo:ie.partNo,parentNo:ie.parentPartNo??ie.parentNo??"",supplierCode:ie.supplierCode??ie.supplierId??"",calculationTime:new Date().toISOString()}]:[{partNo:ie.partNo,description:"NOT FOUND",calculationTime:new Date().toISOString()}]}):((V=s.modelCfc)==null?void 0:V.length)>0&&(E=g.map(_)),x(E)};function se(g){if(g==null)return"0%";if(typeof g=="string")return g.includes("%")?g:`${g}%`;const E=Number(g);return Number.isFinite(E)?`${E}%`:"0%"}function _(g,E){var z,$,ae,de,re,xe,Ne,je,De,_e,We,$e,ze,Oe,Ve,Re,Ge,Fe,Ye,Be,Je;const G=(g==null?void 0:g.subtotals)||{},V=((z=g==null?void 0:g.cps)==null?void 0:z.packing)||{},ie=(E==null?void 0:E.L)??(g==null?void 0:g.L)??"",ue=(E==null?void 0:E.W)??(g==null?void 0:g.W)??"",fe=(E==null?void 0:E.H)??(g==null?void 0:g.H)??"",Ce=(E==null?void 0:E.boxM3)??(g==null?void 0:g.boxM3)??"";return{modelCfc:(g==null?void 0:g.model_cfc)??(g==null?void 0:g.modelCfc)??"",destination:(g==null?void 0:g.destination)??"",implementationPeriod:(g==null?void 0:g.implementation_period)??"",partNo:(g==null?void 0:g.part_no)??(g==null?void 0:g.partNo)??(E==null?void 0:E.partNo)??"",suffix:(g==null?void 0:g.suffix)??(E==null?void 0:E.suffix)??"",partName:(($=g==null?void 0:g.cps)==null?void 0:$.part_name)??(g==null?void 0:g.partName)??(E==null?void 0:E.partName)??"N/A",parentPartNo:(E==null?void 0:E.parentPartNo)??"",parentNo:(g==null?void 0:g.parentNo)??(E==null?void 0:E.parentNo)??"",supplierCode:(g==null?void 0:g.supplierCode)??(E==null?void 0:E.supplierId)??"",supplierName:(g==null?void 0:g.supplierName)??(E==null?void 0:E.supplierName)??"",L:ie,W:ue,H:fe,boxM3:Ce,cpsNo:(g==null?void 0:g.cpsNo)??((ae=g==null?void 0:g.cps)==null?void 0:ae.cps_no)??"",calculationTime:new Date().toISOString(),inner:{totalCost:((de=G.inner)==null?void 0:de.total)??0,prevYear:((re=G.inner)==null?void 0:re.prev_year)??0,diff:se((xe=G.inner)==null?void 0:xe.diff),materials:V.inner??[]},outer:{totalCost:((Ne=G.outer)==null?void 0:Ne.total)??0,prevYear:((je=G.outer)==null?void 0:je.prev_year)??0,diff:se((De=G.outer)==null?void 0:De.diff),materials:V.outer??[]},material:{totalCost:((_e=G.material)==null?void 0:_e.total)??0,prevYear:((We=G.material)==null?void 0:We.prev_year)??0,diff:se(($e=G.material)==null?void 0:$e.diff)},labor:{totalCost:((ze=G.labor)==null?void 0:ze.total)??0,prevYear:((Oe=G.labor)==null?void 0:Oe.prev_year)??0,diff:se((Ve=G.labor)==null?void 0:Ve.diff),...E!=null&&E.labor?{...E.labor}:{}},inland:{totalCost:((Re=G.inland)==null?void 0:Re.total)??0,prevYear:((Ge=G.inland)==null?void 0:Ge.prev_year)??0,diff:se((Fe=G.inland)==null?void 0:Fe.diff),...E!=null&&E.inland?{...E.inland}:{}},total:{totalCost:((Ye=G.total)==null?void 0:Ye.total)??0,prevYear:((Be=G.total)==null?void 0:Be.prev_year)??0,diff:se((Je=G.total)==null?void 0:Je.diff)},cps:g==null?void 0:g.cps,subtotals:g==null?void 0:g.subtotals}}function K(){a(ft),x([]),d([])}function k(g){if(Array.isArray(g)&&g.length>0){const E=g.map(G=>G.model_cfc);a(G=>{const V=G.modelCfc||[],ie=E.filter(ue=>!V.includes(ue));return{...G,modelCfc:[...V,...ie],modelCfcInput:""}})}M(!1)}function L(g){if(Array.isArray(g)&&g.length>0){const E=g.map(G=>G.destCode);a(G=>{const V=G.destCode||[],ie=E.filter(ue=>!V.includes(ue));return{...G,destCode:[...V,...ie]}})}f(!1)}function q(g){a(E=>({...E,modelCfc:E.modelCfc.filter(G=>G!==g)}))}function Z(g){a(E=>({...E,destCode:E.destCode.filter(G=>G!==g)}))}function R(){const g={...s,parts:m};r&&r(g)}function A(){l&&l()}function Y(g){if(!Array.isArray(g)||g.length===0){y(!1);return}const E=g.map(V=>({partNo:V.partNo,suffix:"",partName:V.partName,parentPartNo:V.parentPartNo||V.parent||"",supplierId:V.supplierName&&(V.supplierId||V.supplierCode)||"",supplierName:V.supplierName,L:V.L||"",W:V.W||"",H:V.H||"",boxM3:V.boxM3||"",inner:{totalCost:V.innerTotal??0,prevYear:V.prevYear??0,diff:V.diffPerc??"0%",materials:V.innerMaterials||[]},outer:{totalCost:V.outerTotal??0,prevYear:V.prevYear??0,diff:V.diffPerc??"0%",materials:V.outerMaterials||[]},material:{totalCost:V.materialTotal??0,prevYear:V.prevYear??0,diff:V.diffPerc??"0%"},labor:{totalCost:V.laborTotal??20,prevYear:V.prevYear??0,diff:V.diffPerc??"0%",manHour:V.laborManHour??1.5,cost:V.laborCost??25,receiving:.1,inspection:.2,deliveryCourse:.1,supply:.1,binding:.1,sortingSupply:.2,pickPacking:.3,vanning:.2,boxValetReturn:.1,mixVan:.1,lashing:.1,totalTime:1.5,requirement:1,currentDL:1,idl:0,facilityOthers:0},inland:{totalCost:V.inlandTotal??30,prevYear:V.prevYear??0,diff:V.diffPerc??"0%",cost:V.inlandCost??35,packTime:V.inlandPackTime??"10:00",inlandCost:V.inlandInlandCost??40,inlandCostM3:V.inlandInlandCostM3??5,milkrunCost:V.inlandMilkrunCost??15},total:{totalCost:V.totalCost??0,prevYear:V.prevYear??0,diff:V.diffPerc??"0%"}}));d(V=>{const ie=V.map(fe=>fe.partNo),ue=E.filter(fe=>!ie.includes(fe.partNo));return[...V,...ue]});const G=E.map(V=>V.partNo);a(V=>{const ie=V.part||[],ue=G.filter(fe=>!ie.includes(fe));return{...V,part:[...ie,...ue]}}),y(!1)}function le(g){a(E=>({...E,part:E.part.filter(G=>G!==g)})),d(E=>E.filter(G=>G.partNo!==g))}const X=m.length,ne=Math.max(1,Math.ceil(X/i));function oe(g){o(Math.min(Math.max(1,g),ne))}const T=m.slice((h-1)*i,h*i);function J(g,E){N(G=>({...G,[g]:E}))}function H(g){I(g)}function ee(g){D(E=>({...E,[g]:!E[g]}))}return e.jsxs("div",{className:`modal fade ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:"-1",role:"dialog","aria-modal":"true","aria-labelledby":"packingCostNewModalLabel",children:[e.jsx("div",{className:"modal-dialog modal-xl",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"packingCostNewModalLabel",children:"Packing Cost Calculation New"}),e.jsx("button",{type:"button",className:"close","aria-label":"Close",onClick:A,children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsx(qn,{form:s,change:U,handlePartKeyDown:O,handlePartRemove:le,handleModelCfcKeyDown:w,handleModelRemove:q,handleDestCodeRemove:Z,setShowPartPicker:y,setShowModelPicker:M,setShowDestCodePicker:f,handleCalculate:te,handleClear:K,handlePartInputBlur:F}),e.jsx(Vn,{parts:T,selectedRows:P,handleCheckboxChange:H,page:h,perPage:i,remarks:S,handleRemarkChange:J,expandedRows:B,handleToggleExpand:ee})]}),e.jsx(Gn,{page:h,totalPages:ne,goToPage:oe,perPage:i,setPerPage:c,total:X}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:A,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:R,children:"Save"})]})]})}),e.jsx(He,{show:p,onClose:()=>y(!1),onSelect:Y}),e.jsx(Ke,{show:b,onClose:()=>M(!1),onAdd:k}),e.jsx($n,{show:j,onClose:()=>f(!1),onPick:L,initialSelected:s.destCode})]})}function Jn({calCode:t,setCalCode:l,period:r,setPeriod:s,destCode:a,setDestCode:m,modelCode:x,setModelCode:u,type:d,setType:i,handleFilter:c,handleClear:h}){return e.jsxs("div",{className:"card-body",children:[e.jsx("form",{onSubmit:c,className:"mb-3",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Pack Cost Cal Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:t,onChange:o=>l(o.target.value),placeholder:"Pack Cost Cal Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("select",{className:"form-control form-control-sm",value:a,onChange:o=>m(o.target.value),children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"024W",children:"024W"}),e.jsx("option",{value:"ARG",children:"ARG"})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Type"}),e.jsxs("div",{className:"form-control form-control-sm",style:{minHeight:44},children:[e.jsxs("div",{className:"form-check form-check-inline mr-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_all",value:"All",checked:d==="All",onChange:()=>i("All")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_all",children:"All"})]}),e.jsxs("div",{className:"form-check form-check-inline mr-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_pxp",value:"PxP",checked:d==="PxP",onChange:()=>i("PxP")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_pxp",children:"PxP"})]}),e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_lot",value:"Lot",checked:d==="Lot",onChange:()=>i("Lot")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_lot",children:"Lot"})]})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Period"}),e.jsxs("select",{className:"form-control form-control-sm",value:r,onChange:o=>s(o.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"01.2025"}),e.jsx("option",{children:"02.2025"}),e.jsx("option",{children:"03.2025"})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Model Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:x,onChange:o=>u(o.target.value),placeholder:"Model Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})})]})}),e.jsxs("div",{className:"d-flex justify-content-end mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:c,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:h,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})]})}function Qn({rows:t,visibleRows:l,page:r,totalPages:s,goToPage:a,perPage:m,setPerPage:x,total:u}){const[d,i]=n.useState(null),c=o=>{if(o==null||o==="")return"";const p=Number(o);return isNaN(p)?String(o):p.toFixed(2)},h=o=>{i(d===o?null:o)};return e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Pack Cost Cal Code"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Dest Country"}),e.jsx("th",{children:"Model Code"}),e.jsx("th",{children:"# Parts"}),e.jsx("th",{children:"Type"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-4 text-muted",children:"No Data Found"})}):l.map((o,p)=>{const y=(r-1)*m+p;return e.jsxs(Ie.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:String(y+1).padStart(2,"0")}),e.jsx("td",{children:o.calCode}),e.jsx("td",{children:o.period}),e.jsx("td",{children:o.destCode}),e.jsx("td",{children:o.destCountry}),e.jsx("td",{children:o.modelCode}),e.jsx("td",{children:c(o.numParts)}),e.jsx("td",{children:o.type}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>h(y),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>alert("Delete placeholder"),children:e.jsx("i",{className:"fas fa-trash"})})]})]}),d===y&&e.jsx("tr",{children:e.jsx("td",{colSpan:"9",children:o.parts&&o.parts.length>0?o.parts.map((b,M)=>e.jsx(Yt,{part:b},M)):e.jsx("div",{className:"p-3 text-center text-muted",children:"No part details available for this calculation."})})})]},p)})})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>a(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>a(Math.max(1,r-1)),children:"<"}),[...Array(s).keys()].map(o=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${r===o+1?"btn-primary":"btn-light"}`,onClick:()=>a(o+1),children:o+1},o)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>a(Math.min(s,r+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",u]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[m," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{x(3),setPage(1)},children:"3"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{x(10),setPage(1)},children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{x(25),setPage(1)},children:"25"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})}function Zn(){const[t,l]=n.useState(""),[r,s]=n.useState("All"),[a,m]=n.useState("All"),[x,u]=n.useState(""),[d,i]=n.useState("All"),[c,h]=n.useState([]),[o,p]=n.useState([]),[y,b]=n.useState(3),[M,j]=n.useState(1),f=c.length,S=Math.max(1,Math.ceil(f/y)),[N,P]=n.useState(!1);n.useEffect(()=>{fetch("/packing-cost-fe/generatedData.json").then(w=>{if(!w.ok)throw new Error("Network response was not ok");return w.json()}).then(w=>{const F=(w.cpsData||[]).map(W=>({id:W.id,calCode:W.pack_cost_cal_code,period:W.implementation_period,destCode:W.destination_code,destCountry:W.destination_country,modelCode:W.model_cfc,numParts:W.parts?W.parts.length:0,type:W.type,parts:W.parts||[]}));p(F),h([])}).catch(w=>{console.error("Error fetching packing cost data:",w)})},[]);function I(U){U&&U.preventDefault&&U.preventDefault();let w=[...o];t&&(w=w.filter(O=>O.calCode.toLowerCase().includes(t.toLowerCase()))),r!=="All"&&(w=w.filter(O=>O.period===r)),a!=="All"&&(w=w.filter(O=>O.destCode===a)),x&&(w=w.filter(O=>O.modelCode.toLowerCase().includes(x.toLowerCase()))),d!=="All"&&(w=w.filter(O=>O.type===d)),h(w),j(1)}function B(){l(""),s("All"),m("All"),u(""),i("All"),h([]),j(1)}function D(U){const w=Math.min(Math.max(1,U),S);j(w)}const C=c.slice((M-1)*y,M*y);function v(U){console.log("Packing cost saved payload:",U);const w={...U,numParts:U.parts.length};h(O=>[...O,w]),P(!1)}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Packing Cost Calculation List"})}),e.jsxs("div",{className:"card-tools ml-auto d-flex align-items-center gap-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",title:"Calculate Packing Cost",onClick:()=>P(!0),children:[e.jsx("i",{className:"fas fa-calculator mr-1"})," Calculate Packing Cost"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(Jn,{calCode:t,setCalCode:l,period:r,setPeriod:s,destCode:a,setDestCode:m,modelCode:x,setModelCode:u,type:d,setType:i,handleFilter:I,handleClear:B}),e.jsx(Qn,{rows:c,visibleRows:C,page:M,totalPages:S,goToPage:D,perPage:y,setPerPage:b,total:f})]}),e.jsx(Yn,{show:N,onClose:()=>P(!1),onSave:v})]})}function Xe({title:t,value1:l,value2:r,diff:s,children:a,style:m={}}){const[x,u]=n.useState(!0),d=t.match(/^(.*?)\s*(\([^)]*\))?$/),i=d?d[1].trim():t,c=d&&d[2]?d[2]:"",h=p=>{if(p==null||p==="")return!1;if(typeof p=="number")return!0;let y=String(p).trim();return y.endsWith("%")&&(y=y.slice(0,-1)),y=y.replace(/[^0-9.\-]/g,""),y===""||y==="-"||y==="."||y==="-."?!1:/^-?\d+(\.\d+)?$/.test(y)},o=p=>({textAlign:h(p)?"right":"left",whiteSpace:"nowrap"});return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{style:{backgroundColor:"#f9f9f9",cursor:"pointer"},onClick:()=>u(!x),children:[e.jsx("td",{style:m,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{marginRight:6},children:x?"▼":"▶"}),e.jsx("span",{children:e.jsx("strong",{children:i})})]}),c&&e.jsx("span",{children:c})]})}),e.jsx("td",{style:o(l),children:l}),e.jsx("td",{style:o(r),children:r}),e.jsx("td",{style:o(s),children:s})]}),x&&a]})}const me=t=>{if(t==null||t==="")return"";const l=Number(t);return isNaN(l)?String(t):l.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},ct=t=>`Rp ${Number(t).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,ke=(t,l)=>{if(t==null||l==null)return"";const r=Number(t),s=Number(l);return isNaN(r)||isNaN(s)||r===0?"":`${((s-r)/r*100).toFixed(2)}%`},pe={textAlign:"right",whiteSpace:"nowrap"};function Xn(){const[t,l]=n.useState(0),[r,s]=n.useState(1),[a,m]=n.useState("2025"),[x,u]=n.useState("2026"),[d,i]=n.useState([]),[c,h]=n.useState([]);if(n.useEffect(()=>{const D="/packing-cost-fe/comparison.json",C="/packing-cost-fe/cpsComparison.json";fetch(D).then(v=>v.json()).then(v=>i(v)),fetch(C).then(v=>v.json()).then(v=>h(v))},[]),d.length===0)return e.jsx("div",{children:"Loading..."});const o=d[t],p=d[r],y=o.materials.inner.reduce((D,C)=>D+C.value,0),b=p.materials.inner.reduce((D,C)=>D+C.value,0),M=o.materials.outer.reduce((D,C)=>D+C.value,0),j=p.materials.outer.reduce((D,C)=>D+C.value,0),f=y+M,S=b+j,N=o.labor.dl+o.labor.idl+o.labor.facility,P=p.labor.dl+p.labor.idl+p.labor.facility,I=o.inland.inlandCost+o.inland.milkrunCost,B=p.inland.inlandCost+p.inland.milkrunCost;return e.jsxs("div",{className:"container mt-3",style:{backgroundColor:"white"},children:[e.jsx("h5",{children:"Packing Cost Comparison"}),e.jsxs("table",{className:"table table-bordered table-sm",style:{fontSize:"0.85rem"},children:[e.jsxs("thead",{style:{backgroundColor:"#efefef"},children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Part No"}),e.jsx("th",{children:e.jsx("select",{className:"form-control form-control-sm",value:t,onChange:D=>l(Number(D.target.value)),children:d.map((D,C)=>e.jsxs("option",{value:C,children:[D.partNo," - ",D.code]},C))})}),e.jsx("th",{children:e.jsx("select",{className:"form-control form-control-sm",value:r,onChange:D=>s(Number(D.target.value)),children:d.map((D,C)=>e.jsxs("option",{value:C,children:[D.partNo," - ",D.code]},C))})}),e.jsx("th",{style:{borderRight:"1px solid #dee2e6"},children:"Diff"}),e.jsx("th",{children:"Remark"})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Periode"}),e.jsx("th",{children:e.jsx("input",{value:a,onChange:D=>m(D.target.value),className:"form-control form-control-sm"})}),e.jsx("th",{children:e.jsx("input",{value:x,onChange:D=>u(D.target.value),className:"form-control form-control-sm"})}),e.jsx("th",{style:{borderRight:"1px solid #dee2e6"}}),e.jsx("th",{})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Part Name"}),e.jsx("td",{children:(o==null?void 0:o.name)||""}),e.jsx("td",{children:(p==null?void 0:p.name)||""}),e.jsx("td",{style:{borderRight:"1px solid #dee2e6"}}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Supplier"}),e.jsx("td",{children:(o==null?void 0:o.supplier)||""}),e.jsx("td",{children:(p==null?void 0:p.supplier)||""}),e.jsx("td",{style:{borderRight:"1px solid #dee2e6"}}),e.jsx("td",{})]}),e.jsxs("tr",{style:{fontWeight:"bold"},children:[e.jsx("td",{children:"TOTAL COST (Rp)"}),e.jsx("td",{style:pe,children:me(o==null?void 0:o.totalCost)}),e.jsx("td",{style:pe,children:me(p==null?void 0:p.totalCost)}),e.jsx("td",{style:{...pe,borderRight:"1px solid #dee2e6"},children:ke(o==null?void 0:o.totalCost,p==null?void 0:p.totalCost)}),e.jsx("td",{})]}),e.jsxs(Xe,{title:"Material (Rp)",value1:me(f),value2:me(S),diff:ke(f,S),children:[e.jsx(Xe,{title:"Inner (Rp)",value1:me(y),value2:me(b),diff:ke(y,b),style:{paddingLeft:"15px"},children:o.materials.inner.map((D,C)=>{const v=p.materials.inner[C];return e.jsxs(Ie.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:D.name}),e.jsx("td",{style:pe,children:me(D.value)}),e.jsx("td",{style:pe,children:me(v==null?void 0:v.value)}),e.jsx("td",{style:{...pe,borderRight:"1px solid #dee2e6"},children:ke(D.value,v==null?void 0:v.value)}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Material No: ",D.detail.partNo]}),e.jsxs("div",{children:["- Code: ",D.detail.code]}),e.jsxs("div",{children:["- Qty: ",me(D.detail.qty)]}),e.jsxs("div",{children:["- Price: ",ct(D.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",me(D.detail.qty*D.detail.price)]})]}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Material No: ",v==null?void 0:v.detail.partNo]}),e.jsxs("div",{children:["- Code: ",v==null?void 0:v.detail.code]}),e.jsxs("div",{children:["- Qty: ",me(v==null?void 0:v.detail.qty)]}),e.jsxs("div",{children:["- Price: ",ct(v==null?void 0:v.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",me((v==null?void 0:v.detail.qty)*(v==null?void 0:v.detail.price))]})]}),e.jsx("td",{})]})]},`inner-${C}`)})}),e.jsx(Xe,{title:"Outer (Rp)",value1:me(M),value2:me(j),diff:ke(M,j),style:{paddingLeft:"15px"},children:o.materials.outer.map((D,C)=>{const v=p.materials.outer[C];return e.jsxs(Ie.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:D.name}),e.jsx("td",{style:pe,children:me(D.value)}),e.jsx("td",{style:pe,children:me(v==null?void 0:v.value)}),e.jsx("td",{style:{...pe,borderRight:"1px solid #dee2e6"},children:ke(D.value,v==null?void 0:v.value)}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",D.detail.partNo]}),e.jsxs("div",{children:["- Code: ",D.detail.code]}),e.jsxs("div",{children:["- Qty: ",me(D.detail.qty)]}),e.jsxs("div",{children:["- Price: ",ct(D.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",me(D.detail.qty*D.detail.price)]})]}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",v==null?void 0:v.detail.partNo]}),e.jsxs("div",{children:["- Code: ",v==null?void 0:v.detail.code]}),e.jsxs("div",{children:["- Qty: ",me(v==null?void 0:v.detail.qty)]}),e.jsxs("div",{children:["- Price: ",ct(v==null?void 0:v.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",me((v==null?void 0:v.detail.qty)*(v==null?void 0:v.detail.price))]})]}),e.jsx("td",{})]})]},`outer-${C}`)})})]}),e.jsxs(Xe,{title:"Labor (Rp)",value1:me(N),value2:me(P),diff:ke(N,P),children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- DL"}),e.jsx("td",{style:pe,children:me(o.labor.dl)}),e.jsx("td",{style:pe,children:me(p.labor.dl)}),e.jsx("td",{style:{...pe,borderRight:"1px solid #dee2e6"},children:ke(o.labor.dl,p.labor.dl)}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- IDL"}),e.jsx("td",{style:pe,children:me(o.labor.idl)}),e.jsx("td",{style:pe,children:me(p.labor.idl)}),e.jsx("td",{style:{...pe,borderRight:"1px solid #dee2e6"},children:ke(o.labor.idl,p.labor.idl)}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Facility/Others"}),e.jsx("td",{style:pe,children:me(o.labor.facility)}),e.jsx("td",{style:pe,children:me(p.labor.facility)}),e.jsx("td",{style:{...pe,borderRight:"1px solid #dee2e6"},children:ke(o.labor.facility,p.labor.facility)}),e.jsx("td",{})]})]}),e.jsxs(Xe,{title:"Inland (Rp)",value1:me(I),value2:me(B),diff:ke(I,B),children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Inland Cost"}),e.jsx("td",{style:pe,children:me(o.inland.inlandCost)}),e.jsx("td",{style:pe,children:me(p.inland.inlandCost)}),e.jsx("td",{style:{...pe,borderRight:"1px solid #dee2e6"},children:ke(o.inland.inlandCost,p.inland.inlandCost)}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Milkrun Cost"}),e.jsx("td",{style:pe,children:me(o.inland.milkrunCost)}),e.jsx("td",{style:pe,children:me(p.inland.milkrunCost)}),e.jsx("td",{style:{...pe,borderRight:"1px solid #dee2e6"},children:ke(o.inland.milkrunCost,p.inland.milkrunCost)}),e.jsx("td",{})]})]})]})]})]})}function el({show:t,onClose:l,onSave:r,initialData:s=null,mode:a="new"}){const[m,x]=n.useState(""),[u,d]=n.useState(""),[i,c]=n.useState(""),[h,o]=n.useState(""),[p,y]=n.useState(""),[b,M]=n.useState(""),[j,f]=n.useState(""),[S,N]=n.useState(""),[P,I]=n.useState(""),[B,D]=n.useState(""),[C,v]=n.useState(""),[U,w]=n.useState(""),[O,F]=n.useState(""),[W,te]=n.useState(""),[se,_]=n.useState(""),[K,k]=n.useState(""),[L,q]=n.useState(""),[Z,R]=n.useState("");n.useEffect(()=>{t&&s?(x(s.materialNo||""),d(s.materialName||""),c(s.price??""),o(s.materialType||""),y(s.supplierCode||""),M(s.supplierName||""),f(s.address||""),N(s.plantCode||""),I(s.eWarehouse||""),D(s.eWarehousePrice||""),v(s.dimLength||""),w(s.dimWeightPc||""),F(s.dimWidth||""),te(s.dimQtyBundling||""),_(s.dimHeight||""),k(s.totalDimWeight||""),q(s.docMSDS||""),R(s.docDrawing||"")):t||Y()},[t,s]);function A(){if(!m||!u||!h){alert("Please fill in Material No, Material Name, and Material Type");return}const T={id:s==null?void 0:s.id,materialNo:m,materialName:u,price:i,materialType:h,supplierCode:p,supplierName:b,address:j,plantCode:S,eWarehouse:P,eWarehousePrice:B,dimLength:C,dimWeightPc:U,dimWidth:O,dimQtyBundling:W,dimHeight:se,totalDimWeight:K,docMSDS:L,docDrawing:Z,createdDate:a==="edit"?(s==null?void 0:s.createdDate)||new Date().toLocaleDateString():new Date().toLocaleDateString()};r(T,a),Y()}function Y(){x(""),d(""),c(""),o(""),y(""),M(""),f(""),N(""),I(""),D(""),v(""),w(""),F(""),te(""),_(""),k(""),q(""),R("")}function le(){const T=`EWH-${Math.random().toString(36).substr(2,9).toUpperCase()}`,J=(Math.random()*1e3).toFixed(2);I(T),D(J),c(J)}function X(){Y(),l()}if(!t)return null;const ne=a==="edit"?"Material - Edit":"Material - New",oe=a==="edit"?"Save Changes":"Save Material";return e.jsx("div",{className:"np-modal-backdrop",onMouseDown:T=>{T.target===T.currentTarget&&X()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:800},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:ne})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:X,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",style:{fontSize:"0.7rem"},children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Item No ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",value:m,onChange:Q(x),placeholder:"Enter Item No",autoFocus:!0}),e.jsx("div",{className:"input-group-append",children:e.jsxs("button",{className:"btn btn-primary",type:"button",style:{fontSize:"0.8rem"},onClick:le,disabled:!m,children:[e.jsx("i",{className:"fas fa-search mr-1"}),"Search eWH"]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Material Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:u,onChange:Q(d),placeholder:"Enter Material Name"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:i,onChange:T=>c(T.target.value),placeholder:"Enter Price",step:"0.01",min:"0"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"eWarehouse Price"}),e.jsx("input",{type:"number",className:"form-control",value:B,onChange:T=>D(T.target.value),placeholder:"eWarehouse Price",step:"0.01",min:"0",readOnly:!0})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Material Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:h,onChange:T=>o(T.target.value),children:[e.jsx("option",{value:"",children:"Select Material Type"}),e.jsx("option",{value:"Inner",children:"Inner"}),e.jsx("option",{value:"Outer",children:"Outer"}),e.jsx("option",{value:"Module",children:"Module"}),e.jsx("option",{value:"Module",children:"Box"})]})]})]})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Supplier"})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code"}),e.jsx("input",{type:"text",className:"form-control",value:p,onChange:Q(y),placeholder:"Enter Supplier Code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("input",{type:"text",className:"form-control",value:j,readOnly:!0,placeholder:"Address"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("input",{type:"text",className:"form-control",value:b,readOnly:!0,placeholder:"Supplier Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Plant Code"}),e.jsx("input",{type:"text",className:"form-control",value:S,readOnly:!0,placeholder:"Plant Code"})]})]})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Dimension"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Length (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:C,onChange:T=>v(T.target.value),placeholder:"Length (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Weight/pc (gr)"}),e.jsx("input",{type:"number",className:"form-control",value:U,onChange:T=>w(T.target.value),placeholder:"Weight/pc (gr)"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Width (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:O,onChange:T=>F(T.target.value),placeholder:" Width (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Qty/Bundling"}),e.jsx("input",{type:"number",className:"form-control",value:W,onChange:T=>te(T.target.value),placeholder:"Qty/Bundling"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Height (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:se,onChange:T=>_(T.target.value),placeholder:"Height (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Total Weight (gr)"}),e.jsx("input",{type:"number",className:"form-control",value:K,onChange:T=>k(T.target.value),placeholder:"Total Weight (gr)"})]})})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Documents"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"MSDS"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-image"})})}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:T=>{var J;return q(((J=T.target.files[0])==null?void 0:J.name)||"")}})]})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Drawing"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-image"})})}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:T=>{var J;return R(((J=T.target.files[0])==null?void 0:J.name)||"")}})]})]})})]})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary mr-2",onClick:X,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Cancel"]}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:A,children:[e.jsx("i",{className:"fas fa-save mr-1"}),oe]})]})]})})}function tl({materialNo:t,setMaterialNo:l,materialName:r,setMaterialName:s,parentMaterial:a,setParentMaterial:m,itemNo:x,setItemNo:u,price:d,setPrice:i,materialType:c,setMaterialType:h,onFilter:o,onClearFilters:p}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Item No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:Q(l),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),o())},placeholder:"Material No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Material Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:Q(s),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),o())},placeholder:"Material Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Parent Material"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:a,onChange:Q(m),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),o())},placeholder:"Parent Material"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"eWarehouse Item No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:x,onChange:Q(u),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),o())},placeholder:"Item No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Price"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:Q(i),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),o())},placeholder:"Price"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Material Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:c,onChange:y=>h(y.target.value),children:[e.jsx("option",{value:"",children:"Select Material Type"}),e.jsx("option",{value:"Inner",children:"Inner"}),e.jsx("option",{value:"Outer",children:"Outer"}),e.jsx("option",{value:"Module",children:"Module"}),e.jsx("option",{value:"Box",children:"Module"})]})]})]})]}),e.jsxs("div",{className:"form-group text-right mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:o,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:p,children:[e.jsx("i",{className:"fas fa-undo mr-1"})," Clear"]})]})]})}function sl({materials:t,allMaterials:l,totalMaterials:r,currentPage:s,totalPages:a,pageSize:m,onPageChange:x,onDeleteMaterial:u,onEditMaterial:d}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50},className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"Item No"}),e.jsx("th",{className:"text-center",children:"Material Name"}),e.jsx("th",{className:"text-center",children:"Price"}),e.jsx("th",{className:"text-center",children:"eWH Item No"}),e.jsx("th",{className:"text-center",children:"eWH Price"}),e.jsx("th",{className:"text-center",children:"Material Type"}),e.jsx("th",{style:{width:120},className:"text-center",children:"Action"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-4 text-muted text-center",children:"No Data Found"})}):t.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:(s-1)*m+c+1}),e.jsx("td",{className:"text-center",children:i.materialNo}),e.jsx("td",{children:i.materialName}),e.jsx("td",{className:"text-center",children:i.price}),e.jsx("td",{className:"text-center",children:i.eWarehouse}),e.jsx("td",{className:"text-center",children:i.eWarehousePrice}),e.jsx("td",{className:"text-center",children:i.materialType}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>d&&d(i),title:"Edit Material",children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>u&&u(c),title:"Delete Material",children:e.jsx("i",{className:"fas fa-trash"})})]})]},i.id||c))})]})}),a>1&&e.jsx(qe,{currentPage:s,totalPages:a,totalItems:r,pageSize:m,onPageChange:x})]})}function Lt(){const[t,l]=n.useState(""),[r,s]=n.useState(""),[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(""),[o,p]=n.useState(!1),[y,b]=n.useState("new"),[M,j]=n.useState(null),[f,S]=n.useState(1),N=10,[P,I]=n.useState([]),[B,D]=n.useState([]);n.useEffect(()=>{fetch("/packing-cost-fe/materials.json").then(L=>{if(!L.ok)throw new Error("Network response was not ok");return L.json()}).then(L=>{I(L),D([])}).catch(L=>{console.error("Error fetching materials:",L)})},[]);const C=Math.ceil(B.length/N),v=(f-1)*N,U=v+N,w=B.slice(v,U);function O(){let k=P.filter(q=>{const Z=!t||q.materialNo&&q.materialNo.toLowerCase().includes(t.toLowerCase()),R=!r||q.materialName&&q.materialName.toLowerCase().includes(r.toLowerCase()),A=!a||q.parentMaterial&&q.parentMaterial.toLowerCase().includes(a.toLowerCase()),Y=!x||q.itemNo&&q.itemNo.toLowerCase().includes(x.toLowerCase()),le=!d||q.price&&q.price.toString().includes(d),X=!c||q.materialType===c;return Z&&R&&A&&Y&&le&&X});D(!t&&!r&&!a&&!x&&!d&&!c?[...P].reverse():k),S(1),console.log(`Filtered ${k.length} materials from ${P.length} total`)}function F(){l(""),s(""),m(""),u(""),i(""),h(""),D([]),S(1)}function W(){j(null),b("new"),p(!0)}function te(){p(!1),j(null),b("new")}function se(k,L="new"){if(L==="edit"&&M){const q=M.materialNo,Z=P.map(A=>A.materialNo===q?{...A,...k}:A),R=B.map(A=>A.materialNo===q?{...A,...k}:A);I(Z),D(R)}else I(q=>[k,...q]),D(q=>[k,...q]);p(!1),j(null),b("new")}function _(k){if(!confirm("Delete this material?"))return;const L=(f-1)*N+k,q=B[L];if(!q)return;const Z=B.filter((Y,le)=>le!==L),R=P.filter(Y=>Y.materialNo!==q.materialNo);D(Z),I(R);const A=Math.ceil(Z.length/N);f>A&&A>0&&S(A)}function K(k){j(k),b("edit"),p(!0)}return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Material List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:W,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Material"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Upload placeholder"),children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Download template placeholder"),children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(tl,{materialNo:t,setMaterialNo:l,materialName:r,setMaterialName:s,parentMaterial:a,setParentMaterial:m,itemNo:x,setItemNo:u,price:d,setPrice:i,materialType:c,setMaterialType:h,onFilter:O,onClearFilters:F}),e.jsx(sl,{materials:w,allMaterials:P,totalMaterials:B.length,currentPage:f,totalPages:C,pageSize:N,onPageChange:S,onDeleteMaterial:_,onEditMaterial:K})]}),e.jsx(el,{show:o,onClose:te,onSave:se,initialData:M,mode:y})]})})}function nl(){const t=Ee(),[l,r]=n.useState(!1),[s,a]=n.useState(!1),m=Et(),x=tt();n.useEffect(()=>{const i=(m.pathname||"").toLowerCase();i.startsWith("/projects")||i.startsWith("/models")||i.startsWith("/parts")||i.startsWith("/suppliers")||i.startsWith("/material")||i.startsWith("/module-type")||i.startsWith("/params")?r(!0):r(!1),i.startsWith("/packing")||i.startsWith("/cps")||i.startsWith("/dpi")||i.startsWith("/calculate-packing-cost")||i.startsWith("/calculate")||i.startsWith("/cost-movement")?a(!0):a(!1)},[m.pathname]);const u=({isActive:i})=>"nav-link"+(i?" active":"");function d(i){i&&i.preventDefault&&i.preventDefault();try{t&&typeof t.logout=="function"&&t.logout()}catch{}x("/login")}return e.jsxs("aside",{className:"main-sidebar sidebar-dark-primary elevation-4",style:{minHeight:"100vh"},children:[e.jsx("div",{className:"brand-link",children:e.jsx(Se,{to:"/",className:"d-block text-decoration-none",children:e.jsx("span",{className:"brand-text font-weight-light",children:"My App"})})}),e.jsx("div",{className:"sidebar d-flex flex-column",style:{minHeight:"calc(100vh - 56px)"},children:e.jsx("nav",{className:"mt-2 flex-grow-1",children:e.jsxs("ul",{className:"nav nav-pills nav-sidebar flex-column",role:"menu","aria-orientation":"vertical",style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/",className:u,end:!0,children:[e.jsx("i",{className:"nav-icon fas fa-tachometer-alt"}),e.jsx("p",{children:"Dashboard"})]})}),e.jsxs("li",{className:`nav-item has-treeview ${l?"menu-open":""}`,children:[e.jsxs("div",{role:"button",onClick:()=>r(i=>!i),onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&r(c=>!c)},tabIndex:0,"aria-expanded":l,className:`nav-link d-flex align-items-center ${l?"active":""}`,style:{cursor:"pointer",userSelect:"none"},children:[e.jsx("i",{className:"nav-icon fas fa-database"}),e.jsx("p",{className:"flex-grow-1 mb-0 ml-2",children:"Master"}),e.jsx("i",{className:`right fas ${l?"fa-angle-down":"fa-angle-left"}`})]}),e.jsxs("ul",{className:"nav nav-treeview",style:{display:l?"block":"none"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/projects",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Projects"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/models",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Models"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/material",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Material"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/parts",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Parts"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/suppliers",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Suppliers"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/params",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Parameters"})]})})]})]}),e.jsxs("li",{className:`nav-item has-treeview ${s?"menu-open":""}`,children:[e.jsxs("div",{role:"button",onClick:()=>a(i=>!i),onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&a(c=>!c)},tabIndex:0,"aria-expanded":s,className:`nav-link d-flex align-items-center ${s?"active":""}`,style:{cursor:"pointer",userSelect:"none"},children:[e.jsx("i",{className:"nav-icon fas fa-box-open"}),e.jsx("p",{className:"flex-grow-1 mb-0 ml-2",children:"Packing Spec"}),e.jsx("i",{className:`right fas ${s?"fa-angle-down":"fa-angle-left"}`})]}),e.jsxs("ul",{className:"nav nav-treeview",style:{display:s?"block":"none"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/packing/cps",className:({isActive:i})=>"nav-link"+(i?" active":""),children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"CPS"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/packing/DPI",className:({isActive:i})=>"nav-link"+(i?" active":""),children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"DPI"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/packing/CalculatePackingCost",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Calculate Packing Cost"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/packing/ComparisonPage",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Comparison"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/cost-movement",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Cost Movement"})]})})]})]}),e.jsx("li",{style:{marginTop:"auto"}}),e.jsx("li",{className:"nav-item",style:{padding:"0.5rem 0"},children:e.jsxs(Se,{to:"/settings",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Settings"})]})}),e.jsx("li",{className:"nav-item",style:{padding:"0.5rem 0"},children:e.jsxs("button",{type:"button",onClick:d,className:"btn btn-block btn-outline-danger d-flex align-items-center",style:{justifyContent:"flex-start"},children:[e.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),e.jsx("span",{children:"Logout"})]})})]})})})]})}function ll(){const t=Ee(),l=tt(),r=()=>{l("/notification-detail")};return e.jsxs("nav",{className:"main-header navbar navbar-expand navbar-white navbar-light",children:[e.jsxs("ul",{className:"navbar-nav",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link","data-widget":"pushmenu",href:"#",role:"button",children:e.jsx("i",{className:"fas fa-bars"})})}),e.jsx("li",{className:"nav-item d-none d-sm-inline-block",children:e.jsx("a",{href:"#",className:"nav-link",children:"Home"})})]}),e.jsxs("ul",{className:"navbar-nav ml-auto",children:[e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link","data-toggle":"dropdown",href:"#",children:[e.jsx("i",{className:"far fa-bell"}),e.jsx("span",{className:"badge badge-warning navbar-badge",children:"2"})]}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[e.jsx("span",{className:"dropdown-item dropdown-header",children:"2 Notifications"}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("div",{className:"dropdown-item",children:[e.jsx("p",{style:{fontWeight:"bold"},children:"Date : 20 Feb 2025 13:15"}),e.jsx("p",{className:"text-sm",children:"You have new form request to review."}),e.jsx("p",{className:"text-sm text-muted",children:"From : Jonathan Hairi at 20 Feb 2025 13:10"}),e.jsx("p",{className:"text-sm text-muted",children:"Dept : PPMD"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:r,children:"See Detail"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("div",{className:"dropdown-item",children:[e.jsx("p",{style:{fontWeight:"bold"},children:"Date : 19 Feb 2025 12:15"}),e.jsx("p",{className:"text-sm",children:"Your form submission has been rejected by :"}),e.jsx("p",{className:"text-sm text-muted",children:"By : Jonathan Hairi at 19 Feb 2025 13:10"}),e.jsx("p",{className:"text-sm text-muted",children:"Dept : PPMD"}),e.jsx("p",{className:"text-sm text-muted",children:"Comment: Sheet tersebut sudah tidak ada di pasaran dan akan diganti sheet yg sama dari supplier lain."}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:r,children:"See Detail"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsx("a",{href:"#",className:"dropdown-item dropdown-footer",children:"See All Notifications"})]})]}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link","data-widget":"fullscreen",href:"#",role:"button",children:e.jsx("i",{className:"fas fa-expand-arrows-alt"})})}),t.user&&e.jsx("li",{className:"nav-item d-none d-sm-inline-block",children:e.jsx("span",{className:"nav-link",children:t.user.username})})]})]})}Ds.register(Ls,Ts,Es,Os,Rs,Fs);const al={labels:["Jan","Feb","Mar","Apr","May"],datasets:[{label:"Orders",data:[12,19,7,14,10],backgroundColor:"#007bff"}]};function rl(){return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Sales"})}),e.jsx("div",{className:"card-body",children:e.jsx(Ms,{data:al})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Quick Stats"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"info-box mb-3 bg-info",children:[e.jsx("span",{className:"info-box-icon",children:e.jsx("i",{className:"fas fa-shopping-cart"})}),e.jsxs("div",{className:"info-box-content",children:[e.jsx("span",{className:"info-box-text",children:"Orders"}),e.jsx("span",{className:"info-box-number",children:"1,250"})]})]})})]})}),e.jsx("div",{className:"col-12 mt-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Recent Items"})}),e.jsx("div",{className:"card-body p-0",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Qty"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"1"}),e.jsx("td",{children:"33504-BZ292-C1"}),e.jsx("td",{children:"Hose"}),e.jsx("td",{children:"10"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"2"}),e.jsx("td",{children:"122810Y110"}),e.jsx("td",{children:"Hanger"}),e.jsx("td",{children:"2"})]})]})]})})]})})]})}function ol(){const t=Ee(),[l,r]=n.useState(""),[s,a]=n.useState(""),[m,x]=n.useState(""),u=d=>{d.preventDefault(),t.login(l,s)||x("Invalid username or password")};return e.jsx("div",{className:"login-page bg-light min-vh-100 d-flex align-items-center justify-content-center",children:e.jsx("div",{className:"card shadow-sm",style:{width:"360px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"mb-4 text-center",children:"Sign In"}),m&&e.jsx("div",{className:"alert alert-danger py-2",role:"alert",children:m}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),e.jsx("input",{type:"text",id:"username",className:"form-control",value:l,onChange:d=>r(d.target.value),placeholder:"Enter username",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",className:"form-control",value:s,onChange:d=>a(d.target.value),placeholder:"Enter password",required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Login"})]})]})})})}function il({visible:t,onClose:l,onSave:r,initialData:s}){const[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState("Draft"),[c,h]=n.useState(""),[o,p]=n.useState(""),[y,b]=n.useState(""),[M,j]=n.useState([]),[f,S]=n.useState(!1);n.useEffect(()=>{s?(m(s.project_code||""),u(s.project_name||""),i(s.project_status||"Draft"),h(s.project_manager||""),p(s.description||""),b(s.note||""),j(s.models||[])):(m(""),u(""),i("Draft"),h(""),p(""),b(""),j([]))},[s,t]);const N=()=>{S(!0)},P=C=>{j(v=>[...v,...C]),S(!1)},I=(C,v,U)=>{j(w=>w.map((O,F)=>F===C?{...O,[v]:U}:O))},B=C=>{j(v=>v.filter((U,w)=>w!==C))},D=()=>{r&&r({code:a,name:x,status:d,manager:c,description:o,note:y,models:M})};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"np-modal-backdrop",style:{position:"fixed",inset:0,zIndex:1040},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1e3,margin:"40px auto",zIndex:1041},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:s?"Project - Edit":"Project - New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool","aria-label":"Close",onClick:l,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"small",children:["Project Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:a,onChange:Q(m),placeholder:"Project Code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Project Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:x,onChange:Q(u),placeholder:"Project Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"small",children:["Status ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{className:"form-control form-control-sm mb-2",value:d,onChange:C=>i(C.target.value),children:[e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"On Hold"}),e.jsx("option",{children:"Completed"})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Project Manager"}),e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:Q(h),placeholder:"Project Manager"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-user"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Description"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:o,onChange:C=>p(C.target.value),placeholder:"Description"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Note"}),e.jsx("textarea",{className:"form-control form-control-sm mb-2",value:y,onChange:C=>b(C.target.value),rows:2,placeholder:"Note"})]})]})]}),e.jsx("div",{className:"card mt-3",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:N,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Model"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40,textAlign:"center"},children:"No"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Code"}),e.jsx("th",{style:{textAlign:"center"},children:"CFC"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Impl. Period"}),e.jsx("th",{style:{textAlign:"center"},children:"Dest. Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Remark"}),e.jsx("th",{style:{width:90,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted py-4",children:"No Data Found"})}):M.map((C,v)=>e.jsxs("tr",{children:[e.jsx("td",{children:v+1}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:C.model_code,onChange:U=>I(v,"model_code",U.target.value),placeholder:"Model Code"})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:C.model_cfc,onChange:U=>I(v,"model_cfc",U.target.value),placeholder:"CFC",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:C.model_name,onChange:U=>I(v,"model_name",U.target.value),placeholder:"Model Name",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:C.model_implementation_period,onChange:U=>I(v,"model_implementation_period",U.target.value),placeholder:"Implementation Period",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:C.model_destination_code,onChange:U=>I(v,"model_destination_code",U.target.value),placeholder:"Destination Code",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:C.model_type,onChange:U=>I(v,"model_type",U.target.value),placeholder:"Type",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:C.model_remark,onChange:U=>I(v,"model_remark",U.target.value),placeholder:"Remark",readOnly:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>B(v),children:e.jsx("i",{className:"fas fa-trash"})})})]},v))})]})})]})})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{type:"button",className:"btn btn-primary mr-2",onClick:D,children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancel"})]})]})}),e.jsx(Ke,{show:f,onClose:()=>S(!1),onAdd:P})]}):null}const cl=({show:t,onHide:l,onAdd:r,field:s="code"})=>{const[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState("All"),[c,h]=n.useState(""),[o,p]=n.useState([]),y=[{code:"024J",name:"Front Bumper Model",status:"Active",manager:"Prototype 2025"},{code:"286W",name:"Rear Bumper Model",status:"Draft",manager:"Production 2024"},{code:"332W",name:"Hood Model",status:"Inactive",manager:"Prototype 2023"},{code:"385W",name:"Fender Model",status:"Active",manager:"Production 2022"},{code:"388W",name:"Grille Model",status:"Active",manager:"Prototype 2021"}],[b,M]=n.useState(y);if(n.useEffect(()=>{t&&(f(),p([]))},[t]),!t)return null;const j=()=>{let P=y;a&&(P=P.filter(I=>I.code.toLowerCase().includes(a.toLowerCase()))),x&&(P=P.filter(I=>I.name.toLowerCase().includes(x.toLowerCase()))),d&&d!=="All"&&(P=P.filter(I=>I.status.toLowerCase()===d.toLowerCase())),c&&(P=P.filter(I=>I.manager.toLowerCase().includes(c.toLowerCase()))),M(P)},f=()=>{m(""),u(""),i("All"),h(""),M(y),p([])},S=P=>{p(P?b.map(I=>I.code):[])},N={maxHeight:"calc(100vh - 200px)",overflowY:"auto"};return e.jsx("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("b",{children:"Select Project"})}),e.jsx("button",{type:"button",className:"close",onClick:l,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:N,children:[e.jsx("div",{className:"card card-outline card-secondary mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:a,onChange:P=>m(P.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:x,onChange:P=>u(P.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Status"}),e.jsxs("select",{className:"form-control form-control-sm",value:d,onChange:P=>i(P.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Inactive"})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Manager"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:P=>h(P.target.value)})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{className:"btn btn-primary btn-sm mr-2",onClick:j,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:f,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-striped table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"30px"},children:e.jsx("input",{type:"checkbox",checked:o.length===b.length&&b.length>0,onChange:P=>S(P.target.checked)})}),e.jsx("th",{children:"Project Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Project Mgr"})]})}),e.jsx("tbody",{children:b.length>0?b.map((P,I)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"checkbox",checked:o.includes(P.code),onChange:()=>{o.includes(P.code)?p(B=>B.filter(D=>D!==P.code)):p(B=>[...B,P.code])}})}),e.jsx("td",{children:P.code}),e.jsx("td",{children:P.name}),e.jsx("td",{children:P.status}),e.jsx("td",{children:P.manager})]},I)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No projects found"})})})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>{if(r&&o.length>0){const P=o.map(I=>y.find(B=>B.code===I));r(P,s)}l()},children:"Add"}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:l,children:"Close"})]})]})})})};function dl({code:t,setCode:l,name:r,setName:s,models:a,setModels:m,manager:x,setManager:u,statuses:d,setStatuses:i,handleSearch:c,clearFilters:h,handleOpenNew:o}){const[p,y]=n.useState(!1),[b,M]=n.useState(!1),[j,f]=n.useState("code");function S(I,B){if(B==="code"){const D=I.map(C=>C.code).join("; ");l(D)}else if(B==="name"){const D=I.map(C=>C.name).join("; ");s(D)}y(!1)}function N(I){if(I==="all"){const B=!d.all;i({all:B,draft:!1,active:!1,onhold:!1,completed:!1})}else i(B=>({...B,[I]:!B[I],all:!1}))}function P(I){const B=I.map(D=>D.model_code).join("; ");m(B),M(!1)}return e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:t,onChange:Q(l),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),c())},className:"form-control form-control-sm",placeholder:"Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search code",onClick:()=>{f("code"),y(!0)},children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:r,onChange:Q(s),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),c())},className:"form-control form-control-sm",placeholder:"Project name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search name",onClick:()=>{f("name"),y(!0)},children:e.jsx("i",{className:"fas fa-search"})})})]})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Related Models"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:a,onChange:Q(m),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),c())},className:"form-control form-control-sm",placeholder:"Model code / name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Select Model",onClick:()=>M(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Manager"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:x,onChange:Q(u),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),c())},className:"form-control form-control-sm",placeholder:"Manager name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-user"})})})]})]})})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{className:"small mb-1 d-block",children:"Status"}),e.jsx("div",{className:"form-inline flex-wrap",children:["all","draft","active","onhold","completed"].map(I=>{const B=`status-${I}`;return e.jsxs("div",{className:"form-check mr-3",children:[e.jsx("input",{id:B,type:"checkbox",className:"form-check-input",checked:d[I],onChange:()=>N(I)}),e.jsx("label",{className:"form-check-label small ml-1",htmlFor:B,children:I==="onhold"?"On Hold":I.charAt(0).toUpperCase()+I.slice(1)})]},I)})})]})}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm mr-2",onClick:c,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:h,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx(cl,{show:p,onHide:()=>y(!1),onAdd:S,field:j}),e.jsx(Ke,{show:b,onClose:()=>M(!1),onAdd:P})]})}function ml({results:t,handleEdit:l,handleDelete:r,currentPage:s,setCurrentPage:a,pageSize:m}){const x=Math.ceil(t.length/m),u=t.slice((s-1)*m,s*m),d=i=>{var o;const c=((o=u[i%m])==null?void 0:o.project_name)||"this project";window.confirm(`Apakah Anda yakin ingin menghapus project "${c}"?`)&&r((s-1)*m+i)};return e.jsxs("div",{className:"card-body pt-0",children:[e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{className:"thead-light",style:{position:"sticky",top:0,zIndex:5},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50},children:"No"}),e.jsx("th",{children:"Project Code"}),e.jsx("th",{children:"Project Name"}),e.jsx("th",{children:"Project Manager"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Models"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsxs("tbody",{children:[u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-4 text-muted",children:"No Data Found"})}),u.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:(s-1)*m+c+1}),e.jsx("td",{children:i.project_code}),e.jsx("td",{children:i.project_name}),e.jsx("td",{children:i.project_manager}),e.jsx("td",{children:i.project_status}),e.jsx("td",{children:Array.isArray(i.models)?i.models.map(h=>typeof h=="string"?h:h.model_code).join(", "):i.models}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>l((s-1)*m+c),children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>d(c),children:e.jsx("i",{className:"fas fa-trash"})})]})]},c))]})]})}),e.jsx(qe,{currentPage:s,totalPages:x,totalItems:t.length,pageSize:m,onPageChange:a})]})}function hl(){const[t,l]=n.useState(""),[r,s]=n.useState(""),[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState({all:!0,draft:!1,active:!1,onhold:!1,completed:!1}),[c,h]=n.useState(!1),[o,p]=n.useState(null),[y,b]=n.useState([]),[M,j]=n.useState([]),[f,S]=n.useState(1),N=10;n.useEffect(()=>{fetch("/packing-cost-fe/projects.json").then(O=>{if(!O.ok)throw new Error("Network response was not ok");return O.json()}).then(O=>{j(O)}).catch(O=>{console.error("Error fetching projects:",O)})},[]);function P(){l(""),s(""),m(""),u(""),i({all:!0,draft:!1,active:!1,onhold:!1,completed:!1}),b([]),S(1)}function I(){const w=!t&&!r&&!a&&!x&&d.all;let O=M.filter(F=>{var K;const W=!t||t.split(/[;,]/).some(k=>{var L;return k.trim()&&((L=F.project_code)==null?void 0:L.toLowerCase().includes(k.trim().toLowerCase()))}),te=!r||r.split(/[;,]/).some(k=>{var L;return k.trim()&&((L=F.project_name)==null?void 0:L.toLowerCase().includes(k.trim().toLowerCase()))}),se=!a||a.split(/[;,]/).some(k=>k.trim()&&(Array.isArray(F.models)?F.models.map(L=>L.model_code).join(", ").toLowerCase().includes(k.trim().toLowerCase()):(F.models||"").toLowerCase().includes(k.trim().toLowerCase()))),_=!x||((K=F.project_manager)==null?void 0:K.toLowerCase().includes(x.toLowerCase()));return W&&te&&se&&_});if(!d.all){const F=[];d.draft&&F.push("Draft"),d.active&&F.push("Active"),d.onhold&&F.push("On Hold"),d.completed&&F.push("Completed"),F.length>0&&(O=O.filter(W=>F.includes(W.project_status)))}b(w?[...O].reverse():O),S(1)}function B(){p(null),h(!0)}function D(){h(!1)}function C(w){if(o!==null)b(O=>O.map((F,W)=>W!==o?F:{...F,project_code:w.code,project_name:w.name,project_manager:w.manager,project_status:w.status,description:w.description,note:w.note,models:w.models}));else{const O={project_code:w.code||`CFC-${((y||[]).length+1).toString().padStart(3,"0")}`,project_name:w.name||"(No name)",project_manager:w.manager||"",project_status:w.status||"Draft",description:w.description,note:w.note,models:w.models};b(F=>[O,...F||[]])}h(!1),p(null)}function v(w){p(w),h(!0)}function U(w){b(O=>O.filter((F,W)=>W!==w))}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-secondary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Project List"})}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:B,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," New Project"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Download Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(dl,{code:t,setCode:l,name:r,setName:s,models:a,setModels:m,manager:x,setManager:u,statuses:d,setStatuses:i,handleSearch:I,clearFilters:P,handleOpenNew:B}),e.jsx(ml,{results:y,handleEdit:v,handleDelete:U,currentPage:f,setCurrentPage:S,pageSize:N})]}),e.jsx(il,{visible:c,onClose:D,onSave:C,initialData:o!==null&&y&&y[o]?{...y[o],models:Array.isArray(y[o].models)?y[o].models.map(w=>typeof w=="string"?{code:w,name:"",remark:""}:w):(y[o].models||"").split(",").map(w=>({code:w.trim(),name:"",remark:""}))}:null})]})}function ul({show:t,onClose:l,onSave:r,initialData:s}){const[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(""),[o,p]=n.useState(""),[y,b]=n.useState(""),[M,j]=n.useState(""),[f,S]=n.useState(""),[N,P]=n.useState(""),[I,B]=n.useState(""),[D,C]=n.useState(""),[v,U]=n.useState([]),[w,O]=n.useState([]),[F,W]=n.useState(!1),[te,se]=n.useState([]);n.useEffect(()=>{var R,A;t&&(s?(m(((R=s.project)==null?void 0:R.project_code)||""),u(((A=s.project)==null?void 0:A.project_name)||""),i(s.model_code||""),h(s.model_name||""),p(s.model_remark||""),S(s.model_implementation_period||""),P(s.model_destination_code||""),B(s.destinationCountryCode||""),C(s.country||""),O(s.parts||[]),b(s.model_cfc||""),j(s.model_type||""),U(s.katashiki||[])):(m(""),u(""),i(""),h(""),p(""),S(""),P(""),B(""),C(""),O([]),b(""),j(""),U([])),W(!1))},[t,s]),n.useEffect(()=>{fetch("/packing-cost-fe/projects.json").then(A=>A.json()).then(A=>se(A))},[]),n.useEffect(()=>{if(a){const R=te.find(A=>A.project_code===a);u(R?R.project_name:"")}else u("")},[a,te]),n.useEffect(()=>{if(!s){const R=`${a}-${N}-${y}${M}${f}`;i(R)}},[s,a,N,y,M,f]);function _(){W(!0)}function K(R){const A=R.map(Y=>({partNo:Y.partNo||"",suffix:"",name:Y.partName||"",parent:Y.parentPartNo||"",supplierId:Y.supplierId||"",supplierName:Y.supplierName||"",L:Y.L||0,W:Y.W||0,H:Y.H||0,wtPerPc:Y.wtPerPc||0,qty:1,totalWt:Y.wtPerPc?(1*Y.wtPerPc).toFixed(2):0}));O(Y=>[...Y,...A]),W(!1)}function k(R){O(A=>A.filter((Y,le)=>le!==R))}function L(R,A,Y){const le=[...w],X={...le[R]};if(X[A]=Y,A==="qty"||A==="wtPerPc"){const ne=A==="qty"?Y:X.qty,oe=A==="wtPerPc"?Y:X.wtPerPc;X.totalWt=(Number(ne)*Number(oe)).toFixed(2)}le[R]=X,O(le)}function q(R){const A=R.toUpperCase();P(A);const Y=et.find(le=>le.destCode===A);Y?(B(Y.code),C(Y.country)):(B(""),C(""))}function Z(){if(!d.trim()){alert("Please enter Model Code");return}const R={...s||{},model_code:d,model_name:c,model_remark:o,model_implementation_period:f,model_destination_code:N,destinationCountryCode:I,country:D,parts:w.slice(),model_cfc:y,model_type:M,katashiki:v.slice(),project:{...(s==null?void 0:s.project)||{},project_code:a,project_name:x}};console.log("Saving model:",R),r(R)}return t?e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:R=>{R.target===R.currentTarget&&l()},children:[e.jsxs("div",{className:"np-modal card card-outline card-success",style:{maxWidth:1200},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsxs("b",{children:["Model - ",s?"Edit":"New"]})}),e.jsx("div",{className:"ml-2 text-muted small",style:{marginLeft:8},children:"|"}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:l,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Model Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:d,onChange:R=>i(R.target.value.toUpperCase()),placeholder:"Model Code",disabled:!s,style:s?{}:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Model Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:c,onChange:R=>h(R.target.value.toUpperCase()),placeholder:"Model Name"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"CFC"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:y,onChange:R=>b(R.target.value.toUpperCase()),placeholder:"CFC"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsxs("select",{className:"form-control form-control-sm mb-2",value:M,onChange:R=>j(R.target.value),children:[e.jsx("option",{value:"",children:"-- Select Type --"}),e.jsx("option",{value:"PxP",children:"PxP"}),e.jsx("option",{value:"Lot",children:"Lot"}),e.jsx("option",{value:"Engine",children:"Engine"})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Project Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:a,onChange:R=>m(R.target.value.toUpperCase()),placeholder:"Project Code"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Project Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:x,placeholder:"Project Name",readOnly:!0,style:{backgroundColor:"#f8f9fa"}})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Implementation Period ",e.jsx("span",{style:{color:"red"},children:"*"})," ",e.jsx("span",{className:"text-muted ml-2",children:e.jsx("i",{children:"e.g., 02.2025"})})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:f,onChange:R=>S(R.target.value.toUpperCase()),placeholder:"Implementation Period"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Destination Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{className:"form-control form-control-sm",value:N,onChange:R=>q(R.target.value),placeholder:"Destination Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-map-marker-alt"})})})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Destination Country Code"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:I,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Country"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:D,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"small",children:"Remark"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:o,onChange:R=>p(R.target.value.toUpperCase()),placeholder:"Remark"})]})}),e.jsxs("div",{className:"kat-wrap mb-3",children:[e.jsx("div",{className:"kat-title",children:"Katashiiki"}),e.jsx("div",{className:"kat-flex",children:e.jsxs("div",{className:"kat-list",children:[v.length===0?e.jsxs("div",{className:"kat-empty text-muted",children:[e.jsx("span",{children:"No katashiki yet."}),e.jsx("button",{type:"button",className:"kat-plus kat-plus--sm",onClick:()=>U(R=>[...R,{string:"",number:0}]),title:"Add Katashiiki",children:"+"})]}):v.map((R,A)=>e.jsxs("div",{className:"kat-item",children:[e.jsxs("div",{className:"kat-box",children:[e.jsx("input",{type:"text",className:"kat-input",placeholder:"Code",value:R.string,onChange:Y=>{const le=Y.target.value.toUpperCase();U(X=>{const ne=[...X];return ne[A]={...ne[A],string:le},ne})}}),e.jsx("input",{type:"number",className:"kat-input kat-input-num",placeholder:"0",value:R.number,onChange:Y=>{const le=Number(Y.target.value);U(X=>{const ne=[...X];return ne[A]={...ne[A],number:le},ne})}})]}),e.jsx("button",{type:"button",className:"kat-del",onClick:()=>U(Y=>Y.filter((le,X)=>X!==A)),title:"Remove",children:"−"})]},A)),v.length>0&&e.jsx("button",{type:"button",className:"kat-plus",onClick:()=>U(R=>[...R,{string:"",number:0}]),title:"Add Katashiiki",children:"+"})]})})]}),e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-2",onClick:_,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Part"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-2",onClick:()=>alert("Upload placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-upload-alt mr-1"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Download template placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-download-alt mr-1"})," Template"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",style:{fontSize:"0.8rem"},children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:130,textAlign:"center"},children:"Part No"}),e.jsx("th",{style:{width:50,textAlign:"center"},children:"Suffix"}),e.jsx("th",{style:{textAlign:"center"},children:"Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Parent"}),e.jsx("th",{style:{width:50,textAlign:"center"},children:"Supplier ID"}),e.jsx("th",{style:{textAlign:"center"},children:"Supplier Name"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"L"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"W"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"H"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"Wt/pc"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"Qty"}),e.jsx("th",{style:{width:70,textAlign:"center"},children:"Total Wt"}),e.jsx("th",{style:{width:70,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"13",className:"text-center text-muted",children:"- No parts added yet -"})}):w.map((R,A)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:R.partNo,onChange:Y=>L(A,"partNo",Y.target.value.toUpperCase())})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:R.suffix,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:R.name,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:R.parent,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:R.supplierId,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:R.supplierName,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:R.L,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:R.W,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:R.H,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:R.wtPerPc,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-control form-control-sm",style:{textAlign:"right"},value:R.qty,onChange:Y=>L(A,"qty",Y.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:R.totalWt,readOnly:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>k(A),children:e.jsx("i",{className:"fas fa-trash"})})})]},A))})]})})]}),e.jsxs("div",{className:"card-footer text-right",style:{marginTop:8},children:[e.jsxs("button",{type:"button",className:"btn btn-primary mr-2",onClick:Z,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{type:"button",className:"btn btn-outline-secondary",onClick:l,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),F&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(He,{show:F,onClose:()=>W(!1),onSelect:K})}),e.jsx("style",{children:`
        .np-modal-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.35);
          z-index: 2000;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 1rem;
        }

        .np-modal {
          width: 100%;
          z-index: 2001;
        }

        .table-sm td, .table-sm th {
          vertical-align: middle;
        }

        /* === KATASHIKI (flex, input vertical) === */
        .kat-wrap{
          border: 1px solid #dcdcdc;
          border-radius: 6px;
          padding: 10px;
          background: #fff;
        }

        .kat-title{
          font-weight: 600;
          margin-bottom: 8px;
        }

        .kat-flex{
          display: flex;
          align-items: center;
          gap: 14px;
        }

        .kat-list{
          flex: 1;
          display: flex;
          flex-wrap: wrap;
          gap: 14px 16px;
          align-items: flex-start;
        }

        .kat-empty{
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
          padding: 10px 0;
        }

        .kat-item{
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 6px;
        }

        .kat-box{
          width: 180px;          /* ⬅️ sebelumnya 220px */
          border: 2px solid #000;
          border-radius: 8px;
          padding: 8px;
          background: #fff;

          display: flex;
          flex-direction: column;
          gap: 6px;
        }


        .kat-input{
          width: 100%;
          height: 28px;
          border: 1px solid #d0d0d0;
          border-radius: 6px;
          padding: 0 8px;
          font-size: 13px;
        }

        .kat-input-num{
          text-align: right;
        }

        .kat-del{
          width: 56px;
          height: 16px;                 /* sedikit lebih tinggi */
          border: 0;
          border-radius: 6px;
          background: #e60000;

          display: flex;                /* CENTERING */
          align-items: center;
          justify-content: center;

          color: #fff;                  /* PUTIH */
          font-weight: 700;
          font-size: 14px;
          line-height: 1;

          cursor: pointer;
        }


        /* tombol plus panjang (yang hijau) */
        .kat-plus{
          width: 22px;
          height: 110px;
          border: 0;
          border-radius: 4px;
          background: #13cc00;
          color: #fff;
          font-weight: 700;
          font-size: 18px;
          line-height: 110px;
          text-align: center;
          flex: 0 0 auto;
          cursor: pointer;
        }

        .kat-plus:hover{
          background: #10b300;
        }

        /* versi kecil untuk empty state */
        .kat-plus--sm{
          width: 20px;
          height: 34px;
          line-height: 34px;
          font-size: 16px;
          border-radius: 4px;
        }
      `})]}):null}function xl({filterName:t,setFilterName:l,filterCfc:r,setFilterCfc:s,filterType:a,setFilterType:m,filterRemark:x,setFilterRemark:u,implementationPeriod:d,setImplementationPeriod:i,destinationCode:c,setDestinationCode:h,destinationCountryCode:o,setDestinationCountryCode:p,country:y,setCountry:b,handleFilter:M,handleClearFilters:j,onSearchCfc:f,onSearchDestination:S}){return e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"form-row mb-3",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"CFC"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:Q(s),placeholder:"CFC"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:f,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Model Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:t,onChange:Q(l),placeholder:"Name"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Implementation Period"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:Q(i),placeholder:"Implementation Period"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:a,onChange:N=>m(N.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"pxp",children:"PxP"}),e.jsx("option",{value:"lot",children:"Lot"}),e.jsx("option",{value:"eng",children:"Engine"})]})]}),e.jsx("div",{className:"form-group col-md-6",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"small mb-1",children:"Destination Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:Q(h),placeholder:"Destination Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:S,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"small mb-1",children:"Destination Country Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]})]})}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Country"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"form-group col-md-12",children:[e.jsx("label",{className:"small mb-1",children:"Remark"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:x,onChange:N=>u(N.target.value),placeholder:"Remark"})]}),e.jsxs("div",{className:"form-group col-md-12 text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:M,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:j,children:[e.jsx("i",{className:"fas fa-undo mr-1"})," Reset"]})]})]})})}function pl({models:t,handleDeleteModel:l,handleEditModel:r,currentPage:s,setCurrentPage:a,pageSize:m}){const x=Math.ceil(t.length/m),u=t.slice((s-1)*m,s*m);return e.jsxs("div",{className:"card-body pt-0",children:[e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{className:"thead-light",style:{position:"sticky",top:0,zIndex:5,fontSize:"0.8rem"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50,textAlign:"center"},children:"No"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Name"}),e.jsx("th",{style:{textAlign:"center"},children:"CFC"}),e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Project Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Impl Period"}),e.jsx("th",{style:{textAlign:"center"},children:"Dest Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country"}),e.jsx("th",{style:{textAlign:"center"},children:"Remark"}),e.jsx("th",{style:{textAlign:"center"},children:"Katashiiki"}),e.jsx("th",{style:{textAlign:"center"},children:"Parts"}),e.jsx("th",{style:{width:120,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{style:{fontSize:"0.8rem"},children:u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center",children:"No models found"})}):u.map((d,i)=>{var h;const c=et.find(o=>o.destCode===d.model_destination_code);return e.jsxs("tr",{children:[e.jsx("td",{children:(s-1)*m+i+1}),e.jsx("td",{style:{textAlign:"center"},children:d.model_code}),e.jsx("td",{style:{textAlign:"center"},children:d.model_name}),e.jsx("td",{style:{textAlign:"center"},children:d.model_cfc}),e.jsx("td",{style:{textAlign:"center"},children:d.model_type}),e.jsx("td",{style:{textAlign:"center"},children:(h=d.project)==null?void 0:h.project_code}),e.jsx("td",{style:{textAlign:"center"},children:d.model_implementation_period}),e.jsx("td",{style:{textAlign:"center"},children:d.model_destination_code}),e.jsx("td",{style:{textAlign:"center"},children:c?c.code:""}),e.jsx("td",{style:{textAlign:"center"},children:c?c.country:""}),e.jsx("td",{style:{textAlign:"center"},children:d.model_remark}),e.jsx("td",{style:{textAlign:"center"},children:Array.isArray(d.katashiki)&&d.katashiki.length>0?d.katashiki.map((o,p)=>e.jsxs("span",{className:"badge badge-primary mr-1",children:[o.string," : ",o.number]},p)):"-"}),e.jsx("td",{style:{textAlign:"right"},children:Array.isArray(d.parts)?d.parts.length:0}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>r((s-1)*m+i),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>l((s-1)*m+i),children:e.jsx("i",{className:"fas fa-trash"})})]})]},i)})})]})}),e.jsx(qe,{currentPage:s,totalPages:x,totalItems:t.length,pageSize:m,onPageChange:a})]})}function jl(){const[t,l]=n.useState(""),[r,s]=n.useState(""),[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(""),[o,p]=n.useState(""),[y,b]=n.useState(""),[M,j]=n.useState(""),[f,S]=n.useState(!1),[N,P]=n.useState(!1),[I,B]=n.useState(!1),[D,C]=n.useState(null),[v,U]=n.useState(null),[w,O]=n.useState([]),[F,W]=n.useState([]),[te,se]=n.useState(1),_=10;n.useEffect(()=>{fetch("/packing-cost-fe/models.json").then(ne=>{if(!ne.ok)throw new Error("Network response was not ok");return ne.json()}).then(ne=>{const oe=ne.sort((T,J)=>new Date(J.model_implementation_period)-new Date(T.model_implementation_period));O(oe),W([])}).catch(ne=>{console.error("Error fetching models:",ne)})},[]);function K(){if(!t&&!r&&!a&&!x&&!d&&!c&&!o){W([...w].reverse()),se(1);return}let ne=w.filter(oe=>{var T,J,H,ee,g,E,G;return(!t||((T=oe.project.project_code)==null?void 0:T.toLowerCase().includes(t.toLowerCase())))&&(!r||((J=oe.model_name)==null?void 0:J.toLowerCase().includes(r.toLowerCase())))&&(!a||((H=oe.model_cfc)==null?void 0:H.toLowerCase().includes(a.toLowerCase())))&&(!x||((ee=oe.model_type)==null?void 0:ee.toLowerCase().includes(x.toLowerCase())))&&(!d||((g=oe.model_remark)==null?void 0:g.toLowerCase().includes(d.toLowerCase())))&&(!c||((E=oe.model_implementation_period)==null?void 0:E.toLowerCase().includes(c.toLowerCase())))&&(!o||((G=oe.model_destination_code)==null?void 0:G.toLowerCase().includes(o.toLowerCase())))});W(ne),se(1)}function k(){l(""),s(""),m(""),u(""),i(""),h(""),p(""),b(""),j(""),W([]),se(1)}function L(){C(null),U(null),S(!0)}function q(){S(!1),C(null),U(null)}const Z=X=>{X&&(m(X.model_cfc),s(X.model_name)),P(!1)},R=X=>{X&&(p(X.destCode),b(X.code),j(X.country)),B(!1)};function A(X){var ne,oe,T,J,H,ee,g;if(D!==null){const E=w.map((V,ie)=>ie===D?X:V);O(E);const G=F.map(V=>V.model_code===v.model_code&&V.model_name===v.model_name&&V.model_remark===v.model_remark?X:V);W(G)}else{const E=[X,...w];O(E),(!t||((ne=X.project.project_code)==null?void 0:ne.toLowerCase().includes(t.toLowerCase())))&&(!r||((oe=X.model_name)==null?void 0:oe.toLowerCase().includes(r.toLowerCase())))&&(!a||((T=X.model_cfc)==null?void 0:T.toLowerCase().includes(a.toLowerCase())))&&(!x||((J=X.model_type)==null?void 0:J.toLowerCase().includes(x.toLowerCase())))&&(!d||((H=X.model_remark)==null?void 0:H.toLowerCase().includes(d.toLowerCase())))&&(!c||((ee=X.model_implementation_period)==null?void 0:ee.toLowerCase().includes(c.toLowerCase())))&&(!o||((g=X.model_destination_code)==null?void 0:g.toLowerCase().includes(o.toLowerCase())))&&W([X,...F])}console.log("Model saved:",X),S(!1),C(null),U(null)}function Y(X){const ne=F[X],oe=w.findIndex(T=>T.model_code===ne.model_code&&T.model_name===ne.model_name&&T.model_remark===ne.model_remark);console.log("Editing model:",ne),console.log("Original index:",oe),C(oe),U(ne),S(!0)}function le(X){if(!confirm("Delete this model?"))return;const ne=F[X],oe=w.findIndex(T=>T.model_code===ne.model_code&&T.model_name===ne.model_name&&T.model_remark===ne.model_remark);if(oe!==-1){const T=w.filter((H,ee)=>ee!==oe);O(T);const J=F.filter((H,ee)=>ee!==X);W(J)}}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Model List"})}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:L,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Model"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",onClick:()=>alert("Upload placeholder"),children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Template",onClick:()=>alert("Download template placeholder"),children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(xl,{projectCode:t,setProjectCode:l,filterName:r,setFilterName:s,filterCfc:a,setFilterCfc:m,filterType:x,setFilterType:u,filterRemark:d,setFilterRemark:i,implementationPeriod:c,setImplementationPeriod:h,destinationCode:o,setDestinationCode:p,destinationCountryCode:y,setDestinationCountryCode:b,country:M,setCountry:j,handleFilter:K,handleClearFilters:k,handleOpenNew:L,onSearchCfc:()=>P(!0),onSearchDestination:()=>B(!0)}),e.jsx(pl,{models:F,handleDeleteModel:le,handleEditModel:Y,currentPage:te,setCurrentPage:se,pageSize:_})]}),e.jsx(ul,{show:f,onClose:q,onSave:A,initialData:v}),e.jsx(Ke,{show:N,onClose:()=>P(!1),onAdd:Z,selectionMode:"single"}),e.jsx(Nt,{show:I,onClose:()=>B(!1),onAdd:R,selectionMode:"single"})]})}function fl({show:t=!1,onClose:l=()=>{},onSave:r=()=>{},initialData:s=null}){const[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(""),[o,p]=n.useState(""),[y,b]=n.useState(""),[M,j]=n.useState(""),[f,S]=n.useState(""),[N,P]=n.useState(""),[I,B]=n.useState(""),[D,C]=n.useState([]),[v,U]=n.useState(!1),[w,O]=n.useState({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:""}),[F,W]=n.useState(!1),[te,se]=n.useState("parent"),[_,K]=n.useState(!1);n.useEffect(()=>{t&&(s?(m(s.partNo||""),u(s.uniqueNo||""),i(s.suffixCode||""),h(s.partName||s.name||""),p(s.parentPartNo||""),b(s.suppCode||s.supplierId||""),j(s.supplierName||""),S(s.supplierAddress||""),P(s.plantCode||""),B(s.uniqueNo2||""),C(s.childParts||[]),U(!1),O({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:""})):(m(""),u(""),i(""),h(""),p(""),b(""),j(""),S(""),P(""),B(""),C([]),U(!1),O({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:""})))},[t,s]);function k(A){C(Y=>Y.filter((le,X)=>X!==A))}function L(){if(!a.trim()){alert("Please enter Part No");return}const A={partNo:a,uniqueNo:x,suffixCode:d,partName:c,parentPartNo:o,suppCode:y,supplierName:M,supplierAddress:f,plantCode:N,uniqueNo2:I,childParts:D.slice()};r(A)}function q(A){A&&p(A.partNo),W(!1)}function Z(A){A&&(b(A.code),j(A.name),S(A.address)),K(!1)}function R(A){if(A&&A.length>0){const Y=A.map(le=>({partNo:le.partNo||le[0]||"",suffix:le.suffix||le[1]||"",uniqueNo:le.uniqueNo||"",name:le.name||le[2]||"",parent:le.parent||"",supplierId:le.supplierId||"",supplierName:le.supplierName||le[3]||""}));C(le=>[...le,...Y])}W(!1)}return t?e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:A=>{A.target===A.currentTarget&&l()},children:[e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:980},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Part New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:l,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6 d-flex",children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{className:"form-control form-control-sm mb-1",value:a,onChange:Q(m)})]}),e.jsxs("div",{style:{width:"30%",marginLeft:8},children:[e.jsx("label",{className:"small mb-1",children:"Suffix Code"}),e.jsx("input",{className:"form-control form-control-sm mb-1",value:d,onChange:Q(i)})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Parent Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:o,onChange:Q(p)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>{se("parent"),W(!0)},children:e.jsx("i",{className:"fas fa-search"})})})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Unique No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:x,onChange:Q(u)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>alert("Flash/Generate Unique No"),children:e.jsx("i",{className:"fas fa-bolt"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:Q(h)})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:y,onChange:Q(b)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>K(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",value:M,readOnly:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Address"}),e.jsx("input",{className:"form-control form-control-sm",value:f,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Plant Code"}),e.jsx("input",{className:"form-control form-control-sm",value:N,readOnly:!0})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{se("child"),W(!0)},children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Child Part"]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Unique No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Parent"}),e.jsx("th",{children:"Supplier ID"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{style:{width:90},children:"Action"})]})}),e.jsx("tbody",{children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-4 text-muted",children:"No Data Found"})}):D.map((A,Y)=>e.jsxs("tr",{children:[e.jsx("td",{children:Y+1}),e.jsx("td",{children:A.partNo}),e.jsx("td",{children:A.suffix}),e.jsx("td",{children:A.uniqueNo}),e.jsx("td",{children:A.name}),e.jsx("td",{children:A.parent}),e.jsx("td",{children:A.supplierId}),e.jsx("td",{children:A.supplierName}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>k(Y),children:e.jsx("i",{className:"fas fa-trash"})})})]},Y))})]})})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:L,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{className:"btn btn-outline-secondary",onClick:l,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),F&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(He,{show:F,mode:te==="parent"?"single":"multi",onClose:()=>W(!1),onSelect:te==="parent"?q:R})}),_&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(gt,{show:_,onClose:()=>K(!1),onSelect:Z})}),e.jsx("style",{children:`
        .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
        .np-modal { width: 100%; max-height: 95vh; overflow: auto; z-index: 2001; }
        .table-sm td, .table-sm th { vertical-align: middle; }
      `})]}):null}function Jt({show:t=!1,onClose:l=()=>{},onConfirm:r=()=>{},title:s="Confirmation",message:a="Are you sure?"}){return t?e.jsxs("div",{className:"modal-backdrop",children:[e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:s}),e.jsx("button",{type:"button",className:"close",onClick:l,children:e.jsx("span",{children:"×"})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:a})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:r,children:"Delete"})]})]})}),e.jsx("style",{jsx:!0,children:`
        .modal-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1050;
        }
        .modal-dialog {
          width: 500px;
        }
      `})]}):null}function bl(){const[t,l]=n.useState(""),[r,s]=n.useState(""),[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(""),[o,p]=n.useState([]),[y,b]=n.useState([]),[M,j]=n.useState(!1),[f,S]=n.useState(null),[N,P]=n.useState(!1),[I,B]=n.useState(null),[D,C]=n.useState(!1),[v,U]=n.useState(null),[w,O]=n.useState(!1),[F,W]=n.useState(10),[te,se]=n.useState(1),_=y.length;n.useEffect(()=>{fetch("/parts.json").then(H=>H.json()).then(H=>{const ee=H.map((g,E)=>({id:E,partNo:g.part_no,name:g.part_name,partName:g.part_name,supplierName:g.supplier_name,supplierId:g.supplier_code,suppCode:g.supplier_code,childParts:g.sub_part||[],suffix:"00",uniqueNo:`UN-00${E+1}`,parentPartNo:null}));p(ee),b([])}).catch(H=>console.error("Error fetching parts data:",H))},[]);function K(){if(!t&&!r&&!a&&!x&&!d&&!c){b([...o].reverse()),se(1);return}let ee=o.filter(g=>{const E=!t||g.partNo.toLowerCase().includes(t.toLowerCase()),G=!r||g.uniqueNo&&g.uniqueNo.toLowerCase().includes(r.toLowerCase()),V=!a||g.supplierId&&g.supplierId.toLowerCase().includes(a.toLowerCase())||g.suppCode&&g.suppCode.toLowerCase().includes(a.toLowerCase()),ie=!x||g.supplierName.toLowerCase().includes(x.toLowerCase()),ue=!d||g.parentPartNo&&g.parentPartNo.toLowerCase().includes(d.toLowerCase()),fe=!c||c==="Yes"&&g.childParts&&g.childParts.length>0||c==="No"&&(!g.childParts||g.childParts.length===0);return E&&G&&V&&ie&&ue&&fe});b(ee),se(1)}function k(){l(""),s(""),m(""),u(""),i(""),h(""),b([]),se(1)}function L(){S(null),j(!0)}function q(){S(null),j(!1)}function Z(H){if(f){const ee=o.map(E=>E.id===f.id?{...E,...H}:E);p(ee);const g=y.map(E=>E.id===f.id?{...E,...H}:E);b(g)}else{const ee={...H,id:o.length};p(g=>[ee,...g])}j(!1),S(null)}function R(H){S(H),j(!0)}function A(){alert("Upload placeholder")}function Y(){alert("Template placeholder")}function le(H){B(H),P(!0)}function X(){if(I){const H=o.filter(g=>g.id!==I.id);p(H);const ee=y.filter(g=>g.id!==I.id);b(ee),B(null)}P(!1)}function ne(H){se(H)}function oe(H){U(H),C(!0)}function T(H){if(!H){C(!1),U(null);return}const ee=Array.isArray(H)?H[0]:H;if(!ee){C(!1),U(null);return}const g=ee.partNo??ee.part_number??ee.code??"",E=ee.partNo??ee.partNoParent??ee.parentPartNo??"";v==="partNo"?l(g):v==="parentPart"&&i(E||g),C(!1),U(null)}function J(H){H&&(m(H.code),u(H.name)),O(!1)}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Part List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:L,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Part"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:A,title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Y,title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:t,onChange:Q(l),onKeyDown:H=>{H.key==="Enter"&&(H.preventDefault(),K())},placeholder:"Part No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Pick Part",onClick:()=>oe("partNo"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Unique No"}),e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:Q(s),onKeyDown:H=>{H.key==="Enter"&&(H.preventDefault(),K())},placeholder:"Unique No"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:a,onChange:Q(m),onKeyDown:H=>{H.key==="Enter"&&(H.preventDefault(),K())},placeholder:"Supplier ID"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Supplier",onClick:()=>O(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",value:x,onChange:Q(u),onKeyDown:H=>{H.key==="Enter"&&(H.preventDefault(),K())},placeholder:"Supplier Name"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Parent Part"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:Q(i),onKeyDown:H=>{H.key==="Enter"&&(H.preventDefault(),K())},placeholder:"Parent Part"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Pick Parent Part",onClick:()=>oe("parentPart"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Has Subparts?"}),e.jsxs("select",{className:"form-control form-control-sm",value:c,onChange:H=>h(H.target.value),children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:K,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:k,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx("div",{className:"table-responsive mb-3",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Unique No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Parent Part No"}),e.jsx("th",{children:"Subparts"}),e.jsx("th",{style:{width:110},children:"Action"})]})}),e.jsx("tbody",{children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center py-4 text-muted",children:"No Data Found"})}):y.slice((te-1)*F,te*F).map((H,ee)=>e.jsxs("tr",{children:[e.jsx("td",{children:(te-1)*F+ee+1}),e.jsx("td",{children:H.partNo}),e.jsx("td",{children:H.suffixCode??H.suffix}),e.jsx("td",{children:H.uniqueNo}),e.jsx("td",{children:H.partName??H.name}),e.jsx("td",{children:H.suppCode??H.supplierId}),e.jsx("td",{children:H.supplierName}),e.jsx("td",{children:H.parentPartNo??H.parent}),e.jsx("td",{children:H.childParts?H.childParts.length:H.subparts?H.subparts.length:0}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>R(H),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>le(H),children:e.jsx("i",{className:"fas fa-trash"})})]})]},ee))})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>ne(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>ne(Math.max(1,te-1)),children:"<"}),[...Array(Math.max(1,Math.ceil(_/F))).keys()].map(H=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${te===H+1?"btn-primary":"btn-light"}`,onClick:()=>ne(H+1),children:H+1},H)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>ne(Math.min(Math.ceil(_/F)||1,te+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",_]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[F," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>W(10),children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>W(25),children:"25"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>W(50),children:"50"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})]}),e.jsx(fl,{show:M,onClose:q,onSave:Z,initialData:f}),e.jsx(Jt,{show:N,onClose:()=>P(!1),onConfirm:X,title:"Deletion Confirmation",message:"Do you want to delete this data?"}),e.jsx(He,{show:D,onClose:()=>{C(!1),U(null)},onSelect:T}),e.jsx(gt,{show:w,onClose:()=>O(!1),onSelect:J})]})}const Nl=[{code:"5062",name:"MENARA TERUS MAKMUR",address:"Jl. Jababeka XI Blok H-3 No.12, Kawasan Industri Jababeka, Cikarang, Bekasi"},{code:"722E",name:"TOYOTA MOTOR THAILAND",address:"186/1 Moo 1, Old Railway Road, Samrong Tai, Phra Pradaeng, Samut Prakan 10130, Thailand"},{code:"5453",name:"VELASTO INDONESIA",address:"Kp. Nagrog RT04 / RW02 Desa Kertamukti, Kecamatan Campaka, Purwakarta, Jawa Barat"},{code:"5365",name:"TOKAI RUBBER INDONESIA",address:"Jl. Mitra Timur II Blok E No. 13-14, Parungmulya, Ciampel, Karawang, Jawa Barat"},{code:"5150",name:"NAMICOH INDONESIA",address:"EJIP Industrial Park, Plot 6B-1, Cikarang Selatan, Bekasi, Jawa Barat"},{code:"5028",name:"GARUDA METAL UTAMA",address:"Jl. Kapuk Kamal Raya No.28, RT.6/RW.2, Kamal Muara, Kec. Penjaringan, Jkt Utara, Daerah Khusus Ibukota Jakarta 14470"},{code:"5335",name:"DINAR MAKMUR",address:"Jl. Raya Serang No.KM. 78, RW.3, Cijeruk, Kec. Kibin, Kabupaten Serang, Banten 42185"},{code:"5006",name:"NUSAHADI CITRAHARMONIS",address:"Jl. Raya Bekasi No.KM. 28, RT.005/RW.004, Medan Satria, Kecamatan Medan Satria, Kota Bks, Jawa Barat 17132"},{code:"5151",name:"SAKURA JAVA INDONESIA",address:"Kawasan Industri EJIP, Plot 8C/D, Cikarang Selatan, Bekasi, Jawa Barat 17530"},{code:"5010",name:"3 M INDONESIA",address:"Perkantoran Hijau Arkadia, Tower F, 8th Floor, Jl. TB Simatupang No.Kav. 88, RT.1/RW.1, Kebagusan, Ps. Minggu, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12520"},{code:"5002",name:"ASALTA MANDIRI AGUNG",address:"Jl. Pulo Buaran Raya No.1A, RT.1/RW.8, Pulo Gadung, Kota Jakarta Timur, Daerah Khusus Ibukota Jakarta 13930"}];function gl({show:t=!1,onClose:l=()=>{},onSave:r=()=>{},initialData:s=null}){const[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState("");n.useEffect(()=>{t&&(s?(m(s.code||""),u(s.name||""),i(s.address||"")):(m(""),u(""),i("")))},[t,s]);function c(){if(!a.trim()||!x.trim()){alert("Please enter Supplier Code and Name");return}r({code:a,name:x,address:d})}return t?e.jsxs("div",{className:"modal-backdrop",children:[e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:s?"Edit Supplier":"Add Supplier"}),e.jsx("button",{type:"button",className:"close",onClick:l,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control",value:a,onChange:Q(m),readOnly:!!s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier Name"}),e.jsx("input",{type:"text",className:"form-control",value:x,onChange:Q(u)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address"}),e.jsx("textarea",{className:"form-control",rows:"3",value:d,onChange:h=>i(h.target.value)})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:c,children:"Save"})]})]})}),e.jsx("style",{jsx:!0,children:`
        .modal-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1050;
        }
        .modal-dialog {
          width: 500px;
        }
      `})]}):null}function vl(){const[t,l]=n.useState([]),[r,s]=n.useState([]),[a,m]=n.useState(""),[x,u]=n.useState(""),[d,i]=n.useState(""),[c,h]=n.useState(!1),[o,p]=n.useState(null),[y,b]=n.useState(!1),[M,j]=n.useState(null),[f,S]=n.useState(1),[N,P]=n.useState(5);n.useEffect(()=>{const F=Nl.map((W,te)=>({...W,id:te}));l(F),s([])},[]);function I(){let F=t.filter(W=>(!a||W.code.toLowerCase().includes(a.toLowerCase()))&&(!x||W.name.toLowerCase().includes(x.toLowerCase()))&&(!d||W.address.toLowerCase().includes(d.toLowerCase())));s(F),S(1)}function B(){m(""),u(""),i(""),s([]),S(1)}function D(){p(null),h(!0)}function C(F){p(F),h(!0)}function v(F){if(o){const W=t.map(te=>te.id===o.id?{...o,...F}:te);l(W),s(W)}else{const te=[{...F,id:t.length},...t];l(te),s(te)}h(!1),p(null)}function U(F){j(F),b(!0)}function w(){if(M){const F=t.filter(W=>W.id!==M.id);l(F),s(F),j(null)}b(!1)}const O=r.slice((f-1)*N,f*N);return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Supplier List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{className:"btn btn-sm btn-success mr-2",onClick:D,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Supplier"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Upload placeholder"),title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Template placeholder"),title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:a,onChange:Q(m),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),I())},placeholder:"Supplier Code"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:x,onChange:Q(u),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),I())},placeholder:"Supplier Name"})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Address"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:Q(i),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),I())},placeholder:"Address"})]})})}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-right",children:[e.jsxs("button",{className:"btn btn-sm btn-primary mr-2",onClick:I,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:B,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Address"}),e.jsx("th",{style:{width:110},children:"Action"})]})}),e.jsx("tbody",{children:O.length>0?O.map((F,W)=>e.jsxs("tr",{children:[e.jsx("td",{children:(f-1)*N+W+1}),e.jsx("td",{children:F.code}),e.jsx("td",{children:F.name}),e.jsx("td",{children:F.address}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>C(F),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>U(F),children:e.jsx("i",{className:"fas fa-trash"})})]})]},F.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4 text-muted",children:"No Data Found"})})})]})}),e.jsx(qe,{currentPage:f,totalItems:r.length,itemsPerPage:N,onPageChange:S,onItemsPerPageChange:P})]})]}),e.jsx(gl,{show:c,onClose:()=>h(!1),onSave:v,initialData:o}),e.jsx(Jt,{show:y,onClose:()=>b(!1),onConfirm:w,title:"Deletion Confirmation",message:"Do you want to delete this data?"})]})}function yl(){const t=tt(),l=()=>{window.confirm("Are you sure you want to clear all saved data?")&&(localStorage.clear(),alert("All data cleared!"),t("/"))};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Settings"})})}),e.jsx("div",{className:"card-body",children:e.jsx("button",{className:"btn btn-danger",onClick:l,children:"Clear All Data"})})]})})}function Cl({onSave:t}){const[l,r]=n.useState("02.2025"),[s,a]=n.useState("47.7"),[m,x]=n.useState("86.177"),[u,d]=n.useState("86.177"),[i,c]=n.useState("60.577"),[h,o]=n.useState("64"),[p,y]=n.useState("86.177"),[b,M]=n.useState("106.835"),[j,f]=n.useState("63.249"),[S,N]=n.useState("1"),[P,I]=n.useState("0,31"),[B,D]=n.useState("6"),[C,v]=n.useState("0,31"),[U,w]=n.useState("5,83"),[O,F]=n.useState(""),[W,te]=n.useState("0,60"),[se,_]=n.useState("5"),[K,k]=n.useState(!1),L=()=>{const A={inland:{period:l,containerM3:s,rent40ft:m,rent20ft:u,milkrunRate:i,milkrunEff:h},labor:{period:l,dlRate:p,idlRate:b,facilityRate:j},manHour:{period:l,receiving:S,inspection:P,deliveryCourse:B,supplyPallet:C,sortingSupply:U,pickPacking:O,vanning:W,emptyBox:se}};k(!0),typeof t=="function"&&t(A),setTimeout(()=>k(!1),1500)},q=()=>{r("02.2025"),a("47.7"),x("86.177"),d("86.177"),c("60.577"),o("64"),y("86.177"),M("106.835"),f("63.249"),N("1"),I("0,31"),D("6"),v("0,31"),w("5,83"),F(""),te("0,60"),_("5")},Z="form-control form-control-sm",R={fontWeight:700,fontSize:"80%"};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsx("div",{className:"card-header d-flex align-items-center",children:e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Parameters"})})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{children:e.jsx("b",{children:"General"})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Period"}),e.jsx("input",{className:Z,value:l,onChange:A=>r(A.target.value)})]})}),e.jsx("hr",{}),e.jsx("h5",{children:e.jsx("b",{children:"Inland"})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Container Volume M3"}),e.jsx("input",{className:Z,value:s,onChange:A=>a(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"40 feet container rent rate"}),e.jsx("input",{className:Z,value:m,onChange:A=>x(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"20 feet container rent rate"}),e.jsx("input",{className:Z,value:u,onChange:A=>d(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Milkrun rate (per m3)"}),e.jsx("input",{className:Z,value:i,onChange:A=>c(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Milkrun efficiency rate (%)"}),e.jsx("input",{className:Z,value:h,onChange:A=>o(A.target.value)})]})]}),e.jsx("hr",{}),e.jsx("h5",{children:e.jsx("b",{children:"Labor Cost"})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Direct Labor Rate (DL) Rp/Hour"}),e.jsx("input",{className:Z,value:p,onChange:A=>y(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Indirect Labor Rate (IDL) Rp/M3"}),e.jsx("input",{className:Z,value:b,onChange:A=>M(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Facility Others Rate"}),e.jsx("input",{className:Z,value:j,onChange:A=>f(A.target.value)})]})]}),e.jsx("hr",{}),e.jsx("h5",{children:e.jsx("b",{children:"Man Hour"})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Receiving"}),e.jsx("input",{className:Z,value:S,onChange:A=>N(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Inspection"}),e.jsx("input",{className:Z,value:P,onChange:A=>I(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Delivery Course"}),e.jsx("input",{className:Z,value:B,onChange:A=>D(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Supply (Pallet)"}),e.jsx("input",{className:Z,value:C,onChange:A=>v(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Sorting & Supply (Non Pallet)"}),e.jsx("input",{className:Z,value:U,onChange:A=>w(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Pick & Packing"}),e.jsx("input",{className:Z,value:O,onChange:A=>F(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Vanning"}),e.jsx("input",{className:Z,value:W,onChange:A=>te(A.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{style:R,children:"Empty Box/Pallet Return"}),e.jsx("input",{className:Z,value:se,onChange:A=>_(A.target.value)})]})]}),e.jsx("hr",{})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-primary mr-2",onClick:L,children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:q,children:"Cancel"}),K&&e.jsx("span",{className:"ml-3 text-success",children:"Parameters saved"})]})]})})}function Sl(){const t=tt(),l=()=>{t(-1)};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Notification Detail"}),e.jsx("div",{className:"card-tools",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:l,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date :"})," 20 Feb 2025 13:10"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"From :"})," Jonathan Hairi"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dept :"})," PPMD"]}),e.jsx("hr",{}),e.jsx("p",{children:"Harus diganti Qty menjadi 2"}),e.jsx("p",{children:"Agar lebih aman ketika dikirim ke supplier lain"}),e.jsx("p",{children:"dan diganti Material No nya dengan Mat No : #12312312 00"}),e.jsx("p",{children:"dari supplier Materindo Indigo"})]})]})})}const wl=t=>t===0?"0.00%":`${t>0?"+":""}${t.toFixed(2)}%`,kl=()=>{const[t,l]=n.useState([]),[r,s]=n.useState(1),a=10,m="/packing-cost-fe/costData.json";n.useEffect(()=>{fetch(m).then(i=>i.json()).then(i=>l(i))},[]);const x=t.length,u=Math.ceil(x/a),d=t.slice((r-1)*a,r*a);return e.jsxs("div",{className:"container-fluid mt-3",children:[e.jsx("ul",{className:"list-group",children:d.map((i,c)=>e.jsx("li",{className:"list-group-item",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("strong",{children:i.partName}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:i.partNo})]}),e.jsxs("div",{className:"col-md-3 text-right",children:[e.jsx("small",{className:"text-muted",children:"Total Cost"}),e.jsx("br",{}),i.totalCost.toLocaleString("en-US",{style:"currency",currency:"IDR"})]}),e.jsx("div",{className:"col-md-2 text-center",children:e.jsxs("span",{className:i.change>0||i.change<-15?"text-danger":i.change<0?"text-success":"text-muted",children:[i.change>0?e.jsx("i",{className:"fas fa-arrow-up"}):i.change<0?e.jsx("i",{className:"fas fa-arrow-down"}):""," ",wl(i.change)]})}),e.jsxs("div",{className:"col-md-1 text-center",children:[i.change>15&&e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle",style:{color:"red"},title:"Above threshold"}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"Above Threshold"})]}),i.change<-15&&e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle",style:{color:"red"},title:"Below threshold"}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"Below Threshold"})]})]}),e.jsx("div",{className:"col-md-2 text-center",children:e.jsx(Tt,{to:`/cost-movement/${i.partNo}`,className:"btn btn-sm btn-info",children:"Details"})})]})},c))}),e.jsx("div",{style:{position:"sticky",bottom:0,background:"#f4f6f9",padding:"1rem 0"},children:e.jsx(qe,{currentPage:r,totalPages:u,totalItems:x,pageSize:a,onPageChange:s})})]})},Pl=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Internal Costing – Detail Comparison</title>
  <style>
    :root {
      --green: #1a7f37;
      --red: #c62828;
      --gray-900: #1f2937;
      --gray-700: #4b5563;
      --gray-500: #6b7280;
      --gray-300: #d1d5db;
      --gray-100: #f3f4f6;
      --bg: #ffffff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, sans-serif;
      color: var(--gray-900);
      background: var(--bg);
    }

    /* ---------- Sticky Context Header ---------- */
    .context-header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #fff;
      border-bottom: 1px solid var(--gray-300);
      padding: 12px 24px;
    }

    .context-grid {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 16px;
      font-size: 13px;
      align-items: end;
    }

    .context-grid > div {
      min-width: 0; /* Allow grid items to shrink */
    }

    .label { color: var(--gray-500); font-size: 11px; }

    /* ---------- Cost Summary ---------- */
    .summary {
      padding: 24px;
      border-bottom: 1px solid var(--gray-300);
    }

    .total {
      font-size: 28px;
      font-weight: 600;
    }

    .delta-down { color: var(--green); }
    .delta-up { color: var(--red); }

    .category-deltas {
      display: flex;
      gap: 24px;
      margin-top: 16px;
      font-size: 14px;
    }

    /* ---------- Filters ---------- */
    .filters {
      padding: 16px 24px;
      border-bottom: 1px solid var(--gray-300);
      display: flex;
      gap: 16px;
      align-items: center;
      font-size: 13px;
    }

    /* ---------- Sections ---------- */
    .section {
      border-bottom: 1px solid var(--gray-300);
    }

    .section-header {
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      background: var(--gray-100);
    }

    .section-header h3 {
      margin: 0;
      font-size: 16px;
    }

    .section-header h4 {
      margin: 0;
      font-size: 16px;
    }

    .section-content {
      padding: 16px 24px;
    }

    /* ---------- Table ---------- */
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    col.col-divider {
      border-left: 3px solid var(--gray-300);
    }

    th, td {
      padding: 8px 10px;
      border-bottom: 1px solid var(--gray-300);
      text-align: right;
      white-space: nowrap;
    }

    th {
      color: var(--gray-500);
      font-weight: 500;
    }

    .old { color: var(--gray-500); }
    .new { font-weight: 600; }

    /* ---------- Compact List ---------- */
    .compact-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px dashed var(--gray-300);
      font-size: 13px;
    }

    /* ---------- Footer ---------- */
    .footer {
      padding: 16px 24px;
      display: flex;
      gap: 12px;
    }

    button {
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
    }
      .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 16px;
      align-items: start;
    }

    .remark-col textarea {
      width: 100%;
      min-height: 56px;
      font-size: 13px;
    }

    .page-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 16px;
      padding: 16px 24px;
      align-items: start;
    }
    .page-grid .section-header {
      background: none;
      padding: 16px 0;
    }
    .page-grid .section-content {
      padding: 0;
    }
    .page-grid h3 {
      font-size: 16px;
    }
    .page-grid table {
      table-layout: fixed;
    }
    .divider {
      border-right: 1px solid #dee2e6;
    }
  </style>
</head>
<body>

<!-- Summary -->
<div class="summary">
  <div class="total">
    Rp 368.00 → Rp 362.07
    <span class="delta-down">▼ -1.63%</span>
  </div>
  <div class="category-deltas">
    <div>Material <span class="delta-down">▼ -53.92%</span></div>
    <div>Inner <span class="delta-down">▼ -53.92%</span></div>
    <div>Outer <span class="delta-down">▼ -53.92%</span></div>
    <div>Labor <span class="delta-down">▼ -7.16%</span></div>
    <div>Inland <span class="delta-down">▼ -4.85%</span></div>
  </div>
</div>  

<!-- Filters -->
<div class="filters">
  Show: <select><option>All Changes</option></select>
  Min Δ %: <input type="number" value="5" style="width:60px" />
  <label><input type="checkbox" /> Supplier change only</label>
</div>

<div class="page-grid">
  <!-- Baseline Column -->
  <div class="baseline-col">
    <!-- Context Header -->
    <div class="context-header" style="position: static; border-bottom: none; padding: 0;">
      <div class="label">Baseline</div>
      <div style="display:flex; flex-direction:column; gap:6px; margin-top: 4px;">
        <select style="width:100%">
          <option>169290E010‑00 – HOSE ASSY</option>
          <option>364070K010‑00 – HOSE ASSY REV</option>
        </select>
        <select style="width:100%">
          <option value="2024-01">Jan 2024</option>
          <option value="2024-02">Feb 2024</option>
          <option value="2024-03">Mar 2024</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Comparison Column -->
  <div class="comparison-col">
    <!-- Context Header -->
    <div class="context-header" style="position: static; border-bottom: none; padding: 0;">
      <div class="label">Comparison</div>
      <div style="display:flex; flex-direction:column; gap:6px; margin-top: 4px;">
        <select style="width:100%">
          <option>169290E010‑00 – HOSE ASSY</option>
          <option selected>364070K010‑00 – HOSE ASSY REV</option>
        </select>
        <select style="width:100%">
          <option value="2025-08">Aug 2025</option>
          <option value="2025-09">Sep 2025</option>
          <option value="2025-10">Oct 2025</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Others Column -->
  <div class="others-col">
    <!-- Context Header -->
    <div class="context-header" style="position: static; border-bottom: none; padding: 0; text-align: left;">
      <button style="width: 150px; margin-top: 24px;">Compare</button>
    </div>
  </div>

  <!-- Materials Section -->
  <div class="section" style="grid-column: 1 / -1;">
    <div class="section-header">
      <h3><span class="collapse-icon">▼ </span>Materials</h3>
      <div>Rp 595.00 → Rp 545.00 <span class="delta-down">▼ -8.40%</span></div>
    </div>
    <div class="section-content">
      <!-- Inner Packaging Section -->
      <div class="section" style="grid-column: 1 / -1; border-top: none; margin-left: 24px;">
        <div class="section-header" style="background: var(--gray-100);">
          <h4><span class="collapse-icon">▼ </span>Inner Packaging</h4>
          <div>Rp 245.00 → Rp 230.00 <span class="delta-down">▼ -6.12%</span></div>
        </div>
        <div class="section-content">
          <table style="width: 100%;">
        <colgroup>
          <!-- Baseline -->
          <col style="width: 100px">
          <col>
          <col style="width: 50px">
          <col style="width: 100px">
          <!-- Comparison -->
          <col style="width: 100px">
          <col>
          <col style="width: 50px">
          <col style="width: 100px">
          <!-- Others -->
          <col style="width: 100px">
          <col style="width: 80px">
          <col>
        </colgroup>
        <thead>
          <tr>
            <!-- Baseline -->
            <th style="text-align: center; font-weight: bold" colspan="4" class="divider">Baseline</th>
            <!-- Comparison -->
            <th style="text-align: center; font-weight: bold;" colspan="4" class="divider">Comparison</th>
            <!-- Diff -->
            <th style="text-align: center; font-weight: bold;" colspan="2" class="divider">Diff</th>
            <!-- Others -->
            <th style="text-align: center; font-weight: bold;" colspan="1">Others</th>
          </tr>
          <tr>
            <!-- Baseline -->
            <th>Mat No</th><th>Mat Name</th><th class="qty-col">Qty</th><th class="divider">Cost (Rp)</th>
            <!-- Comparison -->
            <th>Mat No</th><th>Mat Name</th><th class="qty-col">Qty</th><th class="divider">Cost (Rp)</th>
            <!-- Others -->
            <th>Diff (Amt)</th><th>Diff (%)</th><th>Remark</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <!-- Baseline data -->
            <td>B027‑0201</td><td>Paper Tape</td><td class="qty-col">20</td><td class="divider">24.00</td>
            <!-- Comparison data -->
            <td>B027‑0201</td><td>Paper Tape</td><td class="qty-col">18</td><td class="delta-down divider">11.06</td>
            <!-- Diff/Remark data -->
            <td>3,500</td><td>13%</td>
            <td><textarea placeholder="Reason for >15% change"></textarea></td>
          </tr>
          <tr>
            <!-- Baseline data -->
            <td>B027‑0109</td><td>Plastic Sheet</td><td class="qty-col">10</td><td class="divider">3.00</td>
            <!-- Comparison data -->
            <td>B027‑0305</td><td>Bubble Sheet</td><td class="qty-col">10</td><td class="delta-up divider">5.20</td>
            <!-- Diff/Remark data -->
            <td>3,500</td><td>13%</td>
            <td><textarea placeholder="Reason for new item"></textarea></td>
          </tr>
          <tr>
            <!-- Baseline data -->
            <td>MAT002</td><td>Foam Padding</td><td class="qty-col">15</td><td class="divider">25.50</td>
            <!-- Comparison data -->
            <td>MAT002</td><td>Foam Padding</td><td class="qty-col">15</td><td class="delta-down divider">22.95</td>
            <!-- Diff/Remark data -->
            <td>-2.55</td><td>-10%</td>
            <td><textarea placeholder=""></textarea></td>
          </tr>
          <tr>
            <!-- Baseline data -->
            <td>MAT005</td><td>Rubber Gasket</td><td class="qty-col">30</td><td class="divider">12.75</td>
            <!-- Comparison data -->
            <td>MAT005</td><td>Rubber Gasket</td><td class="qty-col">30</td><td class="delta-down divider">11.48</td>
            <!-- Diff/Remark data -->
            <td>-1.27</td><td>-10%</td>
            <td><textarea placeholder=""></textarea></td>
          </tr>
          <tr>
            <!-- Baseline data -->
            <td>MAT007</td><td>Memory Foam Insert</td><td class="qty-col">5</td><td class="divider">45.80</td>
            <!-- Comparison data -->
            <td>MAT007</td><td>Memory Foam Insert</td><td class="qty-col">5</td><td class="delta-down divider">41.22</td>
            <!-- Diff/Remark data -->
            <td>-4.58</td><td>-10%</td>
            <td><textarea placeholder=""></textarea></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Outer Packaging Section -->
  <div class="section" style="grid-column: 1 / -1; margin-left: 24px;">
    <div class="section-header" style="background: var(--gray-100);">
      <h4><span class="collapse-icon">▼ </span>Outer Packaging</h4>
      <div>Rp 350.00 → Rp 315.00 <span class="delta-down">▼ -10.00%</span></div>
    </div>
    <div class="section-content">
      <table style="width: 100%;">
        <colgroup>
          <!-- Baseline -->
          <col style="width: 100px">
          <col>
          <col style="width: 50px">
          <col style="width: 100px">
          <!-- Comparison -->
          <col style="width: 100px">
          <col>
          <col style="width: 50px">
          <col style="width: 100px">
          <!-- Others -->
          <col style="width: 100px">
          <col style="width: 80px">
          <col>
        </colgroup>
        <thead>
          <tr>
            <!-- Baseline -->
            <th style="text-align: center; font-weight: bold" colspan="4" class="divider">Baseline</th>
            <!-- Comparison -->
            <th style="text-align: center; font-weight: bold;" colspan="4" class="divider">Comparison</th>
            <!-- Diff -->
            <th style="text-align: center; font-weight: bold;" colspan="2" class="divider">Diff</th>
            <!-- Others -->
            <th style="text-align: center; font-weight: bold;" colspan="1">Others</th>
          </tr>
          <tr>
            <!-- Baseline -->
            <th>Mat No</th><th>Mat Name</th><th class="qty-col">Qty</th><th class="divider">Cost (Rp)</th>
            <!-- Comparison -->
            <th>Mat No</th><th>Mat Name</th><th class="qty-col">Qty</th><th class="divider">Cost (Rp)</th>
            <!-- Others -->
            <th>Diff (Amt)</th><th>Diff (%)</th><th>Remark</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <!-- Baseline data -->
            <td>MAT001</td><td>Steel Sheet</td><td class="qty-col">1</td><td class="divider">150.00</td>
            <!-- Comparison data -->
            <td>MAT001</td><td>Steel Sheet</td><td class="qty-col">1</td><td class="delta-down divider">135.00</td>
            <!-- Diff/Remark data -->
            <td>-15.00</td><td>-10%</td>
            <td><textarea placeholder=""></textarea></td>
          </tr>
          <tr>
            <!-- Baseline data -->
            <td>MAT004</td><td>Aluminum Frame</td><td class="qty-col">1</td><td class="divider">200.00</td>
            <!-- Comparison data -->
            <td>MAT004</td><td>Aluminum Frame</td><td class="qty-col">1</td><td class="delta-down divider">180.00</td>
            <!-- Diff/Remark data -->
            <td>-20.00</td><td>-10%</td>
            <td><textarea placeholder=""></textarea></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

    </div>
</div>

  <!-- Labor Section -->
  <div class="section" style="grid-column: 1 / -1;">
    <div class="section-header">
      <h3><span class="collapse-icon">▼ </span>Labor</h3>
      <div>Rp 55.00 → Rp 51.06 <span class="delta-down">▼ -7.16%</span></div>
    </div>
    <div class="section-content">
      <table style="width: 100%; table-layout: fixed;">
        <colgroup>
          <!-- Baseline -->
          <col style="width: 100px">
          <col>
          <col style="width: 50px">
          <col style="width: 100px">
          <!-- Comparison -->
          <col style="width: 100px">
          <col>
          <col style="width: 50px">
          <col style="width: 100px">
          <!-- Others -->
          <col style="width: 100px">
          <col style="width: 80px">
          <col>
        </colgroup>
        <thead>
          <tr>
            <th colspan="3" style="text-align: left;">Item</th>
            <th class="divider" style="text-align: right;">Price</th>
            <th colspan="3" style="text-align: left;">Item</th>
            <th class="divider" style="text-align: right;">Price</th>
            <th style="text-align: right;">Diff Amt</th>
            <th style="text-align: right;">Diff %</th>
            <th>Remark</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <!-- Baseline data -->
            <td colspan="3" style="text-align: left;">DL</td>
            <td class="divider" style="text-align: right;">14.00</td>
            <!-- Comparison data -->
            <td colspan="3" style="text-align: left;">DL</td>
            <td class="delta-down divider" style="text-align: right;">11.06</td>
            <!-- Diff/Remark data -->
            <td class="delta-down" style="text-align: right;">-2.94</td>
            <td class="delta-down" style="text-align: right;">-21.00%</td>
            <td><textarea style="width: 100%; box-sizing: border-box;"></textarea></td>
          </tr>
          <tr>
            <!-- Baseline data -->
            <td colspan="3" style="text-align: left;">IDL</td>
            <td class="divider" style="text-align: right;">26.00</td>
            <!-- Comparison data -->
            <td colspan="3" style="text-align: left;">IDL</td>
            <td class="delta-up divider" style="text-align: right;">27.00</td>
            <!-- Diff/Remark data -->
            <td class="delta-up" style="text-align: right;">1.00</td>
            <td class="delta-up" style="text-align: right;">3.85%</td>
            <td><textarea style="width: 100%; box-sizing: border-box;"></textarea></td>
          </tr>
          <tr>
            <!-- Baseline data -->
            <td colspan="3" style="text-align: left;">Facility/Others</td>
            <td class="divider" style="text-align: right;">15.00</td>
            <!-- Comparison data -->
            <td colspan="3" style="text-align: left;">Facility/Others</td>
            <td class="delta-down divider" style="text-align: right;">13.00</td>
            <!-- Diff/Remark data -->
            <td class="delta-down" style="text-align: right;">-2.00</td>
            <td class="delta-down" style="text-align: right;">-13.33%</td>
            <td><textarea style="width: 100%; box-sizing: border-box;"></textarea></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Inland Section -->
  <div class="section" style="grid-column: 1 / -1;">
    <div class="section-header">
      <h3><span class="collapse-icon">▼ </span>Inland</h3>
      <div>Rp 40.00 → Rp 39.00 <span class="delta-down">▼ -2.50%</span></div>
    </div>
    <div class="section-content">
      <table style="width: 100%; table-layout: fixed;">
        <colgroup>
          <!-- Baseline -->
          <col style="width: 100px">
          <col>
          <col style="width: 50px">
          <col style="width: 100px">
          <!-- Comparison -->
          <col style="width: 100px">
          <col>
          <col style="width: 50px">
          <col style="width: 100px">
          <!-- Others -->
          <col style="width: 100px">
          <col style="width: 80px">
          <col>
        </colgroup>
        <thead>
          <tr>
            <th colspan="3" style="text-align: left;">Item</th>
            <th class="divider" style="text-align: right;">Price</th>
            <th colspan="3" style="text-align: left;">Item</th>
            <th class="divider" style="text-align: right;">Price</th>
            <th style="text-align: right;">Diff Amt</th>
            <th style="text-align: right;">Diff %</th>
            <th>Remark</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <!-- Baseline data -->
            <td colspan="3" style="text-align: left;">Inland Cost</td>
            <td class="divider" style="text-align: right;">14.00</td>
            <!-- Comparison data -->
            <td colspan="3" style="text-align: left;">Inland Cost</td>
            <td class="delta-down divider" style="text-align: right;">11.06</td>
            <!-- Diff/Remark data -->
            <td class="delta-down" style="text-align: right;">-2.94</td>
            <td class="delta-down" style="text-align: right;">-21.00%</td>
            <td><textarea style="width: 100%; box-sizing: border-box;"></textarea></td>
          </tr>
          <tr>
            <!-- Baseline data -->
            <td colspan="3" style="text-align: left;">Milkrun Cost</td>
            <td class="divider" style="text-align: right;">26.00</td>
            <!-- Comparison data -->
            <td colspan="3" style="text-align: left;">Milkrun Cost</td>
            <td class="delta-up divider" style="text-align: right;">27.94</td>
            <!-- Diff/Remark data -->
            <td class="delta-up" style="text-align: right;">1.94</td>
            <td class="delta-up" style="text-align: right;">7.46%</td>
            <td><textarea style="width: 100%; box-sizing: border-box;"></textarea></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>


  <!-- Footer -->
  <div class="footer">
    <button>Copy Summary</button>
    <button>Export Excel</button>
  </div>

<script>
  document.querySelectorAll('.section-header').forEach(header => {
    header.addEventListener('click', () => {
      const content = header.nextElementSibling;
      const icon = header.querySelector('.collapse-icon');
      const isCollapsed = content.style.display === 'none';
      content.style.display = isCollapsed ? '' : 'none';
      if (icon) {
        icon.textContent = isCollapsed ? '▼ ' : '► ';
      }
    });
  });
<\/script>

</body>
</html>`,Il=()=>{const{partNo:t}=vs(),l=n.useRef(null),r=Pl.replace(/<script>[\s\S]*?<\/script>/,"");return n.useEffect(()=>{const s=l.current;if(!s)return;const a=s.querySelectorAll(".section-header"),m=[];return a.forEach(x=>{const u=()=>{const d=x.nextElementSibling;if(d){const i=x.querySelector(".collapse-icon"),c=d.style.display==="none";d.style.display=c?"":"none",i&&(i.textContent=c?"▼ ":"► ")}};x.addEventListener("click",u),m.push({header:x,listener:u})}),()=>{m.forEach(({header:x,listener:u})=>{x.removeEventListener("click",u)})}},[t]),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Tt,{to:"/cost-movement",style:{position:"absolute",top:"24px",right:"24px",zIndex:20,fontSize:"28px",lineHeight:"1",textDecoration:"none",color:"#4b5563",padding:"0 8px"},title:"Close",children:"×"}),e.jsx("div",{ref:l,dangerouslySetInnerHTML:{__html:r}})]})};function ye({children:t}){return Ee().user?t:e.jsx(Cs,{to:"/login",replace:!0})}function _l(){const t=Ee(),r=Et().pathname==="/login",s=!!t.user&&!r;return e.jsxs("div",{className:"wrapper",children:[s&&e.jsx(ll,{}),s&&e.jsx(nl,{}),e.jsx("div",{className:s?"content-wrapper":"",children:e.jsxs(ys,{children:[e.jsx(ge,{path:"/login",element:e.jsx(ol,{})}),e.jsx(ge,{path:"/",element:e.jsx(ye,{children:e.jsx(Al,{})})}),e.jsx(ge,{path:"/projects",element:e.jsx(ye,{children:e.jsx(hl,{})})}),e.jsx(ge,{path:"/models",element:e.jsx(ye,{children:e.jsx(jl,{})})}),e.jsx(ge,{path:"/parts",element:e.jsx(ye,{children:e.jsx(bl,{})})}),e.jsx(ge,{path:"/suppliers",element:e.jsx(ye,{children:e.jsx(vl,{})})}),e.jsx(ge,{path:"/packing/cps",element:e.jsx(ye,{children:e.jsx(bn,{})})}),e.jsx(ge,{path:"/packing/dpi",element:e.jsx(ye,{children:e.jsx(Wn,{})})}),e.jsx(ge,{path:"/packing/CalculatePackingCost",element:e.jsx(ye,{children:e.jsx(Zn,{})})}),e.jsx(ge,{path:"/packing/ComparisonPage",element:e.jsx(ye,{children:e.jsx(Xn,{})})}),e.jsx(ge,{path:"/module-type",element:e.jsx(ye,{children:e.jsx(Lt,{})})}),e.jsx(ge,{path:"/material",element:e.jsx(ye,{children:e.jsx(Lt,{})})}),e.jsx(ge,{path:"/settings",element:e.jsx(ye,{children:e.jsx(yl,{})})}),e.jsx(ge,{path:"/params",element:e.jsx(ye,{children:e.jsx(Cl,{})})}),e.jsx(ge,{path:"/notification-detail",element:e.jsx(ye,{children:e.jsx(Sl,{})})}),e.jsx(ge,{path:"/cost-movement",element:e.jsx(ye,{children:e.jsx(kl,{})})}),e.jsx(ge,{path:"/cost-movement/:partNo",element:e.jsx(ye,{children:e.jsx(Il,{})})})]})}),s&&e.jsxs("footer",{className:"main-footer",children:[e.jsxs("div",{className:"float-right d-none d-sm-block",children:[e.jsx("b",{children:"Version"})," 0.1.0"]}),e.jsxs("strong",{children:["© ",new Date().getFullYear()," My Company."]})]})]})}function Al(){var l,r,s;const t=Ee();return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-sm-6",children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("small",{children:["User: ",(l=t.user)==null?void 0:l.username," | Dept: ",(r=t.user)==null?void 0:r.department," | Role: ",(s=t.user)==null?void 0:s.role]})]})})})}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid",children:e.jsx(rl,{})})})]})}const Ml="/packing-cost-fe/";Ns(document.getElementById("root")).render(e.jsx(Ie.StrictMode,{children:e.jsx(gs,{basename:Ml,children:e.jsx(Us,{children:e.jsx(_l,{})})})}));
