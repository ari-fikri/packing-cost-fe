import{r as l,j as e,R as de}from"./react-JHr-MqlU.js";import{R as ws,c as ut}from"./react-dom-ByPjVLjt.js";import{N as ie,B as ht}from"./react-router-dom-C8MBRXQb.js";import{c as _e,a as Ps,d as xt,e as re,f as pt}from"./react-router-CrFtL5GL.js";import{M as jt,a as ft,b as Nt,c as bt,B as vs,F as gt,L as vt,I as Ct}from"./reactstrap-Sv9f_Q5O.js";import{B as yt}from"./react-chartjs-2-B_DtYEyI.js";import{C as St,a as wt,L as Pt,b as kt,p as _t,c as It,d as At}from"./chart.js-zNwYC2Re.js";import"./classnames-C9FZUsQl.js";import"./scheduler-DYLXRpC5.js";import"./@remix-run-TLZCGUFM.js";import"./prop-types-ZMHxiqrO.js";import"./react-transition-group-Bm7DLXUO.js";import"./@babel-G6YR9G09.js";import"./@kurkle-D8fDXNIl.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const m of n)if(m.type==="childList")for(const j of m.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&t(j)}).observe(document,{childList:!0,subtree:!0});function r(n){const m={};return n.integrity&&(m.integrity=n.integrity),n.referrerPolicy&&(m.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?m.credentials="include":n.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function t(n){if(n.ep)return;n.ep=!0;const m=r(n);fetch(n.href,m)}})();const ue={ADMIN:"admin",ENGINEER:"engineer",PROCUREMENT:"procurement",VIEWER:"viewer"},Ne={PSE:"PSE",PCD:"PCD"},Cs={[Ne.PSE]:{[ue.ADMIN]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!0,editable:!0}},[ue.ENGINEER]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!1,editable:!1}},[ue.VIEWER]:{general:{visible:!0,editable:!1},pse:{visible:!0,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!1,editable:!1}}},[Ne.PCD]:{[ue.PROCUREMENT]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!0}},[ue.VIEWER]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!1}}},default:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!1,editable:!1}}},ks=l.createContext(null),Mt=[{username:"khedi.asmoro",password:"1",department:Ne.PSE,role:ue.ADMIN},{username:"ujang.jayadi",password:"1",department:Ne.PSE,role:ue.ENGINEER},{username:"anton",password:"1",department:Ne.PSE,role:ue.ENGINEER},{username:"hanifa",password:"2",department:Ne.PCD,role:ue.PROCUREMENT},{username:"viewer.pse",password:"1",department:Ne.PSE,role:ue.VIEWER},{username:"viewer.pcd",password:"1",department:Ne.PCD,role:ue.VIEWER}];function Lt({children:s}){const[a,r]=l.useState(null),t=_e(),n=(j,h)=>{const o=Mt.find(d=>d.username===j&&d.password===h);if(o){const{password:d,...i}=o;return r(i),t("/"),!0}else return!1},m=()=>{r(null),t("/login")};return e.jsx(ks.Provider,{value:{user:a,login:n,logout:m},children:s})}function be(){return l.useContext(ks)}const Dt=({filters:s,setters:a,onSearch:r,onClear:t,onPersonPicker:n,destinations:m})=>{const j=o=>{const d=o.target.value;a.setDestCode(d);const i=m.find(p=>p.destCode===d);i?a.setDestCountry(`${i.code} - ${i.country}`):a.setDestCountry("")},h=[...new Set(m.map(o=>o.destCode))];return e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CPS/PSI/ECI No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.cpsNo,onChange:o=>a.setCpsNo(o.target.value),placeholder:"CPS/PSI/ECI No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CFC/Model"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.model,onChange:o=>a.setModel(o.target.value),placeholder:"Model"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("select",{className:"form-control form-control-sm mr-2",value:s.destCode,onChange:j,children:[e.jsx("option",{value:"",children:"Select Dest Code"}),h.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.destCountry,readOnly:!0,placeholder:"Country Code - Country"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Part No - Part Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm mr-2",value:s.partNo,onChange:o=>a.setPartNo(o.target.value),placeholder:"Part No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.partName,readOnly:!0,placeholder:"Part Name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"From"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.fromUser,onChange:o=>a.setFromUser(o.target.value),placeholder:"From"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Ref CPS No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.refCpsNo,onChange:o=>a.setRefCpsNo(o.target.value),placeholder:"Ref CPS No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.cfcPjt,onChange:o=>a.setCfcPjt(o.target.value),placeholder:"CFC/PJT"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CPS/PSI/ECI Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:s.cpsPsiEci,onChange:o=>a.setCpsPsiEci(o.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"CPS",children:"CPS"}),e.jsx("option",{value:"PSI",children:"PSI"}),e.jsx("option",{value:"ECI",children:"ECI"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code - Supplier Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm mr-2",value:s.supplierCode,readOnly:!0,placeholder:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.supplierName,readOnly:!0,placeholder:"Supplier Name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"To"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.toUser,onChange:o=>a.setToUser(o.target.value),placeholder:"To"})]})]})]}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm mr-2",onClick:r,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:t,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})})]})};function Ie({currentPage:s,totalPages:a,totalItems:r,pageSize:t,onPageChange:n,className:m=""}){const j=()=>{if(a<=1)return null;const h=[],o=5;let d=Math.max(1,s-Math.floor(o/2)),i=Math.min(a,d+o-1);i-d+1<o&&(d=Math.max(1,i-o+1)),d>1&&(h.push(e.jsx("button",{className:`btn btn-sm ${s===1?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(1),children:"1"},1)),d>2&&h.push(e.jsx("span",{className:"mx-1",children:"..."},"start-ellipsis")));for(let p=d;p<=i;p++)h.push(e.jsx("button",{className:`btn btn-sm ${s===p?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(p),children:p},p));return i<a&&(i<a-1&&h.push(e.jsx("span",{className:"mx-1",children:"..."},"end-ellipsis")),h.push(e.jsx("button",{className:`btn btn-sm ${s===a?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(a),children:a},a))),h};return a<=1?null:e.jsxs("div",{className:`d-flex justify-content-between align-items-center mt-3 bg-light p-2 border rounded ${m}`,children:[e.jsxs("div",{className:"small text-muted",children:["Showing ",(s-1)*t+1," to ",Math.min(s*t,r)," of ",r," entries"]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary mr-2",disabled:s===1,onClick:()=>n(1),children:e.jsx("i",{className:"fas fa-angle-double-left"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary mr-2",disabled:s===1,onClick:()=>n(s-1),children:e.jsx("i",{className:"fas fa-angle-left"})}),j(),e.jsx("button",{className:"btn btn-sm btn-outline-secondary ml-2",disabled:s===a,onClick:()=>n(s+1),children:e.jsx("i",{className:"fas fa-angle-right"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary ml-2",disabled:s===a,onClick:()=>n(a),children:e.jsx("i",{className:"fas fa-angle-double-right"})})]})]})}function Tt({filteredCps:s,page:a,perPage:r,setPage:t,setPerPage:n,onEdit:m}){const j=s.slice((a-1)*r,a*r),h=o=>o.includes("CPS")?"CPS":o.includes("PCI")?"PCI":o.includes("ECI")?"ECI":"";return e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{fontSize:"10pt"},children:"No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"CPS/PCI/ECI No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Type"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Ref CPS No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Part No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Project Code"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Model"}),e.jsx("th",{style:{fontSize:"10pt"},children:"From"}),e.jsx("th",{style:{fontSize:"10pt"},children:"To"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Status"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Submit Date"}),e.jsx("th",{style:{width:160},children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"text-center py-4 text-muted",children:"No Data Found"})}):j.map((o,d)=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontSize:"10pt"},children:(a-1)*r+d+1}),e.jsx("td",{style:{fontSize:"10pt"},children:o.cpsNo}),e.jsx("td",{style:{fontSize:"10pt"},children:h(o.cpsNo)}),e.jsx("td",{style:{fontSize:"10pt"},children:o.refCpsNo}),e.jsx("td",{style:{fontSize:"10pt"},children:o.partNo}),e.jsx("td",{style:{fontSize:"10pt"},children:o.cfcPjtCode}),e.jsx("td",{style:{fontSize:"10pt"},children:o.model}),e.jsx("td",{style:{fontSize:"10pt"},children:o.fromUser}),e.jsx("td",{style:{fontSize:"10pt"},children:o.toUser}),e.jsx("td",{style:{fontSize:"10pt"},children:o.status}),e.jsx("td",{style:{fontSize:"10pt"},children:o.issueDate}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>alert("View placeholder"),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info mr-1",onClick:()=>m(o),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Clone placeholder"),children:e.jsx("i",{className:"fas fa-clone"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>alert("Delete placeholder"),children:e.jsx("i",{className:"fas fa-trash"})})]})]},d))})]})}),e.jsx(Ie,{currentPage:a,totalItems:s.length,itemsPerPage:r,onPageChange:t,onItemsPerPageChange:o=>{n(o),t(1)}})]})}function Et({current:s,partNoQuery:a,partNameQuery:r,supplierQuery:t,onPartNoChange:n,onPartNameChange:m,onSupplierChange:j,onGo:h}){return e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("h5",{className:"mb-0 mr-3",children:"Select part"})}),e.jsxs("div",{className:"row mt-2",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Part No",value:a,onChange:o=>n(o.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Part Name",value:r,onChange:o=>m(o.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Supplier Name",value:t,onChange:o=>j(o.target.value)})]}),e.jsx("div",{className:"col-md-3 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-sm btn-primary w-100",type:"button",onClick:h,children:"Go"})})]})]})}function _s({count:s=1,isPseUser:a}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((r,t)=>e.jsxs(de.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty"}),!a&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Price"}),!a&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Sum"})]},`matLeafHdr-${t}`))})}function Is({arr:s=[],count:a=1,isPseUser:r}){debugger;return e.jsx(e.Fragment,{children:Array.from({length:a}).map((t,n)=>{const m=s[n]||{};return e.jsxs(de.Fragment,{children:[e.jsx("td",{className:"align-middle",children:m.materialNo??"-"}),e.jsx("td",{className:"text-right",children:m.qty??"-"}),!r&&e.jsx("td",{className:"text-right",children:m.price??"-"}),!r&&e.jsx("td",{className:"text-right",children:m.sum??"-"})]},`matLeafData-${n}`)})})}function Rt({count:s=10,isPseUser:a}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((r,t)=>e.jsx("th",{colSpan:a?2:4,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:t===0?"Box":`Inner ${t}`},`innerGroupHdr-${t}`))})}function Ot({count:s=10,isPseUser:a}){return e.jsx(_s,{count:s,isPseUser:a})}function As({data:s=[],count:a=10,isPseUser:r}){return e.jsx(Is,{arr:s,count:a,isPseUser:!0})}function Ft({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,r)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:2,children:r===0?"Module":`Outer ${r}`},`outerGrp-${r}`))})}function Wt({count:s=10,isPseUser:a}){return e.jsx(_s,{count:s,isPseUser:a})}function Ms({data:s=[],count:a=10,isPseUser:r}){debugger;return e.jsx(Is,{arr:s,count:a,isPseUser:r})}function Bt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Inner"}),e.jsx("th",{className:"align-middle",children:"Outer"}),e.jsx("th",{className:"align-middle",children:"Material"}),e.jsx("th",{className:"align-middle",children:"Labor"}),e.jsx("th",{className:"align-middle",children:"Inland"})]})}function Ls({data:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.subTotalInner??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalOuter??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalMaterial??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalLabor??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalInland??"-"})]})}function Ht(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Receiving"}),e.jsx("th",{className:"align-middle",children:"Inspection"}),e.jsx("th",{className:"align-middle",children:"Dlvr Course"}),e.jsx("th",{className:"align-middle",children:"Pallet Supply"}),e.jsx("th",{className:"align-middle",children:"Binding"}),e.jsx("th",{className:"align-middle",children:"Sort & Supply"}),e.jsx("th",{className:"align-middle",children:"Pick & Packing"}),e.jsx("th",{className:"align-middle",children:"Vanning"}),e.jsx("th",{className:"align-middle",children:"Box/Valet Rtrn"}),e.jsx("th",{className:"align-middle",children:"Mix Van"}),e.jsx("th",{className:"align-middle",children:"Lashing"}),e.jsx("th",{className:"align-middle",children:"Total Time Req"}),e.jsx("th",{className:"align-middle",children:"Others"})]})}function Ut(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Current"}),e.jsx("th",{className:"align-middle",children:"DL"}),e.jsx("th",{className:"align-middle",children:"IDL"}),e.jsx("th",{className:"align-middle",children:"Facility Others"})]})}function Ds({labor:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.receiving??"-"}),e.jsx("td",{className:"align-middle",children:s.inspection??"-"}),e.jsx("td",{className:"align-middle",children:s.deliveryCourse??"-"}),e.jsx("td",{className:"align-middle",children:s.palletSupply??"-"}),e.jsx("td",{className:"align-middle",children:s.binding??"-"}),e.jsx("td",{className:"align-middle",children:s.sorting??"-"}),e.jsx("td",{className:"align-middle",children:s.pickPacking??"-"}),e.jsx("td",{className:"align-middle",children:s.vanning??"-"}),e.jsx("td",{className:"align-middle",children:s.boxValetReturn??"-"}),e.jsx("td",{className:"align-middle",children:s.mixVan??"-"}),e.jsx("td",{className:"align-middle",children:s.lashing??"-"}),e.jsx("td",{className:"align-middle",children:s.totalTimeReq??"-"}),e.jsx("td",{className:"align-middle",children:s.others??"-"})]})}function Ts({labor:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.laborCostCurrent??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostDL??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostIDL??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostFacility??"-"})]})}function qt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Pack Time (V-PASS)"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Inland Cost (m³)"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Diff"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Milkrun Cost"})]})}function Es({inland:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.packTimeVPass??"-"}),e.jsx("td",{className:"align-middle",children:s.costM3??"-"}),e.jsx("td",{className:"align-middle",children:s.diff??"-"}),e.jsx("td",{className:"align-middle",children:s.milkrunCost??"-"})]})}function Rs(s=0,a=0,r=!1){const t=[],n=(h,o)=>t.push({key:h,w:o});n("action",50),n("recNo",80),n("cpsNo",140),n("partNo",160),n("partName",260),n("parentNo",140),n("supplierCode",140),n("supplierName",200),n("weightPerPc",100),n("qtyPerBox",100),r||(n("subInner",120),n("subOuter",120),n("subMaterial",120),n("subLabor",120),n("subInland",120),n("diffPct",100));for(let h=0;h<s;h++)n(`in_matNo_${h}`,100),n(`in_qty_${h}`,50),r||(n(`in_price_${h}`,70),n(`in_sum_${h}`,100));for(let h=0;h<a;h++)n(`out_matNo_${h}`,100),n(`out_qty_${h}`,50),r||(n(`out_price_${h}`,70),n(`out_sum_${h}`,100));r||(n("lab_mh_receiving",90),n("lab_mh_inspection",90),n("lab_mh_deliveryCourse",120),n("lab_mh_palletSupply",110),n("lab_mh_binding",90),n("lab_mh_sorting",120),n("lab_mh_pickPacking",120),n("lab_mh_vanning",90),n("lab_mh_boxValetReturn",120),n("lab_mh_mixVan",90),n("lab_mh_lashing",90),n("lab_mh_totalTimeReq",110),n("lab_mh_others",90),n("lab_cost_direct",90),n("lab_cost_indirect",90),n("lab_cost_subTotal",100),n("lab_cost_costPerPc",110),n("inland_trucking",150),n("inland_clp",120),n("inland_delivery",70),n("inland_total",100));const m=t.reduce((h,o)=>h+o.w,0);return{colGroup:e.jsx("colgroup",{children:t.map((h,o)=>e.jsx("col",{style:{width:`${h.w}px`,minWidth:`${h.w}px`}},`${h.key}-${o}`))}),totalWidth:m,cols:t}}function $t(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Name"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Parent No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Code"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Name"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Weight/pc"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty/Box"})]})}function Os({part:s}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.partNo??"-"}),e.jsx("td",{className:"align-middle",children:s.partName??s.name??"-"}),e.jsx("td",{className:"align-middle",children:s.parentNo??"-"}),e.jsx("td",{className:"align-middle",children:s.supplierCode??"-"}),e.jsx("td",{className:"align-middle",children:s.supplierName??"-"}),e.jsx("td",{className:"align-middle",children:s.weightPerPc??"-"}),e.jsx("td",{className:"align-middle",children:s.qtyPerBox??"-"})]})}function Kt({current:s={},scrollRef:a,onScroll:r,isPseUser:t,innerCount:n,outerCount:m}){const j=s.inner||[],h=s.outer||[],o=s.labor||{},d=s.inland||{},{colGroup:i,totalWidth:p}=Rs(n,m,t);return e.jsx("div",{className:"mb-3",children:e.jsx("div",{ref:a,onScroll:r,className:"table-responsive mt-2",style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center table-font-size-10pt",style:{minWidth:`${p}px`,tableLayout:"fixed"},children:[i,e.jsxs("thead",{children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap"}),e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"No"}),e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"CPS No"}),e.jsx("th",{rowSpan:2,colSpan:7,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Part Info"}),!t&&e.jsx("th",{rowSpan:2,colSpan:5,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Sub Total Costs"}),!t&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Diff (%)"}),e.jsx("th",{colSpan:n*(t?2:4),className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inner Info"}),e.jsx("th",{colSpan:m*(t?2:4),className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Outer Info"}),!t&&e.jsx("th",{colSpan:17,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Labor"}),!t&&e.jsx("th",{colSpan:4,rowSpan:2,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inland"})]}),e.jsxs("tr",{children:[e.jsx(Rt,{count:n,isPseUser:t}),e.jsx(Ft,{count:m,isPseUser:t}),!t&&e.jsx("th",{colSpan:13,className:"align-align-middle border text-center tbl-row1-hdr text-nowrap",children:"Man Hour Requirement"}),!t&&e.jsx("th",{colSpan:4,className:"align-align-middle border text-center tbl-row1-hdr text-nowrap",children:"Labor Cost"})]}),e.jsxs("tr",{children:[e.jsx($t,{}),!t&&e.jsx(Bt,{}),e.jsx(Ot,{count:n,isPseUser:t}),e.jsx(Wt,{count:m,isPseUser:t}),!t&&e.jsx(Ht,{}),!t&&e.jsx(Ut,{}),!t&&e.jsx(qt,{})]})]}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"align-middle",children:s.recNo??"-"}),e.jsx("td",{className:"align-middle",children:s.cpsNo??"-"}),e.jsx(Os,{part:s}),!t&&e.jsx(Ls,{data:s}),!t&&e.jsx("td",{className:"align-middle",children:s.diffPct??"-"}),e.jsx(As,{data:j,count:n,isPseUser:t}),e.jsx(Ms,{data:h,count:m,isPseUser:t}),!t&&e.jsx(Ds,{labor:o}),!t&&e.jsx(Ts,{labor:o}),!t&&e.jsx(Es,{inland:d})]})})]})})})}function Vt({filteredParts:s=[],onSelectPart:a,scrollRef:r,onScroll:t,isPseUser:n,innerCount:m,outerCount:j}){const{colGroup:h,totalWidth:o,cols:d}=Rs(m,j,n);return e.jsx("div",{className:"mb-1",children:e.jsx("div",{ref:r,onScroll:t,className:"table-responsive",style:{maxHeight:400,overflowY:"auto",overflowX:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center table-font-size-10pt",style:{minWidth:`${o}px`,tableLayout:"fixed"},children:[h,e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:d.length,className:"text-center text-muted py-3",children:"No results"})}):s.map((i,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:e.jsx("input",{type:"checkbox",onChange:()=>a(i)})}),e.jsx("td",{className:"align-middle",children:i.recNo??"-"}),e.jsx("td",{className:"align-middle",children:i.cpsNo??"-"}),e.jsx(Os,{part:i}),!n&&e.jsx(Ls,{data:i}),!n&&e.jsx("td",{className:"align-middle",children:i.diffPct??"-"}),e.jsx(As,{data:i.inner,count:m,isPseUser:n}),e.jsx(Ms,{data:i.outer,count:j,isPseUser:n}),!n&&e.jsx(Ds,{labor:i.labor}),!n&&e.jsx(Ts,{labor:i.labor}),!n&&e.jsx(Es,{inland:i.inland})]},p))})]})})})}function Gt({isOpen:s=!1,onClose:a=()=>{},parts:r=[],current:t={},onSelectPart:n=()=>{}}){const[m,j]=l.useState(""),[h,o]=l.useState(""),[d,i]=l.useState(""),{user:p}=be(),c=p&&p.department==="PSE"&&!["pic","sh","dph"].includes(p.role),f=l.useRef(null),k=l.useRef(null),g=l.useRef(!1),v=(C,E)=>{g.current||(g.current=!0,E.current&&C.current&&(E.current.scrollLeft=C.current.scrollLeft),g.current=!1)},N=l.useMemo(()=>r.filter(C=>{const E=m.trim().toLowerCase(),M=h.trim().toLowerCase(),F=d.trim().toLowerCase(),_=E===""||C.partNo&&C.partNo.toLowerCase().includes(E),D=M===""||C.name&&C.name.toLowerCase().includes(M),w=F===""||C.supplier&&C.supplier.toLowerCase().includes(F);return _&&D&&w}),[r,m,h,d]),b=l.useMemo(()=>{const C=[t,...N];return Math.max(...C.map(E=>{var M;return((M=E.inner)==null?void 0:M.length)||0}))},[t,N]),S=l.useMemo(()=>{const C=[t,...N];return Math.max(...C.map(E=>{var M;return((M=E.outer)==null?void 0:M.length)||0}))},[t,N]);return s?e.jsx("div",{className:"np-modal-backdrop multi-parts-modal",style:{zIndex:3e3},onMouseDown:C=>{C.target===C.currentTarget&&a()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1200,width:"100%",display:"flex",flexDirection:"column",height:"700px",maxHeight:"700px",minHeight:"700px"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"CPS Comparison"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsx("div",{className:"card-body",style:{verticalAlign:"top",paddingBottom:0,maxHeight:"fit-content"},children:e.jsx(Et,{current:t,partNoQuery:m,partNameQuery:h,supplierQuery:d,onPartNoChange:j,onPartNameChange:o,onSupplierChange:i,onGo:()=>{}})}),e.jsx("hr",{className:"my-0"}),e.jsxs("div",{className:"card-body",style:{flex:1,display:"flex",flexDirection:"column",paddingTop:"8px",paddingBottom:"8px"},children:[e.jsx(Kt,{current:t,scrollRef:f,onScroll:()=>v(f,k),isPseUser:c,innerCount:b,outerCount:S}),e.jsx("hr",{style:{margin:"8px 0"}}),e.jsx(Vt,{filteredParts:N,onSelectPart:n,scrollRef:k,onScroll:()=>v(k,f),isPseUser:c,innerCount:b,outerCount:S})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:()=>{},children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:a,children:"Close"})]}),e.jsx("style",{children:`
          .multi-parts-modal .np-modal { max-width: 1200px; height: 700px; min-height: 700px; max-height: 700px; }
          .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: flex; align-items: center; justify-content: center; padding: 1rem; }
          .np-modal { width: 100%; height: 700px; min-height: 700px; max-height: 700px; }
          .table-sm td, .table-sm th { vertical-align: middle; white-space: nowrap; }
          .card-body { vertical-align: top; }
        `})]})}):null}const Fs=[["848400K010","SWITCH ASSY, BACK DOOR OPENER","TRI"],["848400K030","SWITCH ASSY, BACK DOOR OPENER","TRI"],["893400K010","COMPUTER ASSY, CLEARANCE WARNING","DSI"],["131110E010","RING, COMPRESSION, NO.1","PT.NTPRI"],["131110E020","RING, COMPRESSION, NO.1","PT.NTPRI"],["256300E010","VALVE ASSY, EGR, NO.2","AISAN NASMOCO INDUSTRI"],["261000E020","BODY ASSY, DIESEL THROTTLE","AISAN NASMOCO INDUSTRI"],["122810Y11000","HANGER, ENGINE, NO.1","SETIA GUNA SEJATI"],["130500Y02000","GEAR ASSY, CAMSHAFT TIMING","DENSO INDONESIA CORPORATION (FAJAR)"],["25051BZ15000","CONVERTER SUB-ASSY, EXHAUST MANIFOLD","FUTABA INDONESIA"],["25051BZ26000","CONVERTER SUB-ASSY, EXHAUST MANIFOLD","FUTABA INDONESIA"],["22030BZ15000","BODY ASSY, THROTTLE W/MOTOR","AISAN NASMOCO INDUSTRI"],["90210T000200","WASHER, SEAL","ARAI RUBBER SEAL INDONESIA"],["90430T002300","GASKET","ARAI RUBBER SEAL INDONESIA"],["111150Y03000","GASKET, CYLINDER HEAD","ASTRA NIPPON GASKET INDONESIA"],["11115BZ16000","GASKET, CYLINDER HEAD","ASTRA NIPPON GASKET INDONESIA"],["171730Y03000","GASKET, EXHAUST MANIFOLD","ASTRA NIPPON GASKET INDONESIA"],["17173BZ13000","GASKET, EXHAUST MANIFOLD","ASTRA NIPPON GASKET INDONESIA"],["115110Y04000","CAP, CRANKSHAFT BEARING, NO.1","AT INDONESIA"],["115130Y04000","CAP, CRANKSHAFT BEARING, NO.3","AT INDONESIA"],["16261BZ75000","HOSE, WATER BY-PASS, NO.1","CATURINDO AGUNGJAYA RUBBER"],["16261BZ76000","HOSE, WATER BY-PASS, NO.1","CATURINDO AGUNGJAYA RUBBER"],["16264BZ38000","HOSE, WATER BY-PASS, NO.2","CATURINDO AGUNGJAYA RUBBER"],["16264BZ39000","HOSE, WATER BY-PASS, NO.2","CATURINDO AGUNGJAYA RUBBER"],["16282BZ11000","HOSE, WATER BY-PASS, NO.5","CATURINDO AGUNGJAYA RUBBER"],["89467BZ02000","SENSOR, AIR FUEL RATIO","DENSO INDONESIA CORPORATION (SIP C)"],["111910Y01000","TUBE, SPARK PLUG","FUJIKINZOKU INDONESIA"],["90406T001100","TUBE, UNION","FUJIKINZOKU INDONESIA"],["90406T001300","TUBE, UNION","FUJIKINZOKU INDONESIA"],["23209BZ10000","INJECTOR SET, FUEL","HITACHI ASTEMO BEKASI POWERTRAIN SYS"],["90466T006100","CLIP, HOSE","INDOCIPTA HASTA PERKASA"],["90466T006200","CLIP, HOSE","INDOCIPTA HASTA PERKASA"],["32101BZ10000","GEAR SUB-ASSY DRIVE PLATE & RING","INTI GANDA PERDANA"],["157080Y04000","NOZZLE SUB-ASSY, OIL","ITOKIN"],["90360T001200","BALL","JTEKT INDONESIA"],["90105T027300","BOLT, FLANGE","MEIDOH INDONESIA"],["90119T044400","BOLT, W/WASHER","MEIDOH INDONESIA"],["9004A1020000","BOLT WASHER BASED HEAD HEXAGON","MEIDOH INDONESIA"]];function Ce({show:s=!1,onClose:a,onSelect:r,zIndex:t=4e3,mode:n="multi"}){function m(y,I,L){const Q=((y+1)*9301+49297)%233280/233280;return Math.floor(I+Q*(L-I+1))}const j=Fs.map((y,I)=>{const L=m(I,50,1400),W=m(I+3,20,600),Q=m(I+7,10,800),te=Number((L*W*Q/1e6).toFixed(3)),B="P"+String(1e5+m(I,1,9999)),Y="S"+String(200+I%999);return{partNo:y[0],partName:y[1],supplierName:y[2],parentPartNo:B,supplierId:Y,L,W,H:Q,boxM3:te}}),[h,o]=l.useState({partNo:"",partName:"",supplierName:""}),[d,i]=l.useState(n==="multi"?{}:null),[p,c]=l.useState(1),[f,k]=l.useState(10);if(l.useEffect(()=>(s?(o({partNo:"",partName:"",supplierName:""}),i(n==="multi"?{}:null),c(1),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s]),!s)return null;function g(y){const{name:I,value:L}=y.target;o(W=>({...W,[I]:L})),c(1)}function v(){const y=h.partNo.trim().toLowerCase(),I=h.partName.trim().toLowerCase(),L=h.supplierName.trim().toLowerCase();return j.filter(W=>!(y&&!W.partNo.toLowerCase().includes(y)||I&&!W.partName.toLowerCase().includes(I)||L&&!W.supplierName.toLowerCase().includes(L)))}const N=v(),b=N.length,S=Math.max(1,Math.ceil(b/f)),C=N.slice((p-1)*f,p*f);function E(y){i(n==="multi"?I=>({...I,[y]:!I[y]}):y)}function M(y){if(n!=="multi")return;const I=(p-1)*f,L={};C.forEach((W,Q)=>{L[I+Q]=y}),i(W=>({...W,...L}))}function F(){if(n==="multi"){const y=Object.keys(d).filter(I=>d[I]).map(I=>N[Number(I)]);r&&r(y),a&&a()}else if(d!==null){const y=N[d];r&&r(y),a&&a()}else a&&a()}function _(y){c(Math.min(Math.max(1,y),S))}const D={flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},w={position:"sticky",top:0,zIndex:5,background:"white",padding:"1rem 1rem 0.5rem 1rem",borderBottom:"1px solid #e9ecef"},U={overflow:"auto",padding:"0 1rem 1rem 1rem"};return e.jsx("div",{className:"part-picker-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:t,display:"flex",alignItems:"center",justifyContent:"center"},onMouseDown:y=>{y.target===y.currentTarget&&a()},children:e.jsxs("div",{className:"part-picker-modal",style:{background:"#fff",borderRadius:8,boxShadow:"0 2px 16px rgba(0,0,0,0.2)",zIndex:t+1,minWidth:600,minHeight:400,position:"relative"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"Select Parts"})}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:D,children:[e.jsx("div",{style:w,children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12 col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{name:"partNo",value:h.partNo,onChange:g,className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{name:"partName",value:h.partName,onChange:g,className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{name:"supplierName",value:h.supplierName,onChange:g,className:"form-control form-control-sm"})]})]})}),e.jsx("div",{style:U,children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-striped table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:36},children:n==="multi"&&e.jsx("input",{type:"checkbox",onChange:y=>M(y.target.checked)})}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Part Name"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Supplier ID"}),e.jsx("th",{children:"Parent Part No"}),e.jsx("th",{children:"L (mm)"}),e.jsx("th",{children:"W (mm)"}),e.jsx("th",{children:"H (mm)"}),e.jsx("th",{children:"Box M3"})]})}),e.jsx("tbody",{children:C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center text-muted py-4",children:"No Data Found"})}):C.map((y,I)=>{const L=(p-1)*f+I;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:n==="multi"?e.jsx("input",{type:"checkbox",checked:!!d[L],onChange:()=>E(L)}):e.jsx("input",{type:"radio",name:"part-picker-radio",checked:d===L,onChange:()=>E(L)})}),e.jsx("td",{children:y.partNo}),e.jsx("td",{className:"text-left",children:y.partName}),e.jsx("td",{children:y.supplierName}),e.jsx("td",{children:y.supplierId}),e.jsx("td",{children:y.parentPartNo}),e.jsx("td",{children:y.L}),e.jsx("td",{children:y.W}),e.jsx("td",{children:y.H}),e.jsx("td",{children:y.boxM3})]},L)})})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>_(1),children:"<<"}),e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>_(Math.max(1,p-1)),children:"<"}),[...Array(S).keys()].map(y=>e.jsx("button",{className:`btn btn-sm mr-1 ${p===y+1?"btn-primary":"btn-light"}`,onClick:()=>_(y+1),children:y+1},y)),e.jsx("button",{className:"btn btn-sm btn-light",onClick:()=>_(Math.min(S,p+1)),children:">"}),e.jsxs("span",{className:"ml-2 small text-muted",children:["Total: ",b]})]}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:F,children:"Add Selected"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:a,children:"Cancel"})]})]})]})})}function as({show:s,onClose:a,onAdd:r,selectionMode:t="multi"}){const[n,m]=l.useState([]),[j,h]=l.useState(""),[o,d]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(""),[k,g]=l.useState(""),[v,N]=l.useState(""),[b,S]=l.useState(""),[C,E]=l.useState(t==="multi"?[]:null),[M,F]=l.useState([]),[_,D]=l.useState(1),w=15;l.useEffect(()=>{fetch("/models.json").then(O=>O.json()).then(O=>{m(O),F(O)})},[]),l.useEffect(()=>{s&&(h(""),d(""),p(""),f(""),g(""),N(""),S(""),E(t==="multi"?[]:null),F(n),D(1))},[s,t]);const U=O=>{E(t==="multi"?z=>z.includes(O)?z.filter(T=>T!==O):[...z,O]:O)},y=()=>{const O=n.filter(z=>z.model_code.toLowerCase().includes(j.toLowerCase())&&z.model_name.toLowerCase().includes(o.toLowerCase())&&(z.model_cfc||"").toLowerCase().includes(i.toLowerCase())&&(z.destination_code||"").toLowerCase().includes(c.toLowerCase())&&(z.model_implementation_period||"").toLowerCase().includes(k.toLowerCase())&&(z.model_type||"").toLowerCase().includes(v.toLowerCase())&&z.model_remark.toLowerCase().includes(b.toLowerCase()));F(O),D(1)},I=()=>{h(""),d(""),p(""),f(""),g(""),N(""),S(""),F(n),D(1)},L=()=>{if(typeof r=="function")if(t==="multi")r(C.map(O=>n.find(z=>z.model_code===O)));else{const O=n.find(z=>z.model_code===C);r(O)}E(t==="multi"?[]:null),typeof a=="function"&&a()},W=_*w,Q=W-w,te=M.slice(Q,W),B=Math.ceil(M.length/w);if(!s)return null;const Y=e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",inset:0,zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"modal-dialog modal-lg",role:"document",style:{zIndex:2100},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Model"}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row align-items-end mb-3",children:[e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Model Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:O=>h(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:O=>d(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-1",children:[e.jsx("label",{className:"small",children:"CFC"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:i,onChange:O=>p(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Dest Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:O=>f(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Impl. Period"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:k,onChange:O=>g(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-1",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:O=>N(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2 text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-1",onClick:y,type:"button",children:"Search"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:I,type:"button",children:"Clear"})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Model Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"CFC"}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Impl. Period"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Remark"})]})}),e.jsx("tbody",{children:te.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No models found"})}):te.map(O=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:t==="multi"?"checkbox":"radio",name:"model-selection",checked:t==="multi"?C.includes(O.model_code):C===O.model_code,onChange:()=>U(O.model_code)})}),e.jsx("td",{children:O.model_code}),e.jsx("td",{children:O.model_name}),e.jsx("td",{children:O.model_cfc}),e.jsx("td",{children:O.destination_code}),e.jsx("td",{children:O.model_implementation_period}),e.jsx("td",{children:O.model_type}),e.jsx("td",{children:O.model_remark})]},O.model_code))})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>D(O=>Math.max(1,O-1)),disabled:_===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",_," of ",B]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>D(O=>Math.min(B,O+1)),disabled:_===B,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:L,type:"button",children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:a,type:"button",children:"Cancel"})]})]})]})})});return ws.createPortal(Y,typeof document<"u"?document.body:null)}function Yt({show:s=!1,onClose:a=()=>{},onAdd:r=()=>{},selectionMode:t="single",zIndex:n=1050,filter:m="all"}){const[j,h]=l.useState([]),[o,d]=l.useState(""),[i,p]=l.useState(1),[c,f]=l.useState(""),[k,g]=l.useState(""),[v,N]=l.useState(""),[b,S]=l.useState(t==="multi"?[]:null),[C,E]=l.useState([]),M=15;l.useEffect(()=>{fetch("/packing-cost-fe/dpi.json").then(Y=>Y.json()).then(Y=>h(Y)).catch(Y=>console.error("Error fetching materials:",Y))},[]),l.useEffect(()=>{if(s&&j.length>0){let B=j;m&&(m==="module"?B=j.filter(Y=>Y.materialType.toLowerCase()==="module"):m==="outer"?B=j.filter(Y=>Y.materialType.toLowerCase()==="outer"):m==="inner"?B=j.filter(Y=>Y.materialType.toLowerCase()==="inner"):m==="box"&&(B=j.filter(Y=>Y.materialType.toLowerCase()==="box"))),E(B)}else E([]),d(""),p(1)},[s,m,j]);function F(B){S(t==="multi"?Y=>Y.includes(B)?Y.filter(O=>O!==B):[...Y,B]:B)}const _=()=>{const B=j.filter(Y=>(Y.materialNo||"").toLowerCase().includes(c.toLowerCase())&&(Y.materialName||"").toLowerCase().includes(k.toLowerCase())&&(Y.materialType||"").toLowerCase().includes(v.toLowerCase()));E(B),p(1)},D=()=>{f(""),g(""),N(""),E(j),p(1)},w=()=>{if(typeof r=="function")if(t==="multi")r(b.map(B=>j.find(Y=>Y.materialNo===B)));else{const B=j.find(Y=>Y.materialNo===b);console.log(">>>>"+B),r(B)}S(t==="multi"?[]:null),typeof a=="function"&&a()},U=i*M,y=U-M,I=C.slice(y,U),L=Math.ceil(C.length/M),W=B=>typeof B!="number"?B:B.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Q=B=>typeof B!="number"?B:B.toLocaleString("en-US");if(!s)return null;const te=e.jsx("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)",zIndex:n},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Material"}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row align-items-end mb-3",children:[e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small",children:"Material No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:B=>f(B.target.value)})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small",children:"Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:k,onChange:B=>g(B.target.value)})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:B=>N(B.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2 text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-1",onClick:_,type:"button",children:"Search"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:D,type:"button",children:"Clear"})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Material No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Type"}),e.jsx("th",{style:{textAlign:"right"},children:"L"}),e.jsx("th",{style:{textAlign:"right"},children:"W"}),e.jsx("th",{style:{textAlign:"right"},children:"H"}),e.jsx("th",{style:{textAlign:"right"},children:"Inner"}),e.jsx("th",{style:{textAlign:"right"},children:"Outer"})]})}),e.jsx("tbody",{children:I.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No materials found"})}):I.map(B=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:t==="multi"?"checkbox":"radio",name:"material-selection",checked:t==="multi"?b.includes(B.materialNo):b===B.materialNo,onChange:()=>F(B.materialNo)})}),e.jsx("td",{children:B.materialNo}),e.jsx("td",{children:B.materialName}),e.jsx("td",{children:B.materialType}),e.jsx("td",{style:{textAlign:"right"},children:Q(B.dimension_length)}),e.jsx("td",{style:{textAlign:"right"},children:Q(B.dimension_width)}),e.jsx("td",{style:{textAlign:"right"},children:Q(B.dimension_height)}),e.jsx("td",{style:{textAlign:"right"},children:W(B.dimension_inner_length*B.dimension_inner_width*B.dimension_inner_height/1e6)}),e.jsx("td",{style:{textAlign:"right"},children:W(B.dimension_outer_length*B.dimension_outer_width*B.dimension_outer_height/1e6)})]},B.materialNo))})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>p(B=>Math.max(1,B-1)),disabled:i===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",i," of ",L]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>p(B=>Math.min(L,B+1)),disabled:i===L,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary",onClick:w,type:"button",children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:a,type:"button",children:"Cancel"})]})]})]})})});return ws.createPortal(te,typeof document<"u"?document.body:null)}function zt(s){const{cpsNo:a,setCpsNo:r,refCpsNo:t,setRefCpsNo:n,cfcPjtCode:m,setCfcPjtCode:j,model:h,setModel:o,partNo:d,setPartNo:i,partName:p,setPartName:c,supplier:f,setSupplier:k,plantCode:g,setPlantCode:v,dockCode:N,setDockCode:b,openPartPicker:S,openModelPicker:C,setComparisonOpen:E}=s;return e.jsxs("div",{children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"CPS/PSI/ECI No."})}),e.jsx("input",{className:"form-control form-control-sm",value:a,onChange:M=>r(M.target.value),placeholder:"CPSxxxx..."})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"CFC/Model"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:h,onChange:M=>o(M.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:C,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Part No"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:M=>i(M.target.value)}),e.jsxs("div",{className:"input-group-append",children:[e.jsx("button",{id:"partPickerBtn",type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part",onClick:S,children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Compare",style:{marginLeft:6},onClick:()=>E(!0),children:"Compare"})]})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Ref CPS No."})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:t,onChange:M=>n(M.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Ref CPS",onClick:()=>alert("Search Ref CPS placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Project Code"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:m,onChange:M=>j(M.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>alert("Search CFC/PJT placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Part Name"})}),e.jsx("input",{className:"form-control form-control-sm",value:p,readOnly:!0})]})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Supplier"})}),e.jsx("input",{className:"form-control form-control-sm",value:f,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Plant Code"}),e.jsx("input",{className:"form-control form-control-sm",value:g,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Dock Code"}),e.jsx("input",{className:"form-control form-control-sm",value:N,readOnly:!0})]})]})]})}function Jt(s){const{config:a,pseOpen:r,setPseOpen:t,packingPlantCurr:n,setPackingPlantCurr:m,packingPlantNext:j,setPackingPlantNext:h,vanningPlantCurr:o,setVanningPlantCurr:d,vanningPlantNext:i,setVanningPlantNext:p,orderPatternCurr:c,setOrderPatternCurr:f,orderPatternNext:k,setOrderPatternNext:g,category:v,setCategory:N,katashiki:b,setKatashiki:S,importerLineProcess:C,setImporterLineProcess:E,caseCode:M,setCaseCode:F,boxNumber:_,setBoxNumber:D,renban:w,setRenban:U,renbanEff:y,setRenbanEff:I,packingProcessBoxing:L,setPackingProcessBoxing:W,packingProcessStacking:Q,setPackingProcessStacking:te,pseOuterRows:B,setPseOuterRows:Y,newPseOuter:O,setNewPseOuter:z,openMaterialPicker:T}=s,[X,K]=l.useState(!1),[q,R]=l.useState(null),H=()=>{if(!O.materialNo.trim()){alert("Enter Pack Material No");return}Y(u=>[...u,{...O}]),z({materialNo:"",suffix:"",name:"",supplier:"",L:"",W:"",H:"",wtPerPc:"",qty:"",totalWt:""}),K(!1)},J=u=>{Y(A=>A.filter((G,P)=>P!==u))},$=(u,A,G)=>{const P=B.map((V,Z)=>{if(Z===u){const ee={...V,[A]:G};return(A==="qty"||A==="wtPerPc")&&(ee.totalWt=(parseFloat(ee.qty)||0)*(parseFloat(ee.wtPerPc)||0)),ee}return V});Y(P)},x=(u,A)=>{const G=q===A;return e.jsxs("tr",{children:[e.jsx("td",{children:G?e.jsxs("div",{className:"input-group",children:[e.jsx("input",{value:u.materialNo,onChange:P=>$(A,"materialNo",P.target.value),className:"form-control form-control-sm"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",onClick:()=>T(A===0?"Module":"outer",A),children:e.jsx("i",{className:"fas fa-search"})})})]}):u.materialNo}),e.jsx("td",{children:G?e.jsx("input",{readOnly:!0,value:u.suffix,onChange:P=>$(A,"suffix",P.target.value),className:"form-control form-control-sm"}):u.suffix}),e.jsx("td",{children:u.name}),e.jsx("td",{children:u.supplier}),e.jsx("td",{children:G?e.jsx("input",{readOnly:!0,value:u.L,onChange:P=>$(A,"L",P.target.value),className:"form-control form-control-sm"}):u.L}),e.jsx("td",{children:G?e.jsx("input",{readOnly:!0,value:u.W,onChange:P=>$(A,"W",P.target.value),className:"form-control form-control-sm"}):u.W}),e.jsx("td",{children:G?e.jsx("input",{readOnly:!0,value:u.H,onChange:P=>$(A,"H",P.target.value),className:"form-control form-control-sm"}):u.H}),e.jsx("td",{children:G?e.jsx("input",{value:u.wtPerPc,onChange:P=>$(A,"wtPerPc",P.target.value),className:"form-control form-control-sm"}):u.wtPerPc}),e.jsx("td",{children:G?e.jsx("input",{value:u.qty,onChange:P=>$(A,"qty",P.target.value),className:"form-control form-control-sm"}):u.qty}),e.jsx("td",{children:u.totalWt}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-link",children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-link",children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:G?e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>R(null),disabled:!a.editable,children:"Save"}):e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:P=>{P.stopPropagation(),J(A)},disabled:!a.editable,children:e.jsx("i",{className:"fas fa-trash"})})})]},A)};return e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>t(u=>!u),children:[e.jsx("i",{className:`fas ${r?"fa-chevron-down":"fa-chevron-right"} mr-2`}),e.jsx("strong",{children:"PSE Information"})]}),r&&e.jsx("div",{className:"card card-body mt-2",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Plant (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:n,onChange:u=>m(u.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Packing Plant (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:j,onChange:u=>h(u.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Vanning Plant (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:o,onChange:u=>d(u.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Vanning Plant (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:i,onChange:u=>p(u.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Order Pattern (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:u=>f(u.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Order Pattern (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:k,onChange:u=>g(u.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsx("label",{className:"small mb-1",children:"Category"}),e.jsxs("select",{className:"form-control form-control-sm",value:v,onChange:u=>N(u.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"Trim",children:"Trim"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"col-12 mt-2",children:[e.jsx("label",{className:"small mb-1",children:"Katashiki (AD/AU/AF/AX)"}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"col",children:e.jsx("input",{className:"form-control form-control-sm",placeholder:"AD",value:b.AD,onChange:u=>S(A=>({...A,AD:u.target.value})),disabled:!a.editable})}),e.jsx("div",{className:"col",children:e.jsx("input",{className:"form-control form-control-sm",placeholder:"AU",value:b.AU,onChange:u=>S(A=>({...A,AU:u.target.value})),disabled:!a.editable})}),e.jsx("div",{className:"col",children:e.jsx("input",{className:"form-control form-control-sm",placeholder:"AF",value:b.AF,onChange:u=>S(A=>({...A,AF:u.target.value})),disabled:!a.editable})}),e.jsx("div",{className:"col",children:e.jsx("input",{className:"form-control form-control-sm",placeholder:"AX",value:b.AX,onChange:u=>S(A=>({...A,AX:u.target.value})),disabled:!a.editable})})]})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Importer Line Process"}),e.jsx("input",{className:"form-control form-control-sm",value:C,onChange:u=>E(u.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Case Code"}),e.jsx("input",{className:"form-control form-control-sm",value:M,onChange:u=>F(u.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Box Number"}),e.jsx("input",{className:"form-control form-control-sm",value:_,onChange:u=>D(u.target.value),disabled:!a.editable})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Renban"}),e.jsx("input",{className:"form-control form-control-sm",value:w,onChange:u=>U(u.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Renban Eff"}),e.jsx("input",{className:"form-control form-control-sm",value:y,onChange:u=>I(u.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Process - Boxing"}),e.jsxs("select",{className:"form-control form-control-sm",value:L,onChange:u=>W(u.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"SUPPLIER",children:"SUPPLIER"})]})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Process - Stacking"}),e.jsxs("select",{className:"form-control form-control-sm",value:Q,onChange:u=>te(u.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"TMMIN",children:"TMMIN"})]})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"small mb-1",children:"OUTER (Pack Material)"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{R(null),K(!0)},disabled:X||!a.editable,children:"Add"})})]}),e.jsx("div",{className:"table-responsive mt-2",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 small",children:[e.jsx("thead",{style:{backgroundColor:"#cfcfcfff"},children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{style:{width:30},children:"No"}),e.jsx("th",{style:{width:120},children:"Pack Material No"}),e.jsx("th",{style:{width:40},children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{width:60},children:"L"}),e.jsx("th",{style:{width:60},children:"W"}),e.jsx("th",{style:{width:60},children:"H"}),e.jsx("th",{style:{width:60},children:"Wt/pc"}),e.jsx("th",{style:{width:60},children:"Qty"}),e.jsx("th",{style:{width:80},children:"Total Wt"}),e.jsx("th",{style:{width:10},children:"msds"}),e.jsx("th",{style:{width:10},children:"draw"}),e.jsx("th",{style:{width:80},children:"Action"})]})}),e.jsxs("tbody",{children:[B.length===0&&!X?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-3",children:"No Data Found"})}):B.map(x),X&&e.jsxs("tr",{children:[e.jsx("td",{children:"+"}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:O.materialNo,onChange:u=>z(A=>({...A,materialNo:u.target.value}))}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>T("Outer","new"),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:O.suffix,onChange:u=>z(A=>({...A,suffix:u.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:O.name})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:O.supplier})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:O.L,onChange:u=>z(A=>({...A,L:u.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:O.W,onChange:u=>z(A=>({...A,W:u.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:O.H,onChange:u=>z(A=>({...A,H:u.target.value}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:O.wtPerPc,onChange:u=>z(A=>({...A,wtPerPc:u.target.value,totalWt:(parseFloat(u.target.value)||0)*(parseFloat(A.qty)||0)}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:O.qty,onChange:u=>z(A=>({...A,qty:u.target.value,totalWt:(parseFloat(u.target.value)||0)*(parseFloat(A.wtPerPc)||0)}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:O.totalWt})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:H,disabled:!a.editable,children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>K(!1),disabled:!a.editable,children:"Cancel"})]})})]})]})]})})]})]})})]})})}const Qt=de.memo(({file:s,index:a,onRemove:r})=>{const[t,n]=l.useState(null);l.useEffect(()=>{if(!s)return;const j=URL.createObjectURL(s);return n(j),()=>URL.revokeObjectURL(j)},[s]);const m=l.useCallback(()=>{r(a)},[a,r]);return t?e.jsxs("div",{style:{position:"relative",display:"inline-block",marginRight:"10px",marginBottom:"10px"},children:[e.jsx("img",{src:t,alt:s.name,className:"border",style:{width:"100px",height:"100px",objectFit:"cover"}}),e.jsx("button",{onClick:m,className:"btn btn-danger btn-sm",style:{position:"absolute",top:"0",right:"0",borderRadius:"50%",width:"24px",height:"24px",lineHeight:"1",padding:"0"},children:"×"})]}):null}),Zt=({imagesPart:s,setImagesPart:a,imagesPacking:r,setImagesPacking:t,imagesOuter:n,setImagesOuter:m,imagesQkp:j,setImagesQkp:h,imagesBkp:o,setImagesBkp:d,imagesOpen:i,setImagesOpen:p})=>{const c=v=>N=>{const b=N.target.value;v(S=>({...S,caption:b}))},f=v=>N=>{const b=Array.from(N.target.files);b.length>0&&v(S=>({...S,files:[...S.files,...b]}))},k=v=>N=>{v(b=>{const S=[...b.files];return S.splice(N,1),{...b,files:S}})},g=[{id:"part",title:"Part Images",state:s,setter:a},{id:"packing",title:"Packing Images",state:r,setter:t},{id:"outer",title:"Outer Images",state:n,setter:m},{id:"qkp",title:"QKP Images",state:j,setter:h},{id:"bkp",title:"BKP Images",state:o,setter:d}];return e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>p(v=>!v),"aria-expanded":i,"aria-controls":"imagesSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${i?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Images"]})}),i&&e.jsx("div",{id:"imagesSection",children:e.jsx("div",{className:"row mt-2",children:g.map(({id:v,title:N,state:b,setter:S})=>e.jsxs("div",{className:"col-md-6 mt-2",children:[e.jsx("label",{className:"small",children:N}),e.jsxs("div",{className:"border p-2 mb-2",children:[e.jsx("textarea",{value:b.caption,onChange:c(S),placeholder:"Enter a caption...",rows:"2",className:"form-control mb-2"}),e.jsx("div",{className:"d-flex flex-wrap",children:b.files.length===0?e.jsx("div",{className:"text-muted small",children:"No images"}):b.files.map((C,E)=>e.jsx(Qt,{file:C,index:E,onRemove:k(S)},`${C.name}-${C.lastModified}-${E}`))}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:`${v}-image-input`,className:"btn btn-sm btn-outline-primary",children:"+ Add"}),e.jsx("input",{type:"file",id:`${v}-image-input`,accept:".jpg,.jpeg,.png",multiple:!0,style:{display:"none"},onChange:f(S)})]})]})]},v))})})]})};function Xt(s){const{config:a,innerRows:r,setInnerRows:t,newInner:n,setNewInner:m,handleRemoveInnerRow:j,openMaterialPicker:h,materials:o}=s,[d,i]=l.useState(!1),[p,c]=l.useState(null),f=l.useRef(null);l.useEffect(()=>{p!==null&&f.current&&f.current.focus()},[p]);const k=()=>{if(!n.materialNo.trim()){alert("Enter Pack Material No");return}t(N=>[...N,{...n}]),m({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})},g=(N,b,S)=>{const C=r.map((E,M)=>M===N?{...E,[b]:S}:E);t(C)},v=(N,b)=>{const S=o.find(C=>C.materialNo===N);if(console.log("Blurred ->>"),S){console.log("Material FOund -->",JSON.stringify(S));const C={name:S.materialName,supplierName:S.supplier.supplier_name,L:S.dimension_inner_length,W:S.dimension_inner_width,H:S.dimension_inner_height};if(b==="new")console.log("New Inner -->",n),m(E=>({...E,...C}));else{const E=r.map((M,F)=>F===b?{...M,...C}:M);t(E)}}};return e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"small mb-1",children:"INNER (Pack Material)"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{c(null),i(!0)},disabled:d||!a.editable,children:"Add"})})]}),e.jsx("div",{className:"table-responsive mt-2",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 small",children:[e.jsx("thead",{style:{backgroundColor:"#cfcfcfff"},children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{style:{width:30},children:"No"}),e.jsx("th",{style:{width:120},children:"Pack Material No"}),e.jsx("th",{style:{width:40},children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{width:60},children:"L"}),e.jsx("th",{style:{width:60},children:"W"}),e.jsx("th",{style:{width:60},children:"H"}),e.jsx("th",{style:{width:60},children:"Wt/pc"}),e.jsx("th",{style:{width:60},children:"Qty"}),e.jsx("th",{style:{width:80},children:"Total Wt"}),e.jsx("th",{style:{width:10},children:"msds"}),e.jsx("th",{style:{width:10},children:"draw"}),e.jsx("th",{style:{width:80},children:"Action"})]})}),e.jsxs("tbody",{children:[r.length===0&&!d?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-3",children:"No Data Found"})}):r.map((N,b)=>p===b?e.jsxs("tr",{children:[e.jsx("td",{children:b+1}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{ref:f,value:N.materialNo,onChange:C=>g(b,"materialNo",C.target.value),onBlur:C=>v(C.target.value,b),className:"form-control form-control-sm",disabled:!a.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>h(b===0?"box":"inner",b),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{value:N.suffix,onChange:C=>g(b,"suffix",C.target.value),readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:N.name,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:N.supplierName,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:N.L,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:N.W,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:N.H,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:N.wtPerPc,onChange:C=>g(b,"wtPerPc",C.target.value),className:"form-control form-control-sm",disabled:!a.editable})}),e.jsx("td",{children:e.jsx("input",{value:N.qty,onChange:C=>g(b,"qty",C.target.value),className:"form-control form-control-sm",disabled:!a.editable})}),e.jsx("td",{children:(Number(N.wtPerPc||0)*Number(N.qty||0)).toFixed(2)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show MSDS doc for "+N.materialNo),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show Drawing doc for "+N.materialNo),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>c(null),disabled:!a.editable,children:"Save"})})]},b):e.jsxs("tr",{onClick:()=>{a.editable&&(c(b),i(!1))},children:[e.jsx("td",{children:b+1}),e.jsx("td",{children:N.materialNo}),e.jsx("td",{children:N.suffix}),e.jsx("td",{children:N.name}),e.jsx("td",{children:N.supplierName}),e.jsx("td",{children:N.L}),e.jsx("td",{children:N.W}),e.jsx("td",{children:N.H}),e.jsx("td",{children:N.wtPerPc}),e.jsx("td",{children:N.qty}),e.jsx("td",{children:(Number(N.wtPerPc||0)*Number(N.qty||0)).toFixed(2)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:C=>{C.stopPropagation(),alert("Show MSDS doc for "+N.materialNo)},children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:C=>{C.stopPropagation(),alert("Show Drawing doc for "+N.materialNo)},children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:C=>{C.stopPropagation(),j(b)},disabled:!a.editable,children:e.jsx("i",{className:"fas fa-trash"})})})]},b)),d&&e.jsxs("tr",{children:[e.jsx("td",{children:"+"}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:n.materialNo,onChange:N=>m(b=>({...b,materialNo:N.target.value})),onBlur:N=>v(N.target.value,"new")}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>h(r.length===0?"box":"inner"),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.suffix,onChange:N=>m(b=>({...b,suffix:N.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.name,onChange:N=>m(b=>({...b,name:N.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.supplierName,onChange:N=>m(b=>({...b,supplierName:N.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.L,onChange:N=>m(b=>({...b,L:N.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.W,onChange:N=>m(b=>({...b,W:N.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.H,onChange:N=>m(b=>({...b,H:N.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.wtPerPc,onChange:N=>m(b=>({...b,wtPerPc:N.target.value}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.qty,onChange:N=>m(b=>({...b,qty:N.target.value}))})}),e.jsx("td",{children:"-"}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show MSDS doc for new material"),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show Drawing doc for new material"),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:k,disabled:!a.editable,children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>{m({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),i(!1)},disabled:!a.editable,children:"Cancel"})]})})]})]})]})})]})})}function el(s){const{packingOpen:a,setPackingOpen:r}=s;return e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>r(t=>!t),"aria-expanded":a,"aria-controls":"packingSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${a?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Packing"]})}),a&&e.jsx("div",{id:"packingSection",children:e.jsx(Xt,{...s})})]})})}function sl(s){const{logisticOpen:a,setLogisticOpen:r,tmmindDestDockCode:t,setTmmindDestDockCode:n,logisticRemark:m,setLogisticRemark:j,processType:h,setProcessType:o,addressRack:d,setAddressRack:i}=s;return e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>r(p=>!p),"aria-expanded":a,"aria-controls":"logisticSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${a?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Logistic Information"]})}),a&&e.jsxs("div",{id:"logisticSection",className:"mt-2",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"TMMIN Dest Dock Code"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{className:"form-control form-control-sm",value:t,onChange:p=>n(p.target.value),placeholder:"Dock Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Address Rack"}),e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:p=>i(p.target.value),placeholder:"Address Rack"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Remark"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:3,value:m,onChange:p=>j(p.target.value),placeholder:"Remark"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Process Type"}),e.jsx("div",{children:["N","W","X","Y"].map(p=>e.jsxs("label",{className:"mr-3",children:[e.jsx("input",{type:"radio",name:"processType",value:p,checked:h===p,onChange:()=>o(p)})," ",p]},p))})]})]})]})}const tl=s=>({cpsNo:s.cpsNo,refCpsNo:s.refCpsNo,issueDate:s.issueDate,effectiveDate:s.effectiveDate,cfcPjtCode:s.cfcPjtCode,model:s.model,partNo:s.partNo,partName:s.partName,supplier:s.supplier,plantCode:s.plantCode,dockCode:s.dockCode,pseInfo:{packingPlantCurr:s.pseInfo.packingPlantCurr,packingPlantNext:s.pseInfo.packingPlantNext,vanningPlantCurr:s.pseInfo.vanningPlantCurr,vanningPlantNext:s.pseInfo.vanningPlantNext,orderPatternCurr:s.pseInfo.orderPatternCurr,orderPatternNext:s.pseInfo.orderPatternNext,category:s.pseInfo.category,katashiki:s.pseInfo.katashiki,importerLineProcess:s.pseInfo.importerLineProcess,caseCode:s.pseInfo.caseCode,boxNumber:s.pseInfo.boxNumber,renban:s.pseInfo.renban,renbanEff:s.pseInfo.renbanEff,packingProcessBoxing:s.pseInfo.packingProcessBoxing,packingProcessStacking:s.pseInfo.packingProcessStacking},images:{part:s.images.part,packing:s.images.packing,outer:s.images.outer,qkp:s.images.qkp,bkp:s.images.bkp},packing:{outerModuleType:s.packing.outerModuleType,outerDimension:s.packing.outerDimension,innerVolume:s.packing.innerVolume,outerVolume:s.packing.outerVolume,innerRows:s.packing.innerRows},notes:s.notes,logistic:{tmmindDestDockCode:s.logistic.tmmindDestDockCode,logisticRemark:s.logistic.logisticRemark,processType:s.logistic.processType,addressRack:s.logistic.addressRack}}),ll=s=>{s.setCpsNo(""),s.setRefCpsNo(""),s.setIssueDate(""),s.setEffectiveDate(""),s.setCfcPjtCode(""),s.setModel(""),s.setPartNo(""),s.setPartName(""),s.setSupplier(""),s.setPlantCode(""),s.setDockCode(""),s.setPseOpen(!1),s.setPackingPlantCurr(""),s.setPackingPlantNext(""),s.setVanningPlantCurr(""),s.setVanningPlantNext(""),s.setOrderPatternCurr(""),s.setOrderPatternNext(""),s.setCategory(""),s.setKatashiki({AD:"",AU:"",AF:"",AX:""}),s.setImporterLineProcess(""),s.setCaseCode(""),s.setBoxNumber(""),s.setRenban(""),s.setRenbanEff(""),s.setPackingProcessBoxing(""),s.setPackingProcessStacking(""),s.setImagesPart({caption:"",files:[]}),s.setImagesPacking({caption:"",files:[]}),s.setImagesOuter({caption:"",files:[]}),s.setImagesQkp({caption:"",files:[]}),s.setImagesBkp({caption:"",files:[]}),s.setOuterModuleType(""),s.setOuterMaterialName(""),s.setOuterDimension({L:"",W:"",H:""}),s.setInnerVolume(""),s.setOuterVolume(""),s.setInnerRows([]),s.setNotes(""),s.setNewInner({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),s.setLogisticOpen(!0),s.setTmmindDestDockCode(""),s.setLogisticRemark(""),s.setProcessType("N"),s.setAddressRack("")};function al({show:s,onClose:a,onSave:r,editData:t,config:n}){const[m,j]=l.useState("general"),[h,o]=l.useState({current:{},comparisons:[]}),[d,i]=l.useState([]),[p,c]=l.useState(""),[f,k]=l.useState(""),[g,v]=l.useState(""),[N,b]=l.useState(""),[S,C]=l.useState(""),[E,M]=l.useState(""),[F,_]=l.useState(""),[D,w]=l.useState(""),[U,y]=l.useState(""),[I,L]=l.useState(""),[W,Q]=l.useState(""),[te,B]=l.useState(!1),[Y,O]=l.useState(""),[z,T]=l.useState(""),[X,K]=l.useState(""),[q,R]=l.useState(""),[H,J]=l.useState(""),[$,x]=l.useState(""),[u,A]=l.useState(""),[G,P]=l.useState({AD:"",AU:"",AF:"",AX:""}),[V,Z]=l.useState(""),[ee,oe]=l.useState(""),[me,he]=l.useState(""),[ye,pe]=l.useState(""),[Ae,Me]=l.useState(""),[ns,Le]=l.useState(""),[rs,De]=l.useState(""),[ze,Se]=l.useState([]),[qs,Je]=l.useState({materialNo:"",suffix:"",name:"",supplier:"",L:"",W:"",H:"",wtPerPc:"",qty:"",totalWt:""}),[os,Te]=l.useState({caption:"",files:[]}),[is,Ee]=l.useState({caption:"",files:[]}),[cs,Re]=l.useState({caption:"",files:[]}),[ds,Oe]=l.useState({caption:"",files:[]}),[ms,Fe]=l.useState({caption:"",files:[]}),[$s,Qe]=l.useState(""),[us,ve]=l.useState([]),[hs,We]=l.useState(""),[Be,we]=l.useState({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),[Ks,Vs]=l.useState(!0),[Gs,Ys]=l.useState(!0),[zs,xs]=l.useState(!1),[Js,Ze]=l.useState(!1),[Qs,Xe]=l.useState(!1),[Zs,es]=l.useState(!1),[He,Xs]=l.useState("all"),[et,st]=l.useState(null),[tt,ss]=l.useState(!0),[ps,Ue]=l.useState(""),[js,qe]=l.useState(""),[fs,$e]=l.useState("N"),[Ns,Ke]=l.useState("");l.useEffect(()=>{fetch("/cpsComparison.json").then(se=>se.json()).then(se=>o(se)),fetch("/materials.json").then(se=>se.json()).then(se=>i(se))},[]);const lt=h.current,at=h.comparisons;l.useEffect(()=>{s&&(t?(c(t.cpsNo||""),k(t.refCpsNo||""),v(t.issueDate||""),b(t.effectiveDate||""),C(t.cfcPjtCode||""),M(t.model||""),_(t.partNo||""),w(t.partName||""),y(t.supplier||""),L(t.plantCode||""),Q(t.dockCode||""),t.pseInfo&&(O(t.pseInfo.packingPlantCurr||""),T(t.pseInfo.packingPlantNext||""),K(t.pseInfo.vanningPlantCurr||""),R(t.pseInfo.vanningPlantNext||""),J(t.pseInfo.orderPatternCurr||""),x(t.pseInfo.orderPatternNext||""),A(t.pseInfo.category||""),P(t.pseInfo.katashiki||{AD:"",AU:"",AF:"",AX:""}),Z(t.pseInfo.importerLineProcess||""),oe(t.pseInfo.caseCode||""),he(t.pseInfo.boxNumber||""),pe(t.pseInfo.renban||""),Me(t.pseInfo.renbanEff||""),Le(t.pseInfo.packingProcessBoxing||""),De(t.pseInfo.packingProcessStacking||""),Se(t.pseInfo.outerRows||[])),t.images&&(Te(t.images.part||{caption:"",files:[]}),Ee(t.images.packing||{caption:"",files:[]}),Re(t.images.outer||{caption:"",files:[]}),Oe(t.images.qkp||{caption:"",files:[]}),Fe(t.images.bkp||{caption:"",files:[]})),t.packing&&(Qe(t.packing.innerVolume||""),ve(t.packing.innerRows||[])),We(t.notes||""),t.logistic&&(Ue(t.logistic.tmmindDestDockCode||""),qe(t.logistic.logisticRemark||""),$e(t.logistic.processType||"N"),Ke(t.logistic.addressRack||""))):(c(""),k(""),v(""),b(""),C(""),M(""),_(""),w(""),y(""),L(""),Q(""),B(!1),O(""),T(""),K(""),R(""),J(""),x(""),A(""),P({AD:"",AU:"",AF:"",AX:""}),Z(""),oe(""),he(""),pe(""),Me(""),Le(""),De(""),Se([]),Te({caption:"",files:[]}),Ee({caption:"",files:[]}),Re({caption:"",files:[]}),Oe({caption:"",files:[]}),Fe({caption:"",files:[]}),Qe(""),ve([]),We(""),we({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),ss(!0),Ue(""),qe(""),$e("N"),Ke("")))},[s,t]);function nt(){if(!Be.materialNo.trim()){alert("Enter Pack Material No");return}ve(se=>[...se,{...Be}]),we({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})}function rt(se){ve(xe=>xe.filter((ts,ge)=>ge!==se))}function ot(se){se&&(_(se.partNo),w(se.partName),y(se.supplierName)),Ze(!1)}const it=()=>{const se=tl({cpsNo:p,refCpsNo:f,issueDate:g,effectiveDate:N,cfcPjtCode:S,model:E,partNo:F,partName:D,supplier:U,plantCode:I,dockCode:W,pseInfo:{packingPlantCurr:Y,packingPlantNext:z,vanningPlantCurr:X,vanningPlantNext:q,orderPatternCurr:H,orderPatternNext:$,category:u,katashiki:G,importerLineProcess:V,caseCode:ee,boxNumber:me,renban:ye,renbanEff:Ae,packingProcessBoxing:ns,packingProcessStacking:rs,outerRows:ze},images:{part:os,packing:is,outer:cs,qkp:ds,bkp:ms},packing:{innerVolume:$s,innerRows:us},notes:hs,logistic:{tmmindDestDockCode:ps,logisticRemark:js,processType:fs,addressRack:Ns}});r(se),bs()},bs=()=>{ll({setCpsNo:c,setRefCpsNo:k,setIssueDate:v,setEffectiveDate:b,setCfcPjtCode:C,setModel:M,setPartNo:_,setPartName:w,setSupplier:y,setPlantCode:L,setDockCode:Q,setPseOpen:B,setPackingPlantCurr:O,setPackingPlantNext:T,setVanningPlantCurr:K,setVanningPlantNext:R,setOrderPatternCurr:J,setOrderPatternNext:x,setCategory:A,setKatashiki:P,setImporterLineProcess:Z,setCaseCode:oe,setBoxNumber:he,setRenban:pe,setRenbanEff:Me,setPackingProcessBoxing:Le,setPackingProcessStacking:De,setPseOuterRows:Se,setNewPseOuter:Je,setImagesPart:Te,setImagesPacking:Ee,setImagesOuter:Re,setImagesQkp:Oe,setImagesBkp:Fe,setInnerVolume:Qe,setInnerRows:ve,setNotes:We,setNewInner:we,setLogisticOpen:ss,setTmmindDestDockCode:Ue,setLogisticRemark:qe,setProcessType:$e,setAddressRack:Ke}),a()};function ct(se){se&&(Array.isArray(se)?M(se.map(xe=>xe.code).join(", ")):M(se.code||"")),Xe(!1)}function dt(se){if(se){const xe=et;if(He==="outer"||He==="module"){const ts={materialNo:se.materialNo,name:se.materialName,supplier:se.supplierName,L:se.dimension_length,W:se.dimension_width,H:se.dimension_height,wtPerPc:se.unitWeight};if(xe==="new")Je(ge=>({...ge,...ts}));else{const ge=[...ze];ge[xe]={...ge[xe],...ts},Se(ge)}}else He==="inner"&&we({...Be,materialNo:se.materialNo,name:se.materialName,L:se.dimension_length,W:se.dimension_width,H:se.dimension_height,wtPerPc:se.unitWeight})}es(!1)}const mt=()=>Xe(!0),gs=(se,xe=null)=>{Xs(se),st(xe),es(!0)};return s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:se=>{se.target===se.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1200},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:t?"CPS - Edit":"CPS - New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[n.general.visible&&e.jsxs(e.Fragment,{children:[e.jsx(zt,{config:n.general,cpsNo:p,setCpsNo:c,refCpsNo:f,setRefCpsNo:k,cfcPjtCode:S,setCfcPjtCode:C,model:E,setModel:M,partNo:F,setPartNo:_,partName:D,setPartName:w,supplier:U,setSupplier:y,plantCode:I,setPlantCode:L,dockCode:W,setDockCode:Q,openPartPicker:()=>Ze(!0),openModelPicker:mt,setComparisonOpen:xs}),n.pse.visible&&e.jsx("hr",{})]}),n.pse.visible&&e.jsxs(e.Fragment,{children:[e.jsx(Jt,{config:n.pse,pseOpen:te,setPseOpen:B,packingPlantCurr:Y,setPackingPlantCurr:O,packingPlantNext:z,setPackingPlantNext:T,vanningPlantCurr:X,setVanningPlantCurr:K,vanningPlantNext:q,setVanningPlantNext:R,orderPatternCurr:H,setOrderPatternCurr:J,orderPatternNext:$,setOrderPatternNext:x,category:u,setCategory:A,katashiki:G,setKatashiki:P,importerLineProcess:V,setImporterLineProcess:Z,caseCode:ee,setCaseCode:oe,boxNumber:me,setBoxNumber:he,renban:ye,setRenban:pe,renbanEff:Ae,setRenbanEff:Me,packingProcessBoxing:ns,setPackingProcessBoxing:Le,packingProcessStacking:rs,setPackingProcessStacking:De,pseOuterRows:ze,setPseOuterRows:Se,newPseOuter:qs,setNewPseOuter:Je,openMaterialPicker:gs}),n.images.visible&&e.jsx("hr",{})]}),n.images.visible&&e.jsxs(e.Fragment,{children:[e.jsx(Zt,{config:n.images,imagesOpen:Ks,setImagesOpen:Vs,imagesPart:os,setImagesPart:Te,imagesPacking:is,setImagesPacking:Ee,imagesOuter:cs,setImagesOuter:Re,imagesQkp:ds,setImagesQkp:Oe,imagesBkp:ms,setImagesBkp:Fe}),n.packing.visible&&e.jsx("hr",{})]}),n.packing.visible&&e.jsxs(e.Fragment,{children:[e.jsx(el,{config:n.packing,materials:d,packingOpen:Gs,setPackingOpen:Ys,innerRows:us,setInnerRows:ve,newInner:Be,setNewInner:we,handleAddInnerRow:nt,handleRemoveInnerRow:rt,openMaterialPicker:gs}),n.logistic.visible&&e.jsx("hr",{})]}),n.logistic.visible&&e.jsx(sl,{config:n.logistic,logisticOpen:tt,setLogisticOpen:ss,tmmindDestDockCode:ps,setTmmindDestDockCode:Ue,logisticRemark:js,setLogisticRemark:qe,processType:fs,setProcessType:$e,addressRack:Ns,setAddressRack:Ke}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Note"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:hs,onChange:se=>We(se.target.value)})]})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-secondary",onClick:bs,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary ml-2",onClick:it,children:"Save"}),e.jsx("button",{className:"btn btn-success ml-2",onClick:()=>alert("Submit action to be implemented."),children:"Submit"})]})]}),e.jsx("style",{children:`
          .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
          .np-modal { width: 100%; max-height: 95vh; overflow: auto; z-index: 2001; }
          .table-sm td, .table-sm th { vertical-align: middle; }
        `})]}),e.jsx(Gt,{isOpen:zs,onClose:()=>xs(!1),parts:at,current:lt,extraClass:"multi-parts-comparison"}),e.jsx(Ce,{show:Js,onClose:()=>Ze(!1),onSelect:ot,zIndex:4e3,mode:"single"}),e.jsx(as,{show:Qs,onClose:()=>Xe(!1),onAdd:ct,selectionMode:"single"}),e.jsx(Yt,{show:Zs,onClose:()=>es(!1),onAdd:dt,zIndex:3e3,filter:He})]}):null}const ys=[{userId:"12345",name:"Rollin Khaider",dept:"PSE",role:"Dept Head"},{userId:"22345",name:"Asep Sumarna",dept:"PPM",role:"Section Head"},{userId:"32345",name:"Khalil Gibran",dept:"PSE",role:"Staff"},{userId:"42345",name:"Jaka T. Mulyo",dept:"PCD",role:"Staff"},{userId:"52345",name:"W.H. Jeanette",dept:"PPM",role:"Staff"}];function nl({show:s=!1,onClose:a,onSelect:r}){const[t,n]=l.useState({userId:"",name:"",dept:"",role:""}),[m,j]=l.useState(null);if(!s)return null;const h=i=>{n({...t,[i.target.name]:i.target.value})},o=()=>n({userId:"",name:"",dept:"",role:""}),d=ys.filter(i=>(!t.userId||i.userId.includes(t.userId))&&(!t.name||i.name.toLowerCase().includes(t.name.toLowerCase()))&&(!t.dept||i.dept.toLowerCase().includes(t.dept.toLowerCase()))&&(!t.role||i.role.toLowerCase().includes(t.role.toLowerCase())));return e.jsxs("div",{className:"np-modal-backdrop",style:{zIndex:3e3},children:[e.jsxs("div",{className:"np-modal card card-outline card-info",style:{maxWidth:600},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0",style:{fontSize:20},children:e.jsx("b",{children:"Select a Person"})}),e.jsx("button",{className:"btn btn-tool ml-auto",onClick:a,children:e.jsx("span",{style:{fontSize:25},children:"×"})})]}),e.jsxs("div",{className:"card-body pb-2",children:[e.jsxs("div",{className:"form-row align-items-end",children:[e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"User Id"}),e.jsx("input",{name:"userId",className:"form-control form-control-sm",value:t.userId,onChange:h})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Name"}),e.jsx("input",{name:"name",className:"form-control form-control-sm",value:t.name,onChange:h})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small mb-1",children:"Dept"}),e.jsx("input",{name:"dept",className:"form-control form-control-sm",value:t.dept,onChange:h})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Role"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{name:"role",className:"form-control form-control-sm",value:t.role,onChange:h}),e.jsxs("div",{className:"input-group-append",children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:o,children:e.jsx("i",{className:"fas fa-times"})})]})]})]})]}),e.jsx("div",{style:{maxHeight:260,overflowY:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"User ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Dept"}),e.jsx("th",{children:"Role"})]})}),e.jsx("tbody",{children:d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center text-muted",children:"No Data Found"})}):d.map((i,p)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"radio",checked:m===i.userId,onChange:()=>j(i.userId)})}),e.jsx("td",{children:i.userId}),e.jsx("td",{children:i.name}),e.jsx("td",{children:i.dept}),e.jsx("td",{children:i.role})]},i.userId))})]})})]}),e.jsx("div",{className:"card-footer text-right",children:e.jsxs("button",{className:"btn btn-success",disabled:!m,onClick:()=>{const i=ys.find(p=>p.userId===m);i&&r&&r(i),a&&a()},children:[e.jsx("i",{className:"fas fa-check mr-1"})," Select"]})})]}),e.jsx("style",{children:`
        .np-modal-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.35);
          z-index: 3000;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 1rem;
        }
        .np-modal { width: 100%; z-index: 3001; }
        .table-sm td, .table-sm th { vertical-align: middle; }
      `})]})}const Ye=[{destCode:"301B",code:"TAR",country:"ARGENTINA",company:"Toyota Argentina"},{destCode:"301B",code:"TASA",country:"ARGENTINA",company:"Toyota Argentina S.A."},{destCode:"537B",code:"TSM",country:"AFRIKA",company:"Toyota South Africa Motors"},{destCode:"709B",code:"TKM",country:"INDIA",company:"Toyota Kirloskar Motor"},{destCode:"715B",code:"TMV",country:"VIETNAM",company:"Toyota Motor Vietnam"},{destCode:"717C",code:"IMC",country:"PAKISTAN",company:"Indus Motor Company"},{destCode:"721B",code:"KUO",country:"KUOZUI",company:"Kuozui Motors"},{destCode:"721C",code:"KUO",country:"KUOZUI",company:"Kuozui Motors"},{destCode:"722C",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"722F",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"722B",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"811C",code:"TMP",country:"PHILIPINE",company:"Toyota Motor Philippines"},{destCode:"812B",code:"UMW",country:"MALAYSIA",company:"UMW Toyota Motor"},{destCode:"812K",code:"UMW",country:"MALAYSIA",company:"UMW Toyota Motor"},{destCode:"547A",code:"TEE",country:"MESIR",company:"Toyota Egypt Enterprise"},{destCode:"303B",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"303E",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"303D",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"D55E",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"704B",code:"TMY",country:"MYANMAR",company:"Toyota Motor Myanmar"},{destCode:"705A",code:"CAM",country:"CAMBOJA",company:"Cambodia Toyota Motor"},{destCode:"709C",code:"TKAP",country:"INDIA 2",company:"Toyota Kirloskar Auto Parts"},{destCode:"709D",code:"TIEI",country:"INDIA 3",company:"Toyota Industries Engine India"},{destCode:"722S",code:"STM",country:"SIAM THAILAND",company:"Siam Toyota Motor"},{destCode:"811W",code:"TAP",country:"PHILIPINE 2",company:"Toyota Auto Parts Philippines"},{destCode:"807B",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"},{destCode:"807D",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"},{destCode:"807J",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"}],rl=[{id:1,cpsNo:"CPS-2024-001",refCpsNo:"",issueDate:"2024-07-01",effectiveDate:"2024-07-10",dpiNo:"DPI-2024-001",cfcPjtCode:"PJT-A",model:"579W",partNo:"90466T006200",partName:"CLIP, MOULDING",supplier:"Supplier A",plantCode:"TMMIN",dockCode:"D01",pseInfo:{packingPlantCurr:"PLANT-1",packingPlantNext:"PLANT-1",vanningPlantCurr:"VPLANT-A",vanningPlantNext:"VPLANT-A",orderPatternCurr:"A1",orderPatternNext:"A1",category:"CAT-1",katashiki:{AD:"AD1",AU:"AU1",AF:"AF1",AX:"AX1"},importerLineProcess:"ILP-1",caseCode:"CC-001",boxNumber:"B-001",renban:"R-001",renbanEff:"2024-07-10",packingProcessBoxing:"Manual",packingProcessStacking:"Auto"},images:{part:{caption:"Part Image",files:[]},packing:{caption:"Packing Image",files:[]},outer:{caption:"Outer Image",files:[]},qkp:{caption:"QKP Image",files:[]},bkp:{caption:"BKP Image",files:[]}},packing:{outerModuleType:"MOD-A",outerDimension:{L:"100",W:"80",H:"60"},innerVolume:"0.0384",outerVolume:"0.048",innerRows:[{materialNo:"MAT-001",suffix:"S1",name:"Inner Box",parent:"",supplierId:"SUP-001",supplierName:"Supplier Inner",L:"50",W:"40",H:"30",wtPerPc:"0.1",qty:"10"}]},notes:"This is a note for the first CPS.",numParts:5,fromUser:"User A",toUser:"User B",status:"Approved"},{id:2,cpsNo:"CPS-2024-002",refCpsNo:"CPS-2024-001",issueDate:"2024-07-05",effectiveDate:"2024-07-15",dpiNo:"DPI-2024-002",cfcPjtCode:"PJT-B",model:"579W",partNo:"32101BZ10000",partName:"Part B",supplier:"Supplier B",plantCode:"TMMIN",dockCode:"D02",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:8,fromUser:"User C",toUser:"User D",status:"Submitted"},{id:3,cpsNo:"CPS-2024-003",refCpsNo:"",issueDate:"2024-07-12",effectiveDate:"2024-07-20",dpiNo:"DPI-2024-003",cfcPjtCode:"PJT-C",model:"579W",partNo:"90466T006200",partName:"Part C",supplier:"Supplier C",plantCode:"TMMIN",dockCode:"D03",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:3,fromUser:"User E",toUser:"User F",status:"Draft"},{id:4,cpsNo:"CPS-2024-004",refCpsNo:"",issueDate:"2024-07-15",effectiveDate:"2024-07-25",dpiNo:"DPI-2024-004",cfcPjtCode:"PJT-A",model:"579W",partNo:"32101BZ10000",partName:"Part D",supplier:"Supplier D",plantCode:"TMMIN",dockCode:"D04",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:12,fromUser:"User A",toUser:"User G",status:"Rejected"},{id:5,cpsNo:"CPS-2024-005",refCpsNo:"CPS-2024-004",issueDate:"2024-07-20",effectiveDate:"2024-08-01",dpiNo:"DPI-2024-005",cfcPjtCode:"PJT-D",model:"579W",partNo:"90466T006200",partName:"Part E",supplier:"Supplier E",plantCode:"TMMIN",dockCode:"D05",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:7,fromUser:"User H",toUser:"User I",status:"Approved"}],ol=({onNewCps:s,onUpload:a,onDownload:r,onCreatePsi:t,onCreateEci:n,onComparePcs:m})=>e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:s,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create CPS"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:t,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create PSI"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:n,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create ECI"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-info",onClick:m,children:[e.jsx("i",{className:"fas fa-exchange-alt mr-1"})," Compare PCS"]}),e.jsxs("div",{className:"btn-group ml-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Upload",onClick:a,children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Download Template",onClick:r,children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),il=()=>{const{user:s}=be(),r=(()=>{if(s&&s.department&&s.role){const P=Cs[s.department];if(P&&P[s.role])return P[s.role]}return Cs.default})(),[t,n]=l.useState(rl),[m,j]=l.useState([]),[h,o]=l.useState(!1),[d,i]=l.useState(null),[p,c]=l.useState(!1),[f,k]=l.useState(null),[g,v]=l.useState(""),[N,b]=l.useState(""),[S,C]=l.useState(""),[E,M]=l.useState(""),[F,_]=l.useState(""),[D,w]=l.useState(""),[U,y]=l.useState(""),[I,L]=l.useState(""),[W,Q]=l.useState(""),[te,B]=l.useState(""),[Y,O]=l.useState(""),[z,T]=l.useState({currentPage:1,perPage:5}),X=()=>{v(""),b(""),C(""),M(""),_(""),w(""),y(""),L(""),Q(""),B(""),O(""),j([])},K=P=>{const V=A,Z=t.filter(ee=>(V.cpsNo?ee.cpsNo.includes(V.cpsNo):!0)&&(V.refCpsNo?ee.refCpsNo.includes(V.refCpsNo):!0)&&(V.model?ee.model.toLowerCase().includes(V.model.toLowerCase()):!0)&&(V.partNo?ee.partNo.includes(V.partNo):!0)&&(V.cfcPjt?ee.cfcPjtCode.includes(V.cfcPjt):!0)&&(V.fromUser?new Date(ee.issuedDate)>=new Date(V.fromUser):!0)&&(V.toUser?new Date(ee.issuedDate)<=new Date(V.toUser):!0)&&(V.status?ee.status===V.status:!0)&&(V.destCode?ee.destCode===V.destCode:!0)&&(V.cpsPsiEci?ee.docType===V.cpsPsiEci:!0));j(Z),T(ee=>({...ee,currentPage:1}))},q=P=>{let V;if(d)V=t.map(Z=>Z.id===d.id?{...Z,...P}:Z);else{const Z=t.length>0?Math.max(...t.map(ee=>ee.id))+1:1;V=[...t,{...P,id:Z}]}n(V),j(V),o(!1),i(null)},R=P=>{i(P),o(!0)},H=()=>{o(!1),i(null)},J=()=>{console.log("Create PSI clicked")},$=()=>{console.log("Create ECI clicked")},x=()=>{console.log("Compare PCS clicked")},u=P=>{k(P),c(!0)},A={cpsNo:g,refCpsNo:N,model:S,partNo:E,cfcPjt:F,fromUser:D,toUser:U,status:I,destCode:W,destCountry:te,cpsPsiEci:Y},G={setCpsNo:v,setRefCpsNo:b,setModel:C,setPartNo:M,setCfcPjt:_,setFromUser:w,setToUser:y,setStatus:L,setDestCode:Q,setDestCountry:B,setCpsPsiEci:O};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-secondary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"CPS List"})}),e.jsx(ol,{onNewCps:()=>o(!0),onCreatePsi:J,onCreateEci:$,onComparePcs:x})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(Dt,{filters:A,setters:G,onSearch:()=>K(),onClear:X,onPersonPicker:u,destinations:Ye}),e.jsx("hr",{}),e.jsx(Tt,{filteredCps:m,page:z.currentPage,perPage:z.perPage,setPage:P=>T(V=>({...V,currentPage:P})),setPerPage:P=>T(V=>({...V,perPage:P})),onEdit:R})]})]}),e.jsx(al,{show:h,onClose:H,onSave:q,editData:d,config:r}),p&&e.jsx(nl,{show:p,onClose:()=>c(!1),onSelect:P=>{c(!1)}})]})};function cl({show:s=!1,onClose:a,initial:r=null,onSave:t,onSubmit:n}){const m={dpiNo:"",refDpiNo:"",issuedDate:"",effectiveDate:"",cfcPjt:"",model:"",from:"",to:"",supplier:"",numParts:0,numCps:0,status:"Draft",notes:""},[j,h]=l.useState(r||m),[o,d]=l.useState([]);if(l.useEffect(()=>(s?(h(r||m),d(r&&r.parts||[]),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s,r]),!s)return null;function i(b){const{name:S,value:C}=b.target;h(E=>({...E,[S]:C}))}function p(){const b={cps:"",partNo:"",suffix:"",name:"",parent:"",supplierCode:"",supplierName:"",L:"",W:"",H:"",wtPc:"",qtyBox:"",totalWt:""};d(S=>[...S,b])}function c(b,S,C){d(E=>E.map((M,F)=>F===b?{...M,[S]:C}:M))}function f(b){d(S=>S.filter((C,E)=>E!==b))}async function k(b){return await new Promise(S=>setTimeout(S,200)),null}async function g(){const b=(j.refDpiNo||"").trim();if(b)try{const S=await k(b);S&&(h(C=>({...C,...S})),d(S.parts||[]))}catch(S){console.error("fetch dpi by ref failed",S)}}function v(b){b&&b.preventDefault&&b.preventDefault();const S={...j,status:"Draft",parts:o};t&&t(S)}function N(b){b&&b.preventDefault&&b.preventDefault();const S={...j,status:"Submitted",parts:o};n&&n(S)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,role:"dialog","aria-modal":"true",children:e.jsx("div",{className:"modal-dialog modal-xl",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"DPI New"})}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:e.jsx("strong",{children:"DPI No."})}),e.jsx("input",{name:"dpiNo",className:"form-control form-control-sm",value:j.dpiNo,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CFC / PJT"}),e.jsx("input",{name:"cfcPjt",className:"form-control form-control-sm",value:j.cfcPjt,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Issued Date"}),e.jsx("input",{type:"date",name:"issuedDate",className:"form-control form-control-sm",value:j.issuedDate,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"From"}),e.jsx("input",{name:"from",className:"form-control form-control-sm",value:j.from,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier"}),e.jsx("input",{name:"supplier",className:"form-control form-control-sm",value:j.supplier,onChange:i})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:e.jsx("strong",{children:"DPI Ref No."})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{name:"refDpiNo",className:"form-control form-control-sm",value:j.refDpiNo,onChange:i,onBlur:g}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model"}),e.jsx("input",{name:"model",className:"form-control form-control-sm",value:j.model,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Effective Date"}),e.jsx("input",{type:"date",name:"effectiveDate",className:"form-control form-control-sm",value:j.effectiveDate,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"To"}),e.jsx("input",{name:"to",className:"form-control form-control-sm",value:j.to,onChange:i})]})]})]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3 mb-2",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"fas fa-chevron-down"})," ",e.jsx("strong",{children:"Parts"})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:p,children:[e.jsx("i",{className:"fas fa-plus"})," add"]})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"CPS"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Parent"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"L"}),e.jsx("th",{children:"W"}),e.jsx("th",{children:"H"}),e.jsx("th",{children:"Wt/pc"}),e.jsx("th",{children:"Qty/box"}),e.jsx("th",{children:"Total Wt"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-4",children:'No parts. Click "add" to insert a new part.'})}):o.map((b,S)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.cps,onChange:C=>c(S,"cps",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.partNo,onChange:C=>c(S,"partNo",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.suffix,onChange:C=>c(S,"suffix",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.name,onChange:C=>c(S,"name",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.parent,onChange:C=>c(S,"parent",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.supplierCode,onChange:C=>c(S,"supplierCode",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.supplierName,onChange:C=>c(S,"supplierName",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.L,onChange:C=>c(S,"L",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.W,onChange:C=>c(S,"W",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.H,onChange:C=>c(S,"H",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.wtPc,onChange:C=>c(S,"wtPc",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.qtyBox,onChange:C=>c(S,"qtyBox",C.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.totalWt,onChange:C=>c(S,"totalWt",C.target.value)})}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Edit",children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>f(S),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},S))})]})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{children:e.jsx("strong",{children:"Note :"})}),e.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:j.notes,onChange:b=>h(S=>({...S,notes:b.target.value}))})]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-success mr-2",onClick:v,children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:N,children:"Submit"})]})]})]})})}),e.jsx("div",{className:"modal-backdrop fade show"})]})}function dl(s){console.log("Props received by SearchSection:",s);const{filters:a,setters:r,onSearch:t,onClear:n,onPartSearch:m}=s,{modelCode:j,destCode:h,partNo:o,supplierCode:d,cpsNo:i,implementationPeriod:p}=a||{},{setModelCode:c,setDestCode:f,setPartNo:k,setSupplierCode:g,setCpsNo:v,setImplementationPeriod:N}=r||{},[b,S]=l.useState(""),C=F=>{if(F.key===" "||F.key===","){F.preventDefault();const _=b.trim();_&&k(D=>[...new Set([...D,_])]),S("")}},E=F=>{k(_=>_.filter(D=>D!==F))},M=()=>{console.log("Search button clicked in SearchSection"),t?t():console.error("onSearch prop is NOT DEFINED in SearchSection. Check the parent component.")};return e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Model Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:j||"",onChange:F=>c&&c(F.target.value),placeholder:"Model Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Model Code",onClick:()=>alert("Search Model Code placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Implementation Period"}),e.jsx("div",{className:"input-group input-group-sm",children:e.jsx("input",{className:"form-control form-control-sm",value:p||"",onChange:F=>N&&N(F.target.value),placeholder:"Implementation Period"})})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"4px"},children:[o.map(F=>e.jsxs("span",{className:"badge badge-primary",style:{display:"flex",alignItems:"center",padding:"4px 8px"},children:[F,e.jsx("button",{type:"button",className:"close","aria-label":"Remove",onClick:()=>E(F),style:{color:"white",marginLeft:"8px",textShadow:"none",opacity:1,fontSize:"1rem"},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},F)),e.jsx("input",{style:{border:"none",outline:"none",flex:"1",minWidth:"100px"},value:b,onChange:F=>S(F.target.value),onKeyDown:C,placeholder:"Type and press space"})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part No",onClick:m,children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:h||"",onChange:F=>f&&f(F.target.value),placeholder:"Dest Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Dest Code",onClick:()=>alert("Search Dest Code placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"CPS No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:i||"",onChange:F=>v&&v(F.target.value),placeholder:"CPS No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search CPS No",onClick:()=>alert("Search CPS No placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:d||"",onChange:F=>g&&g(F.target.value),placeholder:"Supplier Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Supplier",onClick:()=>alert("Search Supplier placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})}),e.jsxs("div",{className:"col-12 d-flex",children:[e.jsx("div",{className:"col-md-6"}),e.jsxs("div",{className:"col-md-6 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:M,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:n,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})]})]})})}function Ws({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,r)=>e.jsx(de.Fragment,{children:r===0?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Length"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Width"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Height"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Volume Inner"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Volume Outer"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Usage"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Source"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Usage"})]})},`matLeafHdr-${r}`))})}function Bs({arr:s=[],count:a=1}){return e.jsx(e.Fragment,{children:s.map((r,t)=>e.jsx(de.Fragment,{children:t===0?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:r.material_no||"-"}),e.jsx("td",{children:r.dimension_length||"-"}),e.jsx("td",{children:r.dimension_width||"-"}),e.jsx("td",{children:r.dimension_height||"-"}),e.jsx("td",{children:r.volume_inner||"-"}),e.jsx("td",{children:r.volume_outer||"-"}),e.jsx("td",{children:r.qty||"-"}),e.jsx("td",{children:r.source||"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:r.material_no||"+"}),e.jsx("td",{children:r.qty||"+"})]})},`matLeafCell-${t}`))})}function ml({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,r)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:r===0?8:2,children:r===0?"Box":`Inner ${r}`},`innerGrp-${r}`))})}const ul=({count:s})=>e.jsx(Ws,{count:s}),hl=({data:s,count:a})=>e.jsx(Bs,{arr:s,count:a});function xl({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,r)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:r===0?8:2,children:r===0?"Module":`Outer ${r}`},`outerGrp-${r}`))})}const pl=({count:s})=>e.jsx(Ws,{count:s}),jl=({data:s,count:a})=>e.jsx(Bs,{arr:s,count:a});function fl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("destination")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Destination"}),s.includes("model")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Model"}),s.includes("impl_period")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Impl Period"}),s.includes("cps_no")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"CPS No"})]})}function Nl({mainInfo:s,checked:a}){var j,h,o,d;const{destination:r,model_name:t,impl_period:n,cps_no:m}=s||{};debugger;return e.jsxs(e.Fragment,{children:[a.includes("destination")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((o=(h=(j=s==null?void 0:s.cps)==null?void 0:j.model)==null?void 0:h.destination)==null?void 0:o.code)??"-"}),a.includes("model")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(s==null?void 0:s.model_code)??"-"}),a.includes("impl_period")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(s==null?void 0:s.implementation_period)??"-"}),a.includes("cps_no")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((d=s==null?void 0:s.cps)==null?void 0:d.cps_no)??"-"})]})}function bl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("part_no_part")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part No "}),s.includes("part_name")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Name"}),s.includes("parent_part")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Parent Part"}),s.includes("supplier_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Code"}),s.includes("supplier_name")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Supplier Name"}),s.includes("part_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Status"}),s.includes("dtl_part_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Dtl Part Status"}),s.includes("pack_spec_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Pack Spec Status"}),s.includes("weight_pc")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Weight/Pc (Kg)"}),s.includes("qty_box")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty/Box"})]})}function gl({partInfo:s,checked:a}){var r,t;return e.jsxs(e.Fragment,{children:[a.includes("part_no_part")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.part_no??"-"}),a.includes("part_name")&&e.jsx("td",{className:"align-middle",children:s.part_name??"-"}),a.includes("parent_part")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.parent_no??"-"}),a.includes("supplier_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((r=s.supplier)==null?void 0:r.supplier_code)??"-"}),a.includes("supplier_name")&&e.jsx("td",{className:"align-middle",children:((t=s.supplier)==null?void 0:t.supplier_name)??"-"}),a.includes("part_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.part_status??"-"}),a.includes("dtl_part_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.detail_part_status??"-"}),a.includes("pack_spec_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.packing_spec_status??"-"}),a.includes("weight_pc")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.weightPerPc??"-"}),a.includes("qty_box")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.qtyPerBox??"-"})]})}function vl({checked:s}){const a=s.includes("packing_plant_current")||s.includes("packing_plant_next"),r=[s.includes("packing_plant_current"),s.includes("packing_plant_next")].filter(Boolean).length,t=s.includes("vanning_plant_current")||s.includes("vanning_plant_next"),n=[s.includes("vanning_plant_current"),s.includes("vanning_plant_next")].filter(Boolean).length,m=s.includes("order_pattern_current")||s.includes("order_pattern_next"),j=[s.includes("order_pattern_current"),s.includes("order_pattern_next")].filter(Boolean).length,h=s.includes("katashiiki_ad")||s.includes("katashiiki_au")||s.includes("katashiiki_af")||s.includes("katashiiki_ax"),o=[s.includes("katashiiki_ad"),s.includes("katashiiki_au"),s.includes("katashiiki_af"),s.includes("katashiiki_ax")].filter(Boolean).length,d=s.includes("packing_process_boxing")||s.includes("packing_process_stacking"),i=[s.includes("packing_process_boxing"),s.includes("packing_process_stacking")].filter(Boolean).length;return e.jsxs(e.Fragment,{children:[a&&e.jsx("th",{colSpan:r,className:"align-middle border text-center tbl-row2-hdr",children:"Packing Plant"}),t&&e.jsx("th",{colSpan:n,className:"align-middle border text-center tbl-row2-hdr",children:"Vanning Plant"}),m&&e.jsx("th",{colSpan:j,className:"align-middle border text-center tbl-row2-hdr",children:"Order Pattern"}),h&&e.jsx("th",{colSpan:o,className:"align-middle border text-center tbl-row2-hdr",children:"Katashiiki"}),s.includes("importer_line_process")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Importer Line Process"}),s.includes("case_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Case code"}),s.includes("box_number")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Box Number"}),s.includes("renban")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Renban"}),s.includes("renban_eff")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Renban Eff"}),d&&e.jsx("th",{colSpan:i,className:"align-middle border text-center tbl-row2-hdr",children:"Packing Process"})]})}function Cl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("packing_plant_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("packing_plant_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("vanning_plant_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("vanning_plant_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("order_pattern_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("order_pattern_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("katashiiki_ad")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"AD"}),s.includes("katashiiki_au")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"AU"}),s.includes("katashiiki_af")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"AF"}),s.includes("katashiiki_ax")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"AX"}),s.includes("packing_process_boxing")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Boxing"}),s.includes("packing_process_stacking")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Stacking"})]})}function yl({pseInfo:s,checked:a}){const{packing_plant_curr:r,packing_plant_next:t,vanning_plant_curr:n,vanning_plant_next:m,order_pattern_curr:j,order_pattern_next:h,katashiki:o,importer_line_process:d,case_code:i,box_number:p,renban:c,renban_eff:f,packing_process_boxing:k,packing_process_stacking:g}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("packing_plant_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:r??"-"}),a.includes("packing_plant_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t??"-"}),a.includes("vanning_plant_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:n??"-"}),a.includes("vanning_plant_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:m??"-"}),a.includes("order_pattern_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:j??"-"}),a.includes("order_pattern_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:h??"-"}),a.includes("katashiiki_ad")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(o==null?void 0:o.AD)??"-"}),a.includes("katashiiki_au")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(o==null?void 0:o.AU)??"-"}),a.includes("katashiiki_af")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(o==null?void 0:o.AF)??"-"}),a.includes("katashiiki_ax")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(o==null?void 0:o.AX)??"-"}),a.includes("importer_line_process")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:d??"-"}),a.includes("case_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:i??"-"}),a.includes("box_number")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:p??"-"}),a.includes("renban")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:c??"-"}),a.includes("renban_eff")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:f??"-"}),a.includes("packing_process_boxing")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:k??"-"}),a.includes("packing_process_stacking")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:g??"-"})]})}function Sl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("dock_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Dock Code"}),s.includes("address")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Address"}),s.includes("process_type")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Process Type"})]})}function wl({logisticInfo:s,checked:a}){const{dock_code:r,address_rack:t,process_type:n}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("dock_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:r??"-"}),a.includes("address")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t??"-"}),a.includes("process_type")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:n??"-"})]})}const Ve={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},content:{position:"relative",background:"#fff",padding:"20px",borderRadius:"5px",maxWidth:"80vw",maxHeight:"80vh"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},image:{maxWidth:"calc(80vw - 40px)",maxHeight:"calc(80vh - 40px)"}};function Pl({imageUrl:s,isOpen:a,onClose:r}){return!a||!s?null:e.jsx("div",{style:Ve.overlay,onClick:r,children:e.jsxs("div",{style:Ve.content,onClick:t=>t.stopPropagation(),children:[e.jsx("button",{style:Ve.closeButton,onClick:r,children:"×"}),e.jsx("img",{src:s,alt:"Enlarged view",style:Ve.image})]})})}function kl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("part_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part"}),s.includes("packing_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Packing"}),s.includes("outer_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Outer"}),s.includes("qkp_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qkp"}),s.includes("bkp_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Bkp"})]})}function Pe({files:s}){const[a,r]=l.useState(!1);if(!s||s.length===0)return"-";const t=s[0],n=()=>r(!0),m=()=>r(!1);return e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t,alt:"thumbnail",style:{width:"50px",height:"auto",cursor:"pointer"},onClick:n}),e.jsx(Pl,{imageUrl:t,isOpen:a,onClose:m})]})}function _l({images:s,checked:a}){const{part:r,packing:t,outer:n,qkp:m,bkp:j}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("part_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:r==null?void 0:r.files})}),a.includes("packing_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:t==null?void 0:t.files})}),a.includes("outer_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:n==null?void 0:n.files})}),a.includes("qkp_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:m==null?void 0:m.files})}),a.includes("bkp_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:j==null?void 0:j.files})})]})}function Il({rows:s,visibleRows:a,page:r,perPage:t,total:n,totalPages:m,goToPage:j,setPerPage:h,checked:o}){var _,D,w,U,y;const d=((_=a[0])==null?void 0:_.cps)||{},i=((w=(D=d.packing)==null?void 0:D.inner)==null?void 0:w.length)||1,p=((y=(U=d.packing)==null?void 0:U.outer)==null?void 0:y.length)||1,f=["part_no_part","part_name","parent_part","supplier_code","supplier_name","part_status","dtl_part_status","pack_spec_status","weight_pc","qty_box"].filter(I=>o.includes(I)).length,k=f>0,v=["packing_plant_current","packing_plant_next","vanning_plant_current","vanning_plant_next","order_pattern_current","order_pattern_next","katashiiki_ad","katashiiki_au","katashiiki_af","katashiiki_ax","importer_line_process","case_code","box_number","renban","renban_eff","packing_process_boxing","packing_process_stacking"].filter(I=>o.includes(I)).length,N=v>0,S=["dock_code","address","process_type"].filter(I=>o.includes(I)).length,C=S>0,M=["part_image","packing_image","outer_image","qkp_image","bkp_image"].filter(I=>o.includes(I)).length,F=M>0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"table-responsive mt-2",style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center",style:{tableLayout:"fixed",width:"auto"},children:[e.jsxs("thead",{style:{fontSize:"8pt"},children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"No"}),e.jsx(fl,{checked:o}),k&&e.jsx("th",{colSpan:f,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Part Information"}),N&&e.jsx("th",{colSpan:v,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"PSE Information"}),C&&e.jsx("th",{colSpan:S,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Logistic Information"}),F&&e.jsx("th",{colSpan:M,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Images"}),e.jsx("th",{colSpan:i>0?i*2+6:0,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inner Materials"}),e.jsx("th",{colSpan:p>0?p*2+6:0,className:"align-middle border text-center tbl-row1-hdr text-nowrap\\",children:"Outer Materials"})]}),e.jsxs("tr",{children:[e.jsx(bl,{checked:o}),e.jsx(vl,{checked:o}),e.jsx(Sl,{checked:o}),e.jsx(kl,{checked:o}),e.jsx(ml,{count:i}),e.jsx(xl,{count:p})]}),e.jsxs("tr",{children:[e.jsx(Cl,{checked:o}),e.jsx(ul,{count:i}),e.jsx(pl,{count:p})]})]}),e.jsx("tbody",{style:{fontSize:"8pt"},children:a.map((I,L)=>{var z,T;const W=I.cps||{},Q=W.pse_info||{},te=W.logistic_info||{},B=W.images||{},Y=((z=W.packing)==null?void 0:z.inner)||[],O=((T=W.packing)==null?void 0:T.outer)||[];return W.labor,W.inland,e.jsxs("tr",{children:[e.jsx("td",{children:(r-1)*t+L+1}),e.jsx(Nl,{mainInfo:I,checked:o}),e.jsx(gl,{partInfo:W,checked:o}),e.jsx(yl,{pseInfo:Q,checked:o}),e.jsx(wl,{logisticInfo:te,checked:o}),e.jsx(_l,{images:B,checked:o}),e.jsx(hl,{data:Y,count:i}),e.jsx(jl,{data:O,count:p})]},L)})})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>j(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>j(Math.max(1,r-1)),children:"<"}),[...Array(m).keys()].map(I=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${r===I+1?"btn-primary":"btn-light"}`,onClick:()=>j(I+1),children:I+1},I)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>j(Math.min(m,r+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",n]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[t," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{h(10),j(1)},children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{h(25),j(1)},children:"25"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{h(50),j(1)},children:"50"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})}function Al({onViewDpi:s,onUpload:a,onTemplate:r,onCreateDpi:t,onCreatePci:n,onToggleColumnSelector:m,viewDpiDisabled:j}){return e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:s,title:"View DPI",disabled:j,children:[e.jsx("i",{className:"fas fa-eye"})," View DPI"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:m,title:"Select Columns",children:e.jsx("i",{className:"fas fa-cog"})}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:a,title:"Upload",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-2",onClick:r,title:"Template",children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})}const je=[{value:"main_info",label:"Main Info",children:[{value:"destination",label:"Destination"},{value:"model",label:"Model"},{value:"impl_period",label:"Implementation Period"},{value:"cps_no",label:"CPS No"}]},{value:"part_info",label:"Part Info",children:[{value:"part_no_part",label:"Part No"},{value:"part_name",label:"Part Name"},{value:"parent_part",label:"Parent Part"},{value:"supplier_code",label:"Supplier Code"},{value:"supplier_name",label:"Supplier Name"},{value:"part_status",label:"Part Status"},{value:"dtl_part_status",label:"Dtl Part Status"},{value:"pack_spec_status",label:"Pack Spec Status"},{value:"weight_pc",label:"Weight/Pc"},{value:"qty_box",label:"Qty/Box"}]},{value:"pse_info",label:"PSE Info",children:[{value:"packing_plant",label:"Packing Plant",children:[{value:"packing_plant_current",label:"Current"},{value:"packing_plant_next",label:"Next"}]},{value:"vanning_plant",label:"Vanning Plant",children:[{value:"vanning_plant_current",label:"Current"},{value:"vanning_plant_next",label:"Next"}]},{value:"order_pattern",label:"Order Pattern",children:[{value:"order_pattern_current",label:"Current"},{value:"order_pattern_next",label:"Next"}]},{value:"katashiiki",label:"Katashiiki",children:[{value:"katashiiki_ad",label:"AD"},{value:"katashiiki_au",label:"AU"},{value:"katashiiki_af",label:"AF"},{value:"katashiiki_ax",label:"AX"}]},{value:"importer_line_process",label:"Importer Line Process"},{value:"case_code",label:"Case Code"},{value:"box_number",label:"Box Number"},{value:"renban",label:"Renban"},{value:"renban_eff",label:"Renban Eff"},{value:"packing_process",label:"Packing Process",children:[{value:"packing_process_boxing",label:"Boxing"},{value:"packing_process_stacking",label:"Stacking"}]}]},{value:"logistic_info",label:"Logistic Info",children:[{value:"dock_code",label:"Dock Code"},{value:"address",label:"Address"},{value:"process_type",label:"Process Type"}]},{value:"images",label:"Images",children:[{value:"part_image",label:"Part"},{value:"packing_image",label:"Packing"},{value:"outer_image",label:"Outer"},{value:"qkp_image",label:"QKP"},{value:"bkp_image",label:"BKP"}]},{value:"inner_materials",label:"Inner Materials",children:[{value:"box",label:"Box",children:[{value:"box_mat_no",label:"Mat No"},{value:"box_length",label:"Length"},{value:"box_width",label:"Width"},{value:"box_height",label:"Height"},{value:"box_volume_inner",label:"Volume Inner"},{value:"box_volume_outer",label:"Volume Outer"},{value:"box_usage",label:"Usage"},{value:"box_source",label:"Source"}]},...[...Array(9).keys()].map(s=>({value:`outer_${s+1}`,label:`Outer ${s+1}`,children:[{value:`outer_${s+1}_mat_no`,label:"Mat No"},{value:`outer_${s+1}_usage`,label:"Usage"}]}))]},{value:"outer_materials",label:"Outer Materials",children:[{value:"module",label:"Module",children:[{value:"module_mat_no",label:"Mat No"},{value:"module_length",label:"Length"},{value:"module_width",label:"Width"},{value:"module_height",label:"Height"},{value:"module_volume_inner",label:"Volume Inner"},{value:"module_usage",label:"Usage"}]}]}],Ml=({isOpen:s,toggle:a,checked:r,onCheckedChange:t})=>{const[n,m]=l.useState([]);l.useEffect(()=>{if(s){let p=[...r],c=!1;const f=k=>{k.forEach(g=>{g.children&&(g.children.every(N=>p.includes(N.value))&&!p.includes(g.value)&&(p.push(g.value),c=!0),f(g.children))})};f(je),c&&t([...new Set(p)])}},[s,r,t]);const j=(p,c=[])=>(p.children&&p.children.forEach(f=>{c.push(f.value),j(f,c)}),c),h=(p,c)=>{var f;for(const k of c){if((f=k.children)!=null&&f.some(g=>g.value===p))return k;if(k.children){const g=h(p,k.children);if(g)return g}}return null},o=p=>{let c=[...r];const f=c.includes(p.value),k=j(p);if(f){c=c.filter(v=>v!==p.value&&!k.includes(v));let g=h(p.value,je);for(;g;)c=c.filter(v=>v!==g.value),g=h(g.value,je)}else{c.push(p.value),p.children&&c.push(...k);let g=h(p.value,je);for(;g;)g.children.every(N=>c.includes(N.value))&&(c.includes(g.value)||c.push(g.value)),g=h(g.value,je)}t([...new Set(c)])},d=p=>{m(c=>c.includes(p)?c.filter(f=>f!==p):[...c,p])},i=(p,c=0)=>p.map(f=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",paddingLeft:`${c*20}px`},children:[f.children&&e.jsx("span",{style:{cursor:"pointer",marginRight:"5px"},onClick:()=>d(f.value),children:n.includes(f.value)?"−":"+"}),e.jsx(gt,{check:!0,style:{margin:0,marginLeft:f.children?"0":"20px"},children:e.jsxs(vt,{check:!0,children:[e.jsx(Ct,{type:"checkbox",checked:r.includes(f.value),onChange:()=>o(f)})," ",c===0?e.jsx("strong",{children:f.label}):f.label]})})]}),f.children&&n.includes(f.value)&&e.jsx("div",{children:i(f.children,c+1)})]},f.value));return e.jsxs(jt,{isOpen:s,toggle:a,zIndex:9999,size:"lg",children:[e.jsx(ft,{toggle:a,children:"Column Selection"}),e.jsx(Nt,{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:i(je.slice(0,3))}),e.jsx("div",{className:"col-md-4",children:i(je.slice(3,5))}),e.jsx("div",{className:"col-md-4",children:i(je.slice(5))})]})}),e.jsxs(bt,{children:[e.jsx(vs,{color:"primary",onClick:a,children:"Apply"}),e.jsx(vs,{color:"secondary",onClick:a,children:"Cancel"})]})]})};function Ll(){const[s,a]=l.useState(""),[r,t]=l.useState(""),[n,m]=l.useState([]),[j,h]=l.useState(""),[o,d]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(!1),[k,g]=l.useState(!1),[v,N]=l.useState(!1),[b,S]=l.useState(["main_info","destination","model","impl_period","cps_no","part_info","part_no_part","part_name","parent_part","supplier_code","supplier_name","part_status","dtl_part_status","pack_spec_status","weight_pc","qty_box","pse_info","packing_plant","packing_plant_current","packing_plant_next","vanning_plant","vanning_plant_current","vanning_plant_next","order_pattern","order_pattern_current","order_pattern_next","katashiiki","katashiiki_ad","katashiiki_au","katashiiki_af","katashiiki_ax","importer_line_process","case_code","box_number","renban","renban_eff","packing_process","packing_process_boxing","packing_process_stacking","logistic_info","dock_code","address","process_type","images","part_image","packing_image","outer_image","qkp_image","bkp_image"]),[C,E]=l.useState([]),[M,F]=l.useState([]),[_,D]=l.useState(10),[w,U]=l.useState(1),y=C.length,I=Math.max(1,Math.ceil(y/_));l.useEffect(()=>{fetch("/packing-cost-fe/dpi.json").then(u=>{if(!u.ok)throw new Error("Network response was not ok");return u.json()}).then(u=>{const G=[...u.dpiData||[]].sort((P,V)=>(V.implementation_period||"").localeCompare(P.implementation_period||""));F(G),E([])}).catch(u=>{console.error("Error fetching DPI data:",u)})},[]);function L(){if(!s&&(!n||n.length===0)&&!r&&!j&&!o&&!i){E(M),U(1);return}let u=[...M];if(s&&(u=u.filter(G=>{var P;return(P=G.model_code)==null?void 0:P.toLowerCase().includes(s.toLowerCase())})),n&&n.length>0){const G=n.map(P=>P.toLowerCase());u=u.filter(P=>{var V,Z,ee;return G.includes((V=P.part_no)==null?void 0:V.toLowerCase())||G.includes((ee=(Z=P.cps)==null?void 0:Z.part_no)==null?void 0:ee.toLowerCase())})}r&&(u=u.filter(G=>{var P,V,Z,ee;return(ee=(Z=(V=(P=G.cps)==null?void 0:P.model)==null?void 0:V.destination)==null?void 0:Z.code)==null?void 0:ee.toLowerCase().includes(r.toLowerCase())})),j&&(u=u.filter(G=>{var P,V,Z;return(Z=(V=(P=G.cps)==null?void 0:P.supplier)==null?void 0:V.supplier_code)==null?void 0:Z.toLowerCase().includes(j.toLowerCase())})),o&&(u=u.filter(G=>{var P,V;return(V=(P=G.cps)==null?void 0:P.cps_no)==null?void 0:V.toLowerCase().includes(o.toLowerCase())})),i&&(u=u.filter(G=>{var P;return(P=G.implementation_period)==null?void 0:P.toLowerCase().includes(i.toLowerCase())}));const A=u.sort((G,P)=>(P.implementation_period||"").localeCompare(G.implementation_period||""));E(A),U(1)}function W(x){if(x&&x.length>0){const u=x.map(A=>A.partNo);m(A=>[...new Set([...A,...u])])}g(!1)}function Q(){a(""),t(""),m([]),h(""),d(""),p(""),E(M),U(1)}function te(){f(!0)}function B(){alert("Create PCI - placeholder")}function Y(){alert("Upload placeholder")}function O(){alert("Download template placeholder")}function z(){N(x=>!x)}function T(x){S(x)}function X(){const x=window.open("","_blank","fullscreen=yes");x.document.write("<html><head><title>DPI View</title>"),x.document.write('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />'),x.document.write('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">'),x.document.write("</head><body>"),x.document.write('<button id="download-pdf">Download PDF</button>'),x.document.write('<button id="download-csv">Download CSV</button>'),x.document.write('<div id="dpi-content" class="card card-outline card-primary"></div>'),x.document.write("</body></html>"),x.document.close();const u=document.getElementById("result-section").innerHTML,A=x.document.getElementById("dpi-content");A&&(A.innerHTML=u),x.document.getElementById("download-pdf").addEventListener("click",()=>x.print()),x.document.getElementById("download-csv").addEventListener("click",()=>{const G=A.querySelector("table");let P=[];for(const oe of G.rows){const me=[];for(const he of oe.cells)me.push(he.innerText);P.push(me.join(","))}const V="data:text/csv;charset=utf-8,"+P.join("\\n"),Z=encodeURI(V),ee=document.createElement("a");ee.setAttribute("href",Z),ee.setAttribute("download","dpi_data.csv"),document.body.appendChild(ee),ee.click(),document.body.removeChild(ee)})}function K(x){const u=Math.min(Math.max(1,x),I);U(u)}const q=C.slice((w-1)*_,w*_);function R(x){const u={dpiNo:x.dpiNo||"",refDpiNo:x.refDpiNo||"",issuedDate:x.issuedDate||"",effectiveDate:x.effectiveDate||"",cfcPjt:x.cfcPjt||"",model:x.model||"",parts:x.parts||[],numCps:x.numCps||0,supplier:x.supplier||"",fromUser:x.from||"",toUser:x.to||"",status:"Draft",raw:x};E(A=>[u,...A]),f(!1),U(1)}function H(x){const u={dpiNo:x.dpiNo||"",refDpiNo:x.refDpiNo||"",issuedDate:x.issuedDate||"",effectiveDate:x.effectiveDate||"",cfcPjt:x.cfcPjt||"",model:x.model||"",parts:x.parts||[],numCps:x.numCps||0,supplier:x.supplier||"",fromUser:x.from||"",toUser:x.to||"",status:"Submitted",raw:x};E(A=>[u,...A]),f(!1),U(1)}const J={modelCode:s,destCode:r,partNo:n,supplierCode:j,cpsNo:o,implementationPeriod:i},$={setModelCode:a,setDestCode:t,setPartNo:m,setSupplierCode:h,setCpsNo:d,setImplementationPeriod:p};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"DPI List"})}),e.jsx(Al,{onViewDpi:X,onUpload:Y,onTemplate:O,onCreateDpi:te,onCreatePci:B,onToggleColumnSelector:z,viewDpiDisabled:C.length===0})]}),e.jsx(dl,{filters:J,setters:$,onSearch:L,onClear:Q,onPartSearch:()=>g(!0)}),e.jsx("div",{id:"result-section",children:e.jsx(Il,{rows:C,visibleRows:q,page:w,perPage:_,total:y,totalPages:I,goToPage:K,setPerPage:D,checked:b})})]}),e.jsx(cl,{show:c,onClose:()=>f(!1),onSave:R,onSubmit:H}),e.jsx(Ce,{show:k,onClose:()=>g(!1),onSelect:W,mode:"multi"}),e.jsx(Ml,{isOpen:v,toggle:z,checked:b,onCheckedChange:T})]})}function Dl({form:s,change:a,setShowPartPicker:r,setShowModelPicker:t,handleCalculate:n,handleClear:m,onModelRemove:j,onPartRemove:h,onModelCfcKeyDown:o,onPartKeyDown:d}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model CFC"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:[s.modelCfc.map(i=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[i,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>j(i),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},i)),e.jsx("input",{type:"text",name:"modelCfcInput",value:s.modelCfcInput,onChange:a,onKeyDown:o,style:{border:"none",outline:"none",flexGrow:1,padding:0,margin:0,height:"20px"}})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Model CFC",onClick:()=>t(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Implementation Period"}),e.jsxs("select",{className:"form-control form-control-sm",name:"period",value:s.period,onChange:a,children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"01.2025"}),e.jsx("option",{children:"02.2025"})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dest Code"}),e.jsxs("select",{className:"form-control form-control-sm",name:"destCode",value:s.destCode,onChange:a,children:[e.jsx("option",{children:"All"}),e.jsx("option",{value:"TASA",children:"TASA - Argentina"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Part"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:[Array.isArray(s.part)&&s.part.map(i=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[i,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>h(i),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},i)),e.jsx("input",{type:"text",name:"partInput",value:s.partInput,onChange:a,onKeyDown:d,style:{border:"none",outline:"none",flexGrow:1,padding:0,margin:0,height:"20px"}})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part",onClick:()=>r(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-end my-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:n,children:[e.jsx("i",{className:"fas fa-calculator mr-1"})," Calculate"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:m,children:[e.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]})]})}function Tl({count:s=10}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,r)=>e.jsxs(de.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Part No"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Qty"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Price"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Sum"})]},`mat-leaf-hdr-${r}`))})}function El({arr:s=[],count:a=10}){const r=[];for(let t=0;t<a;t++){const n=s[t];r.push(e.jsxs(de.Fragment,{children:[e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.materialNo)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.qty)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.price)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.sum)??"-"})]},`mat-leaf-cell-${t}`))}return e.jsx(e.Fragment,{children:r})}const Hs=({part:s})=>{var o,d,i,p,c,f,k;const[a,r]=l.useState({inner:!0,outer:!0,labor:!0,inland:!0}),t=g=>{r(v=>({...v,[g]:!v[g]}))};if(!s)return null;const n=g=>{if(g==null||g==="")return"";const v=Number(g);return isNaN(v)?String(g):v.toFixed(2)},m=(g,v)=>{const N=v.toLowerCase(),b=a[N],S=10,C=[];for(let E=1;E<=S;E++)C.push(e.jsxs("th",{colSpan:"4",children:["Material ",E]},`material-header-${v}-${E}`));return e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t(N),children:[e.jsx("i",{className:`fas ${b?"fa-chevron-down":"fa-chevron-right"} mr-2`}),v.toUpperCase()]}),b&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"2000px"},children:[e.jsxs("thead",{style:{backgroundColor:"#e9ecef"},children:[e.jsx("tr",{children:C}),e.jsx("tr",{children:e.jsx(Tl,{count:S})})]}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx(El,{arr:g,count:S})})})]})})]})},j=(g,v)=>{const N=a.labor;return!g||!v?null:e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t("labor"),children:[e.jsx("i",{className:`fas ${N?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"LABOR"]}),N&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"1500px"},children:[e.jsx("thead",{style:{backgroundColor:"#e9ecef"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Receiving"}),e.jsx("th",{children:"Inspection"}),e.jsx("th",{children:"Delivery Course (Pallet)"}),e.jsx("th",{children:"Supply"}),e.jsx("th",{children:"Binding"}),e.jsx("th",{children:"Sorting & Supply"}),e.jsx("th",{children:"Pick & Packing"}),e.jsx("th",{children:"Vanning"}),e.jsx("th",{children:"Box/Valet Return"}),e.jsx("th",{children:"Mix Van"}),e.jsx("th",{children:"Lashing"}),e.jsx("th",{children:"Total Time"}),e.jsx("th",{children:"Requirement"}),e.jsx("th",{children:"Current DL"}),e.jsx("th",{children:"IDL"}),e.jsx("th",{children:"Facility Others"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:n(g.receiving)}),e.jsx("td",{children:n(g.inspection)}),e.jsx("td",{children:n(g.deliveryCourse)}),e.jsx("td",{children:n(g.supply)}),e.jsx("td",{children:n(g.binding)}),e.jsx("td",{children:n(g.sortingSupply)}),e.jsx("td",{children:n(g.pickPacking)}),e.jsx("td",{children:n(g.vanning)}),e.jsx("td",{children:n(g.boxValetReturn)}),e.jsx("td",{children:n(g.mixVan)}),e.jsx("td",{children:n(g.lashing)}),e.jsx("td",{children:n(g.totalTime)}),e.jsx("td",{children:n(g.requirement)}),e.jsx("td",{children:n(g.currentDL)}),e.jsx("td",{children:n(v.idl)}),e.jsx("td",{children:n(v.facility)})]})})]})})]})},h=g=>{const v=a.inland;return g?e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t("inland"),children:[e.jsx("i",{className:`fas ${v?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"INLAND"]}),v&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"800px"},children:[e.jsx("thead",{style:{backgroundColor:"#e9ecef"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Pack Time (V-PASS)"}),e.jsx("th",{children:"Inland Cost"}),e.jsx("th",{children:"Inland Cost M3"}),e.jsx("th",{children:"Diff"}),e.jsx("th",{children:"Milkrun cost"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:g.packing_time||"-"}),e.jsx("td",{children:n(g.inland_cost)||"-"}),e.jsx("td",{children:n(g.inlandCostM3)||"-"}),e.jsx("td",{children:g.diff||"-"}),e.jsx("td",{children:n(g.milkrun_cost)||"-"})]})})]})})]}):null};return e.jsx("td",{colSpan:"32",children:e.jsxs("div",{className:"p-2",children:[m((d=(o=s.cps)==null?void 0:o.packing)==null?void 0:d.inner,"Inner"),m((p=(i=s.cps)==null?void 0:i.packing)==null?void 0:p.outer,"Outer"),j((c=s.cps)==null?void 0:c.manhour,(f=s.cps)==null?void 0:f.labor),h((k=s.cps)==null?void 0:k.inland)]})})},ne=s=>{if(s==null||s==="")return"";const a=Number(s);return isNaN(a)?String(s):a.toFixed(2)};function Rl({visibleParts:s,selectedRows:a,handleCheckboxChange:r,page:t,perPage:n,remarks:m,handleRemarkChange:j,expandedRows:h,handleToggleExpand:o,threshold_percentage:d=5}){return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm text-center w-100",style:{fontSize:"8pt"},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{backgroundColor:"#f7fbff"},children:[e.jsx("th",{rowSpan:2,style:{width:40},children:e.jsx("input",{type:"checkbox",checked:s.length>0&&s.every((i,p)=>a[(t-1)*n+p]),onChange:i=>{const p=i.target.checked,c={...a};s.forEach((f,k)=>{c[(t-1)*n+k]=p}),r(c)}})}),e.jsx("th",{rowSpan:2,style:{width:40}}),e.jsx("th",{rowSpan:2,style:{width:40},children:"No"}),e.jsx("th",{rowSpan:2,children:"Model CFC"}),e.jsx("th",{rowSpan:2,children:"Dest Code"}),e.jsx("th",{rowSpan:2,children:"Implementation Period"}),e.jsx("th",{rowSpan:2,children:"Part No"}),e.jsx("th",{rowSpan:2,children:"Suffix"}),e.jsx("th",{rowSpan:2,children:"Part Name"}),e.jsx("th",{rowSpan:2,children:"Parent Part No"}),e.jsx("th",{rowSpan:2,children:"Supplier Code"}),e.jsx("th",{rowSpan:2,children:"Supplier Name"}),e.jsx("th",{rowSpan:2,children:"L"}),e.jsx("th",{rowSpan:2,children:"W"}),e.jsx("th",{rowSpan:2,children:"H"}),e.jsx("th",{rowSpan:2,children:"Box M3"}),e.jsx("th",{colSpan:3,children:"INNER"}),e.jsx("th",{colSpan:3,children:"OUTER"}),e.jsx("th",{colSpan:3,children:"MATERIAL"}),e.jsx("th",{colSpan:3,children:"LABOR"}),e.jsx("th",{colSpan:3,children:"INLAND"}),e.jsx("th",{colSpan:3,children:"TOTAL"}),e.jsx("th",{rowSpan:2,children:"Remark"})]}),e.jsx("tr",{style:{backgroundColor:"#dee2e6"},children:[...Array(6)].map((i,p)=>e.jsxs(de.Fragment,{children:[e.jsx("th",{children:"Prev"}),e.jsx("th",{children:"Current"}),e.jsx("th",{children:"Diff"})]},p))})]}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:35,className:"text-center py-4 text-muted",children:"No Data Found"})}):s.map((i,p)=>{var v,N,b,S,C,E,M,F,_,D,w,U,y,I,L,W,Q,te,B,Y,O,z,T,X,K,q,R,H,J,$,x,u,A,G,P,V,Z,ee,oe,me,he,ye;debugger;if(!i)return null;const c=(t-1)*n+p,f=h&&h[c];Number(((N=(v=i.subtotals)==null?void 0:v.total)==null?void 0:N.total)??0),Number(((S=(b=i.subtotals)==null?void 0:b.total)==null?void 0:S.prev_year)??0);const k=Number(((E=(C=i.subtotals)==null?void 0:C.total)==null?void 0:E.diff)??0),g=k>d;debugger;return e.jsxs(de.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:!!(a&&a[c]),onChange:pe=>{const Ae={...a,[c]:pe.target.checked};r(Ae)}})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-xs btn-link",onClick:()=>o(c),children:e.jsx("i",{className:`fas ${f?"fa-chevron-up":"fa-chevron-down"}`})})}),e.jsx("td",{children:c+1}),e.jsx("td",{children:i.model_cfc}),e.jsx("td",{children:i.destination}),e.jsx("td",{children:i.implementation_period}),e.jsx("td",{children:i.partNo}),e.jsx("td",{children:i.suffix}),e.jsx("td",{children:i.partName}),e.jsx("td",{children:i.parentPartNo}),e.jsx("td",{children:i.supplierCode}),e.jsx("td",{children:i.supplierName}),e.jsx("td",{children:ne(i.L)}),e.jsx("td",{children:ne(i.W)}),e.jsx("td",{children:ne(i.H)}),e.jsx("td",{children:ne(i.boxM3)}),e.jsx("td",{children:ne((F=(M=i.subtotals)==null?void 0:M.inner)==null?void 0:F.prev_year)}),e.jsx("td",{children:ne((D=(_=i.subtotals)==null?void 0:_.inner)==null?void 0:D.total)}),e.jsx("td",{children:ne((U=(w=i.subtotals)==null?void 0:w.inner)==null?void 0:U.diff)}),e.jsx("td",{children:ne((I=(y=i.subtotals)==null?void 0:y.outer)==null?void 0:I.prev_year)}),e.jsx("td",{children:ne((W=(L=i.subtotals)==null?void 0:L.outer)==null?void 0:W.total)}),e.jsx("td",{children:ne((te=(Q=i.subtotals)==null?void 0:Q.outer)==null?void 0:te.diff)}),e.jsx("td",{children:ne((Y=(B=i.subtotals)==null?void 0:B.material)==null?void 0:Y.prev_year)}),e.jsx("td",{children:ne((z=(O=i.subtotals)==null?void 0:O.material)==null?void 0:z.total)}),e.jsx("td",{children:ne((X=(T=i.subtotals)==null?void 0:T.material)==null?void 0:X.diff)}),e.jsx("td",{children:ne((q=(K=i.subtotals)==null?void 0:K.labor)==null?void 0:q.prev_year)}),e.jsx("td",{children:ne((H=(R=i.subtotals)==null?void 0:R.labor)==null?void 0:H.total)}),e.jsx("td",{children:ne(($=(J=i.subtotals)==null?void 0:J.labor)==null?void 0:$.diff)}),e.jsx("td",{children:ne((u=(x=i.subtotals)==null?void 0:x.inland)==null?void 0:u.prev_year)}),e.jsx("td",{children:ne((G=(A=i.subtotals)==null?void 0:A.inland)==null?void 0:G.total)}),e.jsx("td",{children:ne((V=(P=i.subtotals)==null?void 0:P.inland)==null?void 0:V.diff)}),e.jsx("td",{children:ne((ee=(Z=i.subtotals)==null?void 0:Z.total)==null?void 0:ee.prev_year)}),e.jsx("td",{children:ne((me=(oe=i.subtotals)==null?void 0:oe.total)==null?void 0:me.total)}),e.jsx("td",{style:{color:k>d?"red":void 0,fontWeight:k>d?"bold":void 0},children:ne((ye=(he=i.subtotals)==null?void 0:he.total)==null?void 0:ye.diff)}),e.jsx("td",{children:g?e.jsx("textarea",{className:"form-control form-control-sm",style:{minWidth:220,width:"100%"},value:m&&m[c]||"",onChange:pe=>j(c,pe.target.value),placeholder:"Enter remark",rows:3}):null})]}),f&&e.jsx("tr",{className:"expandable-row",children:e.jsx(Hs,{part:i})})]},c)})})]})})}function Ol({page:s,totalPages:a,goToPage:r,perPage:t}){return e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-2",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>r(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>r(Math.max(1,s-1)),children:"<"}),[...Array(a).keys()].map(n=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${s===n+1?"btn-primary":"btn-light"}`,onClick:()=>r(n+1),children:n+1},n)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>r(Math.min(a,s+1)),children:">"})]}),e.jsx("div",{className:"form-inline small",children:e.jsxs("span",{className:"mr-3",children:[t," per page"]})})]})}const ls={part:[],partInput:"",period:"All",destCode:"All",modelCfc:[],modelCfcInput:"",type:"PxP"};function Fl({show:s=!1,onClose:a,onSave:r}){const[t,n]=l.useState(ls),[m,j]=l.useState([]),[h,o]=l.useState([]),[d,i]=l.useState(5),[p,c]=l.useState(1),[f,k]=l.useState(!1),[g,v]=l.useState(!1),[N,b]=l.useState({}),[S,C]=l.useState({}),[E,M]=l.useState({}),[F,_]=l.useState([]);if(l.useEffect(()=>(s?(n(ls),j([]),o([]),c(1),M({}),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s]),l.useEffect(()=>{fetch("/generatedData.json").then(H=>H.json()).then(H=>{_(H.cpsData)}).catch(H=>console.error("Error loading generated data:",H))},[]),!s)return null;function D(H){const{name:J,value:$}=H.target;n(x=>({...x,[J]:$}))}function w(H){if(H.key===" "&&t.modelCfcInput.trim()){H.preventDefault();const J=t.modelCfcInput.trim();n($=>$.modelCfc.includes(J)?{...$,modelCfcInput:""}:{...$,modelCfc:[...$.modelCfc,J],modelCfcInput:""})}}function U(H){if(H.key===" "&&t.partInput.trim()){H.preventDefault();const J=t.partInput.trim();n($=>$.part.includes(J)?{...$,partInput:""}:{...$,part:[...$.part,J],partInput:""}),o($=>$.some(u=>u.partNo===J)?$:[...$,{partNo:J}])}}const y=()=>{if(!F||!F.length){console.error("CPS data is not loaded yet.");return}let H=F;t.modelCfc.length>0&&(H=H.filter($=>$.model_cfc&&t.modelCfc.includes($.model_cfc)));let J=[];h.length>0?J=h.flatMap($=>{const x=H.filter(u=>u&&u.part_no===$.partNo);return x.length===0?[{partNo:$.partNo,description:"NOT FOUND",calculationTime:new Date().toISOString()}]:x.map(u=>{var A,G;return{partNo:$.partNo,description:((A=u.part)==null?void 0:A.description)||"NOT FOUND",partName:u.partName,supplierName:u.supplierName,supplierCode:u.supplierCcode,destination:u.model?`${u.model.destinationCode} - ${u.model.destinationName}`:"N/A",model:(G=u.model)==null?void 0:G.name,parentNo:u.parentNo,cpsNo:u.cpsNo,calculationTime:new Date().toISOString(),subtotals:u.subtotals,total:u.total,cps:u.cps}})}):t.modelCfc.length>0&&(J=H.map($=>{var x,u;return{partNo:$.part_no,description:((x=$.part)==null?void 0:x.description)||"NOT FOUND",partName:$.partName,supplierName:$.supplierName,supplierCode:$.supplierCcode,destination:$.model?`${$.model.destinationCode} - ${$.model.destinationName}`:"N/A",model:(u=$.model)==null?void 0:u.name,parentNo:$.parentNo,cpsNo:$.cpsNo,calculationTime:new Date().toISOString(),subtotals:$.subtotals,total:$.total,cps:$.cps}})),j(J)};function I(){n(ls),j([]),o([])}function L(H){if(Array.isArray(H)&&H.length>0){const J=H.map($=>$.cfc);n($=>{const x=$.modelCfc||[],u=J.filter(A=>!x.includes(A));return{...$,modelCfc:[...x,...u],modelCfcInput:""}})}v(!1)}function W(H){n(J=>({...J,modelCfc:J.modelCfc.filter($=>$!==H)}))}function Q(){const H={...t,parts:m};r&&r(H)}function te(){a&&a()}function B(H){if(!Array.isArray(H)||H.length===0){k(!1);return}const J=H.map(x=>({partNo:x.partNo,suffix:"",partName:x.partName,parentPartNo:x.parentPartNo||x.parent||"",supplierId:x.supplierName&&(x.supplierId||x.supplierCode)||"",supplierName:x.supplierName,L:x.L||"",W:x.W||"",H:x.H||"",boxM3:x.boxM3||"",inner:{totalCost:x.innerTotal??0,prevYear:x.prevYear??0,diff:x.diffPerc??"0%",materials:x.innerMaterials||[]},outer:{totalCost:x.outerTotal??0,prevYear:x.prevYear??0,diff:x.diffPerc??"0%",materials:x.outerMaterials||[]},material:{totalCost:x.materialTotal??0,prevYear:x.prevYear??0,diff:x.diffPerc??"0%"},labor:{totalCost:x.laborTotal??20,prevYear:x.prevYear??0,diff:x.diffPerc??"0%",manHour:x.laborManHour??1.5,cost:x.laborCost??25,receiving:.1,inspection:.2,deliveryCourse:.1,supply:.1,binding:.1,sortingSupply:.2,pickPacking:.3,vanning:.2,boxValetReturn:.1,mixVan:.1,lashing:.1,totalTime:1.5,requirement:1,currentDL:1,idl:0,facilityOthers:0},inland:{totalCost:x.inlandTotal??30,prevYear:x.prevYear??0,diff:x.diffPerc??"0%",cost:x.inlandCost??35,packTime:x.inlandPackTime??"10:00",inlandCost:x.inlandInlandCost??40,inlandCostM3:x.inlandInlandCostM3??5,milkrunCost:x.inlandMilkrunCost??15},total:{totalCost:x.totalCost??0,prevYear:x.prevYear??0,diff:x.diffPerc??"0%"}}));o(x=>{const u=x.map(G=>G.partNo),A=J.filter(G=>!u.includes(G.partNo));return[...x,...A]});const $=J.map(x=>x.partNo);n(x=>{const u=x.part||[],A=$.filter(G=>!u.includes(G));return{...x,part:[...u,...A]}}),k(!1)}function Y(H){n(J=>({...J,part:J.part.filter($=>$!==H)})),o(J=>J.filter($=>$.partNo!==H))}const O=m.length,z=Math.max(1,Math.ceil(O/d));function T(H){c(Math.min(Math.max(1,H),z))}const X=m.slice((p-1)*d,p*d);function K(H,J){b($=>({...$,[H]:J}))}function q(H){C(H)}function R(H){M(J=>({...J,[H]:!J[H]}))}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"np-modal-backdrop",onMouseDown:H=>{H.target===H.currentTarget&&te()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:"95vw",maxHeight:"90vh",width:"95vw",height:"90vh"},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h5",{className:"card-title mb-0",children:e.jsx("strong",{children:"Packing Cost Calculation New"})}),e.jsx("button",{type:"button",className:"close",onClick:te,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"card-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsx(Dl,{form:t,change:D,setShowPartPicker:k,setShowModelPicker:v,handleCalculate:y,handleClear:I,onModelRemove:W,onPartRemove:Y,onModelCfcKeyDown:w,onPartKeyDown:U}),e.jsx(Rl,{visibleParts:X,selectedRows:S,handleCheckboxChange:q,page:p,perPage:d,remarks:N,handleRemarkChange:K,expandedRows:E,handleToggleExpand:R,threshold_percentage:5}),e.jsx(Ol,{page:p,totalPages:z,goToPage:T,perPage:d})]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-success mr-2",onClick:Q,children:[e.jsx("i",{className:"fas fa-download mr-1"})," Save"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:te,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]})}),f&&e.jsx(Ce,{show:f,onClose:()=>k(!1),onSelect:B}),g&&e.jsx(as,{show:g,onClose:()=>v(!1),onAdd:L,selectionMode:"multi"})]})}function Wl({calCode:s,setCalCode:a,period:r,setPeriod:t,destCode:n,setDestCode:m,modelCode:j,setModelCode:h,type:o,setType:d,handleFilter:i,handleClear:p}){return e.jsxs("div",{className:"card-body",children:[e.jsx("form",{onSubmit:i,className:"mb-3",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Pack Cost Cal Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:s,onChange:c=>a(c.target.value),placeholder:"Pack Cost Cal Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("select",{className:"form-control form-control-sm",value:n,onChange:c=>m(c.target.value),children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"024W",children:"024W"}),e.jsx("option",{value:"ARG",children:"ARG"})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Type"}),e.jsxs("div",{className:"form-control form-control-sm",style:{minHeight:44},children:[e.jsxs("div",{className:"form-check form-check-inline mr-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_all",value:"All",checked:o==="All",onChange:()=>d("All")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_all",children:"All"})]}),e.jsxs("div",{className:"form-check form-check-inline mr-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_pxp",value:"PxP",checked:o==="PxP",onChange:()=>d("PxP")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_pxp",children:"PxP"})]}),e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_lot",value:"Lot",checked:o==="Lot",onChange:()=>d("Lot")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_lot",children:"Lot"})]})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Period"}),e.jsxs("select",{className:"form-control form-control-sm",value:r,onChange:c=>t(c.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"01.2025"}),e.jsx("option",{children:"02.2025"}),e.jsx("option",{children:"03.2025"})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Model Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:j,onChange:c=>h(c.target.value),placeholder:"Model Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})})]})}),e.jsxs("div",{className:"d-flex justify-content-end mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:i,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:p,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})]})}function Bl({rows:s,visibleRows:a,page:r,totalPages:t,goToPage:n,perPage:m,setPerPage:j,total:h}){const[o,d]=l.useState(null),i=c=>{if(c==null||c==="")return"";const f=Number(c);return isNaN(f)?String(c):f.toFixed(2)},p=c=>{d(o===c?null:c)};return e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Pack Cost Cal Code"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Dest Country"}),e.jsx("th",{children:"Model Code"}),e.jsx("th",{children:"# Parts"}),e.jsx("th",{children:"Type"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-4 text-muted",children:"No Data Found"})}):a.map((c,f)=>{const k=(r-1)*m+f;return e.jsxs(de.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:String(k+1).padStart(2,"0")}),e.jsx("td",{children:c.calCode}),e.jsx("td",{children:c.period}),e.jsx("td",{children:c.destCode}),e.jsx("td",{children:c.destCountry}),e.jsx("td",{children:c.modelCode}),e.jsx("td",{children:i(c.numParts)}),e.jsx("td",{children:c.type}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>p(k),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>alert("Delete placeholder"),children:e.jsx("i",{className:"fas fa-trash"})})]})]}),o===k&&e.jsx("tr",{children:e.jsx("td",{colSpan:"9",children:c.parts&&c.parts.length>0?c.parts.map((g,v)=>e.jsx(Hs,{part:g},v)):e.jsx("div",{className:"p-3 text-center text-muted",children:"No part details available for this calculation."})})})]},f)})})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>n(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>n(Math.max(1,r-1)),children:"<"}),[...Array(t).keys()].map(c=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${r===c+1?"btn-primary":"btn-light"}`,onClick:()=>n(c+1),children:c+1},c)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>n(Math.min(t,r+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",h]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[m," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{j(3),setPage(1)},children:"3"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{j(10),setPage(1)},children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{j(25),setPage(1)},children:"25"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})}function Hl(){const[s,a]=l.useState(""),[r,t]=l.useState("All"),[n,m]=l.useState("All"),[j,h]=l.useState(""),[o,d]=l.useState("All"),[i,p]=l.useState([]),[c,f]=l.useState([]),[k,g]=l.useState(3),[v,N]=l.useState(1),b=i.length,S=Math.max(1,Math.ceil(b/k)),[C,E]=l.useState(!1);l.useEffect(()=>{fetch("/packing-cost-fe/generatedData.json").then(y=>{if(!y.ok)throw new Error("Network response was not ok");return y.json()}).then(y=>{const L=(y.cpsData||[]).map(W=>({id:W.id,calCode:W.pack_cost_cal_code,period:W.implementation_period,destCode:W.destination_code,destCountry:W.destination_country,modelCode:W.model_cfc,numParts:W.parts?W.parts.length:0,type:W.type,parts:W.parts||[]}));f(L),p([])}).catch(y=>{console.error("Error fetching packing cost data:",y)})},[]);function M(U){U&&U.preventDefault&&U.preventDefault();let y=[...c];s&&(y=y.filter(I=>I.calCode.toLowerCase().includes(s.toLowerCase()))),r!=="All"&&(y=y.filter(I=>I.period===r)),n!=="All"&&(y=y.filter(I=>I.destCode===n)),j&&(y=y.filter(I=>I.modelCode.toLowerCase().includes(j.toLowerCase()))),o!=="All"&&(y=y.filter(I=>I.type===o)),p(y),N(1)}function F(){a(""),t("All"),m("All"),h(""),d("All"),p([]),N(1)}function _(U){const y=Math.min(Math.max(1,U),S);N(y)}const D=i.slice((v-1)*k,v*k);function w(U){console.log("Packing cost saved payload:",U);const y={...U,numParts:U.parts.length};p(I=>[...I,y]),E(!1)}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Packing Cost Calculation List"})}),e.jsxs("div",{className:"card-tools ml-auto d-flex align-items-center gap-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",title:"Calculate Packing Cost",onClick:()=>E(!0),children:[e.jsx("i",{className:"fas fa-calculator mr-1"})," Calculate Packing Cost"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Template",children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})]}),e.jsx(Wl,{calCode:s,setCalCode:a,period:r,setPeriod:t,destCode:n,setDestCode:m,modelCode:j,setModelCode:h,type:o,setType:d,handleFilter:M,handleClear:F}),e.jsx(Bl,{rows:i,visibleRows:D,page:v,totalPages:S,goToPage:_,perPage:k,setPerPage:g,total:b})]}),e.jsx(Fl,{show:C,onClose:()=>E(!1),onSave:w})]})}function ke({title:s,value1:a,value2:r,diff:t,children:n}){const[m,j]=l.useState(!0),h=s.match(/^(.*?)\s*(\([^)]*\))?$/),o=h?h[1].trim():s,d=h&&h[2]?h[2]:"",i=c=>{if(c==null||c==="")return!1;if(typeof c=="number")return!0;let f=String(c).trim();return f.endsWith("%")&&(f=f.slice(0,-1)),f=f.replace(/[^0-9.\-]/g,""),f===""||f==="-"||f==="."||f==="-."?!1:/^-?\d+(\.\d+)?$/.test(f)},p=c=>({textAlign:i(c)?"right":"left",whiteSpace:"nowrap"});return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{style:{backgroundColor:"#f9f9f9",cursor:"pointer"},onClick:()=>j(!m),children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{marginRight:6},children:m?"▼":"▶"}),e.jsx("span",{children:e.jsx("strong",{children:o})})]}),d&&e.jsx("span",{children:d})]})}),e.jsx("td",{style:p(a),children:a}),e.jsx("td",{style:p(r),children:r}),e.jsx("td",{style:p(t),children:t})]}),m&&n]})}const le=s=>{if(s==null||s==="")return"";const a=Number(s);return isNaN(a)?String(s):a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},Ge=s=>`Rp ${Number(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,ce=(s,a)=>{if(s==null||a==null)return"";const r=Number(s),t=Number(a);return isNaN(r)||isNaN(t)||r===0?"":`${((t-r)/r*100).toFixed(2)}%`},ae={textAlign:"right",whiteSpace:"nowrap"};function Ul(){const[s,a]=l.useState(0),[r,t]=l.useState(1),[n,m]=l.useState("2025"),[j,h]=l.useState("2026"),[o,d]=l.useState([]),[i,p]=l.useState([]);if(l.useEffect(()=>{const _="/packing-cost-fe/comparison.json",D="/packing-cost-fe/cpsComparison.json";fetch(_).then(w=>w.json()).then(w=>d(w)),fetch(D).then(w=>w.json()).then(w=>p(w))},[]),o.length===0)return e.jsx("div",{children:"Loading..."});const c=o[s],f=o[r],k=c.materials.inner.reduce((_,D)=>_+D.value,0),g=f.materials.inner.reduce((_,D)=>_+D.value,0),v=c.materials.outer.reduce((_,D)=>_+D.value,0),N=f.materials.outer.reduce((_,D)=>_+D.value,0),b=k+v,S=g+N,C=c.labor.dl+c.labor.idl+c.labor.facility,E=f.labor.dl+f.labor.idl+f.labor.facility,M=c.inland.inlandCost+c.inland.milkrunCost,F=f.inland.inlandCost+f.inland.milkrunCost;return e.jsxs("div",{className:"container mt-3",children:[e.jsx("h5",{children:"Packing Cost Comparison"}),e.jsxs("table",{className:"table table-bordered table-sm",style:{fontSize:"0.85rem"},children:[e.jsxs("thead",{style:{backgroundColor:"#efefef"},children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Part No"}),e.jsx("th",{children:e.jsx("select",{className:"form-control form-control-sm",value:s,onChange:_=>a(Number(_.target.value)),children:o.map((_,D)=>e.jsxs("option",{value:D,children:[_.partNo," - ",_.code]},D))})}),e.jsx("th",{children:e.jsx("select",{className:"form-control form-control-sm",value:r,onChange:_=>t(Number(_.target.value)),children:o.map((_,D)=>e.jsxs("option",{value:D,children:[_.partNo," - ",_.code]},D))})}),e.jsx("th",{children:"Diff"})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Periode"}),e.jsx("th",{children:e.jsx("input",{value:n,onChange:_=>m(_.target.value),className:"form-control form-control-sm"})}),e.jsx("th",{children:e.jsx("input",{value:j,onChange:_=>h(_.target.value),className:"form-control form-control-sm"})}),e.jsx("th",{})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Part Name"}),e.jsx("td",{children:(c==null?void 0:c.name)||""}),e.jsx("td",{children:(f==null?void 0:f.name)||""}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Supplier"}),e.jsx("td",{children:(c==null?void 0:c.supplier)||""}),e.jsx("td",{children:(f==null?void 0:f.supplier)||""}),e.jsx("td",{})]}),e.jsxs("tr",{style:{fontWeight:"bold"},children:[e.jsx("td",{children:"TOTAL COST (Rp)"}),e.jsx("td",{style:ae,children:le(c==null?void 0:c.totalCost)}),e.jsx("td",{style:ae,children:le(f==null?void 0:f.totalCost)}),e.jsx("td",{style:ae,children:ce(c==null?void 0:c.totalCost,f==null?void 0:f.totalCost)})]}),e.jsxs(ke,{title:"Material (Rp)",value1:le(b),value2:le(S),diff:ce(b,S),children:[e.jsx(ke,{title:"Inner (Rp)",value1:le(k),value2:le(g),diff:ce(k,g),children:c.materials.inner.map((_,D)=>{const w=f.materials.inner[D];return e.jsxs(de.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:_.name}),e.jsx("td",{style:ae,children:le(_.value)}),e.jsx("td",{style:ae,children:le(w==null?void 0:w.value)}),e.jsx("td",{style:ae,children:ce(_.value,w==null?void 0:w.value)})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Material No: ",_.detail.partNo]}),e.jsxs("div",{children:["- Code: ",_.detail.code]}),e.jsxs("div",{children:["- Qty: ",le(_.detail.qty)]}),e.jsxs("div",{children:["- Price: ",Ge(_.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",le(_.detail.qty*_.detail.price)]})]}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Material No: ",w==null?void 0:w.detail.partNo]}),e.jsxs("div",{children:["- Code: ",w==null?void 0:w.detail.code]}),e.jsxs("div",{children:["- Qty: ",le(w==null?void 0:w.detail.qty)]}),e.jsxs("div",{children:["- Price: ",Ge(w==null?void 0:w.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",le((w==null?void 0:w.detail.qty)*(w==null?void 0:w.detail.price))]})]}),e.jsx("td",{})]})]},`inner-${D}`)})}),e.jsx(ke,{title:"Outer (Rp)",value1:le(v),value2:le(N),diff:ce(v,N),children:c.materials.outer.map((_,D)=>{const w=f.materials.outer[D];return e.jsxs(de.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:_.name}),e.jsx("td",{style:ae,children:le(_.value)}),e.jsx("td",{style:ae,children:le(w==null?void 0:w.value)}),e.jsx("td",{style:ae,children:ce(_.value,w==null?void 0:w.value)})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",_.detail.partNo]}),e.jsxs("div",{children:["- Code: ",_.detail.code]}),e.jsxs("div",{children:["- Qty: ",le(_.detail.qty)]}),e.jsxs("div",{children:["- Price: ",Ge(_.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",le(_.detail.qty*_.detail.price)]})]}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",w==null?void 0:w.detail.partNo]}),e.jsxs("div",{children:["- Code: ",w==null?void 0:w.detail.code]}),e.jsxs("div",{children:["- Qty: ",le(w==null?void 0:w.detail.qty)]}),e.jsxs("div",{children:["- Price: ",Ge(w==null?void 0:w.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",le((w==null?void 0:w.detail.qty)*(w==null?void 0:w.detail.price))]})]}),e.jsx("td",{})]})]},`outer-${D}`)})})]}),e.jsxs(ke,{title:"Labor (Rp)",value1:le(C),value2:le(E),diff:ce(C,E),children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- DL"}),e.jsx("td",{style:ae,children:le(c.labor.dl)}),e.jsx("td",{style:ae,children:le(f.labor.dl)}),e.jsx("td",{style:ae,children:ce(c.labor.dl,f.labor.dl)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- IDL"}),e.jsx("td",{style:ae,children:le(c.labor.idl)}),e.jsx("td",{style:ae,children:le(f.labor.idl)}),e.jsx("td",{style:ae,children:ce(c.labor.idl,f.labor.idl)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Facility/Others"}),e.jsx("td",{style:ae,children:le(c.labor.facility)}),e.jsx("td",{style:ae,children:le(f.labor.facility)}),e.jsx("td",{style:ae,children:ce(c.labor.facility,f.labor.facility)})]})]}),e.jsxs(ke,{title:"Inland (Rp)",value1:le(M),value2:le(F),diff:ce(M,F),children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Inland Cost"}),e.jsx("td",{style:ae,children:le(c.inland.inlandCost)}),e.jsx("td",{style:ae,children:le(f.inland.inlandCost)}),e.jsx("td",{style:ae,children:ce(c.inland.inlandCost,f.inland.inlandCost)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Milkrun Cost"}),e.jsx("td",{style:ae,children:le(c.inland.milkrunCost)}),e.jsx("td",{style:ae,children:le(f.inland.milkrunCost)}),e.jsx("td",{style:ae,children:ce(c.inland.milkrunCost,f.inland.milkrunCost)})]})]})]})]})]})}function ql({show:s,onClose:a,onSave:r,initialData:t=null,mode:n="new"}){const[m,j]=l.useState(""),[h,o]=l.useState(""),[d,i]=l.useState(""),[p,c]=l.useState(""),[f,k]=l.useState(""),[g,v]=l.useState(""),[N,b]=l.useState(""),[S,C]=l.useState(""),[E,M]=l.useState(""),[F,_]=l.useState(""),[D,w]=l.useState(""),[U,y]=l.useState(""),[I,L]=l.useState(""),[W,Q]=l.useState(""),[te,B]=l.useState(""),[Y,O]=l.useState(""),[z,T]=l.useState(""),[X,K]=l.useState("");l.useEffect(()=>{s&&t?(j(t.materialNo||""),o(t.materialName||""),i(t.price??""),c(t.materialType||""),k(t.supplierCode||""),v(t.supplierName||""),b(t.address||""),C(t.plantCode||""),M(t.eWarehouse||""),_(t.eWarehousePrice||""),w(t.dimLength||""),y(t.dimWeightPc||""),L(t.dimWidth||""),Q(t.dimQtyBundling||""),B(t.dimHeight||""),O(t.totalDimWeight||""),T(t.docMSDS||""),K(t.docDrawing||"")):s||R()},[s,t]);function q(){if(!m||!h||!p){alert("Please fill in Material No, Material Name, and Material Type");return}const u={id:t==null?void 0:t.id,materialNo:m,materialName:h,price:d,materialType:p,supplierCode:f,supplierName:g,address:N,plantCode:S,eWarehouse:E,eWarehousePrice:F,dimLength:D,dimWeightPc:U,dimWidth:I,dimQtyBundling:W,dimHeight:te,totalDimWeight:Y,docMSDS:z,docDrawing:X,createdDate:n==="edit"?(t==null?void 0:t.createdDate)||new Date().toLocaleDateString():new Date().toLocaleDateString()};r(u,n),R()}function R(){j(""),o(""),i(""),c(""),k(""),v(""),b(""),C(""),M(""),_(""),w(""),y(""),L(""),Q(""),B(""),O(""),T(""),K("")}function H(){const u=`EWH-${Math.random().toString(36).substr(2,9).toUpperCase()}`,A=(Math.random()*1e3).toFixed(2);M(u),_(A),i(A)}function J(){R(),a()}if(!s)return null;const $=n==="edit"?"Material - Edit":"Material - New",x=n==="edit"?"Save Changes":"Save Material";return e.jsx("div",{className:"np-modal-backdrop",onMouseDown:u=>{u.target===u.currentTarget&&J()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:800},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:$})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:J,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",style:{fontSize:"0.7rem"},children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Item No ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",value:m,onChange:u=>j(u.target.value),placeholder:"Enter Item No",autoFocus:!0}),e.jsx("div",{className:"input-group-append",children:e.jsxs("button",{className:"btn btn-primary",type:"button",style:{fontSize:"0.8rem"},onClick:H,disabled:!m,children:[e.jsx("i",{className:"fas fa-search mr-1"}),"Search eWH"]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Material Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:h,onChange:u=>o(u.target.value),placeholder:"Enter Material Name"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:d,onChange:u=>i(u.target.value),placeholder:"Enter Price",step:"0.01",min:"0"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"eWarehouse Price"}),e.jsx("input",{type:"number",className:"form-control",value:F,onChange:u=>_(u.target.value),placeholder:"eWarehouse Price",step:"0.01",min:"0",readOnly:!0})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Material Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:p,onChange:u=>c(u.target.value),children:[e.jsx("option",{value:"",children:"Select Material Type"}),e.jsx("option",{value:"Inner",children:"Inner"}),e.jsx("option",{value:"Outer",children:"Outer"}),e.jsx("option",{value:"Module",children:"Module"}),e.jsx("option",{value:"Module",children:"Box"})]})]})]})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Supplier"})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code"}),e.jsx("input",{type:"text",className:"form-control",value:f,onChange:u=>k(u.target.value),placeholder:"Enter Supplier Code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("input",{type:"text",className:"form-control",value:N,readOnly:!0,placeholder:"Address"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("input",{type:"text",className:"form-control",value:g,readOnly:!0,placeholder:"Supplier Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Plant Code"}),e.jsx("input",{type:"text",className:"form-control",value:S,readOnly:!0,placeholder:"Plant Code"})]})]})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Dimension"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Length (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:D,onChange:u=>w(u.target.value),placeholder:"Length (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Weight/pc (gr)"}),e.jsx("input",{type:"number",className:"form-control",value:U,onChange:u=>y(u.target.value),placeholder:"Weight/pc (gr)"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Width (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:I,onChange:u=>L(u.target.value),placeholder:" Width (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Qty/Bundling"}),e.jsx("input",{type:"number",className:"form-control",value:W,onChange:u=>Q(u.target.value),placeholder:"Qty/Bundling"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Height (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:te,onChange:u=>B(u.target.value),placeholder:"Height (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Total Weight (gr)"}),e.jsx("input",{type:"number",className:"form-control",value:Y,onChange:u=>O(u.target.value),placeholder:"Total Weight (gr)"})]})})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Documents"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"MSDS"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-image"})})}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:u=>{var A;return T(((A=u.target.files[0])==null?void 0:A.name)||"")}})]})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Drawing"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-image"})})}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:u=>{var A;return K(((A=u.target.files[0])==null?void 0:A.name)||"")}})]})]})})]})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary mr-2",onClick:J,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Cancel"]}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:q,children:[e.jsx("i",{className:"fas fa-save mr-1"}),x]})]})]})})}function $l({materialNo:s,setMaterialNo:a,materialName:r,setMaterialName:t,parentMaterial:n,setParentMaterial:m,itemNo:j,setItemNo:h,price:o,setPrice:d,materialType:i,setMaterialType:p,onFilter:c,onClearFilters:f}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Item No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:k=>a(k.target.value),placeholder:"Material No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Material Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:k=>t(k.target.value),placeholder:"Material Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Parent Material"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:k=>m(k.target.value),placeholder:"Parent Material"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"eWarehouse Item No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:k=>h(k.target.value),placeholder:"Item No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Price"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:k=>d(k.target.value),placeholder:"Price"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Material Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:i,onChange:k=>p(k.target.value),children:[e.jsx("option",{value:"",children:"Select Material Type"}),e.jsx("option",{value:"Inner",children:"Inner"}),e.jsx("option",{value:"Outer",children:"Outer"}),e.jsx("option",{value:"Module",children:"Module"}),e.jsx("option",{value:"Box",children:"Module"})]})]})]})]}),e.jsxs("div",{className:"form-group text-right mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:c,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:f,children:[e.jsx("i",{className:"fas fa-undo mr-1"})," Clear"]})]})]})}function Kl({materials:s,allMaterials:a,totalMaterials:r,currentPage:t,totalPages:n,pageSize:m,onPageChange:j,onDeleteMaterial:h,onEditMaterial:o}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50},className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"Item No"}),e.jsx("th",{className:"text-center",children:"Material Name"}),e.jsx("th",{className:"text-center",children:"Price"}),e.jsx("th",{className:"text-center",children:"eWH Item No"}),e.jsx("th",{className:"text-center",children:"eWH Price"}),e.jsx("th",{className:"text-center",children:"Material Type"}),e.jsx("th",{style:{width:120},className:"text-center",children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-4 text-muted text-center",children:"No Data Found"})}):s.map((d,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:(t-1)*m+i+1}),e.jsx("td",{className:"text-center",children:d.materialNo}),e.jsx("td",{children:d.materialName}),e.jsx("td",{className:"text-center",children:d.price}),e.jsx("td",{className:"text-center",children:d.eWarehouse}),e.jsx("td",{className:"text-center",children:d.eWarehousePrice}),e.jsx("td",{className:"text-center",children:d.materialType}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>o&&o(d),title:"Edit Material",children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>h&&h(i),title:"Delete Material",children:e.jsx("i",{className:"fas fa-trash"})})]})]},d.id||i))})]})}),n>1&&e.jsx(Ie,{currentPage:t,totalPages:n,totalItems:r,pageSize:m,onPageChange:j})]})}function Ss(){const[s,a]=l.useState(""),[r,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(!1),[k,g]=l.useState("new"),[v,N]=l.useState(null),[b,S]=l.useState(1),C=10,[E,M]=l.useState([]),[F,_]=l.useState([]);l.useEffect(()=>{fetch("/packing-cost-fe/materials.json").then(z=>{if(!z.ok)throw new Error("Network response was not ok");return z.json()}).then(z=>{M(z),_([])}).catch(z=>{console.error("Error fetching materials:",z)})},[]);const D=Math.ceil(F.length/C),w=(b-1)*C,U=w+C,y=F.slice(w,U);function I(){let O=E.filter(T=>{const X=!s||T.materialNo&&T.materialNo.toLowerCase().includes(s.toLowerCase()),K=!r||T.materialName&&T.materialName.toLowerCase().includes(r.toLowerCase()),q=!n||T.parentMaterial&&T.parentMaterial.toLowerCase().includes(n.toLowerCase()),R=!j||T.itemNo&&T.itemNo.toLowerCase().includes(j.toLowerCase()),H=!o||T.price&&T.price.toString().includes(o),J=!i||T.materialType===i;return X&&K&&q&&R&&H&&J});_(!s&&!r&&!n&&!j&&!o&&!i?[...E].reverse():O),S(1),console.log(`Filtered ${O.length} materials from ${E.length} total`)}function L(){a(""),t(""),m(""),h(""),d(""),p(""),_([]),S(1)}function W(){N(null),g("new"),f(!0)}function Q(){f(!1),N(null),g("new")}function te(O,z="new"){if(z==="edit"&&v){const T=v.materialNo,X=E.map(q=>q.materialNo===T?{...q,...O}:q),K=F.map(q=>q.materialNo===T?{...q,...O}:q);M(X),_(K)}else M(T=>[O,...T]),_(T=>[O,...T]);f(!1),N(null),g("new")}function B(O){if(!confirm("Delete this material?"))return;const z=(b-1)*C+O,T=F[z];if(!T)return;const X=F.filter((R,H)=>H!==z),K=E.filter(R=>R.materialNo!==T.materialNo);_(X),M(K);const q=Math.ceil(X.length/C);b>q&&q>0&&S(q)}function Y(O){N(O),g("edit"),f(!0)}return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Material List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:W,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Material"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Upload placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Download template placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx($l,{materialNo:s,setMaterialNo:a,materialName:r,setMaterialName:t,parentMaterial:n,setParentMaterial:m,itemNo:j,setItemNo:h,price:o,setPrice:d,materialType:i,setMaterialType:p,onFilter:I,onClearFilters:L}),e.jsx(Kl,{materials:y,allMaterials:E,totalMaterials:F.length,currentPage:b,totalPages:D,pageSize:C,onPageChange:S,onDeleteMaterial:B,onEditMaterial:Y})]}),e.jsx(ql,{show:c,onClose:Q,onSave:te,initialData:v,mode:k})]})})}function Vl(){const s=be(),[a,r]=l.useState(!1),[t,n]=l.useState(!1),m=Ps(),j=_e();l.useEffect(()=>{const d=(m.pathname||"").toLowerCase();d.startsWith("/projects")||d.startsWith("/models")||d.startsWith("/parts")||d.startsWith("/suppliers")||d.startsWith("/material")||d.startsWith("/module-type")||d.startsWith("/params")?r(!0):r(!1),d.startsWith("/packing")||d.startsWith("/cps")||d.startsWith("/dpi")||d.startsWith("/calculate-packing-cost")||d.startsWith("/calculate")?n(!0):n(!1)},[m.pathname]);const h=({isActive:d})=>"nav-link"+(d?" active":"");function o(d){d&&d.preventDefault&&d.preventDefault();try{s&&typeof s.logout=="function"&&s.logout()}catch{}j("/login")}return e.jsxs("aside",{className:"main-sidebar sidebar-dark-primary elevation-4",style:{minHeight:"100vh"},children:[e.jsx("div",{className:"brand-link",children:e.jsx(ie,{to:"/",className:"d-block text-decoration-none",children:e.jsx("span",{className:"brand-text font-weight-light",children:"My App"})})}),e.jsx("div",{className:"sidebar d-flex flex-column",style:{minHeight:"calc(100vh - 56px)"},children:e.jsx("nav",{className:"mt-2 flex-grow-1",children:e.jsxs("ul",{className:"nav nav-pills nav-sidebar flex-column",role:"menu","aria-orientation":"vertical",style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/",className:h,end:!0,children:[e.jsx("i",{className:"nav-icon fas fa-tachometer-alt"}),e.jsx("p",{children:"Dashboard"})]})}),e.jsxs("li",{className:`nav-item has-treeview ${a?"menu-open":""}`,children:[e.jsxs("div",{role:"button",onClick:()=>r(d=>!d),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&r(i=>!i)},tabIndex:0,"aria-expanded":a,className:`nav-link d-flex align-items-center ${a?"active":""}`,style:{cursor:"pointer",userSelect:"none"},children:[e.jsx("i",{className:"nav-icon fas fa-database"}),e.jsx("p",{className:"flex-grow-1 mb-0 ml-2",children:"Master"}),e.jsx("i",{className:`right fas ${a?"fa-angle-down":"fa-angle-left"}`})]}),e.jsxs("ul",{className:"nav nav-treeview",style:{display:a?"block":"none"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/projects",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Projects"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/models",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Models"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/material",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Material"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/parts",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Parts"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/suppliers",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Suppliers"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/params",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Parameters"})]})})]})]}),e.jsxs("li",{className:`nav-item has-treeview ${t?"menu-open":""}`,children:[e.jsxs("div",{role:"button",onClick:()=>n(d=>!d),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&n(i=>!i)},tabIndex:0,"aria-expanded":t,className:`nav-link d-flex align-items-center ${t?"active":""}`,style:{cursor:"pointer",userSelect:"none"},children:[e.jsx("i",{className:"nav-icon fas fa-box-open"}),e.jsx("p",{className:"flex-grow-1 mb-0 ml-2",children:"Packing Spec"}),e.jsx("i",{className:`right fas ${t?"fa-angle-down":"fa-angle-left"}`})]}),e.jsxs("ul",{className:"nav nav-treeview",style:{display:t?"block":"none"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/packing/cps",className:({isActive:d})=>"nav-link"+(d?" active":""),children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"CPS"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/packing/DPI",className:({isActive:d})=>"nav-link"+(d?" active":""),children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"DPI"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/packing/CalculatePackingCost",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Calculate Packing Cost"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/packing/ComparisonPage",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Comparison"})]})})]})]}),e.jsx("li",{style:{marginTop:"auto"}}),e.jsx("li",{className:"nav-item",style:{padding:"0.5rem 0"},children:e.jsxs(ie,{to:"/settings",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Settings"})]})}),e.jsx("li",{className:"nav-item",style:{padding:"0.5rem 0"},children:e.jsxs("button",{type:"button",onClick:o,className:"btn btn-block btn-outline-danger d-flex align-items-center",style:{justifyContent:"flex-start"},children:[e.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),e.jsx("span",{children:"Logout"})]})})]})})})]})}function Gl(){const s=be(),a=_e(),r=()=>{a("/notification-detail")};return e.jsxs("nav",{className:"main-header navbar navbar-expand navbar-white navbar-light",children:[e.jsxs("ul",{className:"navbar-nav",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link","data-widget":"pushmenu",href:"#",role:"button",children:e.jsx("i",{className:"fas fa-bars"})})}),e.jsx("li",{className:"nav-item d-none d-sm-inline-block",children:e.jsx("a",{href:"#",className:"nav-link",children:"Home"})})]}),e.jsxs("ul",{className:"navbar-nav ml-auto",children:[e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link","data-toggle":"dropdown",href:"#",children:[e.jsx("i",{className:"far fa-bell"}),e.jsx("span",{className:"badge badge-warning navbar-badge",children:"2"})]}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[e.jsx("span",{className:"dropdown-item dropdown-header",children:"2 Notifications"}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("div",{className:"dropdown-item",children:[e.jsx("p",{style:{fontWeight:"bold"},children:"Date : 20 Feb 2025 13:15"}),e.jsx("p",{className:"text-sm",children:"You have new form request to review."}),e.jsx("p",{className:"text-sm text-muted",children:"From : Jonathan Hairi at 20 Feb 2025 13:10"}),e.jsx("p",{className:"text-sm text-muted",children:"Dept : PPMD"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:r,children:"See Detail"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("div",{className:"dropdown-item",children:[e.jsx("p",{style:{fontWeight:"bold"},children:"Date : 19 Feb 2025 12:15"}),e.jsx("p",{className:"text-sm",children:"Your form submission has been rejected by :"}),e.jsx("p",{className:"text-sm text-muted",children:"By : Jonathan Hairi at 19 Feb 2025 13:10"}),e.jsx("p",{className:"text-sm text-muted",children:"Dept : PPMD"}),e.jsx("p",{className:"text-sm text-muted",children:"Comment: Sheet tersebut sudah tidak ada di pasaran dan akan diganti sheet yg sama dari supplier lain."}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:r,children:"See Detail"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsx("a",{href:"#",className:"dropdown-item dropdown-footer",children:"See All Notifications"})]})]}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link","data-widget":"fullscreen",href:"#",role:"button",children:e.jsx("i",{className:"fas fa-expand-arrows-alt"})})}),s.user&&e.jsx("li",{className:"nav-item d-none d-sm-inline-block",children:e.jsx("span",{className:"nav-link",children:s.user.username})})]})]})}St.register(wt,Pt,kt,_t,It,At);const Yl={labels:["Jan","Feb","Mar","Apr","May"],datasets:[{label:"Orders",data:[12,19,7,14,10],backgroundColor:"#007bff"}]};function zl(){return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Sales"})}),e.jsx("div",{className:"card-body",children:e.jsx(yt,{data:Yl})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Quick Stats"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"info-box mb-3 bg-info",children:[e.jsx("span",{className:"info-box-icon",children:e.jsx("i",{className:"fas fa-shopping-cart"})}),e.jsxs("div",{className:"info-box-content",children:[e.jsx("span",{className:"info-box-text",children:"Orders"}),e.jsx("span",{className:"info-box-number",children:"1,250"})]})]})})]})}),e.jsx("div",{className:"col-12 mt-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Recent Items"})}),e.jsx("div",{className:"card-body p-0",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Qty"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"1"}),e.jsx("td",{children:"33504-BZ292-C1"}),e.jsx("td",{children:"Hose"}),e.jsx("td",{children:"10"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"2"}),e.jsx("td",{children:"122810Y110"}),e.jsx("td",{children:"Hanger"}),e.jsx("td",{children:"2"})]})]})]})})]})})]})}function Jl(){const s=be(),[a,r]=l.useState(""),[t,n]=l.useState(""),[m,j]=l.useState(""),h=o=>{o.preventDefault(),s.login(a,t)||j("Invalid username or password")};return e.jsx("div",{className:"login-page bg-light min-vh-100 d-flex align-items-center justify-content-center",children:e.jsx("div",{className:"card shadow-sm",style:{width:"360px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"mb-4 text-center",children:"Sign In"}),m&&e.jsx("div",{className:"alert alert-danger py-2",role:"alert",children:m}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),e.jsx("input",{type:"text",id:"username",className:"form-control",value:a,onChange:o=>r(o.target.value),placeholder:"Enter username",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",className:"form-control",value:t,onChange:o=>n(o.target.value),placeholder:"Enter password",required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Login"})]})]})})})}function Ql({visible:s,onClose:a,onSave:r,initialData:t}){const[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState("Draft"),[i,p]=l.useState(""),[c,f]=l.useState(""),[k,g]=l.useState(""),[v,N]=l.useState([]),[b,S]=l.useState(!1);l.useEffect(()=>{t?(m(t.project_code||""),h(t.project_name||""),d(t.project_status||"Draft"),p(t.project_manager||""),f(t.description||""),g(t.note||""),N(t.models||[])):(m(""),h(""),d("Draft"),p(""),f(""),g(""),N([]))},[t,s]);const C=()=>{S(!0)},E=D=>{N(w=>[...w,...D]),S(!1)},M=(D,w,U)=>{N(y=>y.map((I,L)=>L===D?{...I,[w]:U}:I))},F=D=>{N(w=>w.filter((U,y)=>y!==D))},_=()=>{r&&r({code:n,name:j,status:o,manager:i,description:c,note:k,models:v})};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"np-modal-backdrop",style:{position:"fixed",inset:0,zIndex:1040},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1e3,margin:"40px auto",zIndex:1041},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:t?"Project - Edit":"Project - New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool","aria-label":"Close",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"small",children:["Project Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:n,onChange:D=>m(D.target.value),placeholder:"Project Code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Project Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:j,onChange:D=>h(D.target.value),placeholder:"Project Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"small",children:["Status ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{className:"form-control form-control-sm mb-2",value:o,onChange:D=>d(D.target.value),children:[e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"On Hold"}),e.jsx("option",{children:"Completed"})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Project Manager"}),e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{className:"form-control form-control-sm",value:i,onChange:D=>p(D.target.value),placeholder:"Project Manager"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-user"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Description"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:c,onChange:D=>f(D.target.value),placeholder:"Description"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Note"}),e.jsx("textarea",{className:"form-control form-control-sm mb-2",value:k,onChange:D=>g(D.target.value),rows:2,placeholder:"Note"})]})]})]}),e.jsx("div",{className:"card mt-3",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:C,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Model"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40,textAlign:"center"},children:"No"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Code"}),e.jsx("th",{style:{textAlign:"center"},children:"CFC"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Impl. Period"}),e.jsx("th",{style:{textAlign:"center"},children:"Dest. Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Remark"}),e.jsx("th",{style:{width:90,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted py-4",children:"No Data Found"})}):v.map((D,w)=>e.jsxs("tr",{children:[e.jsx("td",{children:w+1}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:D.model_code,onChange:U=>M(w,"model_code",U.target.value),placeholder:"Model Code"})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:D.model_cfc,onChange:U=>M(w,"model_cfc",U.target.value),placeholder:"CFC",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:D.model_name,onChange:U=>M(w,"model_name",U.target.value),placeholder:"Model Name",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:D.model_implementation_period,onChange:U=>M(w,"model_implementation_period",U.target.value),placeholder:"Implementation Period",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:D.model_destination_code,onChange:U=>M(w,"model_destination_code",U.target.value),placeholder:"Destination Code",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:D.model_type,onChange:U=>M(w,"model_type",U.target.value),placeholder:"Type",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:D.model_remark,onChange:U=>M(w,"model_remark",U.target.value),placeholder:"Remark",readOnly:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>F(w),children:e.jsx("i",{className:"fas fa-trash"})})})]},w))})]})})]})})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{type:"button",className:"btn btn-primary mr-2",onClick:_,children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"})]})]})}),e.jsx(as,{show:b,onClose:()=>S(!1),onAdd:E})]}):null}const Zl=({show:s,onHide:a})=>{const[r,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState("All"),[o,d]=l.useState(""),i=[{code:"024J",name:"Front Bumper Model",status:"Active",manager:"Prototype 2025"},{code:"286W",name:"Rear Bumper Model",status:"Draft",manager:"Production 2024"},{code:"332W",name:"Hood Model",status:"Inactive",manager:"Prototype 2023"},{code:"385W",name:"Fender Model",status:"Active",manager:"Production 2022"},{code:"388W",name:"Grille Model",status:"Active",manager:"Prototype 2021"}],[p,c]=l.useState(i);if(l.useEffect(()=>{s&&k()},[s]),!s)return null;const f=()=>{let v=i;r&&(v=v.filter(N=>N.code.toLowerCase().includes(r.toLowerCase()))),n&&(v=v.filter(N=>N.name.toLowerCase().includes(n.toLowerCase()))),j&&j!=="All"&&(v=v.filter(N=>N.status.toLowerCase()===j.toLowerCase())),o&&(v=v.filter(N=>N.manager.toLowerCase().includes(o.toLowerCase()))),c(v)},k=()=>{t(""),m(""),h("All"),d(""),c(i)},g={maxHeight:"calc(100vh - 200px)",overflowY:"auto"};return e.jsx("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("b",{children:"Select Project"})}),e.jsx("button",{type:"button",className:"close",onClick:a,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:g,children:[e.jsx("div",{className:"card card-outline card-secondary mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:v=>t(v.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:v=>m(v.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Status"}),e.jsxs("select",{className:"form-control form-control-sm",value:j,onChange:v=>h(v.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Inactive"})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Manager"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:v=>d(v.target.value)})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{className:"btn btn-primary btn-sm mr-2",onClick:f,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:k,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-striped table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"30px"},children:e.jsx("input",{type:"checkbox"})}),e.jsx("th",{children:"Project Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Project Mgr"})]})}),e.jsx("tbody",{children:p.length>0?p.map((v,N)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"checkbox"})}),e.jsx("td",{children:v.code}),e.jsx("td",{children:v.name}),e.jsx("td",{children:v.status}),e.jsx("td",{children:v.manager})]},N)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No projects found"})})})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",children:"Add"}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:a,children:"Close"})]})]})})})};function Xl({code:s,setCode:a,name:r,setName:t,models:n,setModels:m,manager:j,setManager:h,statuses:o,setStatuses:d,handleSearch:i,clearFilters:p,handleOpenNew:c}){const[f,k]=l.useState(!1);function g(v){if(v==="all"){const N=!o.all;d({all:N,draft:!1,active:!1,onhold:!1,completed:!1})}else d(N=>({...N,[v]:!N[v],all:!1}))}return e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:s,onChange:v=>a(v.target.value),className:"form-control form-control-sm",placeholder:"Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search code",onClick:()=>k(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:r,onChange:v=>t(v.target.value),className:"form-control form-control-sm",placeholder:"Project name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search name",onClick:()=>k(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Related Models"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:n,onChange:v=>m(v.target.value),className:"form-control form-control-sm",placeholder:"Model code / name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Select Model",children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Manager"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:j,onChange:v=>h(v.target.value),className:"form-control form-control-sm",placeholder:"Manager name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-user"})})})]})]})})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{className:"small mb-1 d-block",children:"Status"}),e.jsx("div",{className:"form-inline flex-wrap",children:["all","draft","active","onhold","completed"].map(v=>{const N=`status-${v}`;return e.jsxs("div",{className:"form-check mr-3",children:[e.jsx("input",{id:N,type:"checkbox",className:"form-check-input",checked:o[v],onChange:()=>g(v)}),e.jsx("label",{className:"form-check-label small ml-1",htmlFor:N,children:v==="onhold"?"On Hold":v.charAt(0).toUpperCase()+v.slice(1)})]},v)})})]})}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm mr-2",onClick:i,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:p,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx(Zl,{show:f,onHide:()=>k(!1)})]})}function ea({results:s,handleEdit:a,handleDelete:r,currentPage:t,setCurrentPage:n,pageSize:m}){const j=Math.ceil(s.length/m),h=s.slice((t-1)*m,t*m),o=d=>{var c;const i=((c=h[d%m])==null?void 0:c.project_name)||"this project";window.confirm(`Apakah Anda yakin ingin menghapus project "${i}"?`)&&r((t-1)*m+d)};return e.jsxs("div",{className:"card-body pt-0",children:[e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{className:"thead-light",style:{position:"sticky",top:0,zIndex:5},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50},children:"No"}),e.jsx("th",{children:"Project Code"}),e.jsx("th",{children:"Project Name"}),e.jsx("th",{children:"Project Manager"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Models"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsxs("tbody",{children:[h.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-4 text-muted",children:"No Data Found"})}),h.map((d,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:(t-1)*m+i+1}),e.jsx("td",{children:d.project_code}),e.jsx("td",{children:d.project_name}),e.jsx("td",{children:d.project_manager}),e.jsx("td",{children:d.project_status}),e.jsx("td",{children:Array.isArray(d.models)?d.models.map(p=>typeof p=="string"?p:p.model_code).join(", "):d.models}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>a((t-1)*m+i),children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>o(i),children:e.jsx("i",{className:"fas fa-trash"})})]})]},i))]})]})}),e.jsx(Ie,{currentPage:t,totalPages:j,totalItems:s.length,pageSize:m,onPageChange:n})]})}function sa(){const[s,a]=l.useState(""),[r,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState({all:!0,draft:!1,active:!1,onhold:!1,completed:!1}),[i,p]=l.useState(!1),[c,f]=l.useState(null),[k,g]=l.useState([]),[v,N]=l.useState([]),[b,S]=l.useState(1),C=10;l.useEffect(()=>{fetch("/packing-cost-fe/projects.json").then(I=>{if(!I.ok)throw new Error("Network response was not ok");return I.json()}).then(I=>{N(I)}).catch(I=>{console.error("Error fetching projects:",I)})},[]);function E(){a(""),t(""),m(""),h(""),d({all:!0,draft:!1,active:!1,onhold:!1,completed:!1}),g([]),S(1)}function M(){const y=!s&&!r&&!n&&!j&&o.all;let I=v.filter(L=>{var W,Q,te;return(!s||((W=L.code)==null?void 0:W.toLowerCase().includes(s.toLowerCase())))&&(!r||((Q=L.name)==null?void 0:Q.toLowerCase().includes(r.toLowerCase())))&&(!n||(Array.isArray(L.models)?L.models.join(", ").toLowerCase().includes(n.toLowerCase()):(L.models||"").toLowerCase().includes(n.toLowerCase())))&&(!j||((te=L.manager)==null?void 0:te.toLowerCase().includes(j.toLowerCase())))});if(!o.all){const L=[];o.draft&&L.push("Draft"),o.active&&L.push("Active"),o.onhold&&L.push("On Hold"),o.completed&&L.push("Completed"),L.length>0&&(I=I.filter(W=>L.includes(W.status)))}g(y?[...I].reverse():I),S(1)}function F(){f(null),p(!0)}function _(){p(!1)}function D(y){if(c!==null)g(I=>I.map((L,W)=>W!==c?L:{...L,project_code:y.code,project_name:y.name,project_manager:y.manager,project_status:y.status,description:y.description,note:y.note,models:y.models}));else{const I={project_code:y.code||`CFC-${((k||[]).length+1).toString().padStart(3,"0")}`,project_name:y.name||"(No name)",project_manager:y.manager||"",project_status:y.status||"Draft",description:y.description,note:y.note,models:y.models};g(L=>[I,...L||[]])}p(!1),f(null)}function w(y){f(y),p(!0)}function U(y){g(I=>I.filter((L,W)=>W!==y))}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-secondary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Project List"})}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:F,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," New Project"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Download Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(Xl,{code:s,setCode:a,name:r,setName:t,models:n,setModels:m,manager:j,setManager:h,statuses:o,setStatuses:d,handleSearch:M,clearFilters:E,handleOpenNew:F}),e.jsx(ea,{results:k,handleEdit:w,handleDelete:U,currentPage:b,setCurrentPage:S,pageSize:C})]}),e.jsx(Ql,{visible:i,onClose:_,onSave:D,initialData:c!==null&&k&&k[c]?{...k[c],models:Array.isArray(k[c].models)?k[c].models.map(y=>typeof y=="string"?{code:y,name:"",remark:""}:y):(k[c].models||"").split(",").map(y=>({code:y.trim(),name:"",remark:""}))}:null})]})}function ta({show:s,onClose:a,onSave:r,initialData:t}){const[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(""),[k,g]=l.useState(""),[v,N]=l.useState(""),[b,S]=l.useState(""),[C,E]=l.useState(""),[M,F]=l.useState(""),[_,D]=l.useState(""),[w,U]=l.useState([]),[y,I]=l.useState(!1),[L,W]=l.useState([]);l.useEffect(()=>{var T,X;s&&(t?(m(((T=t.project)==null?void 0:T.project_code)||""),h(((X=t.project)==null?void 0:X.project_name)||""),d(t.model_code||""),p(t.model_name||""),f(t.model_remark||""),S(t.model_implementation_period||""),E(t.model_destination_code||""),F(t.destinationCountryCode||""),D(t.country||""),U(t.parts||[]),g(t.model_cfc||""),N(t.model_type||"")):(m(""),h(""),d(""),p(""),f(""),S(""),E(""),F(""),D(""),U([]),g(""),N("")),I(!1))},[s,t]),l.useEffect(()=>{fetch("/projects.json").then(T=>T.json()).then(T=>W(T))},[]),l.useEffect(()=>{if(n){const T=L.find(X=>X.project_code===n);h(T?T.project_name:"")}else h("")},[n]);function Q(){I(!0)}function te(T){const X=T.map(K=>({partNo:K.partNo||"",suffix:"",name:K.partName||"",parent:K.parentPartNo||"",supplierId:K.supplierId||"",supplierName:K.supplierName||"",L:K.L||0,W:K.W||0,H:K.H||0,wtPerPc:K.wtPerPc||0,qty:1,totalWt:K.wtPerPc?(1*K.wtPerPc).toFixed(2):0}));U(K=>[...K,...X]),I(!1)}function B(T){U(X=>X.filter((K,q)=>q!==T))}function Y(T,X,K){const q=[...w],R={...q[T]};if(R[X]=K,X==="qty"||X==="wtPerPc"){const H=X==="qty"?K:R.qty,J=X==="wtPerPc"?K:R.wtPerPc;R.totalWt=(Number(H)*Number(J)).toFixed(2)}q[T]=R,U(q)}function O(T){E(T);const X=Ye.find(K=>K.destCode===T);X?(F(X.code),D(X.country)):(F(""),D(""))}function z(){if(!o.trim()){alert("Please enter Model Code");return}const T={...t||{},model_code:o,model_name:i,model_remark:c,model_implementation_period:b,model_destination_code:C,destinationCountryCode:M,country:_,parts:w.slice(),model_cfc:k,model_type:v,project:{...(t==null?void 0:t.project)||{},project_code:n,project_name:j}};console.log("Saving model:",T),r(T)}return s?e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:T=>{T.target===T.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-success",style:{maxWidth:1200},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsxs("b",{children:["Model - ",t?"Edit":"New"]})}),e.jsx("div",{className:"ml-2 text-muted small",style:{marginLeft:8},children:"|"}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Model Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:o,onChange:T=>d(T.target.value),placeholder:"Model Code"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Model Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:i,onChange:T=>p(T.target.value),placeholder:"Model Name"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"CFC"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:k,onChange:T=>g(T.target.value),placeholder:"CFC"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsxs("select",{className:"form-control form-control-sm mb-2",value:v,onChange:T=>N(T.target.value),children:[e.jsx("option",{value:"",children:"-- Select Type --"}),e.jsx("option",{value:"PxP",children:"PxP"}),e.jsx("option",{value:"Lot",children:"Lot"}),e.jsx("option",{value:"Engine",children:"Engine"})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Project Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:n,onChange:T=>m(T.target.value),placeholder:"Project Code"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Project Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:j,placeholder:"Project Name",readOnly:!0,style:{backgroundColor:"#f8f9fa"}})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Implementation Period ",e.jsx("span",{style:{color:"red"},children:"*"})," ",e.jsx("span",{className:"text-muted ml-2",children:e.jsx("i",{children:"e.g., 02.2025"})})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:b,onChange:T=>S(T.target.value),placeholder:"Implementation Period"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Destination Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{className:"form-control form-control-sm",value:C,onChange:T=>O(T.target.value),placeholder:"Destination Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-map-marker-alt"})})})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Destination Country Code"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:M,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Country"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:_,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"small",children:"Remark"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:c,onChange:T=>f(T.target.value),placeholder:"Remark"})]})}),e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-2",onClick:Q,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Part"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-2",onClick:()=>alert("Upload placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-upload-alt mr-1"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Download template placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-download-alt mr-1"})," Template"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",style:{fontSize:"0.8rem"},children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:130,textAlign:"center"},children:"Part No"}),e.jsx("th",{style:{width:50,textAlign:"center"},children:"Suffix"}),e.jsx("th",{style:{textAlign:"center"},children:"Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Parent"}),e.jsx("th",{style:{width:50,textAlign:"center"},children:"Supplier ID"}),e.jsx("th",{style:{textAlign:"center"},children:"Supplier Name"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"L"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"W"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"H"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"Wt/pc"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"Qty"}),e.jsx("th",{style:{width:70,textAlign:"center"},children:"Total Wt"}),e.jsx("th",{style:{width:70,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"13",className:"text-center text-muted",children:"- No parts added yet -"})}):w.map((T,X)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T.partNo,onChange:K=>Y(X,"partNo",K.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T.suffix,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T.name,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T.parent,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T.supplierId,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T.supplierName,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:T.L,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:T.W,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:T.H,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:T.wtPerPc,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-control form-control-sm",style:{textAlign:"right"},value:T.qty,onChange:K=>Y(X,"qty",K.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T.totalWt,readOnly:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>B(X),children:e.jsx("i",{className:"fas fa-trash"})})})]},X))})]})})]}),e.jsxs("div",{className:"card-footer text-right",style:{marginTop:8},children:[e.jsxs("button",{type:"button",className:"btn btn-primary mr-2",onClick:z,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{type:"button",className:"btn btn-outline-secondary",onClick:a,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),y&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(Ce,{show:y,onClose:()=>I(!1),onSelect:te})}),e.jsx("style",{children:`
        /* Modal Backdrop Styling */
        .np-modal-backdrop {
          position: fixed;                    /* Fixed position overlay */
          inset: 0;                          /* Cover entire viewport */
          background: rgba(0,0,0,0.35);      /* Semi-transparent dark background */
          z-index: 2000;                     /* High z-index for overlay */
          display: flex;                     /* Flexbox for centering */
          align-items: center;               /* Vertical centering */
          justify-content: center;           /* Horizontal centering */
          padding: 1rem;                     /* Padding around modal */
        }
        
        /* Modal Container Styling */
        .np-modal { 
          width: 100%;                       /* Full width within constraints */
          z-index: 2001;                     /* Higher z-index than backdrop */
        }
        
        /* Table Cell Alignment */
        .table-sm td, .table-sm th { 
          vertical-align: middle;            /* Middle vertical alignment for table cells */
        }
      `})]}):null}function la({code:s,setCode:a,filterName:r,setFilterName:t,filterCfc:n,setFilterCfc:m,filterType:j,setFilterType:h,filterRemark:o,setFilterRemark:d,implementationPeriod:i,setImplementationPeriod:p,destinationCode:c,setDestinationCode:f,destinationCountryCode:k,setDestinationCountryCode:g,country:v,setCountry:N,handleFilter:b,handleClearFilters:S,handleOpenNew:C}){const E=M=>{f(M);const F=Ye.find(_=>_.destCode===M);F?(g(F.code),N(F.country)):(g(""),N(""))};return e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"form-row mb-3",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Model Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:s,onChange:M=>a(M.target.value),className:"form-control form-control-sm",placeholder:"Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search code",onClick:()=>alert("Search code placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Model Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:M=>t(M.target.value),placeholder:"Name"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"CFC"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:M=>m(M.target.value),placeholder:"CFC"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:M=>h(M.target.value),placeholder:"Type"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Implementation Period"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:i,onChange:M=>p(M.target.value),placeholder:"Implementation Period"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Destination Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:M=>E(M.target.value),placeholder:"Destination Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-map-marker-alt"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Destination Country Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:k,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Country"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"form-group col-md-12",children:[e.jsx("label",{className:"small mb-1",children:"Remark"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:M=>d(M.target.value),placeholder:"Remark"})]}),e.jsxs("div",{className:"form-group col-md-12 text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:b,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:S,children:[e.jsx("i",{className:"fas fa-undo mr-1"})," Reset"]})]})]})})}function aa({models:s,handleDeleteModel:a,handleEditModel:r,currentPage:t,setCurrentPage:n,pageSize:m}){const j=Math.ceil(s.length/m),h=s.slice((t-1)*m,t*m);return e.jsxs("div",{className:"card-body pt-0",children:[e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{className:"thead-light",style:{position:"sticky",top:0,zIndex:5,fontSize:"0.8rem"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50,textAlign:"center"},children:"No"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Name"}),e.jsx("th",{style:{textAlign:"center"},children:"CFC"}),e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Project Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Impl Period"}),e.jsx("th",{style:{textAlign:"center"},children:"Dest Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country"}),e.jsx("th",{style:{textAlign:"center"},children:"Remark"}),e.jsx("th",{style:{textAlign:"center"},children:"Parts"}),e.jsx("th",{style:{width:120,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{style:{fontSize:"0.8rem"},children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"13",className:"text-center",children:"No models found"})}):h.map((o,d)=>{var p;const i=Ye.find(c=>c.destCode===o.model_destination_code);return e.jsxs("tr",{children:[e.jsx("td",{children:(t-1)*m+d+1}),e.jsx("td",{style:{textAlign:"center"},children:o.model_code}),e.jsx("td",{style:{textAlign:"center"},children:o.model_name}),e.jsx("td",{style:{textAlign:"center"},children:o.model_cfc}),e.jsx("td",{style:{textAlign:"center"},children:o.model_type}),e.jsx("td",{style:{textAlign:"center"},children:(p=o.project)==null?void 0:p.project_code}),e.jsx("td",{style:{textAlign:"center"},children:o.model_implementation_period}),e.jsx("td",{style:{textAlign:"center"},children:o.model_destination_code}),e.jsx("td",{style:{textAlign:"center"},children:i?i.code:""}),e.jsx("td",{style:{textAlign:"center"},children:i?i.country:""}),e.jsx("td",{style:{textAlign:"center"},children:o.model_remark}),e.jsx("td",{style:{textAlign:"right"},children:Array.isArray(o.parts)?o.parts.length:0}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>r((t-1)*m+d),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>a((t-1)*m+d),children:e.jsx("i",{className:"fas fa-trash"})})]})]},d)})})]})}),e.jsx(Ie,{currentPage:t,totalPages:j,totalItems:s.length,pageSize:m,onPageChange:n})]})}function na(){const[s,a]=l.useState(""),[r,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(""),[k,g]=l.useState(""),[v,N]=l.useState(""),[b,S]=l.useState(""),[C,E]=l.useState(!1),[M,F]=l.useState(null),[_,D]=l.useState(null),[w,U]=l.useState([]),[y,I]=l.useState([]),[L,W]=l.useState(1),Q=10;l.useEffect(()=>{fetch("/packing-cost-fe/models.json").then(q=>{if(!q.ok)throw new Error("Network response was not ok");return q.json()}).then(q=>{const R=q.sort((H,J)=>new Date(J.model_implementation_period)-new Date(H.model_implementation_period));U(R),I([])}).catch(q=>{console.error("Error fetching models:",q)})},[]);function te(){if(!s&&!r&&!n&&!j&&!o&&!i&&!c&&!k){I([...w].reverse()),W(1);return}let q=w.filter(R=>{var H,J,$,x,u,A,G,P;return(!s||((H=R.model_code)==null?void 0:H.toLowerCase().includes(s.toLowerCase())))&&(!r||((J=R.project.project_code)==null?void 0:J.toLowerCase().includes(r.toLowerCase())))&&(!n||(($=R.model_name)==null?void 0:$.toLowerCase().includes(n.toLowerCase())))&&(!j||((x=R.model_cfc)==null?void 0:x.toLowerCase().includes(j.toLowerCase())))&&(!o||((u=R.model_type)==null?void 0:u.toLowerCase().includes(o.toLowerCase())))&&(!i||((A=R.model_remark)==null?void 0:A.toLowerCase().includes(i.toLowerCase())))&&(!c||((G=R.model_implementation_period)==null?void 0:G.toLowerCase().includes(c.toLowerCase())))&&(!k||((P=R.model_destination_code)==null?void 0:P.toLowerCase().includes(k.toLowerCase())))});I(q),W(1)}function B(){a(""),t(""),m(""),h(""),d(""),p(""),f(""),g(""),N(""),S(""),I([]),W(1)}function Y(){F(null),D(null),E(!0)}function O(){E(!1),F(null),D(null)}function z(K){var q,R,H,J,$,x,u,A;if(M!==null){const G=w.map((V,Z)=>Z===M?K:V);U(G);const P=y.map(V=>V.model_code===_.model_code&&V.model_name===_.model_name&&V.model_remark===_.model_remark?K:V);I(P)}else{const G=[K,...w];U(G),(!s||((q=K.model_code)==null?void 0:q.toLowerCase().includes(s.toLowerCase())))&&(!r||((R=K.project.project_code)==null?void 0:R.toLowerCase().includes(r.toLowerCase())))&&(!n||((H=K.model_name)==null?void 0:H.toLowerCase().includes(n.toLowerCase())))&&(!j||((J=K.model_cfc)==null?void 0:J.toLowerCase().includes(j.toLowerCase())))&&(!o||(($=K.model_type)==null?void 0:$.toLowerCase().includes(o.toLowerCase())))&&(!i||((x=K.model_remark)==null?void 0:x.toLowerCase().includes(i.toLowerCase())))&&(!c||((u=K.model_implementation_period)==null?void 0:u.toLowerCase().includes(c.toLowerCase())))&&(!k||((A=K.model_destination_code)==null?void 0:A.toLowerCase().includes(k.toLowerCase())))&&I([K,...y])}console.log("Model saved:",K),E(!1),F(null),D(null)}function T(K){const q=y[K],R=w.findIndex(H=>H.model_code===q.model_code&&H.model_name===q.model_name&&H.model_remark===q.model_remark);console.log("Editing model:",q),console.log("Original index:",R),F(R),D(q),E(!0)}function X(K){if(!confirm("Delete this model?"))return;const q=y[K],R=w.findIndex(H=>H.model_code===q.model_code&&H.model_name===q.model_name&&H.model_remark===q.model_remark);if(R!==-1){const H=w.filter(($,x)=>x!==R);U(H);const J=y.filter(($,x)=>x!==K);I(J)}}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Model List"})}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:Y,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add New Model"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",onClick:()=>alert("Upload placeholder"),children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Template",onClick:()=>alert("Download template placeholder"),children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(la,{code:s,setCode:a,projectCode:r,setProjectCode:t,filterName:n,setFilterName:m,filterCfc:j,setFilterCfc:h,filterType:o,setFilterType:d,filterRemark:i,setFilterRemark:p,implementationPeriod:c,setImplementationPeriod:f,destinationCode:k,setDestinationCode:g,destinationCountryCode:v,setDestinationCountryCode:N,country:b,setCountry:S,handleFilter:te,handleClearFilters:B,handleOpenNew:Y}),e.jsx(aa,{models:y,handleDeleteModel:X,handleEditModel:T,currentPage:L,setCurrentPage:W,pageSize:Q})]}),e.jsx(ta,{show:C,onClose:O,onSave:z,initialData:_})]})}function ra({show:s=!1,onClose:a=()=>{},onSave:r=()=>{},initialData:t=null}){const[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(""),[k,g]=l.useState(""),[v,N]=l.useState(""),[b,S]=l.useState(""),[C,E]=l.useState(""),[M,F]=l.useState(""),[_,D]=l.useState(""),[w,U]=l.useState(""),[y,I]=l.useState(""),[L,W]=l.useState(""),[Q,te]=l.useState(""),[B,Y]=l.useState([]),[O,z]=l.useState(!1),[T,X]=l.useState({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),[K,q]=l.useState(!1),[R,H]=l.useState("parent");l.useEffect(()=>{var P,V,Z;s&&(t?(m(t.partNo||""),h(t.uniqueNo||""),d(t.suffixCode||""),p(t.partName||""),f(t.parentPartNo||""),g(t.suppCode||""),N(t.supplierName||""),S(t.supplierAddress||""),E(t.plantCode||""),F(t.uniqueNo2||""),D(((P=t.dimensions)==null?void 0:P.L)||""),U(((V=t.dimensions)==null?void 0:V.W)||""),I(((Z=t.dimensions)==null?void 0:Z.H)||""),W(t.weightPerPc||""),te(t.qtyBox||""),Y(t.childParts||[]),z(!1),X({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})):(m(""),h(""),d(""),p(""),f(""),g(""),N(""),S(""),E(""),F(""),D(""),U(""),I(""),W(""),te(""),Y([]),z(!1),X({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})))},[s,t]);function J(P,V,Z){const ee=Number(P)||0,oe=Number(V)||0,me=Number(Z)||0;return!ee||!oe||!me?"":(ee*oe*me/1e6).toFixed(3)}function $(P,V){const Z=Number(P)||0,ee=Number(V)||0;return!Z||!ee?"":(Z*ee).toFixed(3)}function x(P){Y(V=>V.filter((Z,ee)=>ee!==P))}function u(){if(!n.trim()){alert("Please enter Part No");return}const P={partNo:n,uniqueNo:j,suffixCode:o,partName:i,parentPartNo:c,suppCode:k,supplierName:v,supplierAddress:b,plantCode:C,uniqueNo2:M,dimensions:{L:_,W:w,H:y},weightPerPc:Number(L)||0,qtyBox:Number(Q)||0,totalWeight:Number($(L,Q))||0,childParts:B.slice()};r(P)}function A(P){P&&f(P.partNo),q(!1)}function G(P){if(P&&P.length>0){const V=P.map(Z=>({partNo:Z.partNo||Z[0]||"",suffix:Z.suffix||Z[1]||"",uniqueNo:Z.uniqueNo||"",name:Z.name||Z[2]||"",parent:Z.parent||"",supplierId:Z.supplierId||"",supplierName:Z.supplierName||Z[3]||"",L:Z.L||"",W:Z.W||"",H:Z.H||"",wtPerPc:Z.wtPerPc||"",qty:Z.qty||"",totalWt:Z.totalWt||""}));Y(Z=>[...Z,...V])}q(!1)}return s?e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:P=>{P.target===P.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:980},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Part New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6 d-flex",children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{className:"form-control form-control-sm mb-1",value:n,onChange:P=>m(P.target.value)})]}),e.jsxs("div",{style:{width:"30%",marginLeft:8},children:[e.jsx("label",{className:"small mb-1",children:"Suffix Code"}),e.jsx("input",{className:"form-control form-control-sm mb-1",value:o,onChange:P=>d(P.target.value)})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Parent Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:P=>f(P.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>{H("parent"),q(!0)},children:e.jsx("i",{className:"fas fa-search"})})})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Unique No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:j,onChange:P=>h(P.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>alert("Flash/Generate Unique No"),children:e.jsx("i",{className:"fas fa-bolt"})})})]})]}),e.jsx("div",{className:"form-group col-md-6"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:k,onChange:P=>g(P.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>alert("Search Supplier placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",value:v,readOnly:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Address"}),e.jsx("input",{className:"form-control form-control-sm",value:b,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Plant Code"}),e.jsx("input",{className:"form-control form-control-sm",value:C,readOnly:!0})]})]}),e.jsxs("div",{className:"form-row align-items-end",children:[e.jsxs("div",{className:"form-group col-md-6 mb-0",children:[e.jsx("label",{className:"small",children:"Dimension (mm)"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4 mb-0",children:[e.jsx("label",{className:"small mb-1",children:"Length"}),e.jsx("input",{className:"form-control form-control-sm",value:_,onChange:P=>D(P.target.value)})]}),e.jsxs("div",{className:"form-group col-md-4 mb-0",children:[e.jsx("label",{className:"small mb-1",children:"Width"}),e.jsx("input",{className:"form-control form-control-sm",value:w,onChange:P=>U(P.target.value)})]}),e.jsxs("div",{className:"form-group col-md-4 mb-0",children:[e.jsx("label",{className:"small mb-1",children:"Height"}),e.jsx("input",{className:"form-control form-control-sm",value:y,onChange:P=>I(P.target.value)})]})]})]}),e.jsx("div",{className:"form-group col-md-6 mb-0 d-flex align-items-end",children:e.jsxs("div",{style:{width:"100%"},children:[e.jsx("label",{className:"small mb-1",children:"Volume (m³)"}),e.jsx("input",{className:"form-control form-control-sm",value:J(_,w,y),readOnly:!0})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6 d-flex",children:[e.jsxs("div",{style:{flex:1,marginRight:8},children:[e.jsx("label",{className:"small mb-1",children:"Weight/PC (gr)"}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:L,onChange:P=>W(P.target.value)})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"small mb-1",children:"Qty/Box"}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:Q,onChange:P=>te(P.target.value)})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Total Weight (gr)"}),e.jsx("input",{className:"form-control form-control-sm",value:$(L,Q),readOnly:!0})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{H("child"),q(!0)},children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Child Part"]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Unique No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Parent"}),e.jsx("th",{children:"Supplier ID"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"L"}),e.jsx("th",{children:"W"}),e.jsx("th",{children:"H"}),e.jsx("th",{children:"Wt/PC"}),e.jsx("th",{children:"Qty"}),e.jsx("th",{children:"Total Wt"}),e.jsx("th",{style:{width:90},children:"Action"})]})}),e.jsx("tbody",{children:B.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"15",className:"text-center py-4 text-muted",children:"No Data Found"})}):B.map((P,V)=>e.jsxs("tr",{children:[e.jsx("td",{children:V+1}),e.jsx("td",{children:P.partNo}),e.jsx("td",{children:P.suffix}),e.jsx("td",{children:P.uniqueNo}),e.jsx("td",{children:P.name}),e.jsx("td",{children:P.parent}),e.jsx("td",{children:P.supplierId}),e.jsx("td",{children:P.supplierName}),e.jsx("td",{children:P.L}),e.jsx("td",{children:P.W}),e.jsx("td",{children:P.H}),e.jsx("td",{children:P.wtPerPc}),e.jsx("td",{children:P.qty}),e.jsx("td",{children:P.totalWt}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>x(V),children:e.jsx("i",{className:"fas fa-trash"})})})]},V))})]})})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:u,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{className:"btn btn-outline-secondary",onClick:a,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),K&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(Ce,{show:K,mode:R==="parent"?"single":"multi",onClose:()=>q(!1),onSelect:R==="parent"?A:G})}),e.jsx("style",{children:`
        .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
        .np-modal { width: 100%; max-height: 95vh; overflow: auto; z-index: 2001; }
        .table-sm td, .table-sm th { vertical-align: middle; }
      `})]}):null}function Us({show:s=!1,onClose:a=()=>{},onConfirm:r=()=>{},title:t="Confirmation",message:n="Are you sure?"}){return s?e.jsxs("div",{className:"modal-backdrop",children:[e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:t}),e.jsx("button",{type:"button",className:"close",onClick:a,children:e.jsx("span",{children:"×"})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:n})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:r,children:"Delete"})]})]})}),e.jsx("style",{jsx:!0,children:`
        .modal-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1050;
        }
        .modal-dialog {
          width: 500px;
        }
      `})]}):null}const oa=Fs.map((s,a)=>({id:a,partNo:s[0],name:s[1],supplierName:s[2],suffix:"A",uniqueNo:`UN-00${a+1}`,parentPartNo:null,childParts:[],dimensions:{L:10,W:10,H:10},qtyBox:1,totalWeight:1}));function ia(){const[s,a]=l.useState(""),[r,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState([]),[k,g]=l.useState([]),[v,N]=l.useState(!1),[b,S]=l.useState(null),[C,E]=l.useState(!1),[M,F]=l.useState(null),[_,D]=l.useState(!1),[w,U]=l.useState(null),[y,I]=l.useState(10),[L,W]=l.useState(1),Q=k.length;l.useEffect(()=>{f(oa),g([])},[]);function te(){if(!s&&!r&&!n&&!j&&!o&&!i){g([...c].reverse()),W(1);return}let u=c.filter(A=>{const G=!s||A.partNo.toLowerCase().includes(s.toLowerCase()),P=!r||A.uniqueNo&&A.uniqueNo.toLowerCase().includes(r.toLowerCase()),V=!n||A.supplierId&&A.supplierId.toLowerCase().includes(n.toLowerCase()),Z=!j||A.supplierName.toLowerCase().includes(j.toLowerCase()),ee=!o||A.parentPartNo&&A.parentPartNo.toLowerCase().includes(o.toLowerCase()),oe=!i||i==="Yes"&&A.childParts&&A.childParts.length>0||i==="No"&&(!A.childParts||A.childParts.length===0);return G&&P&&V&&Z&&ee&&oe});g(u),W(1)}function B(){a(""),t(""),m(""),h(""),d(""),p(""),g([]),W(1)}function Y(){S(null),N(!0)}function O(){S(null),N(!1)}function z(x){if(b){const u=c.map(G=>G.id===b.id?{...G,...x}:G);f(u);const A=k.map(G=>G.id===b.id?{...G,...x}:G);g(A)}else{const u={...x,id:c.length};f(A=>[u,...A])}N(!1),S(null)}function T(x){S(x),N(!0)}function X(){alert("Upload placeholder")}function K(){alert("Template placeholder")}function q(x){F(x),E(!0)}function R(){if(M){const x=c.filter(A=>A.id!==M.id);f(x);const u=k.filter(A=>A.id!==M.id);g(u),F(null)}E(!1)}function H(x){W(x)}function J(x){U(x),D(!0)}function $(x){if(!x){D(!1),U(null);return}const u=Array.isArray(x)?x[0]:x;if(!u){D(!1),U(null);return}const A=u.partNo??u.part_number??u.code??"",G=u.partNo??u.partNoParent??u.parentPartNo??"";w==="partNo"?a(A):w==="parentPart"&&d(G||A),D(!1),U(null)}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Part List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:Y,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Part"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:X,title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:K,title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:s,onChange:x=>a(x.target.value),placeholder:"Part No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Pick Part",onClick:()=>J("partNo"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Unique No"}),e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:x=>t(x.target.value),placeholder:"Unique No"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier ID"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:n,onChange:x=>m(x.target.value),placeholder:"Supplier ID"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Supplier",onClick:()=>alert("search supplier placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",value:j,onChange:x=>h(x.target.value),placeholder:"Supplier Name"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Parent Part"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:o,onChange:x=>d(x.target.value),placeholder:"Parent Part"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Pick Parent Part",onClick:()=>J("parentPart"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Has Subparts?"}),e.jsxs("select",{className:"form-control form-control-sm",value:i,onChange:x=>p(x.target.value),children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:te,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:B,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx("div",{className:"table-responsive mb-3",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Unique No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Parent Part No"}),e.jsx("th",{children:"Subparts"}),e.jsx("th",{children:"L"}),e.jsx("th",{children:"W"}),e.jsx("th",{children:"H"}),e.jsx("th",{children:"Qty/Box"}),e.jsx("th",{children:"Total Wt"}),e.jsx("th",{style:{width:110},children:"Action"})]})}),e.jsx("tbody",{children:k.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center py-4 text-muted",children:"No Data Found"})}):k.slice((L-1)*y,L*y).map((x,u)=>{var A,G,P;return e.jsxs("tr",{children:[e.jsx("td",{children:(L-1)*y+u+1}),e.jsx("td",{children:x.partNo}),e.jsx("td",{children:x.suffixCode??x.suffix}),e.jsx("td",{children:x.uniqueNo}),e.jsx("td",{children:x.partName??x.name}),e.jsx("td",{children:x.supplierName}),e.jsx("td",{children:x.parentPartNo??x.parent}),e.jsx("td",{children:x.childParts?x.childParts.length:x.subparts?x.subparts.length:0}),e.jsx("td",{children:((A=x.dimensions)==null?void 0:A.L)??x.L}),e.jsx("td",{children:((G=x.dimensions)==null?void 0:G.W)??x.W}),e.jsx("td",{children:((P=x.dimensions)==null?void 0:P.H)??x.H}),e.jsx("td",{children:x.qtyBox??x.qty}),e.jsx("td",{children:x.totalWeight??x.totalWt}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>T(x),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>q(x),children:e.jsx("i",{className:"fas fa-trash"})})]})]},u)})})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>H(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>H(Math.max(1,L-1)),children:"<"}),[...Array(Math.max(1,Math.ceil(Q/y))).keys()].map(x=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${L===x+1?"btn-primary":"btn-light"}`,onClick:()=>H(x+1),children:x+1},x)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>H(Math.min(Math.ceil(Q/y)||1,L+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",Q]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[y," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>I(10),children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>I(25),children:"25"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>I(50),children:"50"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})]}),e.jsx(ra,{show:v,onClose:O,onSave:z,initialData:b}),e.jsx(Us,{show:C,onClose:()=>E(!1),onConfirm:R,title:"Deletion Confirmation",message:"Do you want to delete this data?"}),e.jsx(Ce,{show:_,onClose:()=>{D(!1),U(null)},onSelect:$})]})}const ca=[{code:"5062",name:"MENARA TERUS MAKMUR",address:"Jl. Jababeka XI Blok H-3 No.12, Kawasan Industri Jababeka, Cikarang, Bekasi"},{code:"722E",name:"TOYOTA MOTOR THAILAND",address:"186/1 Moo 1, Old Railway Road, Samrong Tai, Phra Pradaeng, Samut Prakan 10130, Thailand"},{code:"5453",name:"VELASTO INDONESIA",address:"Kp. Nagrog RT04 / RW02 Desa Kertamukti, Kecamatan Campaka, Purwakarta, Jawa Barat"},{code:"5365",name:"TOKAI RUBBER INDONESIA",address:"Jl. Mitra Timur II Blok E No. 13-14, Parungmulya, Ciampel, Karawang, Jawa Barat"},{code:"5150",name:"NAMICOH INDONESIA",address:"EJIP Industrial Park, Plot 6B-1, Cikarang Selatan, Bekasi, Jawa Barat"},{code:"5028",name:"GARUDA METAL UTAMA",address:"Jl. Kapuk Kamal Raya No.28, RT.6/RW.2, Kamal Muara, Kec. Penjaringan, Jkt Utara, Daerah Khusus Ibukota Jakarta 14470"},{code:"5335",name:"DINAR MAKMUR",address:"Jl. Raya Serang No.KM. 78, RW.3, Cijeruk, Kec. Kibin, Kabupaten Serang, Banten 42185"},{code:"5006",name:"NUSAHADI CITRAHARMONIS",address:"Jl. Raya Bekasi No.KM. 28, RT.005/RW.004, Medan Satria, Kecamatan Medan Satria, Kota Bks, Jawa Barat 17132"},{code:"5151",name:"SAKURA JAVA INDONESIA",address:"Kawasan Industri EJIP, Plot 8C/D, Cikarang Selatan, Bekasi, Jawa Barat 17530"},{code:"5010",name:"3 M INDONESIA",address:"Perkantoran Hijau Arkadia, Tower F, 8th Floor, Jl. TB Simatupang No.Kav. 88, RT.1/RW.1, Kebagusan, Ps. Minggu, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12520"},{code:"5002",name:"ASALTA MANDIRI AGUNG",address:"Jl. Pulo Buaran Raya No.1A, RT.1/RW.8, Pulo Gadung, Kota Jakarta Timur, Daerah Khusus Ibukota Jakarta 13930"}];function da({show:s=!1,onClose:a=()=>{},onSave:r=()=>{},initialData:t=null}){const[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState("");l.useEffect(()=>{s&&(t?(m(t.code||""),h(t.name||""),d(t.address||"")):(m(""),h(""),d("")))},[s,t]);function i(){if(!n.trim()||!j.trim()){alert("Please enter Supplier Code and Name");return}r({code:n,name:j,address:o})}return s?e.jsxs("div",{className:"modal-backdrop",children:[e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:t?"Edit Supplier":"Add Supplier"}),e.jsx("button",{type:"button",className:"close",onClick:a,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control",value:n,onChange:p=>m(p.target.value),readOnly:!!t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier Name"}),e.jsx("input",{type:"text",className:"form-control",value:j,onChange:p=>h(p.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address"}),e.jsx("textarea",{className:"form-control",rows:"3",value:o,onChange:p=>d(p.target.value)})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:i,children:"Save"})]})]})}),e.jsx("style",{jsx:!0,children:`
        .modal-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1050;
        }
        .modal-dialog {
          width: 500px;
        }
      `})]}):null}function ma(){const[s,a]=l.useState([]),[r,t]=l.useState([]),[n,m]=l.useState(""),[j,h]=l.useState(""),[o,d]=l.useState(""),[i,p]=l.useState(!1),[c,f]=l.useState(null),[k,g]=l.useState(!1),[v,N]=l.useState(null),[b,S]=l.useState(1),[C,E]=l.useState(5);l.useEffect(()=>{const L=ca.map((W,Q)=>({...W,id:Q}));a(L),t([])},[]);function M(){let L=s.filter(W=>(!n||W.code.toLowerCase().includes(n.toLowerCase()))&&(!j||W.name.toLowerCase().includes(j.toLowerCase()))&&(!o||W.address.toLowerCase().includes(o.toLowerCase())));t(L),S(1)}function F(){m(""),h(""),d(""),t([]),S(1)}function _(){f(null),p(!0)}function D(L){f(L),p(!0)}function w(L){if(c){const W=s.map(Q=>Q.id===c.id?{...c,...L}:Q);a(W),t(W)}else{const Q=[{...L,id:s.length},...s];a(Q),t(Q)}p(!1),f(null)}function U(L){N(L),g(!0)}function y(){if(v){const L=s.filter(W=>W.id!==v.id);a(L),t(L),N(null)}g(!1)}const I=r.slice((b-1)*C,b*C);return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Supplier List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{className:"btn btn-sm btn-success mr-2",onClick:_,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Supplier"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Upload placeholder"),title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Template placeholder"),title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:L=>m(L.target.value),placeholder:"Supplier Code"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:L=>h(L.target.value),placeholder:"Supplier Name"})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Address"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:L=>d(L.target.value),placeholder:"Address"})]})})}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-right",children:[e.jsxs("button",{className:"btn btn-sm btn-primary mr-2",onClick:M,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:F,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Address"}),e.jsx("th",{style:{width:110},children:"Action"})]})}),e.jsx("tbody",{children:I.length>0?I.map((L,W)=>e.jsxs("tr",{children:[e.jsx("td",{children:(b-1)*C+W+1}),e.jsx("td",{children:L.code}),e.jsx("td",{children:L.name}),e.jsx("td",{children:L.address}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>D(L),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>U(L),children:e.jsx("i",{className:"fas fa-trash"})})]})]},L.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4 text-muted",children:"No Data Found"})})})]})}),e.jsx(Ie,{currentPage:b,totalItems:r.length,itemsPerPage:C,onPageChange:S,onItemsPerPageChange:E})]})]}),e.jsx(da,{show:i,onClose:()=>p(!1),onSave:w,initialData:c}),e.jsx(Us,{show:k,onClose:()=>g(!1),onConfirm:y,title:"Deletion Confirmation",message:"Do you want to delete this data?"})]})}function ua(){const s=_e(),a=()=>{window.confirm("Are you sure you want to clear all saved data?")&&(localStorage.clear(),alert("All data cleared!"),s("/"))};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Settings"})})}),e.jsx("div",{className:"card-body",children:e.jsx("button",{className:"btn btn-danger",onClick:a,children:"Clear All Data"})})]})})}function ha({onSave:s}){const[a,r]=l.useState("inland"),[t,n]=l.useState("02.2025"),[m,j]=l.useState("47.7"),[h,o]=l.useState("86.177"),[d,i]=l.useState("86.177"),[p,c]=l.useState("60.577"),[f,k]=l.useState("64"),[g,v]=l.useState("86.177"),[N,b]=l.useState("106.835"),[S,C]=l.useState("63.249"),[E,M]=l.useState("1"),[F,_]=l.useState("0,31"),[D,w]=l.useState("6"),[U,y]=l.useState("0,31"),[I,L]=l.useState("5,83"),[W,Q]=l.useState(""),[te,B]=l.useState("0,60"),[Y,O]=l.useState("5"),[z,T]=l.useState(!1),X=()=>{const R={tab:a,inland:{period:t,containerM3:m,rent40ft:h,rent20ft:d,milkrunRate:p,milkrunEff:f},labor:{period:t,dlRate:g,idlRate:N,facilityRate:S},manHour:{period:t,receiving:E,inspection:F,deliveryCourse:D,supplyPallet:U,sortingSupply:I,pickPacking:W,vanning:te,emptyBox:Y}};T(!0),typeof s=="function"&&s(R),setTimeout(()=>T(!1),1500)},K=()=>{n("02.2025"),j("47.7"),o("86.177"),i("86.177"),c("60.577"),k("64"),v("86.177"),b("106.835"),C("63.249"),M("1"),_("0,31"),w("6"),y("0,31"),L("5,83"),Q(""),B("0,60"),O("5")},q="form-control form-control-sm";return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Parameters"})}),e.jsx("div",{className:"ml-auto btn-group btn-group-sm",children:["inland","labor","manHour","history"].map(R=>e.jsxs("button",{className:`btn btn-sm ${a===R?"btn-primary":"btn-outline-secondary"}`,onClick:()=>r(R),children:[R==="inland"&&"Inland",R==="labor"&&"Labor Cost",R==="manHour"&&"Man Hour",R==="history"&&"History"]},R))})]}),e.jsxs("div",{className:"card-body",children:[a==="inland"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:q,value:t,onChange:R=>n(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Container Volume M3"}),e.jsx("input",{className:q,value:m,onChange:R=>j(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"40 feet container rent rate"}),e.jsx("input",{className:q,value:h,onChange:R=>o(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"20 feet container rent rate"}),e.jsx("input",{className:q,value:d,onChange:R=>i(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Milkrun rate (per m3)"}),e.jsx("input",{className:q,value:p,onChange:R=>c(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Milkrun efficiency rate (%)"}),e.jsx("input",{className:q,value:f,onChange:R=>k(R.target.value)})]})]}),a==="labor"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:q,value:t,onChange:R=>n(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Direct Labor Rate (DL) Rp/Hour"}),e.jsx("input",{className:q,value:g,onChange:R=>v(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Indirect Labor Rate (IDL) Rp/M3"}),e.jsx("input",{className:q,value:N,onChange:R=>b(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Facility Others Rate"}),e.jsx("input",{className:q,value:S,onChange:R=>C(R.target.value)})]})]}),a==="manHour"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:q,value:t,onChange:R=>n(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Receiving"}),e.jsx("input",{className:q,value:E,onChange:R=>M(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Inspection"}),e.jsx("input",{className:q,value:F,onChange:R=>_(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Delivery Course"}),e.jsx("input",{className:q,value:D,onChange:R=>w(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Supply (Pallet)"}),e.jsx("input",{className:q,value:U,onChange:R=>y(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Sorting & Supply (Non Pallet)"}),e.jsx("input",{className:q,value:I,onChange:R=>L(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Pick & Packing"}),e.jsx("input",{className:q,value:W,onChange:R=>Q(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Vanning"}),e.jsx("input",{className:q,value:te,onChange:R=>B(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Empty Box/Pallet Return"}),e.jsx("input",{className:q,value:Y,onChange:R=>O(R.target.value)})]})]}),a==="history"&&e.jsx("div",{className:"text-center text-muted py-4",children:"History tab content will appear here."})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-primary mr-2",onClick:X,children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:K,children:"Cancel"}),z&&e.jsx("span",{className:"ml-3 text-success",children:"Parameters saved"})]})]})})}function xa(){const s=_e(),a=()=>{s(-1)};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Notification Detail"}),e.jsx("div",{className:"card-tools",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date :"})," 20 Feb 2025 13:10"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"From :"})," Jonathan Hairi"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dept :"})," PPMD"]}),e.jsx("hr",{}),e.jsx("p",{children:"Harus diganti Qty menjadi 2"}),e.jsx("p",{children:"Agar lebih aman ketika dikirim ke supplier lain"}),e.jsx("p",{children:"dan diganti Material No nya dengan Mat No : #12312312 00"}),e.jsx("p",{children:"dari supplier Materindo Indigo"})]})]})})}function fe({children:s}){return be().user?s:e.jsx(pt,{to:"/login",replace:!0})}function pa(){const s=be(),r=Ps().pathname==="/login",t=!!s.user&&!r;return e.jsxs("div",{className:"wrapper",children:[t&&e.jsx(Gl,{}),t&&e.jsx(Vl,{}),e.jsx("div",{className:t?"content-wrapper":"",children:e.jsxs(xt,{children:[e.jsx(re,{path:"/login",element:e.jsx(Jl,{})}),e.jsx(re,{path:"/",element:e.jsx(fe,{children:e.jsx(ja,{})})}),e.jsx(re,{path:"/projects",element:e.jsx(fe,{children:e.jsx(sa,{})})}),e.jsx(re,{path:"/models",element:e.jsx(fe,{children:e.jsx(na,{})})}),e.jsx(re,{path:"/parts",element:e.jsx(fe,{children:e.jsx(ia,{})})}),e.jsx(re,{path:"/suppliers",element:e.jsx(fe,{children:e.jsx(ma,{})})}),e.jsx(re,{path:"/packing/cps",element:e.jsx(il,{})}),e.jsx(re,{path:"/packing/dpi",element:e.jsx(Ll,{})}),e.jsx(re,{path:"/packing/CalculatePackingCost",element:e.jsx(Hl,{})}),e.jsx(re,{path:"/packing/ComparisonPage",element:e.jsx(Ul,{})}),e.jsx(re,{path:"/module-type",element:e.jsx(Ss,{})}),e.jsx(re,{path:"/material",element:e.jsx(Ss,{})}),e.jsx(re,{path:"/settings",element:e.jsx(fe,{children:e.jsx(ua,{})})}),e.jsx(re,{path:"/params",element:e.jsx(fe,{children:e.jsx(ha,{})})}),e.jsx(re,{path:"/notification-detail",element:e.jsx(fe,{children:e.jsx(xa,{})})})]})}),t&&e.jsxs("footer",{className:"main-footer",children:[e.jsxs("div",{className:"float-right d-none d-sm-block",children:[e.jsx("b",{children:"Version"})," 0.1.0"]}),e.jsxs("strong",{children:["© ",new Date().getFullYear()," My Company."]})]})]})}function ja(){var a,r,t;const s=be();return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-sm-6",children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("small",{children:["User: ",(a=s.user)==null?void 0:a.username," | Dept: ",(r=s.user)==null?void 0:r.department," | Role: ",(t=s.user)==null?void 0:t.role]})]})})})}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid",children:e.jsx(zl,{})})})]})}const fa="/packing-cost-fe/";ut(document.getElementById("root")).render(e.jsx(de.StrictMode,{children:e.jsx(ht,{basename:fa,children:e.jsx(Lt,{children:e.jsx(pa,{})})})}));
