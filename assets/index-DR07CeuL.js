import{r as l,j as e,R as ke}from"./react-JHr-MqlU.js";import{R as us,c as Nt}from"./react-dom-ByPjVLjt.js";import{N as Se,B as bt}from"./react-router-dom-C8MBRXQb.js";import{c as He,a as Ts,d as gt,e as Ne,f as vt}from"./react-router-CrFtL5GL.js";import{M as Ct,a as yt,b as St,c as wt,B as As,F as Pt,L as kt,I as It}from"./reactstrap-Sv9f_Q5O.js";import{B as _t}from"./react-chartjs-2-B_DtYEyI.js";import{C as At,a as Mt,L as Dt,b as Lt,p as Tt,c as Et,d as Rt}from"./chart.js-zNwYC2Re.js";import"./classnames-C9FZUsQl.js";import"./scheduler-DYLXRpC5.js";import"./@remix-run-TLZCGUFM.js";import"./prop-types-ZMHxiqrO.js";import"./react-transition-group-Bm7DLXUO.js";import"./@babel-G6YR9G09.js";import"./@kurkle-D8fDXNIl.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const m of n)if(m.type==="childList")for(const p of m.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&t(p)}).observe(document,{childList:!0,subtree:!0});function o(n){const m={};return n.integrity&&(m.integrity=n.integrity),n.referrerPolicy&&(m.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?m.credentials="include":n.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function t(n){if(n.ep)return;n.ep=!0;const m=o(n);fetch(n.href,m)}})();const je={ADMIN:"admin",ENGINEER:"engineer",PROCUREMENT:"procurement",VIEWER:"viewer",ADMIN_PSE:"admin_pse",ADMIN_LOGISTIC:"admin_logistic",SUPPLIER:"supplier"},Pe={PSE:"PSE",PCD:"PCD",LOGISTIC:"LOGISTIC",SUPPLIER:"SUPPLIER"},Ms={[Pe.PSE]:{[je.ADMIN]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!0,editable:!0}},[je.ADMIN_PSE]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!1}},[je.ENGINEER]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!1,editable:!1}},[je.VIEWER]:{general:{visible:!0,editable:!1},pse:{visible:!0,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!1,editable:!1}}},[Pe.PCD]:{[je.PROCUREMENT]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!0}},[je.VIEWER]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!1}}},[Pe.LOGISTIC]:{[je.ADMIN_LOGISTIC]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!0}}},[Pe.SUPPLIER]:{[je.SUPPLIER]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!1,editable:!1}}},default:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!1,editable:!1}}},Es=l.createContext(null),Ot=[{username:"khedi.asmoro",password:"1",department:Pe.PSE,role:je.ADMIN},{username:"ujang.jayadi",password:"1",department:Pe.PSE,role:je.ENGINEER},{username:"anton",password:"1",department:Pe.PSE,role:je.ENGINEER},{username:"hanifa",password:"2",department:Pe.PCD,role:je.PROCUREMENT},{username:"viewer.pse",password:"1",department:Pe.PSE,role:je.VIEWER},{username:"viewer.pcd",password:"1",department:Pe.PCD,role:je.VIEWER},{username:"admin_pse",password:"1",department:Pe.PSE,role:je.ADMIN_PSE},{username:"admin_logistic",password:"1",department:Pe.LOGISTIC,role:je.ADMIN_LOGISTIC},{username:"supplier",password:"1",department:Pe.SUPPLIER,role:je.SUPPLIER}];function Ft({children:s}){const[a,o]=l.useState(null),t=He(),n=(p,u)=>{const d=Ot.find(c=>c.username===p&&c.password===u);if(d){const{password:c,...r}=d;return o(r),t("/"),!0}else return!1},m=()=>{o(null),t("/login")};return e.jsx(Es.Provider,{value:{user:a,login:n,logout:m},children:s})}function Te(){return l.useContext(Es)}const Bt=[["848400K010","SWITCH ASSY, BACK DOOR OPENER","TRI"],["848400K030","SWITCH ASSY, BACK DOOR OPENER","TRI"],["893400K010","COMPUTER ASSY, CLEARANCE WARNING","DSI"],["131110E010","RING, COMPRESSION, NO.1","PT.NTPRI"],["131110E020","RING, COMPRESSION, NO.1","PT.NTPRI"],["256300E010","VALVE ASSY, EGR, NO.2","AISAN NASMOCO INDUSTRI"],["261000E020","BODY ASSY, DIESEL THROTTLE","AISAN NASMOCO INDUSTRI"],["122810Y11000","HANGER, ENGINE, NO.1","SETIA GUNA SEJATI"],["130500Y02000","GEAR ASSY, CAMSHAFT TIMING","DENSO INDONESIA CORPORATION (FAJAR)"],["25051BZ15000","CONVERTER SUB-ASSY, EXHAUST MANIFOLD","FUTABA INDONESIA"],["25051BZ26000","CONVERTER SUB-ASSY, EXHAUST MANIFOLD","FUTABA INDONESIA"],["22030BZ15000","BODY ASSY, THROTTLE W/MOTOR","AISAN NASMOCO INDUSTRI"],["90210T000200","WASHER, SEAL","ARAI RUBBER SEAL INDONESIA"],["90430T002300","GASKET","ARAI RUBBER SEAL INDONESIA"],["111150Y03000","GASKET, CYLINDER HEAD","ASTRA NIPPON GASKET INDONESIA"],["11115BZ16000","GASKET, CYLINDER HEAD","ASTRA NIPPON GASKET INDONESIA"],["171730Y03000","GASKET, EXHAUST MANIFOLD","ASTRA NIPPON GASKET INDONESIA"],["17173BZ13000","GASKET, EXHAUST MANIFOLD","ASTRA NIPPON GASKET INDONESIA"],["115110Y04000","CAP, CRANKSHAFT BEARING, NO.1","AT INDONESIA"],["115130Y04000","CAP, CRANKSHAFT BEARING, NO.3","AT INDONESIA"],["16261BZ75000","HOSE, WATER BY-PASS, NO.1","CATURINDO AGUNGJAYA RUBBER"],["16261BZ76000","HOSE, WATER BY-PASS, NO.1","CATURINDO AGUNGJAYA RUBBER"],["16264BZ38000","HOSE, WATER BY-PASS, NO.2","CATURINDO AGUNGJAYA RUBBER"],["16264BZ39000","HOSE, WATER BY-PASS, NO.2","CATURINDO AGUNGJAYA RUBBER"],["16282BZ11000","HOSE, WATER BY-PASS, NO.5","CATURINDO AGUNGJAYA RUBBER"],["89467BZ02000","SENSOR, AIR FUEL RATIO","DENSO INDONESIA CORPORATION (SIP C)"],["111910Y01000","TUBE, SPARK PLUG","FUJIKINZOKU INDONESIA"],["90406T001100","TUBE, UNION","FUJIKINZOKU INDONESIA"],["90406T001300","TUBE, UNION","FUJIKINZOKU INDONESIA"],["23209BZ10000","INJECTOR SET, FUEL","HITACHI ASTEMO BEKASI POWERTRAIN SYS"],["90466T006100","CLIP, HOSE","INDOCIPTA HASTA PERKASA"],["90466T006200","CLIP, HOSE","INDOCIPTA HASTA PERKASA"],["32101BZ10000","GEAR SUB-ASSY DRIVE PLATE & RING","INTI GANDA PERDANA"],["157080Y04000","NOZZLE SUB-ASSY, OIL","ITOKIN"],["90360T001200","BALL","JTEKT INDONESIA"],["90105T027300","BOLT, FLANGE","MEIDOH INDONESIA"],["90119T044400","BOLT, W/WASHER","MEIDOH INDONESIA"],["9004A1020000","BOLT WASHER BASED HEAD HEXAGON","MEIDOH INDONESIA"]],J=s=>a=>{const o=a&&a.target&&typeof a.target.value=="string"?a.target.value:a;s(String(o).toUpperCase())};function Re({show:s=!1,onClose:a,onSelect:o,zIndex:t=4e3,mode:n="multi"}){function m(_,q,te){const E=((_+1)*9301+49297)%233280/233280;return Math.floor(q+E*(te-q+1))}const p=Bt.map((_,q)=>{const te=m(q,50,1400),U=m(q+3,20,600),E=m(q+7,10,800),R=Number((te*U*E/1e6).toFixed(3)),le="P"+String(1e5+m(q,1,9999)),B="S"+String(200+q%999);return{partNo:_[0],partName:_[1],supplierName:_[2],parentPartNo:le,supplierId:B,L:te,W:U,H:E,boxM3:R}}),[u,d]=l.useState(""),[c,r]=l.useState(""),[f,i]=l.useState(""),[x,y]=l.useState({}),[b,A]=l.useState(!1),[j,N]=l.useState(n==="multi"?{}:null),[v,g]=l.useState(1),[P,k]=l.useState(10);if(l.useEffect(()=>(s?(d(""),r(""),i(""),y({}),A(!1),N(n==="multi"?{}:null),g(1),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s]),!s)return null;function O(){if(!b)return[];const _=(x.partNo||"").trim().toLowerCase(),q=(x.partName||"").trim().toLowerCase(),te=(x.supplierName||"").trim().toLowerCase();return p.filter(U=>!(_&&!U.partNo.toLowerCase().includes(_)||q&&!U.partName.toLowerCase().includes(q)||te&&!U.supplierName.toLowerCase().includes(te)))}const M=O(),L=M.length,S=Math.max(1,Math.ceil(L/P)),W=M.slice((v-1)*P,v*P),C=()=>{g(1),y({partNo:u,partName:c,supplierName:f}),A(!0)},D=()=>{d(""),r(""),i(""),y({}),A(!1),g(1)};function T(_){N(n==="multi"?q=>({...q,[_]:!q[_]}):_)}function H(_){if(n!=="multi")return;const q=(v-1)*P,te={};W.forEach((U,E)=>{te[q+E]=_}),N(U=>({...U,...te}))}function Z(){if(n==="multi"){const _=Object.keys(j).filter(q=>j[q]).map(q=>M[Number(q)]);o&&o(_),a&&a()}else if(j!==null){const _=M[j];o&&o(_),a&&a()}else a&&a()}function se(_){g(Math.min(Math.max(1,_),S))}const I={flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},V={position:"sticky",top:0,zIndex:5,background:"white",padding:"1rem 1rem 0.5rem 1rem",borderBottom:"1px solid #e9ecef"},w={overflow:"auto",padding:"0 1rem 1rem 1rem",flex:"1 1 auto"};return e.jsx("div",{className:"part-picker-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:t,display:"flex",alignItems:"center",justifyContent:"center"},onMouseDown:_=>{_.target===_.currentTarget&&a()},children:e.jsxs("div",{className:"part-picker-modal",style:{background:"#fff",borderRadius:8,boxShadow:"0 2px 16px rgba(0,0,0,0.2)",zIndex:t+1,width:"min(90vw, 1200px)",position:"relative",display:"flex",flexDirection:"column",height:"min(90vh, 900px)"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"Select Parts"})}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:I,children:[e.jsx("div",{style:V,children:e.jsxs("div",{className:"form-row align-items-end",children:[e.jsxs("div",{className:"form-group col-12 col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{value:u,onChange:J(d),className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{value:c,onChange:J(r),className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{value:f,onChange:J(i),className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-3 d-flex",children:[e.jsx("button",{className:"btn btn-primary btn-sm mr-2",onClick:C,children:"Search"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:D,children:"Clear"})]})]})}),e.jsx("div",{style:w,children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-striped table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:36},children:n==="multi"&&e.jsx("input",{type:"checkbox",onChange:_=>H(_.target.checked)})}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Part Name"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Supplier ID"}),e.jsx("th",{children:"Parent Part No"}),e.jsx("th",{children:"L (mm)"}),e.jsx("th",{children:"W (mm)"}),e.jsx("th",{children:"H (mm)"}),e.jsx("th",{children:"Box M3"})]})}),e.jsx("tbody",{children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center text-muted py-4",children:b?"No Data Found":"Click Search to view parts"})}):W.map((_,q)=>{const te=(v-1)*P+q;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:n==="multi"?e.jsx("input",{type:"checkbox",checked:!!j[te],onChange:()=>T(te)}):e.jsx("input",{type:"radio",name:"part-picker-radio",checked:j===te,onChange:()=>T(te)})}),e.jsx("td",{children:_.partNo}),e.jsx("td",{className:"text-left",children:_.partName}),e.jsx("td",{children:_.supplierName}),e.jsx("td",{children:_.supplierId}),e.jsx("td",{children:_.parentPartNo}),e.jsx("td",{children:_.L}),e.jsx("td",{children:_.W}),e.jsx("td",{children:_.H}),e.jsx("td",{children:_.boxM3})]},te)})})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>se(1),children:"<<"}),e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>se(Math.max(1,v-1)),children:"<"}),[...Array(S).keys()].map(_=>e.jsx("button",{className:`btn btn-sm mr-1 ${v===_+1?"btn-primary":"btn-light"}`,onClick:()=>se(_+1),children:_+1},_)),e.jsx("button",{className:"btn btn-sm btn-light",onClick:()=>se(Math.min(S,v+1)),children:">"}),e.jsxs("span",{className:"ml-2 small text-muted",children:["Total: ",L]})]}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:Z,children:"Add Selected"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:a,children:"Cancel"})]})]})]})})}const Ut=({filters:s,setters:a,onSearch:o,onClear:t,onPersonPicker:n,onDestinationPicker:m,destinations:p})=>{const[u,d]=l.useState(!1),c=r=>{a.setPartNo(r.partNo),a.setPartName(r.partName),a.setSupplierCode(r.supplierId),a.setSupplierName(r.supplierName)};return[...new Set(p.map(r=>r.destCode))],e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CPS/PSI/ECI No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.cpsNo,onChange:r=>a.setCpsNo(r.target.value),placeholder:"CPS/PSI/ECI No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CFC/Model"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.model,onChange:r=>a.setModel(r.target.value),placeholder:"Model"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.destCode,onChange:r=>a.setDestCode(r.target.value),placeholder:"Dest Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:m,children:e.jsx("i",{className:"fas fa-search"})})}),e.jsx("input",{type:"text",className:"form-control form-control-sm ml-2",value:s.destCountry,readOnly:!0,placeholder:"Country Code - Country"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Part No - Part Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.partNo,onChange:r=>a.setPartNo(r.target.value),placeholder:"Part No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>d(!0),children:e.jsx("i",{className:"fas fa-search"})})}),e.jsx("input",{type:"text",className:"form-control form-control-sm ml-2",value:s.partName,readOnly:!0,placeholder:"Part Name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"From"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.fromUser,onChange:r=>a.setFromUser(r.target.value),placeholder:"From"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Ref CPS No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.refCpsNo,onChange:r=>a.setRefCpsNo(r.target.value),placeholder:"Ref CPS No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.cfcPjt,onChange:r=>a.setCfcPjt(r.target.value),placeholder:"CFC/PJT"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CPS/PSI/ECI Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:s.cpsPsiEci,onChange:r=>a.setCpsPsiEci(r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"CPS",children:"CPS"}),e.jsx("option",{value:"PSI",children:"PSI"}),e.jsx("option",{value:"ECI",children:"ECI"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code - Supplier Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm mr-2",value:s.supplierCode,readOnly:!0,placeholder:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.supplierName,readOnly:!0,placeholder:"Supplier Name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"To"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.toUser,onChange:r=>a.setToUser(r.target.value),placeholder:"To"})]})]})]}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm mr-2",onClick:o,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:t,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx(Re,{show:u,onClose:()=>d(!1),onSelect:c,mode:"single"})]})};function $e({currentPage:s,totalPages:a,totalItems:o,pageSize:t,onPageChange:n,className:m=""}){const p=()=>{if(a<=1)return null;const u=[],d=5;let c=Math.max(1,s-Math.floor(d/2)),r=Math.min(a,c+d-1);r-c+1<d&&(c=Math.max(1,r-d+1)),c>1&&(u.push(e.jsx("button",{className:`btn btn-sm ${s===1?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(1),children:"1"},1)),c>2&&u.push(e.jsx("span",{className:"mx-1",children:"..."},"start-ellipsis")));for(let f=c;f<=r;f++)u.push(e.jsx("button",{className:`btn btn-sm ${s===f?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(f),children:f},f));return r<a&&(r<a-1&&u.push(e.jsx("span",{className:"mx-1",children:"..."},"end-ellipsis")),u.push(e.jsx("button",{className:`btn btn-sm ${s===a?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(a),children:a},a))),u};return a<=1?null:e.jsxs("div",{className:`d-flex justify-content-between align-items-center mt-3 bg-light p-2 border rounded ${m}`,children:[e.jsxs("div",{className:"small text-muted",children:["Showing ",(s-1)*t+1," to ",Math.min(s*t,o)," of ",o," entries"]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary mr-2",disabled:s===1,onClick:()=>n(1),children:e.jsx("i",{className:"fas fa-angle-double-left"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary mr-2",disabled:s===1,onClick:()=>n(s-1),children:e.jsx("i",{className:"fas fa-angle-left"})}),p(),e.jsx("button",{className:"btn btn-sm btn-outline-secondary ml-2",disabled:s===a,onClick:()=>n(s+1),children:e.jsx("i",{className:"fas fa-angle-right"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary ml-2",disabled:s===a,onClick:()=>n(a),children:e.jsx("i",{className:"fas fa-angle-double-right"})})]})]})}function Wt({filteredCps:s,page:a,perPage:o,setPage:t,setPerPage:n,onEdit:m,onClone:p}){const u=s.slice((a-1)*o,a*o),d=c=>c.includes("CPS")?"CPS":c.includes("PCI")?"PCI":c.includes("ECI")?"ECI":"";return e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{fontSize:"10pt"},children:"No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"CPS/PCI/ECI No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Type"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Ref CPS No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Part No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Project Code"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Model"}),e.jsx("th",{style:{fontSize:"10pt"},children:"From"}),e.jsx("th",{style:{fontSize:"10pt"},children:"To"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Status"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Submit Date"}),e.jsx("th",{style:{width:160},children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"text-center py-4 text-muted",children:"No Data Found"})}):u.map((c,r)=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontSize:"10pt"},children:(a-1)*o+r+1}),e.jsx("td",{style:{fontSize:"10pt"},children:c.cpsNo}),e.jsx("td",{style:{fontSize:"10pt"},children:d(c.cpsNo)}),e.jsx("td",{style:{fontSize:"10pt"},children:c.refCpsNo}),e.jsx("td",{style:{fontSize:"10pt"},children:c.partNo}),e.jsx("td",{style:{fontSize:"10pt"},children:c.cfcPjtCode}),e.jsx("td",{style:{fontSize:"10pt"},children:c.model}),e.jsx("td",{style:{fontSize:"10pt"},children:c.fromUser}),e.jsx("td",{style:{fontSize:"10pt"},children:c.toUser}),e.jsx("td",{style:{fontSize:"10pt"},children:c.status}),e.jsx("td",{style:{fontSize:"10pt"},children:c.issueDate}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>alert("View placeholder"),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info mr-1",onClick:()=>m(c),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>p(c),children:e.jsx("i",{className:"fas fa-clone"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>alert("Delete placeholder"),children:e.jsx("i",{className:"fas fa-trash"})})]})]},r))})]})}),e.jsx($e,{currentPage:a,totalItems:s.length,itemsPerPage:o,onPageChange:t,onItemsPerPageChange:c=>{n(c),t(1)}})]})}function Ht({current:s,partNoQuery:a,partNameQuery:o,supplierQuery:t,onPartNoChange:n,onPartNameChange:m,onSupplierChange:p,onGo:u}){return e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("h5",{className:"mb-0 mr-3",children:"Select part"})}),e.jsxs("div",{className:"row mt-2",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Part No",value:a,onChange:d=>n(d.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Part Name",value:o,onChange:d=>m(d.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Supplier Name",value:t,onChange:d=>p(d.target.value)})]}),e.jsx("div",{className:"col-md-3 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-sm btn-primary w-100",type:"button",onClick:u,children:"Go"})})]})]})}function Rs({count:s=1,isPseUser:a}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((o,t)=>e.jsxs(ke.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty"}),!a&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Price"}),!a&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Sum"})]},`matLeafHdr-${t}`))})}function Os({arr:s=[],count:a=1,isPseUser:o}){debugger;return e.jsx(e.Fragment,{children:Array.from({length:a}).map((t,n)=>{const m=s[n]||{};return e.jsxs(ke.Fragment,{children:[e.jsx("td",{className:"align-middle",children:m.materialNo??"-"}),e.jsx("td",{className:"text-right",children:m.qty??"-"}),!o&&e.jsx("td",{className:"text-right",children:m.price??"-"}),!o&&e.jsx("td",{className:"text-right",children:m.sum??"-"})]},`matLeafData-${n}`)})})}function $t({count:s=10,isPseUser:a}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((o,t)=>e.jsx("th",{colSpan:a?2:4,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:t===0?"Box":`Inner ${t}`},`innerGroupHdr-${t}`))})}function Kt({count:s=10,isPseUser:a}){return e.jsx(Rs,{count:s,isPseUser:a})}function Fs({data:s=[],count:a=10,isPseUser:o}){return e.jsx(Os,{arr:s,count:a,isPseUser:!0})}function qt({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:2,children:o===0?"Module":`Outer ${o}`},`outerGrp-${o}`))})}function Vt({count:s=10,isPseUser:a}){return e.jsx(Rs,{count:s,isPseUser:a})}function Bs({data:s=[],count:a=10,isPseUser:o}){debugger;return e.jsx(Os,{arr:s,count:a,isPseUser:o})}function Gt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Inner"}),e.jsx("th",{className:"align-middle",children:"Outer"}),e.jsx("th",{className:"align-middle",children:"Material"}),e.jsx("th",{className:"align-middle",children:"Labor"}),e.jsx("th",{className:"align-middle",children:"Inland"})]})}function Us({data:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.subTotalInner??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalOuter??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalMaterial??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalLabor??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalInland??"-"})]})}function Yt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Receiving"}),e.jsx("th",{className:"align-middle",children:"Inspection"}),e.jsx("th",{className:"align-middle",children:"Dlvr Course"}),e.jsx("th",{className:"align-middle",children:"Pallet Supply"}),e.jsx("th",{className:"align-middle",children:"Binding"}),e.jsx("th",{className:"align-middle",children:"Sort & Supply"}),e.jsx("th",{className:"align-middle",children:"Pick & Packing"}),e.jsx("th",{className:"align-middle",children:"Vanning"}),e.jsx("th",{className:"align-middle",children:"Box/Valet Rtrn"}),e.jsx("th",{className:"align-middle",children:"Mix Van"}),e.jsx("th",{className:"align-middle",children:"Lashing"}),e.jsx("th",{className:"align-middle",children:"Total Time Req"}),e.jsx("th",{className:"align-middle",children:"Others"})]})}function zt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Current"}),e.jsx("th",{className:"align-middle",children:"DL"}),e.jsx("th",{className:"align-middle",children:"IDL"}),e.jsx("th",{className:"align-middle",children:"Facility Others"})]})}function Ws({labor:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.receiving??"-"}),e.jsx("td",{className:"align-middle",children:s.inspection??"-"}),e.jsx("td",{className:"align-middle",children:s.deliveryCourse??"-"}),e.jsx("td",{className:"align-middle",children:s.palletSupply??"-"}),e.jsx("td",{className:"align-middle",children:s.binding??"-"}),e.jsx("td",{className:"align-middle",children:s.sorting??"-"}),e.jsx("td",{className:"align-middle",children:s.pickPacking??"-"}),e.jsx("td",{className:"align-middle",children:s.vanning??"-"}),e.jsx("td",{className:"align-middle",children:s.boxValetReturn??"-"}),e.jsx("td",{className:"align-middle",children:s.mixVan??"-"}),e.jsx("td",{className:"align-middle",children:s.lashing??"-"}),e.jsx("td",{className:"align-middle",children:s.totalTimeReq??"-"}),e.jsx("td",{className:"align-middle",children:s.others??"-"})]})}function Hs({labor:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.laborCostCurrent??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostDL??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostIDL??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostFacility??"-"})]})}function Jt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Pack Time (V-PASS)"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Inland Cost (m³)"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Diff"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Milkrun Cost"})]})}function $s({inland:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.packTimeVPass??"-"}),e.jsx("td",{className:"align-middle",children:s.costM3??"-"}),e.jsx("td",{className:"align-middle",children:s.diff??"-"}),e.jsx("td",{className:"align-middle",children:s.milkrunCost??"-"})]})}function Ks(s=0,a=0,o=!1){const t=[],n=(u,d)=>t.push({key:u,w:d});n("action",50),n("recNo",80),n("cpsNo",140),n("partNo",160),n("partName",260),n("parentNo",140),n("supplierCode",140),n("supplierName",200),n("weightPerPc",100),n("qtyPerBox",100),o||(n("subInner",120),n("subOuter",120),n("subMaterial",120),n("subLabor",120),n("subInland",120),n("diffPct",100));for(let u=0;u<s;u++)n(`in_matNo_${u}`,100),n(`in_qty_${u}`,50),o||(n(`in_price_${u}`,70),n(`in_sum_${u}`,100));for(let u=0;u<a;u++)n(`out_matNo_${u}`,100),n(`out_qty_${u}`,50),o||(n(`out_price_${u}`,70),n(`out_sum_${u}`,100));o||(n("lab_mh_receiving",90),n("lab_mh_inspection",90),n("lab_mh_deliveryCourse",120),n("lab_mh_palletSupply",110),n("lab_mh_binding",90),n("lab_mh_sorting",120),n("lab_mh_pickPacking",120),n("lab_mh_vanning",90),n("lab_mh_boxValetReturn",120),n("lab_mh_mixVan",90),n("lab_mh_lashing",90),n("lab_mh_totalTimeReq",110),n("lab_mh_others",90),n("lab_cost_direct",90),n("lab_cost_indirect",90),n("lab_cost_subTotal",100),n("lab_cost_costPerPc",110),n("inland_trucking",150),n("inland_clp",120),n("inland_delivery",70),n("inland_total",100));const m=t.reduce((u,d)=>u+d.w,0);return{colGroup:e.jsx("colgroup",{children:t.map((u,d)=>e.jsx("col",{style:{width:`${u.w}px`,minWidth:`${u.w}px`}},`${u.key}-${d}`))}),totalWidth:m,cols:t}}function Qt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Name"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Parent No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Code"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Name"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Weight/pc"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty/Box"})]})}function qs({part:s}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.partNo??"-"}),e.jsx("td",{className:"align-middle",children:s.partName??s.name??"-"}),e.jsx("td",{className:"align-middle",children:s.parentNo??"-"}),e.jsx("td",{className:"align-middle",children:s.supplierCode??"-"}),e.jsx("td",{className:"align-middle",children:s.supplierName??"-"}),e.jsx("td",{className:"align-middle",children:s.weightPerPc??"-"}),e.jsx("td",{className:"align-middle",children:s.qtyPerBox??"-"})]})}function Zt({current:s={},scrollRef:a,onScroll:o,isPseUser:t,innerCount:n,outerCount:m}){const p=s.inner||[],u=s.outer||[],d=s.labor||{},c=s.inland||{},{colGroup:r,totalWidth:f}=Ks(n,m,t);return e.jsx("div",{className:"mb-3",children:e.jsx("div",{ref:a,onScroll:o,className:"table-responsive mt-2",style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center table-font-size-10pt",style:{minWidth:`${f}px`,tableLayout:"fixed"},children:[r,e.jsxs("thead",{children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap"}),e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"No"}),e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"CPS No"}),e.jsx("th",{rowSpan:2,colSpan:7,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Part Info"}),!t&&e.jsx("th",{rowSpan:2,colSpan:5,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Sub Total Costs"}),!t&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Diff (%)"}),e.jsx("th",{colSpan:n*(t?2:4),className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inner Info"}),e.jsx("th",{colSpan:m*(t?2:4),className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Outer Info"}),!t&&e.jsx("th",{colSpan:17,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Labor"}),!t&&e.jsx("th",{colSpan:4,rowSpan:2,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inland"})]}),e.jsxs("tr",{children:[e.jsx($t,{count:n,isPseUser:t}),e.jsx(qt,{count:m,isPseUser:t}),!t&&e.jsx("th",{colSpan:13,className:"align-align-middle border text-center tbl-row1-hdr text-nowrap",children:"Man Hour Requirement"}),!t&&e.jsx("th",{colSpan:4,className:"align-align-middle border text-center tbl-row1-hdr text-nowrap",children:"Labor Cost"})]}),e.jsxs("tr",{children:[e.jsx(Qt,{}),!t&&e.jsx(Gt,{}),e.jsx(Kt,{count:n,isPseUser:t}),e.jsx(Vt,{count:m,isPseUser:t}),!t&&e.jsx(Yt,{}),!t&&e.jsx(zt,{}),!t&&e.jsx(Jt,{})]})]}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"align-middle",children:s.recNo??"-"}),e.jsx("td",{className:"align-middle",children:s.cpsNo??"-"}),e.jsx(qs,{part:s}),!t&&e.jsx(Us,{data:s}),!t&&e.jsx("td",{className:"align-middle",children:s.diffPct??"-"}),e.jsx(Fs,{data:p,count:n,isPseUser:t}),e.jsx(Bs,{data:u,count:m,isPseUser:t}),!t&&e.jsx(Ws,{labor:d}),!t&&e.jsx(Hs,{labor:d}),!t&&e.jsx($s,{inland:c})]})})]})})})}function Xt({filteredParts:s=[],onSelectPart:a,scrollRef:o,onScroll:t,isPseUser:n,innerCount:m,outerCount:p}){const{colGroup:u,totalWidth:d,cols:c}=Ks(m,p,n);return e.jsx("div",{className:"mb-1",children:e.jsx("div",{ref:o,onScroll:t,className:"table-responsive",style:{maxHeight:400,overflowY:"auto",overflowX:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center table-font-size-10pt",style:{minWidth:`${d}px`,tableLayout:"fixed"},children:[u,e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:c.length,className:"text-center text-muted py-3",children:"No results"})}):s.map((r,f)=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:e.jsx("input",{type:"checkbox",onChange:()=>a(r)})}),e.jsx("td",{className:"align-middle",children:r.recNo??"-"}),e.jsx("td",{className:"align-middle",children:r.cpsNo??"-"}),e.jsx(qs,{part:r}),!n&&e.jsx(Us,{data:r}),!n&&e.jsx("td",{className:"align-middle",children:r.diffPct??"-"}),e.jsx(Fs,{data:r.inner,count:m,isPseUser:n}),e.jsx(Bs,{data:r.outer,count:p,isPseUser:n}),!n&&e.jsx(Ws,{labor:r.labor}),!n&&e.jsx(Hs,{labor:r.labor}),!n&&e.jsx($s,{inland:r.inland})]},f))})]})})})}function el({isOpen:s=!1,onClose:a=()=>{},parts:o=[],current:t={},onSelectPart:n=()=>{}}){const[m,p]=l.useState(""),[u,d]=l.useState(""),[c,r]=l.useState(""),{user:f}=Te(),i=f&&f.department==="PSE"&&!["pic","sh","dph"].includes(f.role),x=l.useRef(null),y=l.useRef(null),b=l.useRef(!1),A=(g,P)=>{b.current||(b.current=!0,P.current&&g.current&&(P.current.scrollLeft=g.current.scrollLeft),b.current=!1)},j=l.useMemo(()=>o.filter(g=>{const P=m.trim().toLowerCase(),k=u.trim().toLowerCase(),O=c.trim().toLowerCase(),M=P===""||g.partNo&&g.partNo.toLowerCase().includes(P),L=k===""||g.name&&g.name.toLowerCase().includes(k),S=O===""||g.supplier&&g.supplier.toLowerCase().includes(O);return M&&L&&S}),[o,m,u,c]),N=l.useMemo(()=>{const g=[t,...j];return Math.max(...g.map(P=>{var k;return((k=P.inner)==null?void 0:k.length)||0}))},[t,j]),v=l.useMemo(()=>{const g=[t,...j];return Math.max(...g.map(P=>{var k;return((k=P.outer)==null?void 0:k.length)||0}))},[t,j]);return s?e.jsx("div",{className:"np-modal-backdrop multi-parts-modal",style:{zIndex:3e3},onMouseDown:g=>{g.target===g.currentTarget&&a()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1200,width:"100%",display:"flex",flexDirection:"column",height:"700px",maxHeight:"700px",minHeight:"700px"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"CPS Comparison"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsx("div",{className:"card-body",style:{verticalAlign:"top",paddingBottom:0,maxHeight:"fit-content"},children:e.jsx(Ht,{current:t,partNoQuery:m,partNameQuery:u,supplierQuery:c,onPartNoChange:p,onPartNameChange:d,onSupplierChange:r,onGo:()=>{}})}),e.jsx("hr",{className:"my-0"}),e.jsxs("div",{className:"card-body",style:{flex:1,display:"flex",flexDirection:"column",paddingTop:"8px",paddingBottom:"8px"},children:[e.jsx(Zt,{current:t,scrollRef:x,onScroll:()=>A(x,y),isPseUser:i,innerCount:N,outerCount:v}),e.jsx("hr",{style:{margin:"8px 0"}}),e.jsx(Xt,{filteredParts:j,onSelectPart:n,scrollRef:y,onScroll:()=>A(y,x),isPseUser:i,innerCount:N,outerCount:v})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:()=>{},children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:a,children:"Close"})]}),e.jsx("style",{children:`
          .multi-parts-modal .np-modal { max-width: 1200px; height: 700px; min-height: 700px; max-height: 700px; }
          .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: flex; align-items: center; justify-content: center; padding: 1rem; }
          .np-modal { width: 100%; height: 700px; min-height: 700px; max-height: 700px; }
          .table-sm td, .table-sm th { vertical-align: middle; white-space: nowrap; }
          .card-body { vertical-align: top; }
        `})]})}):null}function Oe({show:s,onClose:a,onAdd:o,selectionMode:t="multi"}){const[n,m]=l.useState([]),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(""),[i,x]=l.useState(""),[y,b]=l.useState(""),[A,j]=l.useState(""),[N,v]=l.useState(""),[g,P]=l.useState(t==="multi"?[]:null),[k,O]=l.useState([]),[M,L]=l.useState(1),S=15;l.useEffect(()=>{fetch("/packing-cost-fe/models.json").then(_=>_.json()).then(_=>{m(_),O(_)})},[]),l.useEffect(()=>{s&&(u(""),c(""),f(""),x(""),b(""),j(""),v(""),P(t==="multi"?[]:null),O(n),L(1))},[s,t]);const W=w=>{P(t==="multi"?_=>_.includes(w)?_.filter(q=>q!==w):[..._,w]:w)},C=()=>{const w=n.filter(_=>_.model_code.toLowerCase().includes(p.toLowerCase())&&_.model_name.toLowerCase().includes(d.toLowerCase())&&(_.model_cfc||"").toLowerCase().includes(r.toLowerCase())&&(_.destination_code||"").toLowerCase().includes(i.toLowerCase())&&(_.model_implementation_period||"").toLowerCase().includes(y.toLowerCase())&&(_.model_type||"").toLowerCase().includes(A.toLowerCase())&&_.model_remark.toLowerCase().includes(N.toLowerCase()));O(w),L(1)},D=()=>{u(""),c(""),f(""),x(""),b(""),j(""),v(""),O(n),L(1)},T=()=>{if(typeof o=="function")if(t==="multi")o(g.map(w=>n.find(_=>_.model_code===w)));else{const w=n.find(_=>_.model_code===g);o(w)}P(t==="multi"?[]:null),typeof a=="function"&&a()},H=M*S,Z=H-S,se=k.slice(Z,H),I=Math.ceil(k.length/S);if(!s)return null;const V=e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",inset:0,zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"modal-dialog modal-lg",role:"document",style:{zIndex:2100},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Model"}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row align-items-end mb-3",children:[e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Model Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:w=>u(w.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:w=>c(w.target.value)})]}),e.jsxs("div",{className:"form-group col-md-1",children:[e.jsx("label",{className:"small",children:"CFC"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:w=>f(w.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Dest Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:i,onChange:w=>x(w.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Impl. Period"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,onChange:w=>b(w.target.value)})]}),e.jsxs("div",{className:"form-group col-md-1",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:A,onChange:w=>j(w.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2 text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-1",onClick:C,type:"button",children:"Search"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:D,type:"button",children:"Clear"})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Model Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"CFC"}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Impl. Period"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Remark"}),e.jsx("th",{children:"Katashiiki"})]})}),e.jsx("tbody",{children:se.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No models found"})}):se.map(w=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:t==="multi"?"checkbox":"radio",name:"model-selection",checked:t==="multi"?g.includes(w.model_code):g===w.model_code,onChange:()=>W(w.model_code)})}),e.jsx("td",{children:w.model_code}),e.jsx("td",{children:w.model_name}),e.jsx("td",{children:w.model_cfc}),e.jsx("td",{children:w.destination_code}),e.jsx("td",{children:w.model_implementation_period}),e.jsx("td",{children:w.model_type}),e.jsx("td",{children:w.model_remark}),e.jsx("td",{children:Array.isArray(w.katashiki)&&w.katashiki.length>0?w.katashiki.map((_,q)=>e.jsxs("span",{className:"badge badge-primary mr-1",children:[_.string," : ",_.number]},q)):"-"})]},w.model_code))})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>L(w=>Math.max(1,w-1)),disabled:M===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",M," of ",I]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>L(w=>Math.min(I,w+1)),disabled:M===I,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:T,type:"button",disabled:t==="multi"?g.length===0:!g,children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:a,type:"button",children:"Cancel"})]})]})]})})});return us.createPortal(V,typeof document<"u"?document.body:null)}function sl({show:s=!1,onClose:a=()=>{},onAdd:o=()=>{},selectionMode:t="single",zIndex:n=1050,filter:m="all"}){const[p,u]=l.useState([]),[d,c]=l.useState(""),[r,f]=l.useState(1),[i,x]=l.useState(""),[y,b]=l.useState(""),[A,j]=l.useState(""),[N,v]=l.useState(t==="multi"?[]:null),[g,P]=l.useState([]),k=15;l.useEffect(()=>{fetch("/packing-cost-fe/materials.json").then(V=>V.json()).then(V=>u(V)).catch(V=>console.error("Error fetching materials:",V))},[]),l.useEffect(()=>{s&&(P([]),c(""),f(1))},[s]);function O(I){v(t==="multi"?V=>V.includes(I)?V.filter(w=>w!==I):[...V,I]:I)}const M=()=>{let I=p;if(m){const V=m.toLowerCase();V==="module"?I=I.filter(w=>w.materialType.toLowerCase()==="outer"||w.materialType.toLowerCase()==="module"):V==="outer"?I=I.filter(w=>w.materialType.toLowerCase()==="outer"||w.materialType.toLowerCase()==="module"):V==="inner"?I=I.filter(w=>w.materialType.toLowerCase()==="inner"||w.materialType.toLowerCase()==="box"):V==="box"&&(I=I.filter(w=>w.materialType.toLowerCase()==="inner"||w.materialType.toLowerCase()==="box"))}I=I.filter(V=>(V.materialNo||"").toLowerCase().includes(i.toLowerCase())&&(V.materialName||"").toLowerCase().includes(y.toLowerCase())&&(V.materialType||"").toLowerCase().includes(A.toLowerCase())),P(I),f(1)},L=()=>{x(""),b(""),j("");let I=p;if(m){const V=m.toLowerCase();V==="module"?I=I.filter(w=>w.materialType.toLowerCase()==="module"):V==="outer"?I=I.filter(w=>w.materialType.toLowerCase()==="outer"):V==="inner"?I=I.filter(w=>w.materialType.toLowerCase()==="inner"||w.materialType.toLowerCase()==="box"):V==="box"&&(I=I.filter(w=>w.materialType.toLowerCase()==="box"))}P(I),f(1)},S=()=>{var I;if(typeof o=="function")if(t==="multi"){const V=N.map(w=>{var q;const _=p.find(te=>te.materialNo===w);return{..._,supplierName:((q=_.supplier)==null?void 0:q.supplier_name)||_.supplierName}});o(V)}else{const V=p.find(_=>_.materialNo===N);console.log("Selected material:",V);const w={...V,supplierName:((I=V.supplier)==null?void 0:I.supplier_name)||V.supplierName};o(w)}v(t==="multi"?[]:null),typeof a=="function"&&a()},W=r*k,C=W-k,D=g.slice(C,W),T=Math.ceil(g.length/k),H=I=>typeof I!="number"?I:I.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Z=I=>typeof I!="number"?I:I.toLocaleString("en-US");if(!s)return null;const se=e.jsx("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)",zIndex:n},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Material"}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row align-items-end mb-3",children:[e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small",children:"Material No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:i,onChange:J(x)})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small",children:"Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,onChange:J(b)})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:A,onChange:J(j)})]}),e.jsxs("div",{className:"form-group col-md-2 text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-1",onClick:M,type:"button",children:"Search"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:L,type:"button",children:"Clear"})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Material No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{textAlign:"right"},children:"L"}),e.jsx("th",{style:{textAlign:"right"},children:"W"}),e.jsx("th",{style:{textAlign:"right"},children:"H"}),e.jsx("th",{style:{textAlign:"right"},children:"Inner"}),e.jsx("th",{style:{textAlign:"right"},children:"Outer"})]})}),e.jsx("tbody",{children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No materials found"})}):D.map(I=>{var V;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:t==="multi"?"checkbox":"radio",name:"material-selection",checked:t==="multi"?N.includes(I.materialNo):N===I.materialNo,onChange:()=>O(I.materialNo)})}),e.jsx("td",{children:I.materialNo}),e.jsx("td",{children:I.materialName}),e.jsx("td",{children:I.materialType}),e.jsx("td",{children:((V=I.supplier)==null?void 0:V.supplier_name)||I.supplierName||""}),e.jsx("td",{style:{textAlign:"right"},children:Z(I.dimension_length)}),e.jsx("td",{style:{textAlign:"right"},children:Z(I.dimension_width)}),e.jsx("td",{style:{textAlign:"right"},children:Z(I.dimension_height)}),e.jsx("td",{style:{textAlign:"right"},children:H(I.dimension_inner_length*I.dimension_inner_width*I.dimension_inner_height/1e6)}),e.jsx("td",{style:{textAlign:"right"},children:H(I.dimension_outer_length*I.dimension_outer_width*I.dimension_outer_height/1e6)})]},I.materialNo)})})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>f(I=>Math.max(1,I-1)),disabled:r===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",r," of ",T]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>f(I=>Math.min(T,I+1)),disabled:r===T,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary",onClick:S,type:"button",children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:a,type:"button",children:"Cancel"})]})]})]})})});return us.createPortal(se,typeof document<"u"?document.body:null)}function tl(s){const{config:a,cpsNo:o,setCpsNo:t,refCpsNo:n,setRefCpsNo:m,cfcPjtCode:p,setCfcPjtCode:u,model:d,setModel:c,partNo:r,setPartNo:f,partName:i,setPartName:x,supplier:y,setSupplier:b,plantCode:A,setPlantCode:j,dockCode:N,setDockCode:v,openPartPicker:g,openModelPicker:P,setComparisonOpen:k}=s;return e.jsxs("div",{children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"CPS/PSI/ECI No."})}),e.jsx("input",{className:"form-control form-control-sm",value:o,onChange:O=>t(O.target.value),disabled:!a.editable,readOnly:!0,placeholder:"CPSxxxx..."})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"CFC/Model"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:O=>c(O.target.value),disabled:!a.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:P,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Part No"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:O=>f(O.target.value),disabled:!a.editable}),e.jsxs("div",{className:"input-group-append",children:[e.jsx("button",{id:"partPickerBtn",type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part",onClick:g,children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Compare",style:{marginLeft:6},onClick:()=>k(!0),children:"Compare"})]})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Ref CPS No."})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:n,onChange:O=>m(O.target.value),disabled:!a.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Ref CPS",onClick:()=>alert("Search Ref CPS placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Project Code"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:p,onChange:O=>u(O.target.value),disabled:!a.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>alert("Search CFC/PJT placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Part Name"})}),e.jsx("input",{className:"form-control form-control-sm",value:i,readOnly:!0})]})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Supplier"})}),e.jsx("input",{className:"form-control form-control-sm",value:y,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Plant Code"}),e.jsx("input",{className:"form-control form-control-sm",value:A,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Dock Code"}),e.jsx("input",{className:"form-control form-control-sm",value:N,readOnly:!0})]})]})]})}function ll(s){const{config:a,pseOpen:o,setPseOpen:t,packingPlantCurr:n,setPackingPlantCurr:m,packingPlantNext:p,setPackingPlantNext:u,vanningPlantCurr:d,setVanningPlantCurr:c,vanningPlantNext:r,setVanningPlantNext:f,orderPatternCurr:i,setOrderPatternCurr:x,orderPatternNext:y,setOrderPatternNext:b,category:A,setCategory:j,katashiki:N,setKatashiki:v,importerLineProcess:g,setImporterLineProcess:P,caseCode:k,setCaseCode:O,boxNumber:M,setBoxNumber:L,renban:S,setRenban:W,renbanEff:C,setRenbanEff:D,packingProcessBoxing:T,setPackingProcessBoxing:H,packingProcessStacking:Z,setPackingProcessStacking:se,pseOuterRows:I,setPseOuterRows:V,newPseOuter:w,setNewPseOuter:_,openMaterialPicker:q}=s,[te,U]=l.useState(!1),[E,R]=l.useState(null),le=()=>{if(!w.materialNo.trim()){alert("Enter Pack Material No");return}V(h=>[...h,{...w}]),_({materialNo:"",suffix:"",name:"",supplier:"",L:"",W:"",H:"",wtPerPc:"",qty:"",totalWt:""}),U(!1)},B=h=>{V(Y=>Y.filter((F,z)=>z!==h))},$=(h,Y,F)=>{const z=I.map((ee,X)=>{if(X===h){const de={...ee,[Y]:F};return(Y==="qty"||Y==="wtPerPc")&&(de.totalWt=(parseFloat(de.qty)||0)*(parseFloat(de.wtPerPc)||0)),de}return ee});V(z)},K=(h,Y)=>{const F=E===Y;return e.jsxs("tr",{children:[e.jsx("td",{children:F?e.jsxs("div",{className:"input-group",children:[e.jsx("input",{value:h.materialNo,onChange:z=>$(Y,"materialNo",z.target.value),className:"form-control form-control-sm"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",onClick:()=>q(Y===0?"Module":"outer",Y),children:e.jsx("i",{className:"fas fa-search"})})})]}):h.materialNo}),e.jsx("td",{children:F?e.jsx("input",{readOnly:!0,value:h.suffix,onChange:z=>$(Y,"suffix",z.target.value),className:"form-control form-control-sm"}):h.suffix}),e.jsx("td",{children:h.name}),e.jsx("td",{children:h.supplier}),e.jsx("td",{children:F?e.jsx("input",{readOnly:!0,value:h.L,onChange:z=>$(Y,"L",z.target.value),className:"form-control form-control-sm"}):h.L}),e.jsx("td",{children:F?e.jsx("input",{readOnly:!0,value:h.W,onChange:z=>$(Y,"W",z.target.value),className:"form-control form-control-sm"}):h.W}),e.jsx("td",{children:F?e.jsx("input",{readOnly:!0,value:h.H,onChange:z=>$(Y,"H",z.target.value),className:"form-control form-control-sm"}):h.H}),e.jsx("td",{children:F?e.jsx("input",{value:h.wtPerPc,onChange:z=>$(Y,"wtPerPc",z.target.value),className:"form-control form-control-sm"}):h.wtPerPc}),e.jsx("td",{children:F?e.jsx("input",{value:h.qty,onChange:z=>$(Y,"qty",z.target.value),className:"form-control form-control-sm"}):h.qty}),e.jsx("td",{children:h.totalWt}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-link",children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-link",children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:F?e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>R(null),disabled:!a.editable,children:"Save"}):e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:z=>{z.stopPropagation(),B(Y)},disabled:!a.editable,children:e.jsx("i",{className:"fas fa-trash"})})})]},Y)};return e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>t(h=>!h),children:[e.jsx("i",{className:`fas ${o?"fa-chevron-down":"fa-chevron-right"} mr-2`}),e.jsx("strong",{children:"PSE Information"})]}),o&&e.jsx("div",{className:"card card-body mt-2",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Plant (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:n,onChange:h=>m(h.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Packing Plant (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:p,onChange:h=>u(h.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Vanning Plant (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:h=>c(h.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Vanning Plant (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:h=>f(h.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Order Pattern (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:i,onChange:h=>x(h.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Order Pattern (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:y,onChange:h=>b(h.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsx("label",{className:"small mb-1",children:"Category"}),e.jsxs("select",{className:"form-control form-control-sm",value:A,onChange:h=>j(h.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"Trim",children:"Trim"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"kat-wrap mb-3",children:[e.jsx("div",{className:"kat-title",children:"Katashiiki"}),e.jsx("div",{className:"kat-flex",children:e.jsx("div",{className:"kat-list",children:N.length===0?e.jsx("div",{className:"kat-empty text-muted",children:e.jsx("span",{children:"No data katashiiki."})}):N.map((h,Y)=>e.jsx("div",{className:"kat-item",children:e.jsxs("div",{className:"kat-box",children:[e.jsxs("div",{className:"kat-label",children:[h.string,":"]}),e.jsx("input",{type:"number",className:"kat-input kat-input-num",placeholder:"0",value:h.number,onChange:F=>{const z=Number(F.target.value);v(ee=>{const X=[...ee];return X[Y]={...X[Y],number:z},X})},disabled:!0})]})},Y))})})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Importer Line Process"}),e.jsx("input",{className:"form-control form-control-sm",value:g,onChange:h=>P(h.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Case Code"}),e.jsx("input",{className:"form-control form-control-sm",value:k,onChange:h=>O(h.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Box Number"}),e.jsx("input",{className:"form-control form-control-sm",value:M,onChange:h=>L(h.target.value),disabled:!a.editable})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Renban"}),e.jsx("input",{className:"form-control form-control-sm",value:S,onChange:h=>W(h.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Renban Eff"}),e.jsx("input",{className:"form-control form-control-sm",value:C,onChange:h=>D(h.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Process - Boxing"}),e.jsxs("select",{className:"form-control form-control-sm",value:T,onChange:h=>H(h.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"SUPPLIER",children:"SUPPLIER"})]})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Process - Stacking"}),e.jsxs("select",{className:"form-control form-control-sm",value:Z,onChange:h=>se(h.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"TMMIN",children:"TMMIN"})]})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"small mb-1",children:"OUTER (Pack Material)"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{R(null),U(!0)},disabled:te||!a.editable,children:"Add"})})]}),e.jsx("div",{className:"table-responsive mt-2",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 small",children:[e.jsx("thead",{style:{backgroundColor:"#cfcfcfff"},children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{style:{width:30},children:"No"}),e.jsx("th",{style:{width:120},children:"Pack Material No"}),e.jsx("th",{style:{width:40},children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{width:60},children:"L"}),e.jsx("th",{style:{width:60},children:"W"}),e.jsx("th",{style:{width:60},children:"H"}),e.jsx("th",{style:{width:60},children:"Wt/pc"}),e.jsx("th",{style:{width:60},children:"Qty"}),e.jsx("th",{style:{width:80},children:"Total Wt"}),e.jsx("th",{style:{width:10},children:"msds"}),e.jsx("th",{style:{width:10},children:"draw"}),e.jsx("th",{style:{width:80},children:"Action"})]})}),e.jsxs("tbody",{children:[I.length===0&&!te?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-3",children:"No Data Found"})}):I.map(K),te&&e.jsxs("tr",{children:[e.jsx("td",{children:"+"}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:w.materialNo,onChange:h=>_(Y=>({...Y,materialNo:h.target.value}))}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>q("Outer","new"),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:w.suffix,onChange:h=>_(Y=>({...Y,suffix:h.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:w.name})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:w.supplier})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:w.L,onChange:h=>_(Y=>({...Y,L:h.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:w.W,onChange:h=>_(Y=>({...Y,W:h.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:w.H,onChange:h=>_(Y=>({...Y,H:h.target.value}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:w.wtPerPc,onChange:h=>_(Y=>({...Y,wtPerPc:h.target.value,totalWt:(parseFloat(h.target.value)||0)*(parseFloat(Y.qty)||0)}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:w.qty,onChange:h=>_(Y=>({...Y,qty:h.target.value,totalWt:(parseFloat(h.target.value)||0)*(parseFloat(Y.wtPerPc)||0)}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:w.totalWt})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:le,disabled:!a.editable,children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>U(!1),disabled:!a.editable,children:"Cancel"})]})})]})]})]})})]})]})})]})})}const al=ke.memo(({file:s,index:a,onRemove:o})=>{const[t,n]=l.useState(null);l.useEffect(()=>{if(!s)return;const p=URL.createObjectURL(s);return n(p),()=>URL.revokeObjectURL(p)},[s]);const m=l.useCallback(()=>{o(a)},[a,o]);return t?e.jsxs("div",{style:{position:"relative",display:"inline-block",marginRight:"10px",marginBottom:"10px"},children:[e.jsx("img",{src:t,alt:s.name,className:"border",style:{width:"100px",height:"100px",objectFit:"cover"}}),e.jsx("button",{onClick:m,className:"btn btn-danger btn-sm",style:{position:"absolute",top:"0",right:"0",borderRadius:"50%",width:"24px",height:"24px",lineHeight:"1",padding:"0"},children:"×"})]}):null}),nl=({config:s,imagesPart:a,setImagesPart:o,imagesPacking:t,setImagesPacking:n,imagesOuter:m,setImagesOuter:p,imagesQkp:u,setImagesQkp:d,imagesBkp:c,setImagesBkp:r,imagesOpen:f,setImagesOpen:i})=>{const x=j=>N=>{const v=N.target.value;j(g=>({...g,caption:v}))},y=j=>N=>{const v=Array.from(N.target.files);v.length>0&&j(g=>({...g,files:[...g.files,...v]}))},b=j=>N=>{j(v=>{const g=[...v.files];return g.splice(N,1),{...v,files:g}})},A=[{id:"part",title:"Part Images",state:a,setter:o},{id:"packing",title:"Packing Images",state:t,setter:n},{id:"outer",title:"Outer Images",state:m,setter:p},{id:"qkp",title:"QKP Images",state:u,setter:d},{id:"bkp",title:"BKP Images",state:c,setter:r}];return e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>i(j=>!j),"aria-expanded":f,"aria-controls":"imagesSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${f?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Images"]})}),f&&e.jsx("div",{id:"imagesSection",children:e.jsx("div",{className:"row mt-2",children:A.map(({id:j,title:N,state:v,setter:g})=>e.jsxs("div",{className:"col-md-6 mt-2",children:[e.jsx("label",{className:"small",children:N}),e.jsxs("div",{className:"border p-2 mb-2",children:[e.jsx("textarea",{value:v.caption,onChange:x(g),placeholder:"Enter a caption...",rows:"2",className:"form-control mb-2",disabled:!s.editable}),e.jsx("div",{className:"d-flex flex-wrap",children:v.files.length===0?e.jsx("div",{className:"text-muted small",children:"No images"}):v.files.map((P,k)=>e.jsx(al,{file:P,index:k,onRemove:b(g)},`${P.name}-${P.lastModified}-${k}`))}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:`${j}-image-input`,className:"btn btn-sm btn-outline-primary",children:"+ Add"}),e.jsx("input",{type:"file",id:`${j}-image-input`,accept:".jpg,.jpeg,.png",multiple:!0,style:{display:"none"},onChange:y(g),disabled:!s.editable})]})]})]},j))})})]})};function rl(s){const{config:a,innerRows:o,setInnerRows:t,newInner:n,setNewInner:m,handleRemoveInnerRow:p,openMaterialPicker:u,materials:d}=s,[c,r]=l.useState(!1),[f,i]=l.useState(null),x=l.useRef(null);l.useEffect(()=>{f!==null&&x.current&&x.current.focus()},[f]);const y=()=>{if(!n.materialNo.trim()){alert("Enter Pack Material No");return}t(j=>[...j,{...n}]),m({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})},b=(j,N,v)=>{const g=o.map((P,k)=>k===j?{...P,[N]:v}:P);t(g)},A=(j,N)=>{const v=d.find(g=>g.materialNo===j);if(console.log("Blurred ->>"),v){console.log("Material FOund -->",JSON.stringify(v));const g={name:v.materialName,supplierName:v.supplier.supplier_name,L:v.dimension_inner_length,W:v.dimension_inner_width,H:v.dimension_inner_height};if(N==="new")console.log("New Inner -->",n),m(P=>({...P,...g}));else{const P=o.map((k,O)=>O===N?{...k,...g}:k);t(P)}}};return e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"small mb-1",children:"INNER (Pack Material)"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{i(null),r(!0)},disabled:c||!a.editable,children:"Add"})})]}),e.jsx("div",{className:"table-responsive mt-2",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 small",children:[e.jsx("thead",{style:{backgroundColor:"#cfcfcfff"},children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{style:{width:30},children:"No"}),e.jsx("th",{style:{width:120},children:"Pack Material No"}),e.jsx("th",{style:{width:40},children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{width:60},children:"L"}),e.jsx("th",{style:{width:60},children:"W"}),e.jsx("th",{style:{width:60},children:"H"}),e.jsx("th",{style:{width:60},children:"Wt/pc"}),e.jsx("th",{style:{width:60},children:"Qty"}),e.jsx("th",{style:{width:80},children:"Total Wt"}),e.jsx("th",{style:{width:10},children:"msds"}),e.jsx("th",{style:{width:10},children:"draw"}),e.jsx("th",{style:{width:80},children:"Action"})]})}),e.jsxs("tbody",{children:[o.length===0&&!c?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-3",children:"No Data Found"})}):o.map((j,N)=>f===N?e.jsxs("tr",{children:[e.jsx("td",{children:N+1}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{ref:x,value:j.materialNo,onChange:g=>b(N,"materialNo",g.target.value),onBlur:g=>A(g.target.value,N),className:"form-control form-control-sm",disabled:!a.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>u(N===0?"box":"inner",N),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{value:j.suffix,onChange:g=>b(N,"suffix",g.target.value),readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.name,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.supplierName,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.L,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.W,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.H,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:j.wtPerPc,onChange:g=>b(N,"wtPerPc",g.target.value),className:"form-control form-control-sm",disabled:!a.editable})}),e.jsx("td",{children:e.jsx("input",{value:j.qty,onChange:g=>b(N,"qty",g.target.value),className:"form-control form-control-sm",disabled:!a.editable})}),e.jsx("td",{children:(Number(j.wtPerPc||0)*Number(j.qty||0)).toFixed(2)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show MSDS doc for "+j.materialNo),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show Drawing doc for "+j.materialNo),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>i(null),disabled:!a.editable,children:"Save"})})]},N):e.jsxs("tr",{onClick:()=>{a.editable&&(i(N),r(!1))},children:[e.jsx("td",{children:N+1}),e.jsx("td",{children:j.materialNo}),e.jsx("td",{children:j.suffix}),e.jsx("td",{children:j.name}),e.jsx("td",{children:j.supplierName}),e.jsx("td",{children:j.L}),e.jsx("td",{children:j.W}),e.jsx("td",{children:j.H}),e.jsx("td",{children:j.wtPerPc}),e.jsx("td",{children:j.qty}),e.jsx("td",{children:(Number(j.wtPerPc||0)*Number(j.qty||0)).toFixed(2)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:g=>{g.stopPropagation(),alert("Show MSDS doc for "+j.materialNo)},children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:g=>{g.stopPropagation(),alert("Show Drawing doc for "+j.materialNo)},children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:g=>{g.stopPropagation(),p(N)},disabled:!a.editable,children:e.jsx("i",{className:"fas fa-trash"})})})]},N)),c&&e.jsxs("tr",{children:[e.jsx("td",{children:"+"}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:n.materialNo,onChange:j=>m(N=>({...N,materialNo:j.target.value})),onBlur:j=>A(j.target.value,"new")}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>u(o.length===0?"box":"inner"),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.suffix,onChange:j=>m(N=>({...N,suffix:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.name,onChange:j=>m(N=>({...N,name:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.supplierName,onChange:j=>m(N=>({...N,supplierName:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.L,onChange:j=>m(N=>({...N,L:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.W,onChange:j=>m(N=>({...N,W:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.H,onChange:j=>m(N=>({...N,H:j.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.wtPerPc,onChange:j=>m(N=>({...N,wtPerPc:j.target.value}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.qty,onChange:j=>m(N=>({...N,qty:j.target.value}))})}),e.jsx("td",{children:"-"}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show MSDS doc for new material"),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show Drawing doc for new material"),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:y,disabled:!a.editable,children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>{m({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),r(!1)},disabled:!a.editable,children:"Cancel"})]})})]})]})]})})]})})}function ol(s){const{packingOpen:a,setPackingOpen:o}=s;return e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>o(t=>!t),"aria-expanded":a,"aria-controls":"packingSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${a?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Packing"]})}),a&&e.jsx("div",{id:"packingSection",children:e.jsx(rl,{...s})})]})})}function il(s){const{config:a,logisticOpen:o,setLogisticOpen:t,tmmindDestDockCode:n,setTmmindDestDockCode:m,logisticRemark:p,setLogisticRemark:u,processType:d,setProcessType:c,addressRack:r,setAddressRack:f}=s;return e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>t(i=>!i),"aria-expanded":o,"aria-controls":"logisticSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${o?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Logistic Information"]})}),o&&e.jsxs("div",{id:"logisticSection",className:"mt-2",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"TMMIN Dest Dock Code"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{className:"form-control form-control-sm",value:n,onChange:i=>m(i.target.value),disabled:!a.editable,placeholder:"Dock Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Address Rack"}),e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:i=>f(i.target.value),disabled:!a.editable,placeholder:"Address Rack"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Remark"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:3,value:p,onChange:i=>u(i.target.value),disabled:!a.editable,placeholder:"Remark"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Process Type"}),e.jsx("div",{children:["N","W","X","Y"].map(i=>e.jsxs("label",{className:"mr-3",children:[e.jsx("input",{type:"radio",name:"processType",value:i,checked:d===i,onChange:()=>c(i),disabled:!a.editable})," ",i]},i))})]})]})]})}const cl=s=>({cpsNo:s.cpsNo,refCpsNo:s.refCpsNo,issueDate:s.issueDate,effectiveDate:s.effectiveDate,cfcPjtCode:s.cfcPjtCode,model:s.model,partNo:s.partNo,partName:s.partName,supplier:s.supplier,plantCode:s.plantCode,dockCode:s.dockCode,pseInfo:{packingPlantCurr:s.pseInfo.packingPlantCurr,packingPlantNext:s.pseInfo.packingPlantNext,vanningPlantCurr:s.pseInfo.vanningPlantCurr,vanningPlantNext:s.pseInfo.vanningPlantNext,orderPatternCurr:s.pseInfo.orderPatternCurr,orderPatternNext:s.pseInfo.orderPatternNext,category:s.pseInfo.category,katashiki:s.pseInfo.katashiki,importerLineProcess:s.pseInfo.importerLineProcess,caseCode:s.pseInfo.caseCode,boxNumber:s.pseInfo.boxNumber,renban:s.pseInfo.renban,renbanEff:s.pseInfo.renbanEff,packingProcessBoxing:s.pseInfo.packingProcessBoxing,packingProcessStacking:s.pseInfo.packingProcessStacking},images:{part:s.images.part,packing:s.images.packing,outer:s.images.outer,qkp:s.images.qkp,bkp:s.images.bkp},packing:{outerModuleType:s.packing.outerModuleType,outerDimension:s.packing.outerDimension,innerVolume:s.packing.innerVolume,outerVolume:s.packing.outerVolume,innerRows:s.packing.innerRows},notes:s.notes,logistic:{tmmindDestDockCode:s.logistic.tmmindDestDockCode,logisticRemark:s.logistic.logisticRemark,processType:s.logistic.processType,addressRack:s.logistic.addressRack}}),dl=s=>{s.setCpsNo(""),s.setRefCpsNo(""),s.setIssueDate(""),s.setEffectiveDate(""),s.setCfcPjtCode(""),s.setModel(""),s.setPartNo(""),s.setPartName(""),s.setSupplier(""),s.setPlantCode(""),s.setDockCode(""),s.setPseOpen(!1),s.setPackingPlantCurr(""),s.setPackingPlantNext(""),s.setVanningPlantCurr(""),s.setVanningPlantNext(""),s.setOrderPatternCurr(""),s.setOrderPatternNext(""),s.setCategory(""),s.setKatashiki({AD:"",AU:"",AF:"",AX:""}),s.setImporterLineProcess(""),s.setCaseCode(""),s.setBoxNumber(""),s.setRenban(""),s.setRenbanEff(""),s.setPackingProcessBoxing(""),s.setPackingProcessStacking(""),s.setImagesPart({caption:"",files:[]}),s.setImagesPacking({caption:"",files:[]}),s.setImagesOuter({caption:"",files:[]}),s.setImagesQkp({caption:"",files:[]}),s.setImagesBkp({caption:"",files:[]}),s.setOuterModuleType(""),s.setOuterMaterialName(""),s.setOuterDimension({L:"",W:"",H:""}),s.setInnerVolume(""),s.setOuterVolume(""),s.setInnerRows([]),s.setNotes(""),s.setNewInner({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),s.setLogisticOpen(!0),s.setTmmindDestDockCode(""),s.setLogisticRemark(""),s.setProcessType("N"),s.setAddressRack("")};function ml({show:s,onClose:a,onSave:o,editData:t,config:n}){const[m,p]=l.useState("general"),[u,d]=l.useState({current:{},comparisons:[]}),[c,r]=l.useState([]),[f,i]=l.useState([]),[x,y]=l.useState(""),[b,A]=l.useState(""),[j,N]=l.useState(""),[v,g]=l.useState(""),[P,k]=l.useState(""),[O,M]=l.useState(""),[L,S]=l.useState(""),[W,C]=l.useState(""),[D,T]=l.useState(""),[H,Z]=l.useState(""),[se,I]=l.useState(""),[V,w]=l.useState(!1),[_,q]=l.useState(""),[te,U]=l.useState(""),[E,R]=l.useState(""),[le,B]=l.useState(""),[$,K]=l.useState(""),[h,Y]=l.useState(""),[F,z]=l.useState(""),[ee,X]=l.useState([]),[de,ue]=l.useState(""),[ge,ve]=l.useState(""),[Ie,Ce]=l.useState(""),[Q,G]=l.useState(""),[ae,oe]=l.useState(""),[ne,he]=l.useState(""),[fe,xe]=l.useState(""),[Fe,Me]=l.useState([]),[ts,ls]=l.useState({materialNo:"",suffix:"",name:"",supplier:"",L:"",W:"",H:"",wtPerPc:"",qty:"",totalWt:""}),[js,Ke]=l.useState({caption:"",files:[]}),[fs,qe]=l.useState({caption:"",files:[]}),[Ns,Ve]=l.useState({caption:"",files:[]}),[bs,Ge]=l.useState({caption:"",files:[]}),[gs,Ye]=l.useState({caption:"",files:[]}),[Js,as]=l.useState(""),[ns,Ee]=l.useState([]),[vs,ze]=l.useState(""),[rs,Be]=l.useState({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),[Qs,Zs]=l.useState(!0),[Xs,et]=l.useState(!0),[st,Cs]=l.useState(!1),[tt,os]=l.useState(!1),[lt,is]=l.useState(!1),[at,cs]=l.useState(!1),[ys,nt]=l.useState("all"),[rt,ot]=l.useState(null),[it,ds]=l.useState(!0),[Ss,Je]=l.useState(""),[ws,Qe]=l.useState(""),[Ps,Ze]=l.useState("N"),[ks,Xe]=l.useState("");l.useEffect(()=>{fetch("/packing-cost-fe/cpsComparison.json").then(ce=>ce.json()).then(ce=>d(ce)),fetch("/materials.json").then(ce=>ce.json()).then(ce=>r(ce)),fetch("/models.json").then(ce=>ce.json()).then(ce=>i(ce))},[]),l.useEffect(()=>{!t&&O&&L&&y(`${O}-${L}`)},[t,O,L]);const ct=u.current,dt=u.comparisons;l.useEffect(()=>{s&&(t?(y(t.cpsNo||""),A(t.refCpsNo||""),N(t.issueDate||""),g(t.effectiveDate||""),k(t.cfcPjtCode||""),M(t.model||""),S(t.partNo||""),C(t.partName||""),T(t.supplier||""),Z(t.plantCode||""),I(t.dockCode||""),t.pseInfo&&(q(t.pseInfo.packingPlantCurr||""),U(t.pseInfo.packingPlantNext||""),R(t.pseInfo.vanningPlantCurr||""),B(t.pseInfo.vanningPlantNext||""),K(t.pseInfo.orderPatternCurr||""),Y(t.pseInfo.orderPatternNext||""),z(t.pseInfo.category||""),X(t.pseInfo.katashiki||[]),ue(t.pseInfo.importerLineProcess||""),ve(t.pseInfo.caseCode||""),Ce(t.pseInfo.boxNumber||""),G(t.pseInfo.renban||""),oe(t.pseInfo.renbanEff||""),he(t.pseInfo.packingProcessBoxing||""),xe(t.pseInfo.packingProcessStacking||""),Me(t.pseInfo.outerRows||[])),t.images&&(Ke(t.images.part||{caption:"",files:[]}),qe(t.images.packing||{caption:"",files:[]}),Ve(t.images.outer||{caption:"",files:[]}),Ge(t.images.qkp||{caption:"",files:[]}),Ye(t.images.bkp||{caption:"",files:[]})),t.packing&&(as(t.packing.innerVolume||""),Ee(t.packing.innerRows||[])),ze(t.notes||""),t.logistic&&(Je(t.logistic.tmmindDestDockCode||""),Qe(t.logistic.logisticRemark||""),Ze(t.logistic.processType||"N"),Xe(t.logistic.addressRack||""))):(y(""),A(""),N(""),g(""),k(""),M(""),S(""),C(""),T(""),Z(""),I(""),w(!1),q(""),U(""),R(""),B(""),K(""),Y(""),z(""),X([]),ue(""),ve(""),Ce(""),G(""),oe(""),he(""),xe(""),Me([]),Ke({caption:"",files:[]}),qe({caption:"",files:[]}),Ve({caption:"",files:[]}),Ge({caption:"",files:[]}),Ye({caption:"",files:[]}),as(""),Ee([]),ze(""),Be({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),ds(!0),Je(""),Qe(""),Ze("N"),Xe("")))},[s,t]);function mt(){if(!rs.materialNo.trim()){alert("Enter Pack Material No");return}Ee(re=>[...re,{...rs}]),Be({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})}function ut(re){Ee(ce=>ce.filter((Ae,De)=>De!==re))}function ht(re){re&&(S(re.partNo),C(re.partName),T(re.supplierName)),os(!1)}const pt=()=>{const re=cl({cpsNo:x,refCpsNo:b,issueDate:j,effectiveDate:v,cfcPjtCode:P,model:O,partNo:L,partName:W,supplier:D,plantCode:H,dockCode:se,pseInfo:{packingPlantCurr:_,packingPlantNext:te,vanningPlantCurr:E,vanningPlantNext:le,orderPatternCurr:$,orderPatternNext:h,category:F,katashiki:ee,importerLineProcess:de,caseCode:ge,boxNumber:Ie,renban:Q,renbanEff:ae,packingProcessBoxing:ne,packingProcessStacking:fe,outerRows:Fe},images:{part:js,packing:fs,outer:Ns,qkp:bs,bkp:gs},packing:{innerVolume:Js,innerRows:ns},notes:vs,logistic:{tmmindDestDockCode:Ss,logisticRemark:ws,processType:Ps,addressRack:ks}});o(re),Is()},Is=()=>{dl({setCpsNo:y,setRefCpsNo:A,setIssueDate:N,setEffectiveDate:g,setCfcPjtCode:k,setModel:M,setPartNo:S,setPartName:C,setSupplier:T,setPlantCode:Z,setDockCode:I,setPseOpen:w,setPackingPlantCurr:q,setPackingPlantNext:U,setVanningPlantCurr:R,setVanningPlantNext:B,setOrderPatternCurr:K,setOrderPatternNext:Y,setCategory:z,setKatashiki:X,setImporterLineProcess:ue,setCaseCode:ve,setBoxNumber:Ce,setRenban:G,setRenbanEff:oe,setPackingProcessBoxing:he,setPackingProcessStacking:xe,setPseOuterRows:Me,setNewPseOuter:ls,setImagesPart:Ke,setImagesPacking:qe,setImagesOuter:Ve,setImagesQkp:Ge,setImagesBkp:Ye,setInnerVolume:as,setInnerRows:Ee,setNotes:ze,setNewInner:Be,setLogisticOpen:ds,setTmmindDestDockCode:Je,setLogisticRemark:Qe,setProcessType:Ze,setAddressRack:Xe}),a()};function xt(re){if(re)if(Array.isArray(re))M(re.map(ce=>ce.model_code).join(", "));else{M(re.model_code||"");const ce=f.find(Ae=>Ae.model_code===re.model_code);ce&&(X(ce.katashiki||[]),k(ce.model_cfc||""))}is(!1)}function jt(re){if(re){const ce=rt,Ae=ys.toLowerCase();if(Ae==="outer"||Ae==="module"||Ae==="outer-material"){const De=Ae==="outer-material",_e={materialNo:re.materialNo,name:re.materialName,[De?"supplierName":"supplier"]:re.supplierName,L:re.dimension_length,W:re.dimension_width,H:re.dimension_height,wtPerPc:re.unitWeight};if(ce==="new")De?setNewOuter(ye=>({...ye,..._e})):ls(ye=>({...ye,..._e}));else if(ce===null)setNewOuter(ye=>({...ye,..._e}));else if(De){const ye=[...outerRows];ye[ce]={...ye[ce],..._e},setOuterRows(ye)}else{const ye=[...Fe];ye[ce]={...ye[ce],..._e},Me(ye)}}else if(Ae==="inner"||Ae==="box"){const De={materialNo:re.materialNo,name:re.materialName,supplierName:re.supplierName,L:re.dimension_inner_length,W:re.dimension_inner_width,H:re.dimension_inner_height,wtPerPc:re.unitWeight};if(ce==="new"||ce===null)Be(_e=>({..._e,...De}));else{const _e=[...ns];_e[ce]={..._e[ce],...De},Ee(_e)}}}cs(!1)}const ft=()=>is(!0),_s=(re,ce=null)=>{nt(re),ot(ce),cs(!0)};return s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:re=>{re.target===re.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1200},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:t?"CPS - Edit":"CPS - New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[n.general.visible&&e.jsxs(e.Fragment,{children:[e.jsx(tl,{config:n.general,cpsNo:x,setCpsNo:J(y),refCpsNo:b,setRefCpsNo:J(A),cfcPjtCode:P,setCfcPjtCode:J(k),model:O,setModel:J(M),partNo:L,setPartNo:J(S),partName:W,setPartName:J(C),supplier:D,setSupplier:J(T),plantCode:H,setPlantCode:J(Z),dockCode:se,setDockCode:J(I),openPartPicker:()=>os(!0),openModelPicker:ft,setComparisonOpen:Cs}),n.pse.visible&&e.jsx("hr",{})]}),n.pse.visible&&e.jsxs(e.Fragment,{children:[e.jsx(ll,{config:n.pse,pseOpen:V,setPseOpen:w,packingPlantCurr:_,setPackingPlantCurr:J(q),packingPlantNext:te,setPackingPlantNext:J(U),vanningPlantCurr:E,setVanningPlantCurr:J(R),vanningPlantNext:le,setVanningPlantNext:J(B),orderPatternCurr:$,setOrderPatternCurr:J(K),orderPatternNext:h,setOrderPatternNext:J(Y),category:F,setCategory:J(z),katashiki:ee,setKatashiki:X,importerLineProcess:de,setImporterLineProcess:J(ue),caseCode:ge,setCaseCode:J(ve),boxNumber:Ie,setBoxNumber:J(Ce),renban:Q,setRenban:J(G),renbanEff:ae,setRenbanEff:J(oe),packingProcessBoxing:ne,setPackingProcessBoxing:J(he),packingProcessStacking:fe,setPackingProcessStacking:J(xe),pseOuterRows:Fe,setPseOuterRows:Me,newPseOuter:ts,setNewPseOuter:ls,openMaterialPicker:_s}),n.images.visible&&e.jsx("hr",{})]}),n.images.visible&&e.jsxs(e.Fragment,{children:[e.jsx(nl,{config:n.images,imagesOpen:Qs,setImagesOpen:Zs,imagesPart:js,setImagesPart:Ke,imagesPacking:fs,setImagesPacking:qe,imagesOuter:Ns,setImagesOuter:Ve,imagesQkp:bs,setImagesQkp:Ge,imagesBkp:gs,setImagesBkp:Ye}),n.packing.visible&&e.jsx("hr",{})]}),n.packing.visible&&e.jsxs(e.Fragment,{children:[e.jsx(ol,{config:n.packing,materials:c,packingOpen:Xs,setPackingOpen:et,innerRows:ns,setInnerRows:Ee,newInner:rs,setNewInner:Be,handleAddInnerRow:mt,handleRemoveInnerRow:ut,openMaterialPicker:_s}),n.logistic.visible&&e.jsx("hr",{})]}),n.logistic.visible&&e.jsx(il,{config:n.logistic,logisticOpen:it,setLogisticOpen:ds,tmmindDestDockCode:Ss,setTmmindDestDockCode:Je,logisticRemark:ws,setLogisticRemark:Qe,processType:Ps,setProcessType:Ze,addressRack:ks,setAddressRack:Xe}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Note"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:vs,onChange:J(ze)})]})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-secondary",onClick:Is,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary ml-2",onClick:pt,children:"Save"}),e.jsx("button",{className:"btn btn-success ml-2",onClick:()=>alert("Submit action to be implemented."),children:"Submit"})]})]}),e.jsx("style",{children:`
          .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
          .np-modal { width: 100%; max-height: 95vh; overflow: auto; z-index: 2001; }
          .table-sm td, .table-sm th { vertical-align: middle; }
        `})]}),e.jsx(el,{isOpen:st,onClose:()=>Cs(!1),parts:dt,current:ct,extraClass:"multi-parts-comparison"}),e.jsx(Re,{show:tt,onClose:()=>os(!1),onSelect:ht,zIndex:4e3,mode:"single"}),e.jsx(Oe,{show:lt,onClose:()=>is(!1),onAdd:xt,selectionMode:"single"}),e.jsx(sl,{show:at,onClose:()=>cs(!1),onAdd:jt,zIndex:3e3,filter:ys})]}):null}const Ds=[{userId:"12345",name:"Rollin Khaider",dept:"PSE",role:"Dept Head"},{userId:"22345",name:"Asep Sumarna",dept:"PPM",role:"Section Head"},{userId:"32345",name:"Khalil Gibran",dept:"PSE",role:"Staff"},{userId:"42345",name:"Jaka T. Mulyo",dept:"PCD",role:"Staff"},{userId:"52345",name:"W.H. Jeanette",dept:"PPM",role:"Staff"}];function ul({show:s=!1,onClose:a,onSelect:o}){const[t,n]=l.useState({userId:"",name:"",dept:"",role:""}),[m,p]=l.useState(null);if(!s)return null;const u=r=>{n({...t,[r.target.name]:r.target.value})},d=()=>n({userId:"",name:"",dept:"",role:""}),c=Ds.filter(r=>(!t.userId||r.userId.includes(t.userId))&&(!t.name||r.name.toLowerCase().includes(t.name.toLowerCase()))&&(!t.dept||r.dept.toLowerCase().includes(t.dept.toLowerCase()))&&(!t.role||r.role.toLowerCase().includes(t.role.toLowerCase())));return e.jsxs("div",{className:"np-modal-backdrop",style:{zIndex:3e3},children:[e.jsxs("div",{className:"np-modal card card-outline card-info",style:{maxWidth:600},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0",style:{fontSize:20},children:e.jsx("b",{children:"Select a Person"})}),e.jsx("button",{className:"btn btn-tool ml-auto",onClick:a,children:e.jsx("span",{style:{fontSize:25},children:"×"})})]}),e.jsxs("div",{className:"card-body pb-2",children:[e.jsxs("div",{className:"form-row align-items-end",children:[e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"User Id"}),e.jsx("input",{name:"userId",className:"form-control form-control-sm",value:t.userId,onChange:u})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Name"}),e.jsx("input",{name:"name",className:"form-control form-control-sm",value:t.name,onChange:u})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small mb-1",children:"Dept"}),e.jsx("input",{name:"dept",className:"form-control form-control-sm",value:t.dept,onChange:u})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Role"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{name:"role",className:"form-control form-control-sm",value:t.role,onChange:u}),e.jsxs("div",{className:"input-group-append",children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:d,children:e.jsx("i",{className:"fas fa-times"})})]})]})]})]}),e.jsx("div",{style:{maxHeight:260,overflowY:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"User ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Dept"}),e.jsx("th",{children:"Role"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center text-muted",children:"No Data Found"})}):c.map((r,f)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"radio",checked:m===r.userId,onChange:()=>p(r.userId)})}),e.jsx("td",{children:r.userId}),e.jsx("td",{children:r.name}),e.jsx("td",{children:r.dept}),e.jsx("td",{children:r.role})]},r.userId))})]})})]}),e.jsx("div",{className:"card-footer text-right",children:e.jsxs("button",{className:"btn btn-success",disabled:!m,onClick:()=>{const r=Ds.find(f=>f.userId===m);r&&o&&o(r),a&&a()},children:[e.jsx("i",{className:"fas fa-check mr-1"})," Select"]})})]}),e.jsx("style",{children:`
        .np-modal-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.35);
          z-index: 3000;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 1rem;
        }
        .np-modal { width: 100%; z-index: 3001; }
        .table-sm td, .table-sm th { vertical-align: middle; }
      `})]})}const hs=[{destCode:"301B",code:"TAR",country:"ARGENTINA",company:"Toyota Argentina"},{destCode:"301B",code:"TASA",country:"ARGENTINA",company:"Toyota Argentina S.A."},{destCode:"537B",code:"TSM",country:"AFRIKA",company:"Toyota South Africa Motors"},{destCode:"709B",code:"TKM",country:"INDIA",company:"Toyota Kirloskar Motor"},{destCode:"715B",code:"TMV",country:"VIETNAM",company:"Toyota Motor Vietnam"},{destCode:"717C",code:"IMC",country:"PAKISTAN",company:"Indus Motor Company"},{destCode:"721B",code:"KUO",country:"KUOZUI",company:"Kuozui Motors"},{destCode:"721C",code:"KUO",country:"KUOZUI",company:"Kuozui Motors"},{destCode:"722C",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"722F",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"722B",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"811C",code:"TMP",country:"PHILIPINE",company:"Toyota Motor Philippines"},{destCode:"812B",code:"UMW",country:"MALAYSIA",company:"UMW Toyota Motor"},{destCode:"812K",code:"UMW",country:"MALAYSIA",company:"UMW Toyota Motor"},{destCode:"547A",code:"TEE",country:"MESIR",company:"Toyota Egypt Enterprise"},{destCode:"303B",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"303E",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"303D",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"D55E",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"704B",code:"TMY",country:"MYANMAR",company:"Toyota Motor Myanmar"},{destCode:"705A",code:"CAM",country:"CAMBOJA",company:"Cambodia Toyota Motor"},{destCode:"709C",code:"TKAP",country:"INDIA 2",company:"Toyota Kirloskar Auto Parts"},{destCode:"709D",code:"TIEI",country:"INDIA 3",company:"Toyota Industries Engine India"},{destCode:"722S",code:"STM",country:"SIAM THAILAND",company:"Siam Toyota Motor"},{destCode:"811W",code:"TAP",country:"PHILIPINE 2",company:"Toyota Auto Parts Philippines"},{destCode:"807B",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"},{destCode:"807D",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"},{destCode:"807J",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"}],hl=[{id:1,cpsNo:"CPS-2024-001",refCpsNo:"",issueDate:"2024-07-01",effectiveDate:"2024-07-10",dpiNo:"DPI-2024-001",cfcPjtCode:"PJT-A",model:"579W",partNo:"90466T006200",partName:"CLIP, MOULDING",supplier:"Supplier A",plantCode:"TMMIN",dockCode:"D01",pseInfo:{packingPlantCurr:"PLANT-1",packingPlantNext:"PLANT-1",vanningPlantCurr:"VPLANT-A",vanningPlantNext:"VPLANT-A",orderPatternCurr:"A1",orderPatternNext:"A1",category:"CAT-1",katashiki:{AD:"AD1",AU:"AU1",AF:"AF1",AX:"AX1"},importerLineProcess:"ILP-1",caseCode:"CC-001",boxNumber:"B-001",renban:"R-001",renbanEff:"2024-07-10",packingProcessBoxing:"Manual",packingProcessStacking:"Auto"},images:{part:{caption:"Part Image",files:[]},packing:{caption:"Packing Image",files:[]},outer:{caption:"Outer Image",files:[]},qkp:{caption:"QKP Image",files:[]},bkp:{caption:"BKP Image",files:[]}},packing:{outerModuleType:"MOD-A",outerDimension:{L:"100",W:"80",H:"60"},innerVolume:"0.0384",outerVolume:"0.048",innerRows:[{materialNo:"MAT-001",suffix:"S1",name:"Inner Box",parent:"",supplierId:"SUP-001",supplierName:"Supplier Inner",L:"50",W:"40",H:"30",wtPerPc:"0.1",qty:"10"}]},notes:"This is a note for the first CPS.",numParts:5,fromUser:"User A",toUser:"User B",status:"Approved"},{id:2,cpsNo:"CPS-2024-002",refCpsNo:"CPS-2024-001",issueDate:"2024-07-05",effectiveDate:"2024-07-15",dpiNo:"DPI-2024-002",cfcPjtCode:"PJT-B",model:"579W",partNo:"32101BZ10000",partName:"Part B",supplier:"Supplier B",plantCode:"TMMIN",dockCode:"D02",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:8,fromUser:"User C",toUser:"User D",status:"Submitted"},{id:3,cpsNo:"CPS-2024-003",refCpsNo:"",issueDate:"2024-07-12",effectiveDate:"2024-07-20",dpiNo:"DPI-2024-003",cfcPjtCode:"PJT-C",model:"579W",partNo:"90466T006200",partName:"Part C",supplier:"Supplier C",plantCode:"TMMIN",dockCode:"D03",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:3,fromUser:"User E",toUser:"User F",status:"Draft"},{id:4,cpsNo:"CPS-2024-004",refCpsNo:"",issueDate:"2024-07-15",effectiveDate:"2024-07-25",dpiNo:"DPI-2024-004",cfcPjtCode:"PJT-A",model:"579W",partNo:"32101BZ10000",partName:"Part D",supplier:"Supplier D",plantCode:"TMMIN",dockCode:"D04",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:12,fromUser:"User A",toUser:"User G",status:"Rejected"},{id:5,cpsNo:"CPS-2024-005",refCpsNo:"CPS-2024-004",issueDate:"2024-07-20",effectiveDate:"2024-08-01",dpiNo:"DPI-2024-005",cfcPjtCode:"PJT-D",model:"579W",partNo:"90466T006200",partName:"Part E",supplier:"Supplier E",plantCode:"TMMIN",dockCode:"D05",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:7,fromUser:"User H",toUser:"User I",status:"Approved"}],pl=({onNewCps:s,onUpload:a,onDownload:o,onCreatePsi:t,onCreateEci:n,onComparePcs:m})=>e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:s,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create CPS"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:t,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create PSI"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:n,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create ECI"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-info",onClick:m,children:[e.jsx("i",{className:"fas fa-exchange-alt mr-1"})," Compare PCS"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary ml-2",title:"Upload",onClick:a,children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary ml-1",title:"Download Template",onClick:o,children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]});function ps({show:s,onClose:a,onAdd:o,selectionMode:t="multi"}){const[n,m]=l.useState([]),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(""),[i,x]=l.useState(t==="multi"?[]:null),[y,b]=l.useState([]),[A,j]=l.useState(1),N=15;l.useEffect(()=>{fetch("/packing-cost-fe/destinations.json").then(D=>D.json()).then(D=>{m(D),b(D)})},[]),l.useEffect(()=>{s&&(u(""),c(""),f(""),x(t==="multi"?[]:null),b(n),j(1))},[s,t,n]);const v=C=>{x(t==="multi"?D=>D.includes(C)?D.filter(T=>T!==C):[...D,C]:C)},g=()=>{const C=n.filter(D=>D.destCode.toLowerCase().includes(p.toLowerCase())&&D.code.toLowerCase().includes(d.toLowerCase())&&D.country.toLowerCase().includes(r.toLowerCase()));b(C),j(1)},P=()=>{u(""),c(""),f(""),b(n),j(1)},k=()=>{if(typeof o=="function")if(t==="multi")o(i.map(C=>n.find(D=>D.destCode===C)));else{const C=n.find(D=>D.destCode===i);o(C)}x(t==="multi"?[]:null),typeof a=="function"&&a()},O=A*N,M=O-N,L=y.slice(M,O),S=Math.ceil(y.length/N);if(!s)return null;const W=e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",inset:0,zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"modal-dialog modal-lg",role:"document",style:{zIndex:2100},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Destination"}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"d-flex align-items-end mb-3",children:[e.jsxs("div",{style:{flex:"0 0 20%",paddingRight:"0.5rem"},children:[e.jsx("label",{className:"small",children:"Dest Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:C=>u(C.target.value)})]}),e.jsxs("div",{style:{flex:"0 0 20%",paddingRight:"0.5rem"},children:[e.jsx("label",{className:"small",children:"Dest Country Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:C=>c(C.target.value)})]}),e.jsxs("div",{style:{flex:"0 0 40%",paddingRight:"0.5rem"},children:[e.jsx("label",{className:"small",children:"Country Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:C=>f(C.target.value)})]}),e.jsxs("div",{style:{flex:"1 1 auto"},className:"text-right",children:[e.jsxs("button",{className:"btn btn-sm btn-primary mr-1",onClick:g,type:"button",children:["Filter ",e.jsx("i",{className:"fas fa-search"})]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:P,type:"button",children:["Clear ",e.jsx("i",{className:"fas fa-times"})]})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Dest Country Code"}),e.jsx("th",{children:"Country Name"})]})}),e.jsx("tbody",{children:L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No destinations found"})}):L.map(C=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:t==="multi"?"checkbox":"radio",name:"destination-selection",checked:t==="multi"?i.includes(C.destCode):i===C.destCode,onChange:()=>v(C.destCode)})}),e.jsx("td",{children:C.destCode}),e.jsx("td",{children:C.code}),e.jsx("td",{children:C.country})]},C.destCode))})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>j(C=>Math.max(1,C-1)),disabled:A===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",A," of ",S]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>j(C=>Math.min(S,C+1)),disabled:A===S,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:k,type:"button",children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:a,type:"button",children:"Cancel"})]})]})]})})});return us.createPortal(W,typeof document<"u"?document.body:null)}const xl=()=>{const{user:s}=Te(),o=(()=>{if(s&&s.department&&s.role){const G=Ms[s.department];if(G&&G[s.role])return G[s.role]}return Ms.default})(),[t,n]=l.useState(hl),[m,p]=l.useState([]),[u,d]=l.useState(!1),[c,r]=l.useState(null),[f,i]=l.useState(!1),[x,y]=l.useState(null),[b,A]=l.useState(!1),[j,N]=l.useState(""),[v,g]=l.useState(""),[P,k]=l.useState(""),[O,M]=l.useState(""),[L,S]=l.useState(""),[W,C]=l.useState(""),[D,T]=l.useState(""),[H,Z]=l.useState(""),[se,I]=l.useState(""),[V,w]=l.useState(""),[_,q]=l.useState(""),[te,U]=l.useState(""),[E,R]=l.useState(""),[le,B]=l.useState(""),[$,K]=l.useState({currentPage:1,perPage:5}),h=()=>{N(""),g(""),k(""),M(""),S(""),C(""),T(""),Z(""),I(""),w(""),q(""),U(""),R(""),B(""),p([])},Y=G=>{const ae=Ce,oe=t.filter(ne=>(ae.cpsNo?ne.cpsNo.includes(ae.cpsNo):!0)&&(ae.refCpsNo?ne.refCpsNo.includes(ae.refCpsNo):!0)&&(ae.model?ne.model.toLowerCase().includes(ae.model.toLowerCase()):!0)&&(ae.partNo?ne.partNo.includes(ae.partNo):!0)&&(ae.cfcPjt?ne.cfcPjtCode.includes(ae.cfcPjt):!0)&&(ae.fromUser?new Date(ne.issuedDate)>=new Date(ae.fromUser):!0)&&(ae.toUser?new Date(ne.issuedDate)<=new Date(ae.toUser):!0)&&(ae.status?ne.status===ae.status:!0)&&(ae.destCode?ne.destCode===ae.destCode:!0)&&(ae.cpsPsiEci?ne.docType===ae.cpsPsiEci:!0));p(oe),K(ne=>({...ne,currentPage:1}))},F=G=>{let ae;if(c)ae=t.map(oe=>oe.id===c.id?{...oe,...G}:oe);else{const oe=t.length>0?Math.max(...t.map(ne=>ne.id))+1:1;ae=[...t,{...G,id:oe}]}n(ae),p(ae),d(!1),r(null)},z=G=>{r(G),d(!0)},ee=G=>{const ae=t.length>0?Math.max(...t.map(xe=>xe.id))+1:1,oe={...G,id:ae,refCpsNo:G.cpsNo,cpsNo:""},ne=m.findIndex(xe=>xe.id===G.id),he=[...t,oe],fe=[...m];fe.splice(ne+1,0,oe),n(he),p(fe)},X=()=>{d(!1),r(null)},de=()=>{console.log("Create PSI clicked")},ue=()=>{console.log("Create ECI clicked")},ge=()=>{console.log("Compare PCS clicked")},ve=G=>{y(G),i(!0)},Ie=G=>{w(G.destCode.toUpperCase()),q(G.country.toUpperCase()),A(!1)},Ce={cpsNo:j,refCpsNo:v,model:P,partNo:O,partName:L,cfcPjt:W,fromUser:D,toUser:H,status:se,destCode:V,destCountry:_,cpsPsiEci:te,supplierCode:E,supplierName:le},Q={setCpsNo:G=>N(G.toUpperCase()),setRefCpsNo:G=>g(G.toUpperCase()),setModel:G=>k(G.toUpperCase()),setPartNo:G=>M(G.toUpperCase()),setPartName:G=>S(G.toUpperCase()),setCfcPjt:G=>C(G.toUpperCase()),setFromUser:G=>T(G.toUpperCase()),setToUser:G=>Z(G.toUpperCase()),setStatus:G=>I(G.toUpperCase()),setDestCode:G=>w(G.toUpperCase()),setDestCountry:G=>q(G.toUpperCase()),setCpsPsiEci:G=>U(G.toUpperCase()),setSupplierCode:G=>R(G.toUpperCase()),setSupplierName:G=>B(G.toUpperCase())};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-secondary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"CPS List"})}),e.jsx(pl,{onNewCps:()=>d(!0),onCreatePsi:de,onCreateEci:ue,onComparePcs:ge})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(Ut,{filters:Ce,setters:Q,onSearch:()=>Y(),onClear:h,onPersonPicker:ve,onDestinationPicker:()=>A(!0),destinations:hs}),e.jsx("hr",{}),e.jsx(Wt,{filteredCps:m,page:$.currentPage,perPage:$.perPage,setPage:G=>K(ae=>({...ae,currentPage:G})),setPerPage:G=>K(ae=>({...ae,perPage:G})),onEdit:z,onClone:ee})]})]}),e.jsx(ml,{show:u,onClose:X,onSave:F,editData:c,config:o}),f&&e.jsx(ul,{show:f,onClose:()=>i(!1),onSelect:G=>{i(!1)}}),e.jsx(ps,{show:b,onClose:()=>A(!1),onAdd:Ie,selectionMode:"single"})]})};function jl({show:s=!1,onClose:a,initial:o=null,onSave:t,onSubmit:n}){const m={dpiNo:"",refDpiNo:"",issuedDate:"",effectiveDate:"",cfcPjt:"",model:"",from:"",to:"",supplier:"",numParts:0,numCps:0,status:"Draft",notes:""},[p,u]=l.useState(o||m),[d,c]=l.useState([]);if(l.useEffect(()=>(s?(u(o||m),c(o&&o.parts||[]),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s,o]),!s)return null;function r(N){const{name:v,value:g}=N.target;u(P=>({...P,[v]:g}))}function f(){const N={cps:"",partNo:"",suffix:"",name:"",parent:"",supplierCode:"",supplierName:"",L:"",W:"",H:"",wtPc:"",qtyBox:"",totalWt:""};c(v=>[...v,N])}function i(N,v,g){c(P=>P.map((k,O)=>O===N?{...k,[v]:g}:k))}function x(N){c(v=>v.filter((g,P)=>P!==N))}async function y(N){return await new Promise(v=>setTimeout(v,200)),null}async function b(){const N=(p.refDpiNo||"").trim();if(N)try{const v=await y(N);v&&(u(g=>({...g,...v})),c(v.parts||[]))}catch(v){console.error("fetch dpi by ref failed",v)}}function A(N){N&&N.preventDefault&&N.preventDefault();const v={...p,status:"Draft",parts:d};t&&t(v)}function j(N){N&&N.preventDefault&&N.preventDefault();const v={...p,status:"Submitted",parts:d};n&&n(v)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,role:"dialog","aria-modal":"true",children:e.jsx("div",{className:"modal-dialog modal-xl",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"DPI New"})}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:e.jsx("strong",{children:"DPI No."})}),e.jsx("input",{name:"dpiNo",className:"form-control form-control-sm",value:p.dpiNo,onChange:r})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CFC / PJT"}),e.jsx("input",{name:"cfcPjt",className:"form-control form-control-sm",value:p.cfcPjt,onChange:r})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Issued Date"}),e.jsx("input",{type:"date",name:"issuedDate",className:"form-control form-control-sm",value:p.issuedDate,onChange:r})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"From"}),e.jsx("input",{name:"from",className:"form-control form-control-sm",value:p.from,onChange:r})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier"}),e.jsx("input",{name:"supplier",className:"form-control form-control-sm",value:p.supplier,onChange:r})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:e.jsx("strong",{children:"DPI Ref No."})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{name:"refDpiNo",className:"form-control form-control-sm",value:p.refDpiNo,onChange:r,onBlur:b}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model"}),e.jsx("input",{name:"model",className:"form-control form-control-sm",value:p.model,onChange:r})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Effective Date"}),e.jsx("input",{type:"date",name:"effectiveDate",className:"form-control form-control-sm",value:p.effectiveDate,onChange:r})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"To"}),e.jsx("input",{name:"to",className:"form-control form-control-sm",value:p.to,onChange:r})]})]})]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3 mb-2",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"fas fa-chevron-down"})," ",e.jsx("strong",{children:"Parts"})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:f,children:[e.jsx("i",{className:"fas fa-plus"})," add"]})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"CPS"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Parent"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"L"}),e.jsx("th",{children:"W"}),e.jsx("th",{children:"H"}),e.jsx("th",{children:"Wt/pc"}),e.jsx("th",{children:"Qty/box"}),e.jsx("th",{children:"Total Wt"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsx("tbody",{children:d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-4",children:'No parts. Click "add" to insert a new part.'})}):d.map((N,v)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.cps,onChange:g=>i(v,"cps",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.partNo,onChange:g=>i(v,"partNo",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.suffix,onChange:g=>i(v,"suffix",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.name,onChange:g=>i(v,"name",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.parent,onChange:g=>i(v,"parent",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.supplierCode,onChange:g=>i(v,"supplierCode",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.supplierName,onChange:g=>i(v,"supplierName",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.L,onChange:g=>i(v,"L",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.W,onChange:g=>i(v,"W",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.H,onChange:g=>i(v,"H",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.wtPc,onChange:g=>i(v,"wtPc",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.qtyBox,onChange:g=>i(v,"qtyBox",g.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:N.totalWt,onChange:g=>i(v,"totalWt",g.target.value)})}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Edit",children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>x(v),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},v))})]})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{children:e.jsx("strong",{children:"Note :"})}),e.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:p.notes,onChange:N=>u(v=>({...v,notes:N.target.value}))})]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-success mr-2",onClick:A,children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,children:"Submit"})]})]})]})})}),e.jsx("div",{className:"modal-backdrop fade show"})]})}function fl(s){console.log("Props received by SearchSection:",s);const{filters:a,setters:o,onSearch:t,onClear:n,onPartSearch:m,onModelSearch:p,onDpiSearch:u,onSearchDestination:d,onSearchSupplier:c}=s,{modelCfc:r,destCode:f,partNo:i,supplierCode:x,cpsNo:y,implementationPeriod:b}=a||{},{setModelCfc:A,setDestCode:j,setPartNo:N,setSupplierCode:v,setCpsNo:g,setImplementationPeriod:P}=o||{},[k,O]=l.useState(""),M=W=>{if(W.key===" "||W.key===","){W.preventDefault();const C=k.trim();C&&N(D=>[...new Set([...D,C])]),O("")}},L=W=>{N(C=>C.filter(D=>D!==W))},S=()=>{console.log("Search button clicked in SearchSection"),t?t():console.error("onSearch prop is NOT DEFINED in SearchSection. Check the parent component.")};return e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Model CFC"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:r||"",onChange:J(A),placeholder:"Model CFC"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Model CFC",onClick:p,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Implementation Period"}),e.jsx("div",{className:"input-group input-group-sm",children:e.jsx("input",{className:"form-control form-control-sm",value:b||"",onChange:J(P),placeholder:"Implementation Period"})})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"4px"},children:[i&&i.map(W=>e.jsxs("span",{className:"badge badge-primary",style:{display:"flex",alignItems:"center",padding:"4px 8px"},children:[W,e.jsx("button",{type:"button",className:"close","aria-label":"Remove",onClick:()=>L(W),style:{color:"white",marginLeft:"8px",textShadow:"none",opacity:1,fontSize:"1rem"},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},W)),e.jsx("input",{style:{border:"none",outline:"none",flex:"1",minWidth:"100px"},value:k,onChange:J(O),onKeyDown:M,placeholder:"Type and press space"})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part No",onClick:m,children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:f||"",onChange:J(j),placeholder:"Dest Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Dest Code",onClick:d,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"CPS No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:y||"",onChange:J(g),placeholder:"CPS No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search CPS No",onClick:u,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:x||"",onChange:J(v),placeholder:"Supplier Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Supplier",onClick:c,children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})}),e.jsxs("div",{className:"col-12 d-flex",children:[e.jsx("div",{className:"col-md-6"}),e.jsxs("div",{className:"col-md-6 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:S,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:n,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})]})]})})}function Vs({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsx(ke.Fragment,{children:o===0?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Length"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Width"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Height"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Volume Inner"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Volume Outer"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Usage"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Source"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Usage"})]})},`matLeafHdr-${o}`))})}function Gs({arr:s=[],count:a=1}){return e.jsx(e.Fragment,{children:s.map((o,t)=>e.jsx(ke.Fragment,{children:t===0?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:o.material_no||"-"}),e.jsx("td",{children:o.dimension_length||"-"}),e.jsx("td",{children:o.dimension_width||"-"}),e.jsx("td",{children:o.dimension_height||"-"}),e.jsx("td",{children:o.volume_inner||"-"}),e.jsx("td",{children:o.volume_outer||"-"}),e.jsx("td",{children:o.qty||"-"}),e.jsx("td",{children:o.source||"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:o.material_no||"+"}),e.jsx("td",{children:o.qty||"+"})]})},`matLeafCell-${t}`))})}function Nl({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:o===0?8:2,children:o===0?"Box":`Inner ${o}`},`innerGrp-${o}`))})}const bl=({count:s})=>e.jsx(Vs,{count:s}),gl=({data:s,count:a})=>e.jsx(Gs,{arr:s,count:a});function vl({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:o===0?8:2,children:o===0?"Module":`Outer ${o}`},`outerGrp-${o}`))})}const Cl=({count:s})=>e.jsx(Vs,{count:s}),yl=({data:s,count:a})=>e.jsx(Gs,{arr:s,count:a});function Sl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("destination")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Destination"}),s.includes("model")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Model"}),s.includes("impl_period")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Impl Period"}),s.includes("cps_no")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"CPS No"})]})}function wl({mainInfo:s,checked:a}){var p,u,d,c;const{destination:o,model_name:t,impl_period:n,cps_no:m}=s||{};debugger;return e.jsxs(e.Fragment,{children:[a.includes("destination")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((d=(u=(p=s==null?void 0:s.cps)==null?void 0:p.model)==null?void 0:u.destination)==null?void 0:d.code)??"-"}),a.includes("model")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(s==null?void 0:s.model_code)??"-"}),a.includes("impl_period")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(s==null?void 0:s.implementation_period)??"-"}),a.includes("cps_no")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((c=s==null?void 0:s.cps)==null?void 0:c.cps_no)??"-"})]})}function Pl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("part_no_part")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part No "}),s.includes("part_name")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Name"}),s.includes("parent_part")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Parent Part"}),s.includes("supplier_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Code"}),s.includes("supplier_name")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Supplier Name"}),s.includes("part_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Status"}),s.includes("dtl_part_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Dtl Part Status"}),s.includes("pack_spec_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Pack Spec Status"}),s.includes("weight_pc")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Weight/Pc (Kg)"}),s.includes("qty_box")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty/Box"})]})}function kl({partInfo:s,checked:a}){var o,t;return e.jsxs(e.Fragment,{children:[a.includes("part_no_part")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.part_no??"-"}),a.includes("part_name")&&e.jsx("td",{className:"align-middle",children:s.part_name??"-"}),a.includes("parent_part")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.parent_no??"-"}),a.includes("supplier_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((o=s.supplier)==null?void 0:o.supplier_code)??"-"}),a.includes("supplier_name")&&e.jsx("td",{className:"align-middle",children:((t=s.supplier)==null?void 0:t.supplier_name)??"-"}),a.includes("part_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.part_status??"-"}),a.includes("dtl_part_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.detail_part_status??"-"}),a.includes("pack_spec_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.packing_spec_status??"-"}),a.includes("weight_pc")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.weightPerPc??"-"}),a.includes("qty_box")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.qtyPerBox??"-"})]})}function Il({checked:s}){const a=s.includes("packing_plant_current")||s.includes("packing_plant_next"),o=[s.includes("packing_plant_current"),s.includes("packing_plant_next")].filter(Boolean).length,t=s.includes("vanning_plant_current")||s.includes("vanning_plant_next"),n=[s.includes("vanning_plant_current"),s.includes("vanning_plant_next")].filter(Boolean).length,m=s.includes("order_pattern_current")||s.includes("order_pattern_next"),p=[s.includes("order_pattern_current"),s.includes("order_pattern_next")].filter(Boolean).length,u=s.includes("katashiiki"),d=s.includes("packing_process_boxing")||s.includes("packing_process_stacking"),c=[s.includes("packing_process_boxing"),s.includes("packing_process_stacking")].filter(Boolean).length;return e.jsxs(e.Fragment,{children:[a&&e.jsx("th",{colSpan:o,className:"align-middle border text-center tbl-row2-hdr",children:"Packing Plant"}),t&&e.jsx("th",{colSpan:n,className:"align-middle border text-center tbl-row2-hdr",children:"Vanning Plant"}),m&&e.jsx("th",{colSpan:p,className:"align-middle border text-center tbl-row2-hdr",children:"Order Pattern"}),u&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Katashiiki"}),s.includes("importer_line_process")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Importer Line Process"}),s.includes("case_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Case code"}),s.includes("box_number")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Box Number"}),s.includes("renban")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Renban"}),s.includes("renban_eff")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Renban Eff"}),d&&e.jsx("th",{colSpan:c,className:"align-middle border text-center tbl-row2-hdr",children:"Packing Process"})]})}function _l({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("packing_plant_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("packing_plant_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("vanning_plant_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("vanning_plant_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("order_pattern_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("order_pattern_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("packing_process_boxing")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Boxing"}),s.includes("packing_process_stacking")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Stacking"})]})}function Al({pseInfo:s,checked:a}){const{packing_plant_curr:o,packing_plant_next:t,vanning_plant_curr:n,vanning_plant_next:m,order_pattern_curr:p,order_pattern_next:u,katashiki:d,importer_line_process:c,case_code:r,box_number:f,renban:i,renban_eff:x,packing_process_boxing:y,packing_process_stacking:b}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("packing_plant_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:o??"-"}),a.includes("packing_plant_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t??"-"}),a.includes("vanning_plant_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:n??"-"}),a.includes("vanning_plant_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:m??"-"}),a.includes("order_pattern_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:p??"-"}),a.includes("order_pattern_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:u??"-"}),a.includes("katashiiki")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:Array.isArray(d)&&d.length>0?d.map((A,j)=>e.jsxs("span",{className:"badge badge-primary mr-1",children:[A.string," : ",A.number]},j)):"-"}),a.includes("importer_line_process")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:c??"-"}),a.includes("case_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:r??"-"}),a.includes("box_number")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:f??"-"}),a.includes("renban")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:i??"-"}),a.includes("renban_eff")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:x??"-"}),a.includes("packing_process_boxing")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:y??"-"}),a.includes("packing_process_stacking")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:b??"-"})]})}function Ml({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("dock_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Dock Code"}),s.includes("address")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Address"}),s.includes("process_type")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Process Type"})]})}function Dl({logisticInfo:s,checked:a}){const{dock_code:o,address_rack:t,process_type:n}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("dock_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:o??"-"}),a.includes("address")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t??"-"}),a.includes("process_type")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:n??"-"})]})}const es={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},content:{position:"relative",background:"#fff",padding:"20px",borderRadius:"5px",maxWidth:"80vw",maxHeight:"80vh"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},image:{maxWidth:"calc(80vw - 40px)",maxHeight:"calc(80vh - 40px)"}};function Ll({imageUrl:s,isOpen:a,onClose:o}){return!a||!s?null:e.jsx("div",{style:es.overlay,onClick:o,children:e.jsxs("div",{style:es.content,onClick:t=>t.stopPropagation(),children:[e.jsx("button",{style:es.closeButton,onClick:o,children:"×"}),e.jsx("img",{src:s,alt:"Enlarged view",style:es.image})]})})}function Tl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("part_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part"}),s.includes("packing_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Packing"}),s.includes("outer_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Outer"}),s.includes("qkp_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qkp"}),s.includes("bkp_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Bkp"})]})}function Ue({files:s}){const[a,o]=l.useState(!1);if(!s||s.length===0)return"-";const t=s[0],n=()=>o(!0),m=()=>o(!1);return e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t,alt:"thumbnail",style:{width:"50px",height:"auto",cursor:"pointer"},onClick:n}),e.jsx(Ll,{imageUrl:t,isOpen:a,onClose:m})]})}function El({images:s,checked:a}){const{part:o,packing:t,outer:n,qkp:m,bkp:p}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("part_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ue,{files:o==null?void 0:o.files})}),a.includes("packing_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ue,{files:t==null?void 0:t.files})}),a.includes("outer_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ue,{files:n==null?void 0:n.files})}),a.includes("qkp_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ue,{files:m==null?void 0:m.files})}),a.includes("bkp_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Ue,{files:p==null?void 0:p.files})})]})}function Rl({rows:s,visibleRows:a,page:o,perPage:t,total:n,totalPages:m,goToPage:p,setPerPage:u,checked:d}){var M,L,S,W,C;const c=((M=a[0])==null?void 0:M.cps)||{},r=((S=(L=c.packing)==null?void 0:L.inner)==null?void 0:S.length)||1,f=((C=(W=c.packing)==null?void 0:W.outer)==null?void 0:C.length)||1,x=["part_no_part","part_name","parent_part","supplier_code","supplier_name","part_status","dtl_part_status","pack_spec_status","weight_pc","qty_box"].filter(D=>d.includes(D)).length,y=x>0,A=["packing_plant_current","packing_plant_next","vanning_plant_current","vanning_plant_next","order_pattern_current","order_pattern_next","katashiiki_ad","katashiiki_au","katashiiki_af","katashiiki_ax","importer_line_process","case_code","box_number","renban","renban_eff","packing_process_boxing","packing_process_stacking"].filter(D=>d.includes(D)).length,j=A>0,v=["dock_code","address","process_type"].filter(D=>d.includes(D)).length,g=v>0,k=["part_image","packing_image","outer_image","qkp_image","bkp_image"].filter(D=>d.includes(D)).length,O=k>0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"table-responsive mt-2",style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center",style:{tableLayout:"fixed",width:"auto"},children:[e.jsxs("thead",{style:{fontSize:"8pt"},children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"No"}),e.jsx(Sl,{checked:d}),y&&e.jsx("th",{colSpan:x,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Part Information"}),j&&e.jsx("th",{colSpan:A,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"PSE Information"}),g&&e.jsx("th",{colSpan:v,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Logistic Information"}),O&&e.jsx("th",{colSpan:k,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Images"}),e.jsx("th",{colSpan:r>0?r*2+6:0,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inner Materials"}),e.jsx("th",{colSpan:f>0?f*2+6:0,className:"align-middle border text-center tbl-row1-hdr text-nowrap\\",children:"Outer Materials"})]}),e.jsxs("tr",{children:[e.jsx(Pl,{checked:d}),e.jsx(Il,{checked:d}),e.jsx(Ml,{checked:d}),e.jsx(Tl,{checked:d}),e.jsx(Nl,{count:r}),e.jsx(vl,{count:f})]}),e.jsxs("tr",{children:[e.jsx(_l,{checked:d}),e.jsx(bl,{count:r}),e.jsx(Cl,{count:f})]})]}),e.jsx("tbody",{style:{fontSize:"8pt"},children:a.map((D,T)=>{var _,q;const H=D.cps||{},Z=H.pse_info||{},se=H.logistic_info||{},I=H.images||{},V=((_=H.packing)==null?void 0:_.inner)||[],w=((q=H.packing)==null?void 0:q.outer)||[];return H.labor,H.inland,e.jsxs("tr",{children:[e.jsx("td",{children:(o-1)*t+T+1}),e.jsx(wl,{mainInfo:D,checked:d}),e.jsx(kl,{partInfo:H,checked:d}),e.jsx(Al,{pseInfo:Z,checked:d}),e.jsx(Dl,{logisticInfo:se,checked:d}),e.jsx(El,{images:I,checked:d}),e.jsx(gl,{data:V,count:r}),e.jsx(yl,{data:w,count:f})]},T)})})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>p(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>p(Math.max(1,o-1)),children:"<"}),[...Array(m).keys()].map(D=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${o===D+1?"btn-primary":"btn-light"}`,onClick:()=>p(D+1),children:D+1},D)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>p(Math.min(m,o+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",n]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[t," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{u(10),p(1)},children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{u(25),p(1)},children:"25"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{u(50),p(1)},children:"50"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})}function Ol({onViewDpi:s,onUpload:a,onTemplate:o,onCreateDpi:t,onCreatePci:n,onToggleColumnSelector:m,viewDpiDisabled:p}){return e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:s,title:"View DPI",disabled:p,children:[e.jsx("i",{className:"fas fa-eye"})," View DPI"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:m,title:"Select Columns",children:e.jsx("i",{className:"fas fa-cog"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:a,title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-2",onClick:o,title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})}const Le=[{value:"main_info",label:"Main Info",children:[{value:"destination",label:"Destination"},{value:"model",label:"Model"},{value:"impl_period",label:"Implementation Period"},{value:"cps_no",label:"CPS No"}]},{value:"part_info",label:"Part Info",children:[{value:"part_no_part",label:"Part No"},{value:"part_name",label:"Part Name"},{value:"parent_part",label:"Parent Part"},{value:"supplier_code",label:"Supplier Code"},{value:"supplier_name",label:"Supplier Name"},{value:"part_status",label:"Part Status"},{value:"dtl_part_status",label:"Dtl Part Status"},{value:"pack_spec_status",label:"Pack Spec Status"},{value:"weight_pc",label:"Weight/Pc"},{value:"qty_box",label:"Qty/Box"}]},{value:"pse_info",label:"PSE Info",children:[{value:"packing_plant",label:"Packing Plant",children:[{value:"packing_plant_current",label:"Current"},{value:"packing_plant_next",label:"Next"}]},{value:"vanning_plant",label:"Vanning Plant",children:[{value:"vanning_plant_current",label:"Current"},{value:"vanning_plant_next",label:"Next"}]},{value:"order_pattern",label:"Order Pattern",children:[{value:"order_pattern_current",label:"Current"},{value:"order_pattern_next",label:"Next"}]},{value:"katashiiki",label:"Katashiiki"},{value:"importer_line_process",label:"Importer Line Process"},{value:"case_code",label:"Case Code"},{value:"box_number",label:"Box Number"},{value:"renban",label:"Renban"},{value:"renban_eff",label:"Renban Eff"},{value:"packing_process",label:"Packing Process",children:[{value:"packing_process_boxing",label:"Boxing"},{value:"packing_process_stacking",label:"Stacking"}]}]},{value:"logistic_info",label:"Logistic Info",children:[{value:"dock_code",label:"Dock Code"},{value:"address",label:"Address"},{value:"process_type",label:"Process Type"}]},{value:"images",label:"Images",children:[{value:"part_image",label:"Part"},{value:"packing_image",label:"Packing"},{value:"outer_image",label:"Outer"},{value:"qkp_image",label:"QKP"},{value:"bkp_image",label:"BKP"}]},{value:"inner_materials",label:"Inner Materials",children:[{value:"box",label:"Box",children:[{value:"box_mat_no",label:"Mat No"},{value:"box_length",label:"Length"},{value:"box_width",label:"Width"},{value:"box_height",label:"Height"},{value:"box_volume_inner",label:"Volume Inner"},{value:"box_volume_outer",label:"Volume Outer"},{value:"box_usage",label:"Usage"},{value:"box_source",label:"Source"}]},...[...Array(9).keys()].map(s=>({value:`outer_${s+1}`,label:`Outer ${s+1}`,children:[{value:`outer_${s+1}_mat_no`,label:"Mat No"},{value:`outer_${s+1}_usage`,label:"Usage"}]}))]},{value:"outer_materials",label:"Outer Materials",children:[{value:"module",label:"Module",children:[{value:"module_mat_no",label:"Mat No"},{value:"module_length",label:"Length"},{value:"module_width",label:"Width"},{value:"module_height",label:"Height"},{value:"module_volume_inner",label:"Volume Inner"},{value:"module_usage",label:"Usage"}]}]}],Fl=({isOpen:s,toggle:a,checked:o,onCheckedChange:t})=>{const[n,m]=l.useState([]);l.useEffect(()=>{if(s){let f=[...o],i=!1;const x=y=>{y.forEach(b=>{b.children&&(b.children.every(j=>f.includes(j.value))&&!f.includes(b.value)&&(f.push(b.value),i=!0),x(b.children))})};x(Le),i&&t([...new Set(f)])}},[s,o,t]);const p=(f,i=[])=>(f.children&&f.children.forEach(x=>{i.push(x.value),p(x,i)}),i),u=(f,i)=>{var x;for(const y of i){if((x=y.children)!=null&&x.some(b=>b.value===f))return y;if(y.children){const b=u(f,y.children);if(b)return b}}return null},d=f=>{let i=[...o];const x=i.includes(f.value),y=p(f);if(x){i=i.filter(A=>A!==f.value&&!y.includes(A));let b=u(f.value,Le);for(;b;)i=i.filter(A=>A!==b.value),b=u(b.value,Le)}else{i.push(f.value),f.children&&i.push(...y);let b=u(f.value,Le);for(;b;)b.children.every(j=>i.includes(j.value))&&(i.includes(b.value)||i.push(b.value)),b=u(b.value,Le)}t([...new Set(i)])},c=f=>{m(i=>i.includes(f)?i.filter(x=>x!==f):[...i,f])},r=(f,i=0)=>f.map(x=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",paddingLeft:`${i*20}px`},children:[x.children&&e.jsx("span",{style:{cursor:"pointer",marginRight:"5px"},onClick:()=>c(x.value),children:n.includes(x.value)?"−":"+"}),e.jsx(Pt,{check:!0,style:{margin:0,marginLeft:x.children?"0":"20px"},children:e.jsxs(kt,{check:!0,children:[e.jsx(It,{type:"checkbox",checked:o.includes(x.value),onChange:()=>d(x)})," ",i===0?e.jsx("strong",{children:x.label}):x.label]})})]}),x.children&&n.includes(x.value)&&e.jsx("div",{children:r(x.children,i+1)})]},x.value));return e.jsxs(Ct,{isOpen:s,toggle:a,zIndex:9999,size:"lg",children:[e.jsx(yt,{toggle:a,children:"Column Selection"}),e.jsx(St,{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:r(Le.slice(0,3))}),e.jsx("div",{className:"col-md-4",children:r(Le.slice(3,5))}),e.jsx("div",{className:"col-md-4",children:r(Le.slice(5))})]})}),e.jsxs(wt,{children:[e.jsx(As,{color:"primary",onClick:a,children:"Apply"}),e.jsx(As,{color:"secondary",onClick:a,children:"Cancel"})]})]})};function xs({show:s=!1,onClose:a,onSelect:o,zIndex:t=4e3,mode:n="single"}){const[m,p]=l.useState([]),[u,d]=l.useState(""),[c,r]=l.useState(""),[f,i]=l.useState({code:"",name:""}),[x,y]=l.useState(!1),[b,A]=l.useState(null),[j,N]=l.useState(1),[v,g]=l.useState(10);if(l.useEffect(()=>{fetch("/suppliers.json").then(I=>I.json()).then(I=>p(I)).catch(I=>console.error("Failed to load suppliers:",I))},[]),l.useEffect(()=>(s?(d(""),r(""),i({code:"",name:""}),y(!1),A(null),N(1),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s]),!s)return null;function P(){N(1),y(!0),i({code:u,name:c})}function k(){N(1),d(""),r(""),i({code:"",name:""}),y(!1)}function O(){if(!x)return[];const I=f.code.trim().toLowerCase(),V=f.name.trim().toLowerCase();return m.filter(w=>!(I&&!w.code.toLowerCase().includes(I)||V&&!w.name.toLowerCase().includes(V)))}const M=O(),L=M.length,S=Math.max(1,Math.ceil(L/v)),W=M.slice((j-1)*v,j*v);function C(I){A(n==="multi"?V=>({...V,[I]:!V[I]}):I)}function D(){if(b!==null){const I=M[b];o&&o(I),a&&a()}else a&&a()}function T(I){N(Math.min(Math.max(1,I),S))}const H={flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},Z={position:"sticky",top:0,zIndex:5,background:"white",padding:"1rem 1rem 0.5rem 1rem",borderBottom:"1px solid #e9ecef"},se={overflow:"auto",padding:"0 1rem 1rem 1rem"};return e.jsx("div",{className:"supplier-picker-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:t,display:"flex",alignItems:"center",justifyContent:"center"},onMouseDown:I=>{I.target===I.currentTarget&&a()},children:e.jsxs("div",{className:"supplier-picker-modal",style:{background:"#fff",borderRadius:8,boxShadow:"0 2px 16px rgba(0,0,0,0.2)",zIndex:t+1,width:"100%",maxWidth:800,minHeight:400,display:"flex",flexDirection:"column",height:"min(90vh, 700px)"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"Select Supplier"})}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:H,children:[e.jsxs("div",{style:Z,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12 col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsx("input",{value:u,onChange:J(d),className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{value:c,onChange:J(r),className:"form-control form-control-sm"})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"col-12 text-right mb-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:P,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:k,children:[e.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]})})]}),e.jsx("div",{style:se,children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-striped table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:36}}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Address"})]})}),e.jsx("tbody",{children:W.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:x?"No Data Found":"Please click Search to begin"})}):W.map((I,V)=>{const w=(j-1)*v+V;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"radio",name:"supplier-picker-radio",checked:b===w,onChange:()=>C(w)})}),e.jsx("td",{children:I.code}),e.jsx("td",{children:I.name}),e.jsx("td",{children:I.address})]},w)})})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>T(1),disabled:j<=1,children:"<<"}),e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>T(j-1),disabled:j<=1,children:"<"}),e.jsxs("span",{className:"mr-1",children:["Page ",j," of ",S]}),e.jsx("button",{className:"btn btn-sm btn-light",onClick:()=>T(j+1),disabled:j>=S,children:">"}),e.jsx("button",{className:"btn btn-sm btn-light ml-1",onClick:()=>T(S),disabled:j>=S,children:">>"}),e.jsxs("span",{className:"ml-2 small text-muted",children:["Total: ",L]})]}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:D,disabled:b===null,children:"Add Selected"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:a,children:"Cancel"})]})]})]})})}function Bl(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState([]),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(""),[i,x]=l.useState(!1),[y,b]=l.useState(!1),[A,j]=l.useState(!1),[N,v]=l.useState(!1),[g,P]=l.useState(!1),[k,O]=l.useState(!1),[M,L]=l.useState(!1),[S,W]=l.useState(["main_info","destination","model","impl_period","cps_no","part_info","part_no_part","part_name","parent_part","supplier_code","supplier_name","part_status","dtl_part_status","pack_spec_status","weight_pc","qty_box","pse_info","packing_plant","packing_plant_current","packing_plant_next","vanning_plant","vanning_plant_current","vanning_plant_next","order_pattern","order_pattern_current","order_pattern_next","katashiiki","importer_line_process","case_code","box_number","renban","renban_eff","packing_process","packing_process_boxing","packing_process_stacking","logistic_info","dock_code","address","process_type","images","part_image","packing_image","outer_image","qkp_image","bkp_image"]),[C,D]=l.useState([]),[T,H]=l.useState([]),[Z,se]=l.useState(!1),[I,V]=l.useState(10),[w,_]=l.useState(1),q=C.length,te=Math.max(1,Math.ceil(q/I));l.useEffect(()=>{fetch("/packing-cost-fe/dpi.json").then(G=>{if(!G.ok)throw new Error("Network response was not ok");return G.json()}).then(G=>{const oe=[...G.dpiData||[]].sort((ne,he)=>(he.implementation_period||"").localeCompare(ne.implementation_period||""));H(oe),D([]),se(!1)}).catch(G=>{console.error("Error fetching DPI data:",G)})},[]);function U(){if(se(!0),!s&&(!n||n.length===0)&&!o&&!p&&!d&&!r){D(T),_(1);return}console.log("Filtering with modelCfc:",s);let G=[...T];debugger;if(s&&(G=G.filter(oe=>{var ne;return(ne=oe.model_cfc)==null?void 0:ne.toLowerCase().includes(s.toLowerCase())})),n&&n.length>0){const oe=n.map(ne=>ne.toLowerCase());G=G.filter(ne=>{var he,fe,xe;return oe.includes((he=ne.part_no)==null?void 0:he.toLowerCase())||oe.includes((xe=(fe=ne.cps)==null?void 0:fe.part_no)==null?void 0:xe.toLowerCase())})}o&&(G=G.filter(oe=>{var ne,he,fe,xe;return(xe=(fe=(he=(ne=oe.cps)==null?void 0:ne.model)==null?void 0:he.destination)==null?void 0:fe.code)==null?void 0:xe.toLowerCase().includes(o.toLowerCase())})),p&&(G=G.filter(oe=>{var ne,he,fe;return(fe=(he=(ne=oe.cps)==null?void 0:ne.supplier)==null?void 0:he.supplier_code)==null?void 0:fe.toLowerCase().includes(p.toLowerCase())})),d&&(G=G.filter(oe=>{var ne,he;return(he=(ne=oe.cps)==null?void 0:ne.cps_no)==null?void 0:he.toLowerCase().includes(d.toLowerCase())})),r&&(G=G.filter(oe=>{var ne;return(ne=oe.implementation_period)==null?void 0:ne.toLowerCase().includes(r.toLowerCase())}));const ae=G.sort((oe,ne)=>(ne.implementation_period||"").localeCompare(oe.implementation_period||""));D(ae),_(1),se(!1)}function E(Q){Q&&Q.model_cfc&&a(Q.model_cfc),j(!1)}function R(Q){Q&&t(Q.destCode),O(!1)}function le(Q){Q&&u(Q.code),L(!1)}function B(Q){if(Q&&Q.length>0){const G=Q.map(ae=>ae.partNo);m(ae=>[...new Set([...ae,...G])])}b(!1)}function $(){a(""),t(""),m([]),u(""),c(""),f(""),D(T),_(1),se(!1)}function K(){x(!0)}function h(){alert("Create PCI - placeholder")}function Y(){alert("Upload placeholder")}function F(){alert("Download template placeholder")}function z(){P(Q=>!Q)}function ee(Q){W(Q)}function X(){const Q=window.open("","_blank","fullscreen=yes");Q.document.write("<html><head><title>DPI View</title>"),Q.document.write('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />'),Q.document.write('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">'),Q.document.write("</head><body>"),Q.document.write('<button id="download-pdf">Download PDF</button>'),Q.document.write('<button id="download-csv">Download CSV</button>'),Q.document.write('<div id="dpi-content" class="card card-outline card-primary"></div>'),Q.document.write("</body></html>"),Q.document.close();const G=document.getElementById("result-section").innerHTML,ae=Q.document.getElementById("dpi-content");ae&&(ae.innerHTML=G),Q.document.getElementById("download-pdf").addEventListener("click",()=>Q.print()),Q.document.getElementById("download-csv").addEventListener("click",()=>{const oe=ae.querySelector("table");let ne=[];for(const Fe of oe.rows){const Me=[];for(const ts of Fe.cells)Me.push(ts.innerText);ne.push(Me.join(","))}const he="data:text/csv;charset=utf-8,"+ne.join("\\n"),fe=encodeURI(he),xe=document.createElement("a");xe.setAttribute("href",fe),xe.setAttribute("download","dpi_data.csv"),document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)})}function de(Q){const G=Math.min(Math.max(1,Q),te);_(G)}const ue=C.slice((w-1)*I,w*I);function ge(Q){const G={dpiNo:Q.dpiNo||"",refDpiNo:Q.refDpiNo||"",issuedDate:Q.issuedDate||"",effectiveDate:Q.effectiveDate||"",cfcPjt:Q.cfcPjt||"",model:Q.model||"",parts:Q.parts||[],numCps:Q.numCps||0,supplier:Q.supplier||"",fromUser:Q.from||"",toUser:Q.to||"",status:"Draft",raw:Q};D(ae=>[G,...ae]),x(!1),_(1)}function ve(Q){const G={dpiNo:Q.dpiNo||"",refDpiNo:Q.refDpiNo||"",issuedDate:Q.issuedDate||"",effectiveDate:Q.effectiveDate||"",cfcPjt:Q.cfcPjt||"",model:Q.model||"",parts:Q.parts||[],numCps:Q.numCps||0,supplier:Q.supplier||"",fromUser:Q.from||"",toUser:Q.to||"",status:"Submitted",raw:Q};D(ae=>[G,...ae]),x(!1),_(1)}const Ie={modelCfc:s,destCode:o,partNo:n,supplierCode:p,cpsNo:d,implementationPeriod:r},Ce={setModelCfc:a,setDestCode:t,setPartNo:m,setSupplierCode:u,setCpsNo:c,setImplementationPeriod:f};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"DPI List"})}),e.jsx(Ol,{onViewDpi:X,onUpload:Y,onTemplate:F,onCreateDpi:K,onCreatePci:h,onToggleColumnSelector:z,viewDpiDisabled:C.length===0})]}),e.jsx(fl,{filters:Ie,setters:Ce,onSearch:U,onClear:$,onPartSearch:()=>b(!0),onModelSearch:()=>j(!0),onDpiSearch:()=>v(!0),onSearchDestination:()=>O(!0),onSearchSupplier:()=>L(!0)}),e.jsx("div",{id:"result-section",children:e.jsx(Rl,{rows:C,visibleRows:ue,page:w,perPage:I,total:q,totalPages:te,goToPage:de,setPerPage:V,checked:S,hasSearched:Z})})]}),e.jsx(jl,{show:i,onClose:()=>x(!1),onSave:ge,onSubmit:ve}),e.jsx(Re,{show:y,onClose:()=>b(!1),onSelect:B,mode:"multi"}),e.jsx(Oe,{show:A,onClose:()=>j(!1),onAdd:E,selectionMode:"single"}),e.jsx(ps,{show:k,onClose:()=>O(!1),onAdd:R,selectionMode:"single"}),e.jsx(xs,{show:M,onClose:()=>L(!1),onSelect:le,mode:"single"}),e.jsx(Fl,{isOpen:g,toggle:z,checked:S,onCheckedChange:ee})]})}function Ul({form:s,change:a,setShowPartPicker:o,setShowModelPicker:t,handleCalculate:n,handleClear:m,onModelRemove:p,onPartRemove:u,onModelCfcKeyDown:d,onPartKeyDown:c}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model CFC"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:[s.modelCfc.map(r=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[r,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>p(r),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},r)),e.jsx("input",{type:"text",name:"modelCfcInput",value:s.modelCfcInput,onChange:a,onKeyDown:d,style:{border:"none",outline:"none",flexGrow:1,padding:0,margin:0,height:"20px"}})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Model CFC",onClick:()=>t(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Implementation Period"}),e.jsxs("select",{className:"form-control form-control-sm",name:"period",value:s.period,onChange:a,children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"01.2025"}),e.jsx("option",{children:"02.2025"})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dest Code"}),e.jsxs("select",{className:"form-control form-control-sm",name:"destCode",value:s.destCode,onChange:a,children:[e.jsx("option",{children:"All"}),e.jsx("option",{value:"TASA",children:"TASA - Argentina"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Part"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:[Array.isArray(s.part)&&s.part.map(r=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[r,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>u(r),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},r)),e.jsx("input",{type:"text",name:"partInput",value:s.partInput,onChange:a,onKeyDown:c,style:{border:"none",outline:"none",flexGrow:1,padding:0,margin:0,height:"20px"}})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part",onClick:()=>o(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-end my-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:n,children:[e.jsx("i",{className:"fas fa-calculator mr-1"})," Calculate"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:m,children:[e.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]})]})}function Wl({count:s=10}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsxs(ke.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Part No"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Qty"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Price"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Sum"})]},`mat-leaf-hdr-${o}`))})}function Hl({arr:s=[],count:a=10}){const o=[];for(let t=0;t<a;t++){const n=s[t];o.push(e.jsxs(ke.Fragment,{children:[e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.materialNo)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.qty)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.price)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.sum)??"-"})]},`mat-leaf-cell-${t}`))}return e.jsx(e.Fragment,{children:o})}const Ys=({part:s})=>{var d,c,r,f,i,x,y;const[a,o]=l.useState({inner:!0,outer:!0,labor:!0,inland:!0}),t=b=>{o(A=>({...A,[b]:!A[b]}))};if(!s)return null;const n=b=>{if(b==null||b==="")return"";const A=Number(b);return isNaN(A)?String(b):A.toFixed(2)},m=(b,A)=>{const j=A.toLowerCase(),N=a[j],v=10,g=[];for(let P=1;P<=v;P++)g.push(e.jsxs("th",{colSpan:"4",children:["Material ",P]},`material-header-${A}-${P}`));return e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t(j),children:[e.jsx("i",{className:`fas ${N?"fa-chevron-down":"fa-chevron-right"} mr-2`}),A.toUpperCase()]}),N&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"2000px"},children:[e.jsxs("thead",{style:{backgroundColor:"#e9ecef"},children:[e.jsx("tr",{children:g}),e.jsx("tr",{children:e.jsx(Wl,{count:v})})]}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx(Hl,{arr:b,count:v})})})]})})]})},p=(b,A)=>{const j=a.labor;return!b||!A?null:e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t("labor"),children:[e.jsx("i",{className:`fas ${j?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"LABOR"]}),j&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"1500px"},children:[e.jsx("thead",{style:{backgroundColor:"#e9ecef"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Receiving"}),e.jsx("th",{children:"Inspection"}),e.jsx("th",{children:"Delivery Course (Pallet)"}),e.jsx("th",{children:"Supply"}),e.jsx("th",{children:"Binding"}),e.jsx("th",{children:"Sorting & Supply"}),e.jsx("th",{children:"Pick & Packing"}),e.jsx("th",{children:"Vanning"}),e.jsx("th",{children:"Box/Valet Return"}),e.jsx("th",{children:"Mix Van"}),e.jsx("th",{children:"Lashing"}),e.jsx("th",{children:"Total Time"}),e.jsx("th",{children:"Requirement"}),e.jsx("th",{children:"Current DL"}),e.jsx("th",{children:"IDL"}),e.jsx("th",{children:"Facility Others"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:n(b.receiving)}),e.jsx("td",{children:n(b.inspection)}),e.jsx("td",{children:n(b.deliveryCourse)}),e.jsx("td",{children:n(b.supply)}),e.jsx("td",{children:n(b.binding)}),e.jsx("td",{children:n(b.sortingSupply)}),e.jsx("td",{children:n(b.pickPacking)}),e.jsx("td",{children:n(b.vanning)}),e.jsx("td",{children:n(b.boxValetReturn)}),e.jsx("td",{children:n(b.mixVan)}),e.jsx("td",{children:n(b.lashing)}),e.jsx("td",{children:n(b.totalTime)}),e.jsx("td",{children:n(b.requirement)}),e.jsx("td",{children:n(b.currentDL)}),e.jsx("td",{children:n(A.idl)}),e.jsx("td",{children:n(A.facility)})]})})]})})]})},u=b=>{const A=a.inland;return b?e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t("inland"),children:[e.jsx("i",{className:`fas ${A?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"INLAND"]}),A&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"800px"},children:[e.jsx("thead",{style:{backgroundColor:"#e9ecef"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Pack Time (V-PASS)"}),e.jsx("th",{children:"Inland Cost"}),e.jsx("th",{children:"Inland Cost M3"}),e.jsx("th",{children:"Diff"}),e.jsx("th",{children:"Milkrun cost"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:b.packing_time||"-"}),e.jsx("td",{children:n(b.inland_cost)||"-"}),e.jsx("td",{children:n(b.inlandCostM3)||"-"}),e.jsx("td",{children:b.diff||"-"}),e.jsx("td",{children:n(b.milkrun_cost)||"-"})]})})]})})]}):null};return e.jsx("td",{colSpan:"32",children:e.jsxs("div",{className:"p-2",children:[m((c=(d=s.cps)==null?void 0:d.packing)==null?void 0:c.inner,"Inner"),m((f=(r=s.cps)==null?void 0:r.packing)==null?void 0:f.outer,"Outer"),p((i=s.cps)==null?void 0:i.manhour,(x=s.cps)==null?void 0:x.labor),u((y=s.cps)==null?void 0:y.inland)]})})},pe=s=>{if(s==null||s==="")return"";const a=Number(s);return isNaN(a)?String(s):a.toFixed(2)};function $l({visibleParts:s,selectedRows:a,handleCheckboxChange:o,page:t,perPage:n,remarks:m,handleRemarkChange:p,expandedRows:u,handleToggleExpand:d,threshold_percentage:c=5}){return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm text-center w-100",style:{fontSize:"8pt"},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{backgroundColor:"#f7fbff"},children:[e.jsx("th",{rowSpan:2,style:{width:40},children:e.jsx("input",{type:"checkbox",checked:s.length>0&&s.every((r,f)=>a[(t-1)*n+f]),onChange:r=>{const f=r.target.checked,i={...a};s.forEach((x,y)=>{i[(t-1)*n+y]=f}),o(i)}})}),e.jsx("th",{rowSpan:2,style:{width:40}}),e.jsx("th",{rowSpan:2,style:{width:40},children:"No"}),e.jsx("th",{rowSpan:2,children:"Model CFC"}),e.jsx("th",{rowSpan:2,children:"Dest Code"}),e.jsx("th",{rowSpan:2,children:"Implementation Period"}),e.jsx("th",{rowSpan:2,children:"Part No"}),e.jsx("th",{rowSpan:2,children:"Suffix"}),e.jsx("th",{rowSpan:2,children:"Part Name"}),e.jsx("th",{rowSpan:2,children:"Parent Part No"}),e.jsx("th",{rowSpan:2,children:"Supplier Code"}),e.jsx("th",{rowSpan:2,children:"Supplier Name"}),e.jsx("th",{rowSpan:2,children:"L"}),e.jsx("th",{rowSpan:2,children:"W"}),e.jsx("th",{rowSpan:2,children:"H"}),e.jsx("th",{rowSpan:2,children:"Box M3"}),e.jsx("th",{colSpan:3,children:"INNER"}),e.jsx("th",{colSpan:3,children:"OUTER"}),e.jsx("th",{colSpan:3,children:"MATERIAL"}),e.jsx("th",{colSpan:3,children:"LABOR"}),e.jsx("th",{colSpan:3,children:"INLAND"}),e.jsx("th",{colSpan:3,children:"TOTAL"}),e.jsx("th",{rowSpan:2,children:"Remark"})]}),e.jsx("tr",{style:{backgroundColor:"#dee2e6"},children:[...Array(6)].map((r,f)=>e.jsxs(ke.Fragment,{children:[e.jsx("th",{children:"Prev"}),e.jsx("th",{children:"Current"}),e.jsx("th",{children:"Diff"})]},f))})]}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:35,className:"text-center py-4 text-muted",children:"No Data Found"})}):s.map((r,f)=>{var A,j,N,v,g,P,k,O,M,L,S,W,C,D,T,H,Z,se,I,V,w,_,q,te,U,E,R,le,B,$,K,h,Y,F,z,ee,X,de,ue,ge,ve,Ie;debugger;if(!r)return null;const i=(t-1)*n+f,x=u&&u[i];Number(((j=(A=r.subtotals)==null?void 0:A.total)==null?void 0:j.total)??0),Number(((v=(N=r.subtotals)==null?void 0:N.total)==null?void 0:v.prev_year)??0);const y=Number(((P=(g=r.subtotals)==null?void 0:g.total)==null?void 0:P.diff)??0),b=y>c;debugger;return e.jsxs(ke.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:!!(a&&a[i]),onChange:Ce=>{const Q={...a,[i]:Ce.target.checked};o(Q)}})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-xs btn-link",onClick:()=>d(i),children:e.jsx("i",{className:`fas ${x?"fa-chevron-up":"fa-chevron-down"}`})})}),e.jsx("td",{children:i+1}),e.jsx("td",{children:r.model_cfc}),e.jsx("td",{children:r.destination}),e.jsx("td",{children:r.implementation_period}),e.jsx("td",{children:r.partNo}),e.jsx("td",{children:r.suffix}),e.jsx("td",{children:r.partName}),e.jsx("td",{children:r.parentPartNo}),e.jsx("td",{children:r.supplierCode}),e.jsx("td",{children:r.supplierName}),e.jsx("td",{children:pe(r.L)}),e.jsx("td",{children:pe(r.W)}),e.jsx("td",{children:pe(r.H)}),e.jsx("td",{children:pe(r.boxM3)}),e.jsx("td",{children:pe((O=(k=r.subtotals)==null?void 0:k.inner)==null?void 0:O.prev_year)}),e.jsx("td",{children:pe((L=(M=r.subtotals)==null?void 0:M.inner)==null?void 0:L.total)}),e.jsx("td",{children:pe((W=(S=r.subtotals)==null?void 0:S.inner)==null?void 0:W.diff)}),e.jsx("td",{children:pe((D=(C=r.subtotals)==null?void 0:C.outer)==null?void 0:D.prev_year)}),e.jsx("td",{children:pe((H=(T=r.subtotals)==null?void 0:T.outer)==null?void 0:H.total)}),e.jsx("td",{children:pe((se=(Z=r.subtotals)==null?void 0:Z.outer)==null?void 0:se.diff)}),e.jsx("td",{children:pe((V=(I=r.subtotals)==null?void 0:I.material)==null?void 0:V.prev_year)}),e.jsx("td",{children:pe((_=(w=r.subtotals)==null?void 0:w.material)==null?void 0:_.total)}),e.jsx("td",{children:pe((te=(q=r.subtotals)==null?void 0:q.material)==null?void 0:te.diff)}),e.jsx("td",{children:pe((E=(U=r.subtotals)==null?void 0:U.labor)==null?void 0:E.prev_year)}),e.jsx("td",{children:pe((le=(R=r.subtotals)==null?void 0:R.labor)==null?void 0:le.total)}),e.jsx("td",{children:pe(($=(B=r.subtotals)==null?void 0:B.labor)==null?void 0:$.diff)}),e.jsx("td",{children:pe((h=(K=r.subtotals)==null?void 0:K.inland)==null?void 0:h.prev_year)}),e.jsx("td",{children:pe((F=(Y=r.subtotals)==null?void 0:Y.inland)==null?void 0:F.total)}),e.jsx("td",{children:pe((ee=(z=r.subtotals)==null?void 0:z.inland)==null?void 0:ee.diff)}),e.jsx("td",{children:pe((de=(X=r.subtotals)==null?void 0:X.total)==null?void 0:de.prev_year)}),e.jsx("td",{children:pe((ge=(ue=r.subtotals)==null?void 0:ue.total)==null?void 0:ge.total)}),e.jsx("td",{style:{color:y>c?"red":void 0,fontWeight:y>c?"bold":void 0},children:pe((Ie=(ve=r.subtotals)==null?void 0:ve.total)==null?void 0:Ie.diff)}),e.jsx("td",{children:b?e.jsx("textarea",{className:"form-control form-control-sm",style:{minWidth:220,width:"100%"},value:m&&m[i]||"",onChange:Ce=>p(i,Ce.target.value),placeholder:"Enter remark",rows:3}):null})]}),x&&e.jsx("tr",{className:"expandable-row",children:e.jsx(Ys,{part:r})})]},i)})})]})})}function Kl({page:s,totalPages:a,goToPage:o,perPage:t}){return e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-2",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>o(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>o(Math.max(1,s-1)),children:"<"}),[...Array(a).keys()].map(n=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${s===n+1?"btn-primary":"btn-light"}`,onClick:()=>o(n+1),children:n+1},n)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>o(Math.min(a,s+1)),children:">"})]}),e.jsx("div",{className:"form-inline small",children:e.jsxs("span",{className:"mr-3",children:[t," per page"]})})]})}const ms={part:[],partInput:"",period:"All",destCode:"All",modelCfc:[],modelCfcInput:"",type:"PxP"};function ql({show:s=!1,onClose:a,onSave:o}){const[t,n]=l.useState(ms),[m,p]=l.useState([]),[u,d]=l.useState([]),[c,r]=l.useState(5),[f,i]=l.useState(1),[x,y]=l.useState(!1),[b,A]=l.useState(!1),[j,N]=l.useState({}),[v,g]=l.useState({}),[P,k]=l.useState({}),[O,M]=l.useState([]);if(l.useEffect(()=>(s?(n(ms),p([]),d([]),i(1),k({}),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s]),l.useEffect(()=>{fetch("/packing-cost-fe/generatedData.json").then($=>$.json()).then($=>{M($.cpsData)}).catch($=>console.error("Error loading generated data:",$))},[]),!s)return null;function L(B){const{name:$,value:K}=B.target;n(h=>({...h,[$]:K}))}function S(B){if(B.key===" "&&t.modelCfcInput.trim()){B.preventDefault();const $=t.modelCfcInput.trim();n(K=>K.modelCfc.includes($)?{...K,modelCfcInput:""}:{...K,modelCfc:[...K.modelCfc,$],modelCfcInput:""})}}function W(B){if(B.key===" "&&t.partInput.trim()){B.preventDefault();const $=t.partInput.trim();n(K=>K.part.includes($)?{...K,partInput:""}:{...K,part:[...K.part,$],partInput:""}),d(K=>K.some(Y=>Y.partNo===$)?K:[...K,{partNo:$}])}}const C=B=>String(B??"").trim().toUpperCase(),D=()=>{if((!u||u.length===0)&&t.modelCfc.length===0){p([]);return}if(u&&u.length>0){const K=u.flatMap(h=>{if(!!h.partName)return[{...h,description:h.partName||h.description||"N/A",calculationTime:new Date().toISOString()}];if(!O||!O.length)return[{partNo:h.partNo,description:"CPS DATA NOT LOADED",calculationTime:new Date().toISOString()}];let F=O;if(t.modelCfc.length>0){const X=new Set(t.modelCfc.map(C));F=O.filter(de=>X.has(C(de.model_cfc)))}const z=C(h.partNo),ee=F.filter(X=>C(X.part_no??X.partNo)===z);return ee.length===0?[{partNo:h.partNo,description:"NOT FOUND",calculationTime:new Date().toISOString()}]:ee.map(X=>{var de,ue;return{partNo:h.partNo,description:((de=X.part)==null?void 0:de.description)||"NOT FOUND",partName:X.partName,supplierName:X.supplierName,supplierCode:X.supplierCcode,destination:X.model?`${X.model.destinationCode} - ${X.model.destinationName}`:"N/A",model:(ue=X.model)==null?void 0:ue.name,parentNo:X.parentNo,cpsNo:X.cpsNo,calculationTime:new Date().toISOString(),subtotals:X.subtotals,total:X.total,cps:X.cps}})});p(K);return}if(!O||!O.length){console.error("CPS data is not loaded yet.");return}let B=O;if(t.modelCfc.length>0){const K=new Set(t.modelCfc.map(C));B=O.filter(h=>K.has(C(h.model_cfc)))}const $=B.map(K=>{var h,Y;return{partNo:K.part_no??K.partNo,description:((h=K.part)==null?void 0:h.description)||"NOT FOUND",partName:K.partName,supplierName:K.supplierName,supplierCode:K.supplierCcode,destination:K.model?`${K.model.destinationCode} - ${K.model.destinationName}`:"N/A",model:(Y=K.model)==null?void 0:Y.name,parentNo:K.parentNo,cpsNo:K.cpsNo,calculationTime:new Date().toISOString(),subtotals:K.subtotals,total:K.total,cps:K.cps}});p($)};function T(){n(ms),p([]),d([])}function H(B){if(Array.isArray(B)&&B.length>0){const $=B.map(K=>K.cfc);n(K=>{const h=K.modelCfc||[],Y=$.filter(F=>!h.includes(F));return{...K,modelCfc:[...h,...Y],modelCfcInput:""}})}A(!1)}function Z(B){n($=>({...$,modelCfc:$.modelCfc.filter(K=>K!==B)}))}function se(){const B={...t,parts:m};o&&o(B)}function I(){a&&a()}function V(B){if(!Array.isArray(B)||B.length===0){y(!1);return}const $=B.map(h=>({partNo:h.partNo,suffix:"",partName:h.partName,parentPartNo:h.parentPartNo||h.parent||"",supplierId:h.supplierName&&(h.supplierId||h.supplierCode)||"",supplierName:h.supplierName,L:h.L||"",W:h.W||"",H:h.H||"",boxM3:h.boxM3||"",inner:{totalCost:h.innerTotal??0,prevYear:h.prevYear??0,diff:h.diffPerc??"0%",materials:h.innerMaterials||[]},outer:{totalCost:h.outerTotal??0,prevYear:h.prevYear??0,diff:h.diffPerc??"0%",materials:h.outerMaterials||[]},material:{totalCost:h.materialTotal??0,prevYear:h.prevYear??0,diff:h.diffPerc??"0%"},labor:{totalCost:h.laborTotal??20,prevYear:h.prevYear??0,diff:h.diffPerc??"0%",manHour:h.laborManHour??1.5,cost:h.laborCost??25,receiving:.1,inspection:.2,deliveryCourse:.1,supply:.1,binding:.1,sortingSupply:.2,pickPacking:.3,vanning:.2,boxValetReturn:.1,mixVan:.1,lashing:.1,totalTime:1.5,requirement:1,currentDL:1,idl:0,facilityOthers:0},inland:{totalCost:h.inlandTotal??30,prevYear:h.prevYear??0,diff:h.diffPerc??"0%",cost:h.inlandCost??35,packTime:h.inlandPackTime??"10:00",inlandCost:h.inlandInlandCost??40,inlandCostM3:h.inlandInlandCostM3??5,milkrunCost:h.inlandMilkrunCost??15},total:{totalCost:h.totalCost??0,prevYear:h.prevYear??0,diff:h.diffPerc??"0%"}}));d(h=>{const Y=h.map(z=>z.partNo),F=$.filter(z=>!Y.includes(z.partNo));return[...h,...F]});const K=$.map(h=>h.partNo);n(h=>{const Y=h.part||[],F=K.filter(z=>!Y.includes(z));return{...h,part:[...Y,...F]}}),y(!1)}function w(B){n($=>({...$,part:$.part.filter(K=>K!==B)})),d($=>$.filter(K=>K.partNo!==B))}const _=m.length,q=Math.max(1,Math.ceil(_/c));function te(B){i(Math.min(Math.max(1,B),q))}const U=m.slice((f-1)*c,f*c);function E(B,$){N(K=>({...K,[B]:$}))}function R(B){g(B)}function le(B){k($=>({...$,[B]:!$[B]}))}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"np-modal-backdrop",onMouseDown:B=>{B.target===B.currentTarget&&I()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:"95vw",maxHeight:"90vh",width:"95vw",height:"90vh"},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h5",{className:"card-title mb-0",children:e.jsx("strong",{children:"Packing Cost Calculation New"})}),e.jsx("button",{type:"button",className:"close",onClick:I,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"card-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsx(Ul,{form:t,change:L,setShowPartPicker:y,setShowModelPicker:A,handleCalculate:D,handleClear:T,onModelRemove:Z,onPartRemove:w,onModelCfcKeyDown:S,onPartKeyDown:W}),e.jsx($l,{visibleParts:U,selectedRows:v,handleCheckboxChange:R,page:f,perPage:c,remarks:j,handleRemarkChange:E,expandedRows:P,handleToggleExpand:le,threshold_percentage:5}),e.jsx(Kl,{page:f,totalPages:q,goToPage:te,perPage:c})]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-success mr-2",onClick:se,children:[e.jsx("i",{className:"fas fa-download mr-1"})," Save"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:I,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]})}),x&&e.jsx(Re,{show:x,onClose:()=>y(!1),onSelect:V}),b&&e.jsx(Oe,{show:b,onClose:()=>A(!1),onAdd:H,selectionMode:"multi"})]})}function Vl({calCode:s,setCalCode:a,period:o,setPeriod:t,destCode:n,setDestCode:m,modelCode:p,setModelCode:u,type:d,setType:c,handleFilter:r,handleClear:f}){return e.jsxs("div",{className:"card-body",children:[e.jsx("form",{onSubmit:r,className:"mb-3",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Pack Cost Cal Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:s,onChange:i=>a(i.target.value),placeholder:"Pack Cost Cal Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("select",{className:"form-control form-control-sm",value:n,onChange:i=>m(i.target.value),children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"024W",children:"024W"}),e.jsx("option",{value:"ARG",children:"ARG"})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Type"}),e.jsxs("div",{className:"form-control form-control-sm",style:{minHeight:44},children:[e.jsxs("div",{className:"form-check form-check-inline mr-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_all",value:"All",checked:d==="All",onChange:()=>c("All")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_all",children:"All"})]}),e.jsxs("div",{className:"form-check form-check-inline mr-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_pxp",value:"PxP",checked:d==="PxP",onChange:()=>c("PxP")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_pxp",children:"PxP"})]}),e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_lot",value:"Lot",checked:d==="Lot",onChange:()=>c("Lot")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_lot",children:"Lot"})]})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Period"}),e.jsxs("select",{className:"form-control form-control-sm",value:o,onChange:i=>t(i.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"01.2025"}),e.jsx("option",{children:"02.2025"}),e.jsx("option",{children:"03.2025"})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Model Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:p,onChange:i=>u(i.target.value),placeholder:"Model Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})})]})}),e.jsxs("div",{className:"d-flex justify-content-end mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:r,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:f,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})]})}function Gl({rows:s,visibleRows:a,page:o,totalPages:t,goToPage:n,perPage:m,setPerPage:p,total:u}){const[d,c]=l.useState(null),r=i=>{if(i==null||i==="")return"";const x=Number(i);return isNaN(x)?String(i):x.toFixed(2)},f=i=>{c(d===i?null:i)};return e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Pack Cost Cal Code"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Dest Country"}),e.jsx("th",{children:"Model Code"}),e.jsx("th",{children:"# Parts"}),e.jsx("th",{children:"Type"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-4 text-muted",children:"No Data Found"})}):a.map((i,x)=>{const y=(o-1)*m+x;return e.jsxs(ke.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:String(y+1).padStart(2,"0")}),e.jsx("td",{children:i.calCode}),e.jsx("td",{children:i.period}),e.jsx("td",{children:i.destCode}),e.jsx("td",{children:i.destCountry}),e.jsx("td",{children:i.modelCode}),e.jsx("td",{children:r(i.numParts)}),e.jsx("td",{children:i.type}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>f(y),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>alert("Delete placeholder"),children:e.jsx("i",{className:"fas fa-trash"})})]})]}),d===y&&e.jsx("tr",{children:e.jsx("td",{colSpan:"9",children:i.parts&&i.parts.length>0?i.parts.map((b,A)=>e.jsx(Ys,{part:b},A)):e.jsx("div",{className:"p-3 text-center text-muted",children:"No part details available for this calculation."})})})]},x)})})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>n(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>n(Math.max(1,o-1)),children:"<"}),[...Array(t).keys()].map(i=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${o===i+1?"btn-primary":"btn-light"}`,onClick:()=>n(i+1),children:i+1},i)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>n(Math.min(t,o+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",u]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[m," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{p(3),setPage(1)},children:"3"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{p(10),setPage(1)},children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{p(25),setPage(1)},children:"25"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})}function Yl(){const[s,a]=l.useState(""),[o,t]=l.useState("All"),[n,m]=l.useState("All"),[p,u]=l.useState(""),[d,c]=l.useState("All"),[r,f]=l.useState([]),[i,x]=l.useState([]),[y,b]=l.useState(3),[A,j]=l.useState(1),N=r.length,v=Math.max(1,Math.ceil(N/y)),[g,P]=l.useState(!1);l.useEffect(()=>{fetch("/packing-cost-fe/generatedData.json").then(C=>{if(!C.ok)throw new Error("Network response was not ok");return C.json()}).then(C=>{const T=(C.cpsData||[]).map(H=>({id:H.id,calCode:H.pack_cost_cal_code,period:H.implementation_period,destCode:H.destination_code,destCountry:H.destination_country,modelCode:H.model_cfc,numParts:H.parts?H.parts.length:0,type:H.type,parts:H.parts||[]}));x(T),f([])}).catch(C=>{console.error("Error fetching packing cost data:",C)})},[]);function k(W){W&&W.preventDefault&&W.preventDefault();let C=[...i];s&&(C=C.filter(D=>D.calCode.toLowerCase().includes(s.toLowerCase()))),o!=="All"&&(C=C.filter(D=>D.period===o)),n!=="All"&&(C=C.filter(D=>D.destCode===n)),p&&(C=C.filter(D=>D.modelCode.toLowerCase().includes(p.toLowerCase()))),d!=="All"&&(C=C.filter(D=>D.type===d)),f(C),j(1)}function O(){a(""),t("All"),m("All"),u(""),c("All"),f([]),j(1)}function M(W){const C=Math.min(Math.max(1,W),v);j(C)}const L=r.slice((A-1)*y,A*y);function S(W){console.log("Packing cost saved payload:",W);const C={...W,numParts:W.parts.length};f(D=>[...D,C]),P(!1)}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Packing Cost Calculation List"})}),e.jsxs("div",{className:"card-tools ml-auto d-flex align-items-center gap-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",title:"Calculate Packing Cost",onClick:()=>P(!0),children:[e.jsx("i",{className:"fas fa-calculator mr-1"})," Calculate Packing Cost"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(Vl,{calCode:s,setCalCode:a,period:o,setPeriod:t,destCode:n,setDestCode:m,modelCode:p,setModelCode:u,type:d,setType:c,handleFilter:k,handleClear:O}),e.jsx(Gl,{rows:r,visibleRows:L,page:A,totalPages:v,goToPage:M,perPage:y,setPerPage:b,total:N})]}),e.jsx(ql,{show:g,onClose:()=>P(!1),onSave:S})]})}function We({title:s,value1:a,value2:o,diff:t,children:n}){const[m,p]=l.useState(!0),u=s.match(/^(.*?)\s*(\([^)]*\))?$/),d=u?u[1].trim():s,c=u&&u[2]?u[2]:"",r=i=>{if(i==null||i==="")return!1;if(typeof i=="number")return!0;let x=String(i).trim();return x.endsWith("%")&&(x=x.slice(0,-1)),x=x.replace(/[^0-9.\-]/g,""),x===""||x==="-"||x==="."||x==="-."?!1:/^-?\d+(\.\d+)?$/.test(x)},f=i=>({textAlign:r(i)?"right":"left",whiteSpace:"nowrap"});return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{style:{backgroundColor:"#f9f9f9",cursor:"pointer"},onClick:()=>p(!m),children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{marginRight:6},children:m?"▼":"▶"}),e.jsx("span",{children:e.jsx("strong",{children:d})})]}),c&&e.jsx("span",{children:c})]})}),e.jsx("td",{style:f(a),children:a}),e.jsx("td",{style:f(o),children:o}),e.jsx("td",{style:f(t),children:t})]}),m&&n]})}const ie=s=>{if(s==null||s==="")return"";const a=Number(s);return isNaN(a)?String(s):a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},ss=s=>`Rp ${Number(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,we=(s,a)=>{if(s==null||a==null)return"";const o=Number(s),t=Number(a);return isNaN(o)||isNaN(t)||o===0?"":`${((t-o)/o*100).toFixed(2)}%`},me={textAlign:"right",whiteSpace:"nowrap"};function zl(){const[s,a]=l.useState(0),[o,t]=l.useState(1),[n,m]=l.useState("2025"),[p,u]=l.useState("2026"),[d,c]=l.useState([]),[r,f]=l.useState([]);if(l.useEffect(()=>{const M="/packing-cost-fe/comparison.json",L="/packing-cost-fe/cpsComparison.json";fetch(M).then(S=>S.json()).then(S=>c(S)),fetch(L).then(S=>S.json()).then(S=>f(S))},[]),d.length===0)return e.jsx("div",{children:"Loading..."});const i=d[s],x=d[o],y=i.materials.inner.reduce((M,L)=>M+L.value,0),b=x.materials.inner.reduce((M,L)=>M+L.value,0),A=i.materials.outer.reduce((M,L)=>M+L.value,0),j=x.materials.outer.reduce((M,L)=>M+L.value,0),N=y+A,v=b+j,g=i.labor.dl+i.labor.idl+i.labor.facility,P=x.labor.dl+x.labor.idl+x.labor.facility,k=i.inland.inlandCost+i.inland.milkrunCost,O=x.inland.inlandCost+x.inland.milkrunCost;return e.jsxs("div",{className:"container mt-3",children:[e.jsx("h5",{children:"Packing Cost Comparison"}),e.jsxs("table",{className:"table table-bordered table-sm",style:{fontSize:"0.85rem"},children:[e.jsxs("thead",{style:{backgroundColor:"#efefef"},children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Part No"}),e.jsx("th",{children:e.jsx("select",{className:"form-control form-control-sm",value:s,onChange:M=>a(Number(M.target.value)),children:d.map((M,L)=>e.jsxs("option",{value:L,children:[M.partNo," - ",M.code]},L))})}),e.jsx("th",{children:e.jsx("select",{className:"form-control form-control-sm",value:o,onChange:M=>t(Number(M.target.value)),children:d.map((M,L)=>e.jsxs("option",{value:L,children:[M.partNo," - ",M.code]},L))})}),e.jsx("th",{children:"Diff"})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Periode"}),e.jsx("th",{children:e.jsx("input",{value:n,onChange:M=>m(M.target.value),className:"form-control form-control-sm"})}),e.jsx("th",{children:e.jsx("input",{value:p,onChange:M=>u(M.target.value),className:"form-control form-control-sm"})}),e.jsx("th",{})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Part Name"}),e.jsx("td",{children:(i==null?void 0:i.name)||""}),e.jsx("td",{children:(x==null?void 0:x.name)||""}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Supplier"}),e.jsx("td",{children:(i==null?void 0:i.supplier)||""}),e.jsx("td",{children:(x==null?void 0:x.supplier)||""}),e.jsx("td",{})]}),e.jsxs("tr",{style:{fontWeight:"bold"},children:[e.jsx("td",{children:"TOTAL COST (Rp)"}),e.jsx("td",{style:me,children:ie(i==null?void 0:i.totalCost)}),e.jsx("td",{style:me,children:ie(x==null?void 0:x.totalCost)}),e.jsx("td",{style:me,children:we(i==null?void 0:i.totalCost,x==null?void 0:x.totalCost)})]}),e.jsxs(We,{title:"Material (Rp)",value1:ie(N),value2:ie(v),diff:we(N,v),children:[e.jsx(We,{title:"Inner (Rp)",value1:ie(y),value2:ie(b),diff:we(y,b),children:i.materials.inner.map((M,L)=>{const S=x.materials.inner[L];return e.jsxs(ke.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:M.name}),e.jsx("td",{style:me,children:ie(M.value)}),e.jsx("td",{style:me,children:ie(S==null?void 0:S.value)}),e.jsx("td",{style:me,children:we(M.value,S==null?void 0:S.value)})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Material No: ",M.detail.partNo]}),e.jsxs("div",{children:["- Code: ",M.detail.code]}),e.jsxs("div",{children:["- Qty: ",ie(M.detail.qty)]}),e.jsxs("div",{children:["- Price: ",ss(M.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",ie(M.detail.qty*M.detail.price)]})]}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Material No: ",S==null?void 0:S.detail.partNo]}),e.jsxs("div",{children:["- Code: ",S==null?void 0:S.detail.code]}),e.jsxs("div",{children:["- Qty: ",ie(S==null?void 0:S.detail.qty)]}),e.jsxs("div",{children:["- Price: ",ss(S==null?void 0:S.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",ie((S==null?void 0:S.detail.qty)*(S==null?void 0:S.detail.price))]})]}),e.jsx("td",{})]})]},`inner-${L}`)})}),e.jsx(We,{title:"Outer (Rp)",value1:ie(A),value2:ie(j),diff:we(A,j),children:i.materials.outer.map((M,L)=>{const S=x.materials.outer[L];return e.jsxs(ke.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:M.name}),e.jsx("td",{style:me,children:ie(M.value)}),e.jsx("td",{style:me,children:ie(S==null?void 0:S.value)}),e.jsx("td",{style:me,children:we(M.value,S==null?void 0:S.value)})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",M.detail.partNo]}),e.jsxs("div",{children:["- Code: ",M.detail.code]}),e.jsxs("div",{children:["- Qty: ",ie(M.detail.qty)]}),e.jsxs("div",{children:["- Price: ",ss(M.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",ie(M.detail.qty*M.detail.price)]})]}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",S==null?void 0:S.detail.partNo]}),e.jsxs("div",{children:["- Code: ",S==null?void 0:S.detail.code]}),e.jsxs("div",{children:["- Qty: ",ie(S==null?void 0:S.detail.qty)]}),e.jsxs("div",{children:["- Price: ",ss(S==null?void 0:S.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",ie((S==null?void 0:S.detail.qty)*(S==null?void 0:S.detail.price))]})]}),e.jsx("td",{})]})]},`outer-${L}`)})})]}),e.jsxs(We,{title:"Labor (Rp)",value1:ie(g),value2:ie(P),diff:we(g,P),children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- DL"}),e.jsx("td",{style:me,children:ie(i.labor.dl)}),e.jsx("td",{style:me,children:ie(x.labor.dl)}),e.jsx("td",{style:me,children:we(i.labor.dl,x.labor.dl)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- IDL"}),e.jsx("td",{style:me,children:ie(i.labor.idl)}),e.jsx("td",{style:me,children:ie(x.labor.idl)}),e.jsx("td",{style:me,children:we(i.labor.idl,x.labor.idl)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Facility/Others"}),e.jsx("td",{style:me,children:ie(i.labor.facility)}),e.jsx("td",{style:me,children:ie(x.labor.facility)}),e.jsx("td",{style:me,children:we(i.labor.facility,x.labor.facility)})]})]}),e.jsxs(We,{title:"Inland (Rp)",value1:ie(k),value2:ie(O),diff:we(k,O),children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Inland Cost"}),e.jsx("td",{style:me,children:ie(i.inland.inlandCost)}),e.jsx("td",{style:me,children:ie(x.inland.inlandCost)}),e.jsx("td",{style:me,children:we(i.inland.inlandCost,x.inland.inlandCost)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Milkrun Cost"}),e.jsx("td",{style:me,children:ie(i.inland.milkrunCost)}),e.jsx("td",{style:me,children:ie(x.inland.milkrunCost)}),e.jsx("td",{style:me,children:we(i.inland.milkrunCost,x.inland.milkrunCost)})]})]})]})]})]})}function Jl({show:s,onClose:a,onSave:o,initialData:t=null,mode:n="new"}){const[m,p]=l.useState(""),[u,d]=l.useState(""),[c,r]=l.useState(""),[f,i]=l.useState(""),[x,y]=l.useState(""),[b,A]=l.useState(""),[j,N]=l.useState(""),[v,g]=l.useState(""),[P,k]=l.useState(""),[O,M]=l.useState(""),[L,S]=l.useState(""),[W,C]=l.useState(""),[D,T]=l.useState(""),[H,Z]=l.useState(""),[se,I]=l.useState(""),[V,w]=l.useState(""),[_,q]=l.useState(""),[te,U]=l.useState("");l.useEffect(()=>{s&&t?(p(t.materialNo||""),d(t.materialName||""),r(t.price??""),i(t.materialType||""),y(t.supplierCode||""),A(t.supplierName||""),N(t.address||""),g(t.plantCode||""),k(t.eWarehouse||""),M(t.eWarehousePrice||""),S(t.dimLength||""),C(t.dimWeightPc||""),T(t.dimWidth||""),Z(t.dimQtyBundling||""),I(t.dimHeight||""),w(t.totalDimWeight||""),q(t.docMSDS||""),U(t.docDrawing||"")):s||R()},[s,t]);function E(){if(!m||!u||!f){alert("Please fill in Material No, Material Name, and Material Type");return}const h={id:t==null?void 0:t.id,materialNo:m,materialName:u,price:c,materialType:f,supplierCode:x,supplierName:b,address:j,plantCode:v,eWarehouse:P,eWarehousePrice:O,dimLength:L,dimWeightPc:W,dimWidth:D,dimQtyBundling:H,dimHeight:se,totalDimWeight:V,docMSDS:_,docDrawing:te,createdDate:n==="edit"?(t==null?void 0:t.createdDate)||new Date().toLocaleDateString():new Date().toLocaleDateString()};o(h,n),R()}function R(){p(""),d(""),r(""),i(""),y(""),A(""),N(""),g(""),k(""),M(""),S(""),C(""),T(""),Z(""),I(""),w(""),q(""),U("")}function le(){const h=`EWH-${Math.random().toString(36).substr(2,9).toUpperCase()}`,Y=(Math.random()*1e3).toFixed(2);k(h),M(Y),r(Y)}function B(){R(),a()}if(!s)return null;const $=n==="edit"?"Material - Edit":"Material - New",K=n==="edit"?"Save Changes":"Save Material";return e.jsx("div",{className:"np-modal-backdrop",onMouseDown:h=>{h.target===h.currentTarget&&B()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:800},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:$})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:B,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",style:{fontSize:"0.7rem"},children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Item No ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",value:m,onChange:J(p),placeholder:"Enter Item No",autoFocus:!0}),e.jsx("div",{className:"input-group-append",children:e.jsxs("button",{className:"btn btn-primary",type:"button",style:{fontSize:"0.8rem"},onClick:le,disabled:!m,children:[e.jsx("i",{className:"fas fa-search mr-1"}),"Search eWH"]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Material Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:u,onChange:J(d),placeholder:"Enter Material Name"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:c,onChange:h=>r(h.target.value),placeholder:"Enter Price",step:"0.01",min:"0"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"eWarehouse Price"}),e.jsx("input",{type:"number",className:"form-control",value:O,onChange:h=>M(h.target.value),placeholder:"eWarehouse Price",step:"0.01",min:"0",readOnly:!0})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Material Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:f,onChange:h=>i(h.target.value),children:[e.jsx("option",{value:"",children:"Select Material Type"}),e.jsx("option",{value:"Inner",children:"Inner"}),e.jsx("option",{value:"Outer",children:"Outer"}),e.jsx("option",{value:"Module",children:"Module"}),e.jsx("option",{value:"Module",children:"Box"})]})]})]})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Supplier"})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code"}),e.jsx("input",{type:"text",className:"form-control",value:x,onChange:J(y),placeholder:"Enter Supplier Code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("input",{type:"text",className:"form-control",value:j,readOnly:!0,placeholder:"Address"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("input",{type:"text",className:"form-control",value:b,readOnly:!0,placeholder:"Supplier Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Plant Code"}),e.jsx("input",{type:"text",className:"form-control",value:v,readOnly:!0,placeholder:"Plant Code"})]})]})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Dimension"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Length (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:L,onChange:h=>S(h.target.value),placeholder:"Length (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Weight/pc (gr)"}),e.jsx("input",{type:"number",className:"form-control",value:W,onChange:h=>C(h.target.value),placeholder:"Weight/pc (gr)"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Width (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:D,onChange:h=>T(h.target.value),placeholder:" Width (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Qty/Bundling"}),e.jsx("input",{type:"number",className:"form-control",value:H,onChange:h=>Z(h.target.value),placeholder:"Qty/Bundling"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Height (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:se,onChange:h=>I(h.target.value),placeholder:"Height (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Total Weight (gr)"}),e.jsx("input",{type:"number",className:"form-control",value:V,onChange:h=>w(h.target.value),placeholder:"Total Weight (gr)"})]})})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Documents"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"MSDS"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-image"})})}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:h=>{var Y;return q(((Y=h.target.files[0])==null?void 0:Y.name)||"")}})]})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Drawing"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-image"})})}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:h=>{var Y;return U(((Y=h.target.files[0])==null?void 0:Y.name)||"")}})]})]})})]})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary mr-2",onClick:B,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Cancel"]}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:E,children:[e.jsx("i",{className:"fas fa-save mr-1"}),K]})]})]})})}function Ql({materialNo:s,setMaterialNo:a,materialName:o,setMaterialName:t,parentMaterial:n,setParentMaterial:m,itemNo:p,setItemNo:u,price:d,setPrice:c,materialType:r,setMaterialType:f,onFilter:i,onClearFilters:x}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Item No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:J(a),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),i())},placeholder:"Material No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Material Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:J(t),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),i())},placeholder:"Material Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Parent Material"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:J(m),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),i())},placeholder:"Parent Material"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"eWarehouse Item No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:J(u),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),i())},placeholder:"Item No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Price"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:J(c),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),i())},placeholder:"Price"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Material Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:r,onChange:y=>f(y.target.value),children:[e.jsx("option",{value:"",children:"Select Material Type"}),e.jsx("option",{value:"Inner",children:"Inner"}),e.jsx("option",{value:"Outer",children:"Outer"}),e.jsx("option",{value:"Module",children:"Module"}),e.jsx("option",{value:"Box",children:"Module"})]})]})]})]}),e.jsxs("div",{className:"form-group text-right mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:i,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:x,children:[e.jsx("i",{className:"fas fa-undo mr-1"})," Clear"]})]})]})}function Zl({materials:s,allMaterials:a,totalMaterials:o,currentPage:t,totalPages:n,pageSize:m,onPageChange:p,onDeleteMaterial:u,onEditMaterial:d}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50},className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"Item No"}),e.jsx("th",{className:"text-center",children:"Material Name"}),e.jsx("th",{className:"text-center",children:"Price"}),e.jsx("th",{className:"text-center",children:"eWH Item No"}),e.jsx("th",{className:"text-center",children:"eWH Price"}),e.jsx("th",{className:"text-center",children:"Material Type"}),e.jsx("th",{style:{width:120},className:"text-center",children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-4 text-muted text-center",children:"No Data Found"})}):s.map((c,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:(t-1)*m+r+1}),e.jsx("td",{className:"text-center",children:c.materialNo}),e.jsx("td",{children:c.materialName}),e.jsx("td",{className:"text-center",children:c.price}),e.jsx("td",{className:"text-center",children:c.eWarehouse}),e.jsx("td",{className:"text-center",children:c.eWarehousePrice}),e.jsx("td",{className:"text-center",children:c.materialType}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>d&&d(c),title:"Edit Material",children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>u&&u(r),title:"Delete Material",children:e.jsx("i",{className:"fas fa-trash"})})]})]},c.id||r))})]})}),n>1&&e.jsx($e,{currentPage:t,totalPages:n,totalItems:o,pageSize:m,onPageChange:p})]})}function Ls(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(""),[i,x]=l.useState(!1),[y,b]=l.useState("new"),[A,j]=l.useState(null),[N,v]=l.useState(1),g=10,[P,k]=l.useState([]),[O,M]=l.useState([]);l.useEffect(()=>{fetch("/packing-cost-fe/materials.json").then(_=>{if(!_.ok)throw new Error("Network response was not ok");return _.json()}).then(_=>{k(_),M([])}).catch(_=>{console.error("Error fetching materials:",_)})},[]);const L=Math.ceil(O.length/g),S=(N-1)*g,W=S+g,C=O.slice(S,W);function D(){let w=P.filter(q=>{const te=!s||q.materialNo&&q.materialNo.toLowerCase().includes(s.toLowerCase()),U=!o||q.materialName&&q.materialName.toLowerCase().includes(o.toLowerCase()),E=!n||q.parentMaterial&&q.parentMaterial.toLowerCase().includes(n.toLowerCase()),R=!p||q.itemNo&&q.itemNo.toLowerCase().includes(p.toLowerCase()),le=!d||q.price&&q.price.toString().includes(d),B=!r||q.materialType===r;return te&&U&&E&&R&&le&&B});M(!s&&!o&&!n&&!p&&!d&&!r?[...P].reverse():w),v(1),console.log(`Filtered ${w.length} materials from ${P.length} total`)}function T(){a(""),t(""),m(""),u(""),c(""),f(""),M([]),v(1)}function H(){j(null),b("new"),x(!0)}function Z(){x(!1),j(null),b("new")}function se(w,_="new"){if(_==="edit"&&A){const q=A.materialNo,te=P.map(E=>E.materialNo===q?{...E,...w}:E),U=O.map(E=>E.materialNo===q?{...E,...w}:E);k(te),M(U)}else k(q=>[w,...q]),M(q=>[w,...q]);x(!1),j(null),b("new")}function I(w){if(!confirm("Delete this material?"))return;const _=(N-1)*g+w,q=O[_];if(!q)return;const te=O.filter((R,le)=>le!==_),U=P.filter(R=>R.materialNo!==q.materialNo);M(te),k(U);const E=Math.ceil(te.length/g);N>E&&E>0&&v(E)}function V(w){j(w),b("edit"),x(!0)}return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Material List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:H,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Material"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Upload placeholder"),children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Download template placeholder"),children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(Ql,{materialNo:s,setMaterialNo:a,materialName:o,setMaterialName:t,parentMaterial:n,setParentMaterial:m,itemNo:p,setItemNo:u,price:d,setPrice:c,materialType:r,setMaterialType:f,onFilter:D,onClearFilters:T}),e.jsx(Zl,{materials:C,allMaterials:P,totalMaterials:O.length,currentPage:N,totalPages:L,pageSize:g,onPageChange:v,onDeleteMaterial:I,onEditMaterial:V})]}),e.jsx(Jl,{show:i,onClose:Z,onSave:se,initialData:A,mode:y})]})})}function Xl(){const s=Te(),[a,o]=l.useState(!1),[t,n]=l.useState(!1),m=Ts(),p=He();l.useEffect(()=>{const c=(m.pathname||"").toLowerCase();c.startsWith("/projects")||c.startsWith("/models")||c.startsWith("/parts")||c.startsWith("/suppliers")||c.startsWith("/material")||c.startsWith("/module-type")||c.startsWith("/params")?o(!0):o(!1),c.startsWith("/packing")||c.startsWith("/cps")||c.startsWith("/dpi")||c.startsWith("/calculate-packing-cost")||c.startsWith("/calculate")?n(!0):n(!1)},[m.pathname]);const u=({isActive:c})=>"nav-link"+(c?" active":"");function d(c){c&&c.preventDefault&&c.preventDefault();try{s&&typeof s.logout=="function"&&s.logout()}catch{}p("/login")}return e.jsxs("aside",{className:"main-sidebar sidebar-dark-primary elevation-4",style:{minHeight:"100vh"},children:[e.jsx("div",{className:"brand-link",children:e.jsx(Se,{to:"/",className:"d-block text-decoration-none",children:e.jsx("span",{className:"brand-text font-weight-light",children:"My App"})})}),e.jsx("div",{className:"sidebar d-flex flex-column",style:{minHeight:"calc(100vh - 56px)"},children:e.jsx("nav",{className:"mt-2 flex-grow-1",children:e.jsxs("ul",{className:"nav nav-pills nav-sidebar flex-column",role:"menu","aria-orientation":"vertical",style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/",className:u,end:!0,children:[e.jsx("i",{className:"nav-icon fas fa-tachometer-alt"}),e.jsx("p",{children:"Dashboard"})]})}),e.jsxs("li",{className:`nav-item has-treeview ${a?"menu-open":""}`,children:[e.jsxs("div",{role:"button",onClick:()=>o(c=>!c),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&o(r=>!r)},tabIndex:0,"aria-expanded":a,className:`nav-link d-flex align-items-center ${a?"active":""}`,style:{cursor:"pointer",userSelect:"none"},children:[e.jsx("i",{className:"nav-icon fas fa-database"}),e.jsx("p",{className:"flex-grow-1 mb-0 ml-2",children:"Master"}),e.jsx("i",{className:`right fas ${a?"fa-angle-down":"fa-angle-left"}`})]}),e.jsxs("ul",{className:"nav nav-treeview",style:{display:a?"block":"none"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/projects",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Projects"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/models",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Models"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/material",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Material"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/parts",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Parts"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/suppliers",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Suppliers"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/params",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Parameters"})]})})]})]}),e.jsxs("li",{className:`nav-item has-treeview ${t?"menu-open":""}`,children:[e.jsxs("div",{role:"button",onClick:()=>n(c=>!c),onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&n(r=>!r)},tabIndex:0,"aria-expanded":t,className:`nav-link d-flex align-items-center ${t?"active":""}`,style:{cursor:"pointer",userSelect:"none"},children:[e.jsx("i",{className:"nav-icon fas fa-box-open"}),e.jsx("p",{className:"flex-grow-1 mb-0 ml-2",children:"Packing Spec"}),e.jsx("i",{className:`right fas ${t?"fa-angle-down":"fa-angle-left"}`})]}),e.jsxs("ul",{className:"nav nav-treeview",style:{display:t?"block":"none"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/packing/cps",className:({isActive:c})=>"nav-link"+(c?" active":""),children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"CPS"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/packing/DPI",className:({isActive:c})=>"nav-link"+(c?" active":""),children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"DPI"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/packing/CalculatePackingCost",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Calculate Packing Cost"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Se,{to:"/packing/ComparisonPage",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Comparison"})]})})]})]}),e.jsx("li",{style:{marginTop:"auto"}}),e.jsx("li",{className:"nav-item",style:{padding:"0.5rem 0"},children:e.jsxs(Se,{to:"/settings",className:u,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Settings"})]})}),e.jsx("li",{className:"nav-item",style:{padding:"0.5rem 0"},children:e.jsxs("button",{type:"button",onClick:d,className:"btn btn-block btn-outline-danger d-flex align-items-center",style:{justifyContent:"flex-start"},children:[e.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),e.jsx("span",{children:"Logout"})]})})]})})})]})}function ea(){const s=Te(),a=He(),o=()=>{a("/notification-detail")};return e.jsxs("nav",{className:"main-header navbar navbar-expand navbar-white navbar-light",children:[e.jsxs("ul",{className:"navbar-nav",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link","data-widget":"pushmenu",href:"#",role:"button",children:e.jsx("i",{className:"fas fa-bars"})})}),e.jsx("li",{className:"nav-item d-none d-sm-inline-block",children:e.jsx("a",{href:"#",className:"nav-link",children:"Home"})})]}),e.jsxs("ul",{className:"navbar-nav ml-auto",children:[e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link","data-toggle":"dropdown",href:"#",children:[e.jsx("i",{className:"far fa-bell"}),e.jsx("span",{className:"badge badge-warning navbar-badge",children:"2"})]}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-lg dropdown-menu-right",children:[e.jsx("span",{className:"dropdown-item dropdown-header",children:"2 Notifications"}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("div",{className:"dropdown-item",children:[e.jsx("p",{style:{fontWeight:"bold"},children:"Date : 20 Feb 2025 13:15"}),e.jsx("p",{className:"text-sm",children:"You have new form request to review."}),e.jsx("p",{className:"text-sm text-muted",children:"From : Jonathan Hairi at 20 Feb 2025 13:10"}),e.jsx("p",{className:"text-sm text-muted",children:"Dept : PPMD"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:o,children:"See Detail"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("div",{className:"dropdown-item",children:[e.jsx("p",{style:{fontWeight:"bold"},children:"Date : 19 Feb 2025 12:15"}),e.jsx("p",{className:"text-sm",children:"Your form submission has been rejected by :"}),e.jsx("p",{className:"text-sm text-muted",children:"By : Jonathan Hairi at 19 Feb 2025 13:10"}),e.jsx("p",{className:"text-sm text-muted",children:"Dept : PPMD"}),e.jsx("p",{className:"text-sm text-muted",children:"Comment: Sheet tersebut sudah tidak ada di pasaran dan akan diganti sheet yg sama dari supplier lain."}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:o,children:"See Detail"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsx("a",{href:"#",className:"dropdown-item dropdown-footer",children:"See All Notifications"})]})]}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link","data-widget":"fullscreen",href:"#",role:"button",children:e.jsx("i",{className:"fas fa-expand-arrows-alt"})})}),s.user&&e.jsx("li",{className:"nav-item d-none d-sm-inline-block",children:e.jsx("span",{className:"nav-link",children:s.user.username})})]})]})}At.register(Mt,Dt,Lt,Tt,Et,Rt);const sa={labels:["Jan","Feb","Mar","Apr","May"],datasets:[{label:"Orders",data:[12,19,7,14,10],backgroundColor:"#007bff"}]};function ta(){return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Sales"})}),e.jsx("div",{className:"card-body",children:e.jsx(_t,{data:sa})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Quick Stats"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"info-box mb-3 bg-info",children:[e.jsx("span",{className:"info-box-icon",children:e.jsx("i",{className:"fas fa-shopping-cart"})}),e.jsxs("div",{className:"info-box-content",children:[e.jsx("span",{className:"info-box-text",children:"Orders"}),e.jsx("span",{className:"info-box-number",children:"1,250"})]})]})})]})}),e.jsx("div",{className:"col-12 mt-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Recent Items"})}),e.jsx("div",{className:"card-body p-0",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Qty"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"1"}),e.jsx("td",{children:"33504-BZ292-C1"}),e.jsx("td",{children:"Hose"}),e.jsx("td",{children:"10"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"2"}),e.jsx("td",{children:"122810Y110"}),e.jsx("td",{children:"Hanger"}),e.jsx("td",{children:"2"})]})]})]})})]})})]})}function la(){const s=Te(),[a,o]=l.useState(""),[t,n]=l.useState(""),[m,p]=l.useState(""),u=d=>{d.preventDefault(),s.login(a,t)||p("Invalid username or password")};return e.jsx("div",{className:"login-page bg-light min-vh-100 d-flex align-items-center justify-content-center",children:e.jsx("div",{className:"card shadow-sm",style:{width:"360px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"mb-4 text-center",children:"Sign In"}),m&&e.jsx("div",{className:"alert alert-danger py-2",role:"alert",children:m}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),e.jsx("input",{type:"text",id:"username",className:"form-control",value:a,onChange:d=>o(d.target.value),placeholder:"Enter username",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",className:"form-control",value:t,onChange:d=>n(d.target.value),placeholder:"Enter password",required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Login"})]})]})})})}function aa({visible:s,onClose:a,onSave:o,initialData:t}){const[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState("Draft"),[r,f]=l.useState(""),[i,x]=l.useState(""),[y,b]=l.useState(""),[A,j]=l.useState([]),[N,v]=l.useState(!1);l.useEffect(()=>{t?(m(t.project_code||""),u(t.project_name||""),c(t.project_status||"Draft"),f(t.project_manager||""),x(t.description||""),b(t.note||""),j(t.models||[])):(m(""),u(""),c("Draft"),f(""),x(""),b(""),j([]))},[t,s]);const g=()=>{v(!0)},P=L=>{j(S=>[...S,...L]),v(!1)},k=(L,S,W)=>{j(C=>C.map((D,T)=>T===L?{...D,[S]:W}:D))},O=L=>{j(S=>S.filter((W,C)=>C!==L))},M=()=>{o&&o({code:n,name:p,status:d,manager:r,description:i,note:y,models:A})};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"np-modal-backdrop",style:{position:"fixed",inset:0,zIndex:1040},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1e3,margin:"40px auto",zIndex:1041},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:t?"Project - Edit":"Project - New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool","aria-label":"Close",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"small",children:["Project Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:n,onChange:J(m),placeholder:"Project Code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Project Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:p,onChange:J(u),placeholder:"Project Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"small",children:["Status ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{className:"form-control form-control-sm mb-2",value:d,onChange:L=>c(L.target.value),children:[e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"On Hold"}),e.jsx("option",{children:"Completed"})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Project Manager"}),e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:J(f),placeholder:"Project Manager"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-user"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Description"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:i,onChange:L=>x(L.target.value),placeholder:"Description"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Note"}),e.jsx("textarea",{className:"form-control form-control-sm mb-2",value:y,onChange:L=>b(L.target.value),rows:2,placeholder:"Note"})]})]})]}),e.jsx("div",{className:"card mt-3",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:g,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Model"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40,textAlign:"center"},children:"No"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Code"}),e.jsx("th",{style:{textAlign:"center"},children:"CFC"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Impl. Period"}),e.jsx("th",{style:{textAlign:"center"},children:"Dest. Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Remark"}),e.jsx("th",{style:{width:90,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:A.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted py-4",children:"No Data Found"})}):A.map((L,S)=>e.jsxs("tr",{children:[e.jsx("td",{children:S+1}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:L.model_code,onChange:W=>k(S,"model_code",W.target.value),placeholder:"Model Code"})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:L.model_cfc,onChange:W=>k(S,"model_cfc",W.target.value),placeholder:"CFC",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:L.model_name,onChange:W=>k(S,"model_name",W.target.value),placeholder:"Model Name",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:L.model_implementation_period,onChange:W=>k(S,"model_implementation_period",W.target.value),placeholder:"Implementation Period",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:L.model_destination_code,onChange:W=>k(S,"model_destination_code",W.target.value),placeholder:"Destination Code",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:L.model_type,onChange:W=>k(S,"model_type",W.target.value),placeholder:"Type",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:L.model_remark,onChange:W=>k(S,"model_remark",W.target.value),placeholder:"Remark",readOnly:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>O(S),children:e.jsx("i",{className:"fas fa-trash"})})})]},S))})]})})]})})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{type:"button",className:"btn btn-primary mr-2",onClick:M,children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"})]})]})}),e.jsx(Oe,{show:N,onClose:()=>v(!1),onAdd:P})]}):null}const na=({show:s,onHide:a,onAdd:o,field:t="code"})=>{const[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState("All"),[r,f]=l.useState(""),[i,x]=l.useState([]),y=[{code:"024J",name:"Front Bumper Model",status:"Active",manager:"Prototype 2025"},{code:"286W",name:"Rear Bumper Model",status:"Draft",manager:"Production 2024"},{code:"332W",name:"Hood Model",status:"Inactive",manager:"Prototype 2023"},{code:"385W",name:"Fender Model",status:"Active",manager:"Production 2022"},{code:"388W",name:"Grille Model",status:"Active",manager:"Prototype 2021"}],[b,A]=l.useState(y);if(l.useEffect(()=>{s&&(N(),x([]))},[s]),!s)return null;const j=()=>{let P=y;n&&(P=P.filter(k=>k.code.toLowerCase().includes(n.toLowerCase()))),p&&(P=P.filter(k=>k.name.toLowerCase().includes(p.toLowerCase()))),d&&d!=="All"&&(P=P.filter(k=>k.status.toLowerCase()===d.toLowerCase())),r&&(P=P.filter(k=>k.manager.toLowerCase().includes(r.toLowerCase()))),A(P)},N=()=>{m(""),u(""),c("All"),f(""),A(y),x([])},v=P=>{x(P?b.map(k=>k.code):[])},g={maxHeight:"calc(100vh - 200px)",overflowY:"auto"};return e.jsx("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("b",{children:"Select Project"})}),e.jsx("button",{type:"button",className:"close",onClick:a,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:g,children:[e.jsx("div",{className:"card card-outline card-secondary mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:P=>m(P.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:P=>u(P.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Status"}),e.jsxs("select",{className:"form-control form-control-sm",value:d,onChange:P=>c(P.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Inactive"})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Project Manager"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:P=>f(P.target.value)})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{className:"btn btn-primary btn-sm mr-2",onClick:j,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:N,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-striped table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"30px"},children:e.jsx("input",{type:"checkbox",checked:i.length===b.length&&b.length>0,onChange:P=>v(P.target.checked)})}),e.jsx("th",{children:"Project Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Project Mgr"})]})}),e.jsx("tbody",{children:b.length>0?b.map((P,k)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"checkbox",checked:i.includes(P.code),onChange:()=>{i.includes(P.code)?x(O=>O.filter(M=>M!==P.code)):x(O=>[...O,P.code])}})}),e.jsx("td",{children:P.code}),e.jsx("td",{children:P.name}),e.jsx("td",{children:P.status}),e.jsx("td",{children:P.manager})]},k)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No projects found"})})})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>{if(o&&i.length>0){const P=i.map(k=>y.find(O=>O.code===k));o(P,t)}a()},children:"Add"}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:a,children:"Close"})]})]})})})};function ra({code:s,setCode:a,name:o,setName:t,models:n,setModels:m,manager:p,setManager:u,statuses:d,setStatuses:c,handleSearch:r,clearFilters:f,handleOpenNew:i}){const[x,y]=l.useState(!1),[b,A]=l.useState(!1),[j,N]=l.useState("code");function v(k,O){if(O==="code"){const M=k.map(L=>L.code).join("; ");a(M)}else if(O==="name"){const M=k.map(L=>L.name).join("; ");t(M)}y(!1)}function g(k){if(k==="all"){const O=!d.all;c({all:O,draft:!1,active:!1,onhold:!1,completed:!1})}else c(O=>({...O,[k]:!O[k],all:!1}))}function P(k){const O=k.map(M=>M.model_code).join("; ");m(O),A(!1)}return e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:s,onChange:J(a),onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),r())},className:"form-control form-control-sm",placeholder:"Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search code",onClick:()=>{N("code"),y(!0)},children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:o,onChange:J(t),onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),r())},className:"form-control form-control-sm",placeholder:"Project name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search name",onClick:()=>{N("name"),y(!0)},children:e.jsx("i",{className:"fas fa-search"})})})]})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Related Models"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:n,onChange:J(m),onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),r())},className:"form-control form-control-sm",placeholder:"Model code / name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Select Model",onClick:()=>A(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Manager"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:p,onChange:J(u),onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),r())},className:"form-control form-control-sm",placeholder:"Manager name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-user"})})})]})]})})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{className:"small mb-1 d-block",children:"Status"}),e.jsx("div",{className:"form-inline flex-wrap",children:["all","draft","active","onhold","completed"].map(k=>{const O=`status-${k}`;return e.jsxs("div",{className:"form-check mr-3",children:[e.jsx("input",{id:O,type:"checkbox",className:"form-check-input",checked:d[k],onChange:()=>g(k)}),e.jsx("label",{className:"form-check-label small ml-1",htmlFor:O,children:k==="onhold"?"On Hold":k.charAt(0).toUpperCase()+k.slice(1)})]},k)})})]})}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm mr-2",onClick:r,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:f,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx(na,{show:x,onHide:()=>y(!1),onAdd:v,field:j}),e.jsx(Oe,{show:b,onClose:()=>A(!1),onAdd:P})]})}function oa({results:s,handleEdit:a,handleDelete:o,currentPage:t,setCurrentPage:n,pageSize:m}){const p=Math.ceil(s.length/m),u=s.slice((t-1)*m,t*m),d=c=>{var i;const r=((i=u[c%m])==null?void 0:i.project_name)||"this project";window.confirm(`Apakah Anda yakin ingin menghapus project "${r}"?`)&&o((t-1)*m+c)};return e.jsxs("div",{className:"card-body pt-0",children:[e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{className:"thead-light",style:{position:"sticky",top:0,zIndex:5},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50},children:"No"}),e.jsx("th",{children:"Project Code"}),e.jsx("th",{children:"Project Name"}),e.jsx("th",{children:"Project Manager"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Models"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsxs("tbody",{children:[u.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-4 text-muted",children:"No Data Found"})}),u.map((c,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:(t-1)*m+r+1}),e.jsx("td",{children:c.project_code}),e.jsx("td",{children:c.project_name}),e.jsx("td",{children:c.project_manager}),e.jsx("td",{children:c.project_status}),e.jsx("td",{children:Array.isArray(c.models)?c.models.map(f=>typeof f=="string"?f:f.model_code).join(", "):c.models}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>a((t-1)*m+r),children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>d(r),children:e.jsx("i",{className:"fas fa-trash"})})]})]},r))]})]})}),e.jsx($e,{currentPage:t,totalPages:p,totalItems:s.length,pageSize:m,onPageChange:n})]})}function ia(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState({all:!0,draft:!1,active:!1,onhold:!1,completed:!1}),[r,f]=l.useState(!1),[i,x]=l.useState(null),[y,b]=l.useState([]),[A,j]=l.useState([]),[N,v]=l.useState(1),g=10;l.useEffect(()=>{fetch("/packing-cost-fe/projects.json").then(D=>{if(!D.ok)throw new Error("Network response was not ok");return D.json()}).then(D=>{j(D)}).catch(D=>{console.error("Error fetching projects:",D)})},[]);function P(){a(""),t(""),m(""),u(""),c({all:!0,draft:!1,active:!1,onhold:!1,completed:!1}),b([]),v(1)}function k(){const C=!s&&!o&&!n&&!p&&d.all;let D=A.filter(T=>{var V;const H=!s||s.split(/[;,]/).some(w=>{var _;return w.trim()&&((_=T.project_code)==null?void 0:_.toLowerCase().includes(w.trim().toLowerCase()))}),Z=!o||o.split(/[;,]/).some(w=>{var _;return w.trim()&&((_=T.project_name)==null?void 0:_.toLowerCase().includes(w.trim().toLowerCase()))}),se=!n||n.split(/[;,]/).some(w=>w.trim()&&(Array.isArray(T.models)?T.models.map(_=>_.model_code).join(", ").toLowerCase().includes(w.trim().toLowerCase()):(T.models||"").toLowerCase().includes(w.trim().toLowerCase()))),I=!p||((V=T.project_manager)==null?void 0:V.toLowerCase().includes(p.toLowerCase()));return H&&Z&&se&&I});if(!d.all){const T=[];d.draft&&T.push("Draft"),d.active&&T.push("Active"),d.onhold&&T.push("On Hold"),d.completed&&T.push("Completed"),T.length>0&&(D=D.filter(H=>T.includes(H.project_status)))}b(C?[...D].reverse():D),v(1)}function O(){x(null),f(!0)}function M(){f(!1)}function L(C){if(i!==null)b(D=>D.map((T,H)=>H!==i?T:{...T,project_code:C.code,project_name:C.name,project_manager:C.manager,project_status:C.status,description:C.description,note:C.note,models:C.models}));else{const D={project_code:C.code||`CFC-${((y||[]).length+1).toString().padStart(3,"0")}`,project_name:C.name||"(No name)",project_manager:C.manager||"",project_status:C.status||"Draft",description:C.description,note:C.note,models:C.models};b(T=>[D,...T||[]])}f(!1),x(null)}function S(C){x(C),f(!0)}function W(C){b(D=>D.filter((T,H)=>H!==C))}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-secondary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Project List"})}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:O,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," New Project"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Download Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(ra,{code:s,setCode:a,name:o,setName:t,models:n,setModels:m,manager:p,setManager:u,statuses:d,setStatuses:c,handleSearch:k,clearFilters:P,handleOpenNew:O}),e.jsx(oa,{results:y,handleEdit:S,handleDelete:W,currentPage:N,setCurrentPage:v,pageSize:g})]}),e.jsx(aa,{visible:r,onClose:M,onSave:L,initialData:i!==null&&y&&y[i]?{...y[i],models:Array.isArray(y[i].models)?y[i].models.map(C=>typeof C=="string"?{code:C,name:"",remark:""}:C):(y[i].models||"").split(",").map(C=>({code:C.trim(),name:"",remark:""}))}:null})]})}function ca({show:s,onClose:a,onSave:o,initialData:t}){const[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(""),[i,x]=l.useState(""),[y,b]=l.useState(""),[A,j]=l.useState(""),[N,v]=l.useState(""),[g,P]=l.useState(""),[k,O]=l.useState(""),[M,L]=l.useState(""),[S,W]=l.useState([]),[C,D]=l.useState([]),[T,H]=l.useState(!1),[Z,se]=l.useState([]);l.useEffect(()=>{var U,E;s&&(t?(m(((U=t.project)==null?void 0:U.project_code)||""),u(((E=t.project)==null?void 0:E.project_name)||""),c(t.model_code||""),f(t.model_name||""),x(t.model_remark||""),v(t.model_implementation_period||""),P(t.model_destination_code||""),O(t.destinationCountryCode||""),L(t.country||""),D(t.parts||[]),b(t.model_cfc||""),j(t.model_type||""),W(t.katashiki||[])):(m(""),u(""),c(""),f(""),x(""),v(""),P(""),O(""),L(""),D([]),b(""),j(""),W([])),H(!1))},[s,t]),l.useEffect(()=>{fetch("/packing-cost-fe/projects.json").then(E=>E.json()).then(E=>se(E))},[]),l.useEffect(()=>{if(n){const U=Z.find(E=>E.project_code===n);u(U?U.project_name:"")}else u("")},[n,Z]),l.useEffect(()=>{if(!t){const U=`${n}-${g}-${y}${A}${N}`;c(U)}},[t,n,g,y,A,N]);function I(){H(!0)}function V(U){const E=U.map(R=>({partNo:R.partNo||"",suffix:"",name:R.partName||"",parent:R.parentPartNo||"",supplierId:R.supplierId||"",supplierName:R.supplierName||"",L:R.L||0,W:R.W||0,H:R.H||0,wtPerPc:R.wtPerPc||0,qty:1,totalWt:R.wtPerPc?(1*R.wtPerPc).toFixed(2):0}));D(R=>[...R,...E]),H(!1)}function w(U){D(E=>E.filter((R,le)=>le!==U))}function _(U,E,R){const le=[...C],B={...le[U]};if(B[E]=R,E==="qty"||E==="wtPerPc"){const $=E==="qty"?R:B.qty,K=E==="wtPerPc"?R:B.wtPerPc;B.totalWt=(Number($)*Number(K)).toFixed(2)}le[U]=B,D(le)}function q(U){const E=U.toUpperCase();P(E);const R=hs.find(le=>le.destCode===E);R?(O(R.code),L(R.country)):(O(""),L(""))}function te(){if(!d.trim()){alert("Please enter Model Code");return}const U={...t||{},model_code:d,model_name:r,model_remark:i,model_implementation_period:N,model_destination_code:g,destinationCountryCode:k,country:M,parts:C.slice(),model_cfc:y,model_type:A,katashiki:S.slice(),project:{...(t==null?void 0:t.project)||{},project_code:n,project_name:p}};console.log("Saving model:",U),o(U)}return s?e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:U=>{U.target===U.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-success",style:{maxWidth:1200},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsxs("b",{children:["Model - ",t?"Edit":"New"]})}),e.jsx("div",{className:"ml-2 text-muted small",style:{marginLeft:8},children:"|"}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Model Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:d,onChange:U=>c(U.target.value.toUpperCase()),placeholder:"Model Code",disabled:!t,style:t?{}:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Model Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:r,onChange:U=>f(U.target.value.toUpperCase()),placeholder:"Model Name"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"CFC"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:y,onChange:U=>b(U.target.value.toUpperCase()),placeholder:"CFC"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsxs("select",{className:"form-control form-control-sm mb-2",value:A,onChange:U=>j(U.target.value),children:[e.jsx("option",{value:"",children:"-- Select Type --"}),e.jsx("option",{value:"PxP",children:"PxP"}),e.jsx("option",{value:"Lot",children:"Lot"}),e.jsx("option",{value:"Engine",children:"Engine"})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Project Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:n,onChange:U=>m(U.target.value.toUpperCase()),placeholder:"Project Code"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Project Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:p,placeholder:"Project Name",readOnly:!0,style:{backgroundColor:"#f8f9fa"}})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Implementation Period ",e.jsx("span",{style:{color:"red"},children:"*"})," ",e.jsx("span",{className:"text-muted ml-2",children:e.jsx("i",{children:"e.g., 02.2025"})})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:N,onChange:U=>v(U.target.value.toUpperCase()),placeholder:"Implementation Period"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Destination Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{className:"form-control form-control-sm",value:g,onChange:U=>q(U.target.value),placeholder:"Destination Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-map-marker-alt"})})})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Destination Country Code"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:k,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Country"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:M,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"small",children:"Remark"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:i,onChange:U=>x(U.target.value.toUpperCase()),placeholder:"Remark"})]})}),e.jsxs("div",{className:"kat-wrap mb-3",children:[e.jsx("div",{className:"kat-title",children:"Katashiiki"}),e.jsx("div",{className:"kat-flex",children:e.jsxs("div",{className:"kat-list",children:[S.length===0?e.jsxs("div",{className:"kat-empty text-muted",children:[e.jsx("span",{children:"No katashiki yet."}),e.jsx("button",{type:"button",className:"kat-plus kat-plus--sm",onClick:()=>W(U=>[...U,{string:"",number:0}]),title:"Add Katashiiki",children:"+"})]}):S.map((U,E)=>e.jsxs("div",{className:"kat-item",children:[e.jsxs("div",{className:"kat-box",children:[e.jsx("input",{type:"text",className:"kat-input",placeholder:"Code",value:U.string,onChange:R=>{const le=R.target.value.toUpperCase();W(B=>{const $=[...B];return $[E]={...$[E],string:le},$})}}),e.jsx("input",{type:"number",className:"kat-input kat-input-num",placeholder:"0",value:U.number,onChange:R=>{const le=Number(R.target.value);W(B=>{const $=[...B];return $[E]={...$[E],number:le},$})}})]}),e.jsx("button",{type:"button",className:"kat-del",onClick:()=>W(R=>R.filter((le,B)=>B!==E)),title:"Remove",children:"−"})]},E)),S.length>0&&e.jsx("button",{type:"button",className:"kat-plus",onClick:()=>W(U=>[...U,{string:"",number:0}]),title:"Add Katashiiki",children:"+"})]})})]}),e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-2",onClick:I,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Part"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-2",onClick:()=>alert("Upload placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-upload-alt mr-1"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Download template placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-download-alt mr-1"})," Template"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",style:{fontSize:"0.8rem"},children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:130,textAlign:"center"},children:"Part No"}),e.jsx("th",{style:{width:50,textAlign:"center"},children:"Suffix"}),e.jsx("th",{style:{textAlign:"center"},children:"Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Parent"}),e.jsx("th",{style:{width:50,textAlign:"center"},children:"Supplier ID"}),e.jsx("th",{style:{textAlign:"center"},children:"Supplier Name"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"L"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"W"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"H"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"Wt/pc"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"Qty"}),e.jsx("th",{style:{width:70,textAlign:"center"},children:"Total Wt"}),e.jsx("th",{style:{width:70,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"13",className:"text-center text-muted",children:"- No parts added yet -"})}):C.map((U,E)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.partNo,onChange:R=>_(E,"partNo",R.target.value.toUpperCase())})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.suffix,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.name,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.parent,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.supplierId,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.supplierName,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:U.L,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:U.W,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:U.H,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:U.wtPerPc,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-control form-control-sm",style:{textAlign:"right"},value:U.qty,onChange:R=>_(E,"qty",R.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:U.totalWt,readOnly:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>w(E),children:e.jsx("i",{className:"fas fa-trash"})})})]},E))})]})})]}),e.jsxs("div",{className:"card-footer text-right",style:{marginTop:8},children:[e.jsxs("button",{type:"button",className:"btn btn-primary mr-2",onClick:te,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{type:"button",className:"btn btn-outline-secondary",onClick:a,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),T&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(Re,{show:T,onClose:()=>H(!1),onSelect:V})}),e.jsx("style",{children:`
        .np-modal-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.35);
          z-index: 2000;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 1rem;
        }

        .np-modal {
          width: 100%;
          z-index: 2001;
        }

        .table-sm td, .table-sm th {
          vertical-align: middle;
        }

        /* === KATASHIKI (flex, input vertical) === */
        .kat-wrap{
          border: 1px solid #dcdcdc;
          border-radius: 6px;
          padding: 10px;
          background: #fff;
        }

        .kat-title{
          font-weight: 600;
          margin-bottom: 8px;
        }

        .kat-flex{
          display: flex;
          align-items: center;
          gap: 14px;
        }

        .kat-list{
          flex: 1;
          display: flex;
          flex-wrap: wrap;
          gap: 14px 16px;
          align-items: flex-start;
        }

        .kat-empty{
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
          padding: 10px 0;
        }

        .kat-item{
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 6px;
        }

        .kat-box{
          width: 180px;          /* ⬅️ sebelumnya 220px */
          border: 2px solid #000;
          border-radius: 8px;
          padding: 8px;
          background: #fff;

          display: flex;
          flex-direction: column;
          gap: 6px;
        }


        .kat-input{
          width: 100%;
          height: 28px;
          border: 1px solid #d0d0d0;
          border-radius: 6px;
          padding: 0 8px;
          font-size: 13px;
        }

        .kat-input-num{
          text-align: right;
        }

        .kat-del{
          width: 56px;
          height: 16px;                 /* sedikit lebih tinggi */
          border: 0;
          border-radius: 6px;
          background: #e60000;

          display: flex;                /* CENTERING */
          align-items: center;
          justify-content: center;

          color: #fff;                  /* PUTIH */
          font-weight: 700;
          font-size: 14px;
          line-height: 1;

          cursor: pointer;
        }


        /* tombol plus panjang (yang hijau) */
        .kat-plus{
          width: 22px;
          height: 110px;
          border: 0;
          border-radius: 4px;
          background: #13cc00;
          color: #fff;
          font-weight: 700;
          font-size: 18px;
          line-height: 110px;
          text-align: center;
          flex: 0 0 auto;
          cursor: pointer;
        }

        .kat-plus:hover{
          background: #10b300;
        }

        /* versi kecil untuk empty state */
        .kat-plus--sm{
          width: 20px;
          height: 34px;
          line-height: 34px;
          font-size: 16px;
          border-radius: 4px;
        }
      `})]}):null}function da({filterName:s,setFilterName:a,filterCfc:o,setFilterCfc:t,filterType:n,setFilterType:m,filterRemark:p,setFilterRemark:u,implementationPeriod:d,setImplementationPeriod:c,destinationCode:r,setDestinationCode:f,destinationCountryCode:i,setDestinationCountryCode:x,country:y,setCountry:b,handleFilter:A,handleClearFilters:j,onSearchCfc:N,onSearchDestination:v}){return e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"form-row mb-3",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"CFC"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:J(t),placeholder:"CFC"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:N,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Model Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:J(a),placeholder:"Name"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Implementation Period"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:J(c),placeholder:"Implementation Period"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:n,onChange:g=>m(g.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"pxp",children:"PxP"}),e.jsx("option",{value:"lot",children:"Lot"}),e.jsx("option",{value:"eng",children:"Engine"})]})]}),e.jsx("div",{className:"form-group col-md-6",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"small mb-1",children:"Destination Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:J(f),placeholder:"Destination Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:v,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{className:"small mb-1",children:"Destination Country Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:i,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]})]})}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Country"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"form-group col-md-12",children:[e.jsx("label",{className:"small mb-1",children:"Remark"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:g=>u(g.target.value),placeholder:"Remark"})]}),e.jsxs("div",{className:"form-group col-md-12 text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:A,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:j,children:[e.jsx("i",{className:"fas fa-undo mr-1"})," Reset"]})]})]})})}function ma({models:s,handleDeleteModel:a,handleEditModel:o,currentPage:t,setCurrentPage:n,pageSize:m}){const p=Math.ceil(s.length/m),u=s.slice((t-1)*m,t*m);return e.jsxs("div",{className:"card-body pt-0",children:[e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{className:"thead-light",style:{position:"sticky",top:0,zIndex:5,fontSize:"0.8rem"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50,textAlign:"center"},children:"No"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Name"}),e.jsx("th",{style:{textAlign:"center"},children:"CFC"}),e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Project Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Impl Period"}),e.jsx("th",{style:{textAlign:"center"},children:"Dest Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country"}),e.jsx("th",{style:{textAlign:"center"},children:"Remark"}),e.jsx("th",{style:{textAlign:"center"},children:"Katashiiki"}),e.jsx("th",{style:{textAlign:"center"},children:"Parts"}),e.jsx("th",{style:{width:120,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{style:{fontSize:"0.8rem"},children:u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center",children:"No models found"})}):u.map((d,c)=>{var f;const r=hs.find(i=>i.destCode===d.model_destination_code);return e.jsxs("tr",{children:[e.jsx("td",{children:(t-1)*m+c+1}),e.jsx("td",{style:{textAlign:"center"},children:d.model_code}),e.jsx("td",{style:{textAlign:"center"},children:d.model_name}),e.jsx("td",{style:{textAlign:"center"},children:d.model_cfc}),e.jsx("td",{style:{textAlign:"center"},children:d.model_type}),e.jsx("td",{style:{textAlign:"center"},children:(f=d.project)==null?void 0:f.project_code}),e.jsx("td",{style:{textAlign:"center"},children:d.model_implementation_period}),e.jsx("td",{style:{textAlign:"center"},children:d.model_destination_code}),e.jsx("td",{style:{textAlign:"center"},children:r?r.code:""}),e.jsx("td",{style:{textAlign:"center"},children:r?r.country:""}),e.jsx("td",{style:{textAlign:"center"},children:d.model_remark}),e.jsx("td",{style:{textAlign:"center"},children:Array.isArray(d.katashiki)&&d.katashiki.length>0?d.katashiki.map((i,x)=>e.jsxs("span",{className:"badge badge-primary mr-1",children:[i.string," : ",i.number]},x)):"-"}),e.jsx("td",{style:{textAlign:"right"},children:Array.isArray(d.parts)?d.parts.length:0}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>o((t-1)*m+c),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>a((t-1)*m+c),children:e.jsx("i",{className:"fas fa-trash"})})]})]},c)})})]})}),e.jsx($e,{currentPage:t,totalPages:p,totalItems:s.length,pageSize:m,onPageChange:n})]})}function ua(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(""),[i,x]=l.useState(""),[y,b]=l.useState(""),[A,j]=l.useState(""),[N,v]=l.useState(!1),[g,P]=l.useState(!1),[k,O]=l.useState(!1),[M,L]=l.useState(null),[S,W]=l.useState(null),[C,D]=l.useState([]),[T,H]=l.useState([]),[Z,se]=l.useState(1),I=10;l.useEffect(()=>{fetch("/packing-cost-fe/models.json").then($=>{if(!$.ok)throw new Error("Network response was not ok");return $.json()}).then($=>{const K=$.sort((h,Y)=>new Date(Y.model_implementation_period)-new Date(h.model_implementation_period));D(K),H([])}).catch($=>{console.error("Error fetching models:",$)})},[]);function V(){if(!s&&!o&&!n&&!p&&!d&&!r&&!i){H([...C].reverse()),se(1);return}let $=C.filter(K=>{var h,Y,F,z,ee,X,de;return(!s||((h=K.project.project_code)==null?void 0:h.toLowerCase().includes(s.toLowerCase())))&&(!o||((Y=K.model_name)==null?void 0:Y.toLowerCase().includes(o.toLowerCase())))&&(!n||((F=K.model_cfc)==null?void 0:F.toLowerCase().includes(n.toLowerCase())))&&(!p||((z=K.model_type)==null?void 0:z.toLowerCase().includes(p.toLowerCase())))&&(!d||((ee=K.model_remark)==null?void 0:ee.toLowerCase().includes(d.toLowerCase())))&&(!r||((X=K.model_implementation_period)==null?void 0:X.toLowerCase().includes(r.toLowerCase())))&&(!i||((de=K.model_destination_code)==null?void 0:de.toLowerCase().includes(i.toLowerCase())))});H($),se(1)}function w(){a(""),t(""),m(""),u(""),c(""),f(""),x(""),b(""),j(""),H([]),se(1)}function _(){L(null),W(null),v(!0)}function q(){v(!1),L(null),W(null)}const te=B=>{B&&(m(B.model_cfc),t(B.model_name)),P(!1)},U=B=>{B&&(x(B.destCode),b(B.code),j(B.country)),O(!1)};function E(B){var $,K,h,Y,F,z,ee;if(M!==null){const X=C.map((ue,ge)=>ge===M?B:ue);D(X);const de=T.map(ue=>ue.model_code===S.model_code&&ue.model_name===S.model_name&&ue.model_remark===S.model_remark?B:ue);H(de)}else{const X=[B,...C];D(X),(!s||(($=B.project.project_code)==null?void 0:$.toLowerCase().includes(s.toLowerCase())))&&(!o||((K=B.model_name)==null?void 0:K.toLowerCase().includes(o.toLowerCase())))&&(!n||((h=B.model_cfc)==null?void 0:h.toLowerCase().includes(n.toLowerCase())))&&(!p||((Y=B.model_type)==null?void 0:Y.toLowerCase().includes(p.toLowerCase())))&&(!d||((F=B.model_remark)==null?void 0:F.toLowerCase().includes(d.toLowerCase())))&&(!r||((z=B.model_implementation_period)==null?void 0:z.toLowerCase().includes(r.toLowerCase())))&&(!i||((ee=B.model_destination_code)==null?void 0:ee.toLowerCase().includes(i.toLowerCase())))&&H([B,...T])}console.log("Model saved:",B),v(!1),L(null),W(null)}function R(B){const $=T[B],K=C.findIndex(h=>h.model_code===$.model_code&&h.model_name===$.model_name&&h.model_remark===$.model_remark);console.log("Editing model:",$),console.log("Original index:",K),L(K),W($),v(!0)}function le(B){if(!confirm("Delete this model?"))return;const $=T[B],K=C.findIndex(h=>h.model_code===$.model_code&&h.model_name===$.model_name&&h.model_remark===$.model_remark);if(K!==-1){const h=C.filter((F,z)=>z!==K);D(h);const Y=T.filter((F,z)=>z!==B);H(Y)}}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Model List"})}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:_,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Model"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",onClick:()=>alert("Upload placeholder"),children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Template",onClick:()=>alert("Download template placeholder"),children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(da,{projectCode:s,setProjectCode:a,filterName:o,setFilterName:t,filterCfc:n,setFilterCfc:m,filterType:p,setFilterType:u,filterRemark:d,setFilterRemark:c,implementationPeriod:r,setImplementationPeriod:f,destinationCode:i,setDestinationCode:x,destinationCountryCode:y,setDestinationCountryCode:b,country:A,setCountry:j,handleFilter:V,handleClearFilters:w,handleOpenNew:_,onSearchCfc:()=>P(!0),onSearchDestination:()=>O(!0)}),e.jsx(ma,{models:T,handleDeleteModel:le,handleEditModel:R,currentPage:Z,setCurrentPage:se,pageSize:I})]}),e.jsx(ca,{show:N,onClose:q,onSave:E,initialData:S}),e.jsx(Oe,{show:g,onClose:()=>P(!1),onAdd:te,selectionMode:"single"}),e.jsx(ps,{show:k,onClose:()=>O(!1),onAdd:U,selectionMode:"single"})]})}function ha({show:s=!1,onClose:a=()=>{},onSave:o=()=>{},initialData:t=null}){const[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(""),[i,x]=l.useState(""),[y,b]=l.useState(""),[A,j]=l.useState(""),[N,v]=l.useState(""),[g,P]=l.useState(""),[k,O]=l.useState(""),[M,L]=l.useState([]),[S,W]=l.useState(!1),[C,D]=l.useState({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:""}),[T,H]=l.useState(!1),[Z,se]=l.useState("parent"),[I,V]=l.useState(!1);l.useEffect(()=>{s&&(t?(m(t.partNo||""),u(t.uniqueNo||""),c(t.suffixCode||""),f(t.partName||t.name||""),x(t.parentPartNo||""),b(t.suppCode||t.supplierId||""),j(t.supplierName||""),v(t.supplierAddress||""),P(t.plantCode||""),O(t.uniqueNo2||""),L(t.childParts||[]),W(!1),D({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:""})):(m(""),u(""),c(""),f(""),x(""),b(""),j(""),v(""),P(""),O(""),L([]),W(!1),D({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:""})))},[s,t]);function w(E){L(R=>R.filter((le,B)=>B!==E))}function _(){if(!n.trim()){alert("Please enter Part No");return}const E={partNo:n,uniqueNo:p,suffixCode:d,partName:r,parentPartNo:i,suppCode:y,supplierName:A,supplierAddress:N,plantCode:g,uniqueNo2:k,childParts:M.slice()};o(E)}function q(E){E&&x(E.partNo),H(!1)}function te(E){E&&(b(E.code),j(E.name),v(E.address)),V(!1)}function U(E){if(E&&E.length>0){const R=E.map(le=>({partNo:le.partNo||le[0]||"",suffix:le.suffix||le[1]||"",uniqueNo:le.uniqueNo||"",name:le.name||le[2]||"",parent:le.parent||"",supplierId:le.supplierId||"",supplierName:le.supplierName||le[3]||""}));L(le=>[...le,...R])}H(!1)}return s?e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:E=>{E.target===E.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:980},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Part New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6 d-flex",children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{className:"form-control form-control-sm mb-1",value:n,onChange:J(m)})]}),e.jsxs("div",{style:{width:"30%",marginLeft:8},children:[e.jsx("label",{className:"small mb-1",children:"Suffix Code"}),e.jsx("input",{className:"form-control form-control-sm mb-1",value:d,onChange:J(c)})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Parent Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:i,onChange:J(x)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>{se("parent"),H(!0)},children:e.jsx("i",{className:"fas fa-search"})})})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Unique No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:p,onChange:J(u)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>alert("Flash/Generate Unique No"),children:e.jsx("i",{className:"fas fa-bolt"})})})]})]}),e.jsx("div",{className:"form-group col-md-6"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:y,onChange:J(b)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>V(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",value:A,readOnly:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Address"}),e.jsx("input",{className:"form-control form-control-sm",value:N,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Plant Code"}),e.jsx("input",{className:"form-control form-control-sm",value:g,readOnly:!0})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{se("child"),H(!0)},children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Child Part"]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Unique No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Parent"}),e.jsx("th",{children:"Supplier ID"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{style:{width:90},children:"Action"})]})}),e.jsx("tbody",{children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-4 text-muted",children:"No Data Found"})}):M.map((E,R)=>e.jsxs("tr",{children:[e.jsx("td",{children:R+1}),e.jsx("td",{children:E.partNo}),e.jsx("td",{children:E.suffix}),e.jsx("td",{children:E.uniqueNo}),e.jsx("td",{children:E.name}),e.jsx("td",{children:E.parent}),e.jsx("td",{children:E.supplierId}),e.jsx("td",{children:E.supplierName}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>w(R),children:e.jsx("i",{className:"fas fa-trash"})})})]},R))})]})})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:_,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{className:"btn btn-outline-secondary",onClick:a,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),T&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(Re,{show:T,mode:Z==="parent"?"single":"multi",onClose:()=>H(!1),onSelect:Z==="parent"?q:U})}),I&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(xs,{show:I,onClose:()=>V(!1),onSelect:te})}),e.jsx("style",{children:`
        .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
        .np-modal { width: 100%; max-height: 95vh; overflow: auto; z-index: 2001; }
        .table-sm td, .table-sm th { vertical-align: middle; }
      `})]}):null}function zs({show:s=!1,onClose:a=()=>{},onConfirm:o=()=>{},title:t="Confirmation",message:n="Are you sure?"}){return s?e.jsxs("div",{className:"modal-backdrop",children:[e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:t}),e.jsx("button",{type:"button",className:"close",onClick:a,children:e.jsx("span",{children:"×"})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:n})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:o,children:"Delete"})]})]})}),e.jsx("style",{jsx:!0,children:`
        .modal-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1050;
        }
        .modal-dialog {
          width: 500px;
        }
      `})]}):null}function pa(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(""),[i,x]=l.useState([]),[y,b]=l.useState([]),[A,j]=l.useState(!1),[N,v]=l.useState(null),[g,P]=l.useState(!1),[k,O]=l.useState(null),[M,L]=l.useState(!1),[S,W]=l.useState(null),[C,D]=l.useState(!1),[T,H]=l.useState(10),[Z,se]=l.useState(1),I=y.length;l.useEffect(()=>{fetch("/parts.json").then(F=>F.json()).then(F=>{const z=F.map((ee,X)=>({id:X,partNo:ee.part_no,name:ee.part_name,partName:ee.part_name,supplierName:ee.supplier_name,supplierId:ee.supplier_code,suppCode:ee.supplier_code,childParts:ee.sub_part||[],suffix:"00",uniqueNo:`UN-00${X+1}`,parentPartNo:null}));x(z),b([])}).catch(F=>console.error("Error fetching parts data:",F))},[]);function V(){if(!s&&!o&&!n&&!p&&!d&&!r){b([...i].reverse()),se(1);return}let z=i.filter(ee=>{const X=!s||ee.partNo.toLowerCase().includes(s.toLowerCase()),de=!o||ee.uniqueNo&&ee.uniqueNo.toLowerCase().includes(o.toLowerCase()),ue=!n||ee.supplierId&&ee.supplierId.toLowerCase().includes(n.toLowerCase())||ee.suppCode&&ee.suppCode.toLowerCase().includes(n.toLowerCase()),ge=!p||ee.supplierName.toLowerCase().includes(p.toLowerCase()),ve=!d||ee.parentPartNo&&ee.parentPartNo.toLowerCase().includes(d.toLowerCase()),Ie=!r||r==="Yes"&&ee.childParts&&ee.childParts.length>0||r==="No"&&(!ee.childParts||ee.childParts.length===0);return X&&de&&ue&&ge&&ve&&Ie});b(z),se(1)}function w(){a(""),t(""),m(""),u(""),c(""),f(""),b([]),se(1)}function _(){v(null),j(!0)}function q(){v(null),j(!1)}function te(F){if(N){const z=i.map(X=>X.id===N.id?{...X,...F}:X);x(z);const ee=y.map(X=>X.id===N.id?{...X,...F}:X);b(ee)}else{const z={...F,id:i.length};x(ee=>[z,...ee])}j(!1),v(null)}function U(F){v(F),j(!0)}function E(){alert("Upload placeholder")}function R(){alert("Template placeholder")}function le(F){O(F),P(!0)}function B(){if(k){const F=i.filter(ee=>ee.id!==k.id);x(F);const z=y.filter(ee=>ee.id!==k.id);b(z),O(null)}P(!1)}function $(F){se(F)}function K(F){W(F),L(!0)}function h(F){if(!F){L(!1),W(null);return}const z=Array.isArray(F)?F[0]:F;if(!z){L(!1),W(null);return}const ee=z.partNo??z.part_number??z.code??"",X=z.partNo??z.partNoParent??z.parentPartNo??"";S==="partNo"?a(ee):S==="parentPart"&&c(X||ee),L(!1),W(null)}function Y(F){F&&(m(F.code),u(F.name)),D(!1)}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Part List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:_,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Part"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:E,title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:R,title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:s,onChange:J(a),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),V())},placeholder:"Part No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Pick Part",onClick:()=>K("partNo"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Unique No"}),e.jsx("input",{className:"form-control form-control-sm",value:o,onChange:J(t),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),V())},placeholder:"Unique No"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:n,onChange:J(m),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),V())},placeholder:"Supplier ID"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Supplier",onClick:()=>D(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",value:p,onChange:J(u),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),V())},placeholder:"Supplier Name"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Parent Part"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:d,onChange:J(c),onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),V())},placeholder:"Parent Part"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Pick Parent Part",onClick:()=>K("parentPart"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Has Subparts?"}),e.jsxs("select",{className:"form-control form-control-sm",value:r,onChange:F=>f(F.target.value),children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:V,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:w,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx("div",{className:"table-responsive mb-3",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Unique No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Parent Part No"}),e.jsx("th",{children:"Subparts"}),e.jsx("th",{style:{width:110},children:"Action"})]})}),e.jsx("tbody",{children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center py-4 text-muted",children:"No Data Found"})}):y.slice((Z-1)*T,Z*T).map((F,z)=>e.jsxs("tr",{children:[e.jsx("td",{children:(Z-1)*T+z+1}),e.jsx("td",{children:F.partNo}),e.jsx("td",{children:F.suffixCode??F.suffix}),e.jsx("td",{children:F.uniqueNo}),e.jsx("td",{children:F.partName??F.name}),e.jsx("td",{children:F.suppCode??F.supplierId}),e.jsx("td",{children:F.supplierName}),e.jsx("td",{children:F.parentPartNo??F.parent}),e.jsx("td",{children:F.childParts?F.childParts.length:F.subparts?F.subparts.length:0}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>U(F),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>le(F),children:e.jsx("i",{className:"fas fa-trash"})})]})]},z))})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>$(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>$(Math.max(1,Z-1)),children:"<"}),[...Array(Math.max(1,Math.ceil(I/T))).keys()].map(F=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${Z===F+1?"btn-primary":"btn-light"}`,onClick:()=>$(F+1),children:F+1},F)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>$(Math.min(Math.ceil(I/T)||1,Z+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",I]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[T," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>H(10),children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>H(25),children:"25"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>H(50),children:"50"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})]}),e.jsx(ha,{show:A,onClose:q,onSave:te,initialData:N}),e.jsx(zs,{show:g,onClose:()=>P(!1),onConfirm:B,title:"Deletion Confirmation",message:"Do you want to delete this data?"}),e.jsx(Re,{show:M,onClose:()=>{L(!1),W(null)},onSelect:h}),e.jsx(xs,{show:C,onClose:()=>D(!1),onSelect:Y})]})}const xa=[{code:"5062",name:"MENARA TERUS MAKMUR",address:"Jl. Jababeka XI Blok H-3 No.12, Kawasan Industri Jababeka, Cikarang, Bekasi"},{code:"722E",name:"TOYOTA MOTOR THAILAND",address:"186/1 Moo 1, Old Railway Road, Samrong Tai, Phra Pradaeng, Samut Prakan 10130, Thailand"},{code:"5453",name:"VELASTO INDONESIA",address:"Kp. Nagrog RT04 / RW02 Desa Kertamukti, Kecamatan Campaka, Purwakarta, Jawa Barat"},{code:"5365",name:"TOKAI RUBBER INDONESIA",address:"Jl. Mitra Timur II Blok E No. 13-14, Parungmulya, Ciampel, Karawang, Jawa Barat"},{code:"5150",name:"NAMICOH INDONESIA",address:"EJIP Industrial Park, Plot 6B-1, Cikarang Selatan, Bekasi, Jawa Barat"},{code:"5028",name:"GARUDA METAL UTAMA",address:"Jl. Kapuk Kamal Raya No.28, RT.6/RW.2, Kamal Muara, Kec. Penjaringan, Jkt Utara, Daerah Khusus Ibukota Jakarta 14470"},{code:"5335",name:"DINAR MAKMUR",address:"Jl. Raya Serang No.KM. 78, RW.3, Cijeruk, Kec. Kibin, Kabupaten Serang, Banten 42185"},{code:"5006",name:"NUSAHADI CITRAHARMONIS",address:"Jl. Raya Bekasi No.KM. 28, RT.005/RW.004, Medan Satria, Kecamatan Medan Satria, Kota Bks, Jawa Barat 17132"},{code:"5151",name:"SAKURA JAVA INDONESIA",address:"Kawasan Industri EJIP, Plot 8C/D, Cikarang Selatan, Bekasi, Jawa Barat 17530"},{code:"5010",name:"3 M INDONESIA",address:"Perkantoran Hijau Arkadia, Tower F, 8th Floor, Jl. TB Simatupang No.Kav. 88, RT.1/RW.1, Kebagusan, Ps. Minggu, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12520"},{code:"5002",name:"ASALTA MANDIRI AGUNG",address:"Jl. Pulo Buaran Raya No.1A, RT.1/RW.8, Pulo Gadung, Kota Jakarta Timur, Daerah Khusus Ibukota Jakarta 13930"}];function ja({show:s=!1,onClose:a=()=>{},onSave:o=()=>{},initialData:t=null}){const[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState("");l.useEffect(()=>{s&&(t?(m(t.code||""),u(t.name||""),c(t.address||"")):(m(""),u(""),c("")))},[s,t]);function r(){if(!n.trim()||!p.trim()){alert("Please enter Supplier Code and Name");return}o({code:n,name:p,address:d})}return s?e.jsxs("div",{className:"modal-backdrop",children:[e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:t?"Edit Supplier":"Add Supplier"}),e.jsx("button",{type:"button",className:"close",onClick:a,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control",value:n,onChange:J(m),readOnly:!!t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier Name"}),e.jsx("input",{type:"text",className:"form-control",value:p,onChange:J(u)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address"}),e.jsx("textarea",{className:"form-control",rows:"3",value:d,onChange:f=>c(f.target.value)})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:r,children:"Save"})]})]})}),e.jsx("style",{jsx:!0,children:`
        .modal-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1050;
        }
        .modal-dialog {
          width: 500px;
        }
      `})]}):null}function fa(){const[s,a]=l.useState([]),[o,t]=l.useState([]),[n,m]=l.useState(""),[p,u]=l.useState(""),[d,c]=l.useState(""),[r,f]=l.useState(!1),[i,x]=l.useState(null),[y,b]=l.useState(!1),[A,j]=l.useState(null),[N,v]=l.useState(1),[g,P]=l.useState(5);l.useEffect(()=>{const T=xa.map((H,Z)=>({...H,id:Z}));a(T),t([])},[]);function k(){let T=s.filter(H=>(!n||H.code.toLowerCase().includes(n.toLowerCase()))&&(!p||H.name.toLowerCase().includes(p.toLowerCase()))&&(!d||H.address.toLowerCase().includes(d.toLowerCase())));t(T),v(1)}function O(){m(""),u(""),c(""),t([]),v(1)}function M(){x(null),f(!0)}function L(T){x(T),f(!0)}function S(T){if(i){const H=s.map(Z=>Z.id===i.id?{...i,...T}:Z);a(H),t(H)}else{const Z=[{...T,id:s.length},...s];a(Z),t(Z)}f(!1),x(null)}function W(T){j(T),b(!0)}function C(){if(A){const T=s.filter(H=>H.id!==A.id);a(T),t(T),j(null)}b(!1)}const D=o.slice((N-1)*g,N*g);return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Supplier List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{className:"btn btn-sm btn-success mr-2",onClick:M,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Supplier"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Upload placeholder"),title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Template placeholder"),title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:J(m),onKeyDown:T=>{T.key==="Enter"&&(T.preventDefault(),k())},placeholder:"Supplier Code"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:J(u),onKeyDown:T=>{T.key==="Enter"&&(T.preventDefault(),k())},placeholder:"Supplier Name"})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Address"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:d,onChange:J(c),onKeyDown:T=>{T.key==="Enter"&&(T.preventDefault(),k())},placeholder:"Address"})]})})}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-right",children:[e.jsxs("button",{className:"btn btn-sm btn-primary mr-2",onClick:k,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:O,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Address"}),e.jsx("th",{style:{width:110},children:"Action"})]})}),e.jsx("tbody",{children:D.length>0?D.map((T,H)=>e.jsxs("tr",{children:[e.jsx("td",{children:(N-1)*g+H+1}),e.jsx("td",{children:T.code}),e.jsx("td",{children:T.name}),e.jsx("td",{children:T.address}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>L(T),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>W(T),children:e.jsx("i",{className:"fas fa-trash"})})]})]},T.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4 text-muted",children:"No Data Found"})})})]})}),e.jsx($e,{currentPage:N,totalItems:o.length,itemsPerPage:g,onPageChange:v,onItemsPerPageChange:P})]})]}),e.jsx(ja,{show:r,onClose:()=>f(!1),onSave:S,initialData:i}),e.jsx(zs,{show:y,onClose:()=>b(!1),onConfirm:C,title:"Deletion Confirmation",message:"Do you want to delete this data?"})]})}function Na(){const s=He(),a=()=>{window.confirm("Are you sure you want to clear all saved data?")&&(localStorage.clear(),alert("All data cleared!"),s("/"))};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Settings"})})}),e.jsx("div",{className:"card-body",children:e.jsx("button",{className:"btn btn-danger",onClick:a,children:"Clear All Data"})})]})})}function ba({onSave:s}){const[a,o]=l.useState("inland"),[t,n]=l.useState("02.2025"),[m,p]=l.useState("47.7"),[u,d]=l.useState("86.177"),[c,r]=l.useState("86.177"),[f,i]=l.useState("60.577"),[x,y]=l.useState("64"),[b,A]=l.useState("86.177"),[j,N]=l.useState("106.835"),[v,g]=l.useState("63.249"),[P,k]=l.useState("1"),[O,M]=l.useState("0,31"),[L,S]=l.useState("6"),[W,C]=l.useState("0,31"),[D,T]=l.useState("5,83"),[H,Z]=l.useState(""),[se,I]=l.useState("0,60"),[V,w]=l.useState("5"),[_,q]=l.useState(!1),te=()=>{const R={tab:a,inland:{period:t,containerM3:m,rent40ft:u,rent20ft:c,milkrunRate:f,milkrunEff:x},labor:{period:t,dlRate:b,idlRate:j,facilityRate:v},manHour:{period:t,receiving:P,inspection:O,deliveryCourse:L,supplyPallet:W,sortingSupply:D,pickPacking:H,vanning:se,emptyBox:V}};q(!0),typeof s=="function"&&s(R),setTimeout(()=>q(!1),1500)},U=()=>{n("02.2025"),p("47.7"),d("86.177"),r("86.177"),i("60.577"),y("64"),A("86.177"),N("106.835"),g("63.249"),k("1"),M("0,31"),S("6"),C("0,31"),T("5,83"),Z(""),I("0,60"),w("5")},E="form-control form-control-sm";return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Parameters"})}),e.jsx("div",{className:"ml-auto btn-group btn-group-sm",children:["inland","labor","manHour","history"].map(R=>e.jsxs("button",{className:`btn btn-sm ${a===R?"btn-primary":"btn-outline-secondary"}`,onClick:()=>o(R),children:[R==="inland"&&"Inland",R==="labor"&&"Labor Cost",R==="manHour"&&"Man Hour",R==="history"&&"History"]},R))})]}),e.jsxs("div",{className:"card-body",children:[a==="inland"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:E,value:t,onChange:R=>n(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Container Volume M3"}),e.jsx("input",{className:E,value:m,onChange:R=>p(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"40 feet container rent rate"}),e.jsx("input",{className:E,value:u,onChange:R=>d(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"20 feet container rent rate"}),e.jsx("input",{className:E,value:c,onChange:R=>r(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Milkrun rate (per m3)"}),e.jsx("input",{className:E,value:f,onChange:R=>i(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Milkrun efficiency rate (%)"}),e.jsx("input",{className:E,value:x,onChange:R=>y(R.target.value)})]})]}),a==="labor"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:E,value:t,onChange:R=>n(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Direct Labor Rate (DL) Rp/Hour"}),e.jsx("input",{className:E,value:b,onChange:R=>A(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Indirect Labor Rate (IDL) Rp/M3"}),e.jsx("input",{className:E,value:j,onChange:R=>N(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Facility Others Rate"}),e.jsx("input",{className:E,value:v,onChange:R=>g(R.target.value)})]})]}),a==="manHour"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:E,value:t,onChange:R=>n(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Receiving"}),e.jsx("input",{className:E,value:P,onChange:R=>k(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Inspection"}),e.jsx("input",{className:E,value:O,onChange:R=>M(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Delivery Course"}),e.jsx("input",{className:E,value:L,onChange:R=>S(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Supply (Pallet)"}),e.jsx("input",{className:E,value:W,onChange:R=>C(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Sorting & Supply (Non Pallet)"}),e.jsx("input",{className:E,value:D,onChange:R=>T(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Pick & Packing"}),e.jsx("input",{className:E,value:H,onChange:R=>Z(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Vanning"}),e.jsx("input",{className:E,value:se,onChange:R=>I(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Empty Box/Pallet Return"}),e.jsx("input",{className:E,value:V,onChange:R=>w(R.target.value)})]})]}),a==="history"&&e.jsx("div",{className:"text-center text-muted py-4",children:"History tab content will appear here."})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-primary mr-2",onClick:te,children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:U,children:"Cancel"}),_&&e.jsx("span",{className:"ml-3 text-success",children:"Parameters saved"})]})]})})}function ga(){const s=He(),a=()=>{s(-1)};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Notification Detail"}),e.jsx("div",{className:"card-tools",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date :"})," 20 Feb 2025 13:10"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"From :"})," Jonathan Hairi"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dept :"})," PPMD"]}),e.jsx("hr",{}),e.jsx("p",{children:"Harus diganti Qty menjadi 2"}),e.jsx("p",{children:"Agar lebih aman ketika dikirim ke supplier lain"}),e.jsx("p",{children:"dan diganti Material No nya dengan Mat No : #12312312 00"}),e.jsx("p",{children:"dari supplier Materindo Indigo"})]})]})})}function be({children:s}){return Te().user?s:e.jsx(vt,{to:"/login",replace:!0})}function va(){const s=Te(),o=Ts().pathname==="/login",t=!!s.user&&!o;return e.jsxs("div",{className:"wrapper",children:[t&&e.jsx(ea,{}),t&&e.jsx(Xl,{}),e.jsx("div",{className:t?"content-wrapper":"",children:e.jsxs(gt,{children:[e.jsx(Ne,{path:"/login",element:e.jsx(la,{})}),e.jsx(Ne,{path:"/",element:e.jsx(be,{children:e.jsx(Ca,{})})}),e.jsx(Ne,{path:"/projects",element:e.jsx(be,{children:e.jsx(ia,{})})}),e.jsx(Ne,{path:"/models",element:e.jsx(be,{children:e.jsx(ua,{})})}),e.jsx(Ne,{path:"/parts",element:e.jsx(be,{children:e.jsx(pa,{})})}),e.jsx(Ne,{path:"/suppliers",element:e.jsx(be,{children:e.jsx(fa,{})})}),e.jsx(Ne,{path:"/packing/cps",element:e.jsx(be,{children:e.jsx(xl,{})})}),e.jsx(Ne,{path:"/packing/dpi",element:e.jsx(be,{children:e.jsx(Bl,{})})}),e.jsx(Ne,{path:"/packing/CalculatePackingCost",element:e.jsx(be,{children:e.jsx(Yl,{})})}),e.jsx(Ne,{path:"/packing/ComparisonPage",element:e.jsx(be,{children:e.jsx(zl,{})})}),e.jsx(Ne,{path:"/module-type",element:e.jsx(be,{children:e.jsx(Ls,{})})}),e.jsx(Ne,{path:"/material",element:e.jsx(be,{children:e.jsx(Ls,{})})}),e.jsx(Ne,{path:"/settings",element:e.jsx(be,{children:e.jsx(Na,{})})}),e.jsx(Ne,{path:"/params",element:e.jsx(be,{children:e.jsx(ba,{})})}),e.jsx(Ne,{path:"/notification-detail",element:e.jsx(be,{children:e.jsx(ga,{})})})]})}),t&&e.jsxs("footer",{className:"main-footer",children:[e.jsxs("div",{className:"float-right d-none d-sm-block",children:[e.jsx("b",{children:"Version"})," 0.1.0"]}),e.jsxs("strong",{children:["© ",new Date().getFullYear()," My Company."]})]})]})}function Ca(){var a,o,t;const s=Te();return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-sm-6",children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("small",{children:["User: ",(a=s.user)==null?void 0:a.username," | Dept: ",(o=s.user)==null?void 0:o.department," | Role: ",(t=s.user)==null?void 0:t.role]})]})})})}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid",children:e.jsx(ta,{})})})]})}const ya="/packing-cost-fe/";Nt(document.getElementById("root")).render(e.jsx(ke.StrictMode,{children:e.jsx(bt,{basename:ya,children:e.jsx(Ft,{children:e.jsx(va,{})})})}));
