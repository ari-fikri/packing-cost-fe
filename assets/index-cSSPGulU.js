import{r as l,j as e,R as de}from"./react-JHr-MqlU.js";import{R as ws,c as ut}from"./react-dom-ByPjVLjt.js";import{N as ie,B as ht}from"./react-router-dom-C8MBRXQb.js";import{c as ls,a as Ps,d as xt,e as oe,f as pt}from"./react-router-CrFtL5GL.js";import{M as jt,a as ft,b as Nt,c as bt,B as vs,F as gt,L as vt,I as Ct}from"./reactstrap-Sv9f_Q5O.js";import{B as yt}from"./react-chartjs-2-B_DtYEyI.js";import{C as St,a as wt,L as Pt,b as kt,p as _t,c as It,d as At}from"./chart.js-zNwYC2Re.js";import"./classnames-C9FZUsQl.js";import"./scheduler-DYLXRpC5.js";import"./@remix-run-TLZCGUFM.js";import"./prop-types-ZMHxiqrO.js";import"./react-transition-group-Bm7DLXUO.js";import"./@babel-G6YR9G09.js";import"./@kurkle-D8fDXNIl.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const m of n)if(m.type==="childList")for(const j of m.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&t(j)}).observe(document,{childList:!0,subtree:!0});function o(n){const m={};return n.integrity&&(m.integrity=n.integrity),n.referrerPolicy&&(m.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?m.credentials="include":n.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function t(n){if(n.ep)return;n.ep=!0;const m=o(n);fetch(n.href,m)}})();const ue={ADMIN:"admin",ENGINEER:"engineer",PROCUREMENT:"procurement",VIEWER:"viewer"},fe={PSE:"PSE",PCD:"PCD"},Cs={[fe.PSE]:{[ue.ADMIN]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!0,editable:!0}},[ue.ENGINEER]:{general:{visible:!0,editable:!0},pse:{visible:!0,editable:!0},packing:{visible:!0,editable:!0},images:{visible:!0,editable:!0},logistic:{visible:!1,editable:!1}},[ue.VIEWER]:{general:{visible:!0,editable:!1},pse:{visible:!0,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!1,editable:!1}}},[fe.PCD]:{[ue.PROCUREMENT]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!0}},[ue.VIEWER]:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!0,editable:!1}}},default:{general:{visible:!0,editable:!1},pse:{visible:!1,editable:!1},packing:{visible:!0,editable:!1},images:{visible:!0,editable:!1},logistic:{visible:!1,editable:!1}}},ks=l.createContext(null),Mt=[{username:"khedi.asmoro",password:"1",department:fe.PSE,role:ue.ADMIN},{username:"ujang.jayadi",password:"1",department:fe.PSE,role:ue.ENGINEER},{username:"anton",password:"1",department:fe.PSE,role:ue.ENGINEER},{username:"hanifa",password:"2",department:fe.PCD,role:ue.PROCUREMENT},{username:"viewer.pse",password:"1",department:fe.PSE,role:ue.VIEWER},{username:"viewer.pcd",password:"1",department:fe.PCD,role:ue.VIEWER}];function Tt({children:s}){const[a,o]=l.useState(null),t=ls(),n=(j,h)=>{const r=Mt.find(u=>u.username===j&&u.password===h);if(r){const{password:u,...i}=r;return o(i),t("/"),!0}else return!1},m=()=>{o(null),t("/login")};return e.jsx(ks.Provider,{value:{user:a,login:n,logout:m},children:s})}function Ne(){return l.useContext(ks)}const Lt=({filters:s,setters:a,onSearch:o,onClear:t,onPersonPicker:n,destinations:m})=>{const j=r=>{const u=r.target.value;a.setDestCode(u);const i=m.find(p=>p.destCode===u);i?a.setDestCountry(`${i.code} - ${i.country}`):a.setDestCountry("")},h=[...new Set(m.map(r=>r.destCode))];return e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CPS/PSI/ECI No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.cpsNo,onChange:r=>a.setCpsNo(r.target.value),placeholder:"CPS/PSI/ECI No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CFC/Model"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.model,onChange:r=>a.setModel(r.target.value),placeholder:"Model"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("select",{className:"form-control form-control-sm mr-2",value:s.destCode,onChange:j,children:[e.jsx("option",{value:"",children:"Select Dest Code"}),h.map(r=>e.jsx("option",{value:r,children:r},r))]}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.destCountry,readOnly:!0,placeholder:"Country Code - Country"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Part No - Part Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm mr-2",value:s.partNo,onChange:r=>a.setPartNo(r.target.value),placeholder:"Part No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.partName,readOnly:!0,placeholder:"Part Name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"From"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.fromUser,onChange:r=>a.setFromUser(r.target.value),placeholder:"From"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Ref CPS No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.refCpsNo,onChange:r=>a.setRefCpsNo(r.target.value),placeholder:"Ref CPS No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.cfcPjt,onChange:r=>a.setCfcPjt(r.target.value),placeholder:"CFC/PJT"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"CPS/PSI/ECI Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:s.cpsPsiEci,onChange:r=>a.setCpsPsiEci(r.target.value),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"CPS",children:"CPS"}),e.jsx("option",{value:"PSI",children:"PSI"}),e.jsx("option",{value:"ECI",children:"ECI"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code - Supplier Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm mr-2",value:s.supplierCode,readOnly:!0,placeholder:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.supplierName,readOnly:!0,placeholder:"Supplier Name"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"To"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s.toUser,onChange:r=>a.setToUser(r.target.value),placeholder:"To"})]})]})]}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm mr-2",onClick:o,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:t,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})})]})};function _e({currentPage:s,totalPages:a,totalItems:o,pageSize:t,onPageChange:n,className:m=""}){const j=()=>{if(a<=1)return null;const h=[],r=5;let u=Math.max(1,s-Math.floor(r/2)),i=Math.min(a,u+r-1);i-u+1<r&&(u=Math.max(1,i-r+1)),u>1&&(h.push(e.jsx("button",{className:`btn btn-sm ${s===1?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(1),children:"1"},1)),u>2&&h.push(e.jsx("span",{className:"mx-1",children:"..."},"start-ellipsis")));for(let p=u;p<=i;p++)h.push(e.jsx("button",{className:`btn btn-sm ${s===p?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(p),children:p},p));return i<a&&(i<a-1&&h.push(e.jsx("span",{className:"mx-1",children:"..."},"end-ellipsis")),h.push(e.jsx("button",{className:`btn btn-sm ${s===a?"btn-primary":"btn-outline-primary"} mr-1`,onClick:()=>n(a),children:a},a))),h};return a<=1?null:e.jsxs("div",{className:`d-flex justify-content-between align-items-center mt-3 bg-light p-2 border rounded ${m}`,children:[e.jsxs("div",{className:"small text-muted",children:["Showing ",(s-1)*t+1," to ",Math.min(s*t,o)," of ",o," entries"]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary mr-2",disabled:s===1,onClick:()=>n(1),children:e.jsx("i",{className:"fas fa-angle-double-left"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary mr-2",disabled:s===1,onClick:()=>n(s-1),children:e.jsx("i",{className:"fas fa-angle-left"})}),j(),e.jsx("button",{className:"btn btn-sm btn-outline-secondary ml-2",disabled:s===a,onClick:()=>n(s+1),children:e.jsx("i",{className:"fas fa-angle-right"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary ml-2",disabled:s===a,onClick:()=>n(a),children:e.jsx("i",{className:"fas fa-angle-double-right"})})]})]})}function Dt({filteredCps:s,page:a,perPage:o,setPage:t,setPerPage:n,onEdit:m}){const j=s.slice((a-1)*o,a*o),h=r=>r.includes("CPS")?"CPS":r.includes("PCI")?"PCI":r.includes("ECI")?"ECI":"";return e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{fontSize:"10pt"},children:"No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"CPS/PCI/ECI No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Type"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Ref CPS No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Part No"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Project Code"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Model"}),e.jsx("th",{style:{fontSize:"10pt"},children:"From"}),e.jsx("th",{style:{fontSize:"10pt"},children:"To"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Status"}),e.jsx("th",{style:{fontSize:"10pt"},children:"Submit Date"}),e.jsx("th",{style:{width:160},children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"text-center py-4 text-muted",children:"No Data Found"})}):j.map((r,u)=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontSize:"10pt"},children:(a-1)*o+u+1}),e.jsx("td",{style:{fontSize:"10pt"},children:r.cpsNo}),e.jsx("td",{style:{fontSize:"10pt"},children:h(r.cpsNo)}),e.jsx("td",{style:{fontSize:"10pt"},children:r.refCpsNo}),e.jsx("td",{style:{fontSize:"10pt"},children:r.partNo}),e.jsx("td",{style:{fontSize:"10pt"},children:r.cfcPjtCode}),e.jsx("td",{style:{fontSize:"10pt"},children:r.model}),e.jsx("td",{style:{fontSize:"10pt"},children:r.fromUser}),e.jsx("td",{style:{fontSize:"10pt"},children:r.toUser}),e.jsx("td",{style:{fontSize:"10pt"},children:r.status}),e.jsx("td",{style:{fontSize:"10pt"},children:r.issueDate}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>alert("View placeholder"),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info mr-1",onClick:()=>m(r),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Clone placeholder"),children:e.jsx("i",{className:"fas fa-clone"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>alert("Delete placeholder"),children:e.jsx("i",{className:"fas fa-trash"})})]})]},u))})]})}),e.jsx(_e,{currentPage:a,totalItems:s.length,itemsPerPage:o,onPageChange:t,onItemsPerPageChange:r=>{n(r),t(1)}})]})}function Et({current:s,partNoQuery:a,partNameQuery:o,supplierQuery:t,onPartNoChange:n,onPartNameChange:m,onSupplierChange:j,onGo:h}){return e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("h5",{className:"mb-0 mr-3",children:"Select part"})}),e.jsxs("div",{className:"row mt-2",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Part No",value:a,onChange:r=>n(r.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Part Name",value:o,onChange:r=>m(r.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",type:"text",placeholder:"Enter Supplier Name",value:t,onChange:r=>j(r.target.value)})]}),e.jsx("div",{className:"col-md-3 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-sm btn-primary w-100",type:"button",onClick:h,children:"Go"})})]})]})}function _s({count:s=1,isPseUser:a}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((o,t)=>e.jsxs(de.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty"}),!a&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Price"}),!a&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Sum"})]},`matLeafHdr-${t}`))})}function Is({arr:s=[],count:a=1,isPseUser:o}){debugger;return e.jsx(e.Fragment,{children:Array.from({length:a}).map((t,n)=>{const m=s[n]||{};return e.jsxs(de.Fragment,{children:[e.jsx("td",{className:"align-middle",children:m.materialNo??"-"}),e.jsx("td",{className:"text-right",children:m.qty??"-"}),!o&&e.jsx("td",{className:"text-right",children:m.price??"-"}),!o&&e.jsx("td",{className:"text-right",children:m.sum??"-"})]},`matLeafData-${n}`)})})}function Rt({count:s=10,isPseUser:a}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((o,t)=>e.jsx("th",{colSpan:a?2:4,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:t===0?"Box":`Inner ${t}`},`innerGroupHdr-${t}`))})}function Ot({count:s=10,isPseUser:a}){return e.jsx(_s,{count:s,isPseUser:a})}function As({data:s=[],count:a=10,isPseUser:o}){return e.jsx(Is,{arr:s,count:a,isPseUser:!0})}function Ft({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:2,children:o===0?"Module":`Outer ${o}`},`outerGrp-${o}`))})}function Wt({count:s=10,isPseUser:a}){return e.jsx(_s,{count:s,isPseUser:a})}function Ms({data:s=[],count:a=10,isPseUser:o}){debugger;return e.jsx(Is,{arr:s,count:a,isPseUser:o})}function Bt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Inner"}),e.jsx("th",{className:"align-middle",children:"Outer"}),e.jsx("th",{className:"align-middle",children:"Material"}),e.jsx("th",{className:"align-middle",children:"Labor"}),e.jsx("th",{className:"align-middle",children:"Inland"})]})}function Ts({data:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.subTotalInner??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalOuter??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalMaterial??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalLabor??"-"}),e.jsx("td",{className:"align-middle",children:s.subTotalInland??"-"})]})}function Ht(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Receiving"}),e.jsx("th",{className:"align-middle",children:"Inspection"}),e.jsx("th",{className:"align-middle",children:"Dlvr Course"}),e.jsx("th",{className:"align-middle",children:"Pallet Supply"}),e.jsx("th",{className:"align-middle",children:"Binding"}),e.jsx("th",{className:"align-middle",children:"Sort & Supply"}),e.jsx("th",{className:"align-middle",children:"Pick & Packing"}),e.jsx("th",{className:"align-middle",children:"Vanning"}),e.jsx("th",{className:"align-middle",children:"Box/Valet Rtrn"}),e.jsx("th",{className:"align-middle",children:"Mix Van"}),e.jsx("th",{className:"align-middle",children:"Lashing"}),e.jsx("th",{className:"align-middle",children:"Total Time Req"}),e.jsx("th",{className:"align-middle",children:"Others"})]})}function Ut(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle",children:"Current"}),e.jsx("th",{className:"align-middle",children:"DL"}),e.jsx("th",{className:"align-middle",children:"IDL"}),e.jsx("th",{className:"align-middle",children:"Facility Others"})]})}function Ls({labor:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.receiving??"-"}),e.jsx("td",{className:"align-middle",children:s.inspection??"-"}),e.jsx("td",{className:"align-middle",children:s.deliveryCourse??"-"}),e.jsx("td",{className:"align-middle",children:s.palletSupply??"-"}),e.jsx("td",{className:"align-middle",children:s.binding??"-"}),e.jsx("td",{className:"align-middle",children:s.sorting??"-"}),e.jsx("td",{className:"align-middle",children:s.pickPacking??"-"}),e.jsx("td",{className:"align-middle",children:s.vanning??"-"}),e.jsx("td",{className:"align-middle",children:s.boxValetReturn??"-"}),e.jsx("td",{className:"align-middle",children:s.mixVan??"-"}),e.jsx("td",{className:"align-middle",children:s.lashing??"-"}),e.jsx("td",{className:"align-middle",children:s.totalTimeReq??"-"}),e.jsx("td",{className:"align-middle",children:s.others??"-"})]})}function Ds({labor:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.laborCostCurrent??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostDL??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostIDL??"-"}),e.jsx("td",{className:"align-middle",children:s.laborCostFacility??"-"})]})}function qt(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Pack Time (V-PASS)"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Inland Cost (m³)"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Diff"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap-middle",children:"Milkrun Cost"})]})}function Es({inland:s={}}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.packTimeVPass??"-"}),e.jsx("td",{className:"align-middle",children:s.costM3??"-"}),e.jsx("td",{className:"align-middle",children:s.diff??"-"}),e.jsx("td",{className:"align-middle",children:s.milkrunCost??"-"})]})}function Rs(s=0,a=0,o=!1){const t=[],n=(h,r)=>t.push({key:h,w:r});n("action",50),n("recNo",80),n("cpsNo",140),n("partNo",160),n("partName",260),n("parentNo",140),n("supplierCode",140),n("supplierName",200),n("weightPerPc",100),n("qtyPerBox",100),o||(n("subInner",120),n("subOuter",120),n("subMaterial",120),n("subLabor",120),n("subInland",120),n("diffPct",100));for(let h=0;h<s;h++)n(`in_matNo_${h}`,100),n(`in_qty_${h}`,50),o||(n(`in_price_${h}`,70),n(`in_sum_${h}`,100));for(let h=0;h<a;h++)n(`out_matNo_${h}`,100),n(`out_qty_${h}`,50),o||(n(`out_price_${h}`,70),n(`out_sum_${h}`,100));o||(n("lab_mh_receiving",90),n("lab_mh_inspection",90),n("lab_mh_deliveryCourse",120),n("lab_mh_palletSupply",110),n("lab_mh_binding",90),n("lab_mh_sorting",120),n("lab_mh_pickPacking",120),n("lab_mh_vanning",90),n("lab_mh_boxValetReturn",120),n("lab_mh_mixVan",90),n("lab_mh_lashing",90),n("lab_mh_totalTimeReq",110),n("lab_mh_others",90),n("lab_cost_direct",90),n("lab_cost_indirect",90),n("lab_cost_subTotal",100),n("lab_cost_costPerPc",110),n("inland_trucking",150),n("inland_clp",120),n("inland_delivery",70),n("inland_total",100));const m=t.reduce((h,r)=>h+r.w,0);return{colGroup:e.jsx("colgroup",{children:t.map((h,r)=>e.jsx("col",{style:{width:`${h.w}px`,minWidth:`${h.w}px`}},`${h.key}-${r}`))}),totalWidth:m,cols:t}}function $t(){return e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Name"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Parent No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Code"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Name"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Weight/pc"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty/Box"})]})}function Os({part:s}){return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"align-middle",children:s.partNo??"-"}),e.jsx("td",{className:"align-middle",children:s.partName??s.name??"-"}),e.jsx("td",{className:"align-middle",children:s.parentNo??"-"}),e.jsx("td",{className:"align-middle",children:s.supplierCode??"-"}),e.jsx("td",{className:"align-middle",children:s.supplierName??"-"}),e.jsx("td",{className:"align-middle",children:s.weightPerPc??"-"}),e.jsx("td",{className:"align-middle",children:s.qtyPerBox??"-"})]})}function Kt({current:s={},scrollRef:a,onScroll:o,isPseUser:t,innerCount:n,outerCount:m}){const j=s.inner||[],h=s.outer||[],r=s.labor||{},u=s.inland||{},{colGroup:i,totalWidth:p}=Rs(n,m,t);return e.jsx("div",{className:"mb-3",children:e.jsx("div",{ref:a,onScroll:o,className:"table-responsive mt-2",style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center table-font-size-10pt",style:{minWidth:`${p}px`,tableLayout:"fixed"},children:[i,e.jsxs("thead",{children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap"}),e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"No"}),e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"CPS No"}),e.jsx("th",{rowSpan:2,colSpan:7,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Part Info"}),!t&&e.jsx("th",{rowSpan:2,colSpan:5,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Sub Total Costs"}),!t&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Diff (%)"}),e.jsx("th",{colSpan:n*(t?2:4),className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inner Info"}),e.jsx("th",{colSpan:m*(t?2:4),className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Outer Info"}),!t&&e.jsx("th",{colSpan:17,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Labor"}),!t&&e.jsx("th",{colSpan:4,rowSpan:2,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inland"})]}),e.jsxs("tr",{children:[e.jsx(Rt,{count:n,isPseUser:t}),e.jsx(Ft,{count:m,isPseUser:t}),!t&&e.jsx("th",{colSpan:13,className:"align-align-middle border text-center tbl-row1-hdr text-nowrap",children:"Man Hour Requirement"}),!t&&e.jsx("th",{colSpan:4,className:"align-align-middle border text-center tbl-row1-hdr text-nowrap",children:"Labor Cost"})]}),e.jsxs("tr",{children:[e.jsx($t,{}),!t&&e.jsx(Bt,{}),e.jsx(Ot,{count:n,isPseUser:t}),e.jsx(Wt,{count:m,isPseUser:t}),!t&&e.jsx(Ht,{}),!t&&e.jsx(Ut,{}),!t&&e.jsx(qt,{})]})]}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{className:"align-middle",children:s.recNo??"-"}),e.jsx("td",{className:"align-middle",children:s.cpsNo??"-"}),e.jsx(Os,{part:s}),!t&&e.jsx(Ts,{data:s}),!t&&e.jsx("td",{className:"align-middle",children:s.diffPct??"-"}),e.jsx(As,{data:j,count:n,isPseUser:t}),e.jsx(Ms,{data:h,count:m,isPseUser:t}),!t&&e.jsx(Ls,{labor:r}),!t&&e.jsx(Ds,{labor:r}),!t&&e.jsx(Es,{inland:u})]})})]})})})}function Vt({filteredParts:s=[],onSelectPart:a,scrollRef:o,onScroll:t,isPseUser:n,innerCount:m,outerCount:j}){const{colGroup:h,totalWidth:r,cols:u}=Rs(m,j,n);return e.jsx("div",{className:"mb-1",children:e.jsx("div",{ref:o,onScroll:t,className:"table-responsive",style:{maxHeight:400,overflowY:"auto",overflowX:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center table-font-size-10pt",style:{minWidth:`${r}px`,tableLayout:"fixed"},children:[h,e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:u.length,className:"text-center text-muted py-3",children:"No results"})}):s.map((i,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:e.jsx("input",{type:"checkbox",onChange:()=>a(i)})}),e.jsx("td",{className:"align-middle",children:i.recNo??"-"}),e.jsx("td",{className:"align-middle",children:i.cpsNo??"-"}),e.jsx(Os,{part:i}),!n&&e.jsx(Ts,{data:i}),!n&&e.jsx("td",{className:"align-middle",children:i.diffPct??"-"}),e.jsx(As,{data:i.inner,count:m,isPseUser:n}),e.jsx(Ms,{data:i.outer,count:j,isPseUser:n}),!n&&e.jsx(Ls,{labor:i.labor}),!n&&e.jsx(Ds,{labor:i.labor}),!n&&e.jsx(Es,{inland:i.inland})]},p))})]})})})}function Gt({isOpen:s=!1,onClose:a=()=>{},parts:o=[],current:t={},onSelectPart:n=()=>{}}){const[m,j]=l.useState(""),[h,r]=l.useState(""),[u,i]=l.useState(""),{user:p}=Ne(),c=p&&p.department==="PSE"&&!["pic","sh","dph"].includes(p.role),f=l.useRef(null),y=l.useRef(null),N=l.useRef(!1),T=(v,E)=>{N.current||(N.current=!0,E.current&&v.current&&(E.current.scrollLeft=v.current.scrollLeft),N.current=!1)},g=l.useMemo(()=>o.filter(v=>{const E=m.trim().toLowerCase(),A=h.trim().toLowerCase(),F=u.trim().toLowerCase(),P=E===""||v.partNo&&v.partNo.toLowerCase().includes(E),I=A===""||v.name&&v.name.toLowerCase().includes(A),S=F===""||v.supplier&&v.supplier.toLowerCase().includes(F);return P&&I&&S}),[o,m,h,u]),b=l.useMemo(()=>{const v=[t,...g];return Math.max(...v.map(E=>{var A;return((A=E.inner)==null?void 0:A.length)||0}))},[t,g]),C=l.useMemo(()=>{const v=[t,...g];return Math.max(...v.map(E=>{var A;return((A=E.outer)==null?void 0:A.length)||0}))},[t,g]);return s?e.jsx("div",{className:"np-modal-backdrop multi-parts-modal",style:{zIndex:3e3},onMouseDown:v=>{v.target===v.currentTarget&&a()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1200,width:"100%",display:"flex",flexDirection:"column",height:"700px",maxHeight:"700px",minHeight:"700px"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"CPS Comparison"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsx("div",{className:"card-body",style:{verticalAlign:"top",paddingBottom:0,maxHeight:"fit-content"},children:e.jsx(Et,{current:t,partNoQuery:m,partNameQuery:h,supplierQuery:u,onPartNoChange:j,onPartNameChange:r,onSupplierChange:i,onGo:()=>{}})}),e.jsx("hr",{className:"my-0"}),e.jsxs("div",{className:"card-body",style:{flex:1,display:"flex",flexDirection:"column",paddingTop:"8px",paddingBottom:"8px"},children:[e.jsx(Kt,{current:t,scrollRef:f,onScroll:()=>T(f,y),isPseUser:c,innerCount:b,outerCount:C}),e.jsx("hr",{style:{margin:"8px 0"}}),e.jsx(Vt,{filteredParts:g,onSelectPart:n,scrollRef:y,onScroll:()=>T(y,f),isPseUser:c,innerCount:b,outerCount:C})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:()=>{},children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:a,children:"Close"})]}),e.jsx("style",{children:`
          .multi-parts-modal .np-modal { max-width: 1200px; height: 700px; min-height: 700px; max-height: 700px; }
          .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: flex; align-items: center; justify-content: center; padding: 1rem; }
          .np-modal { width: 100%; height: 700px; min-height: 700px; max-height: 700px; }
          .table-sm td, .table-sm th { vertical-align: middle; white-space: nowrap; }
          .card-body { vertical-align: top; }
        `})]})}):null}const Fs=[["848400K010","SWITCH ASSY, BACK DOOR OPENER","TRI"],["848400K030","SWITCH ASSY, BACK DOOR OPENER","TRI"],["893400K010","COMPUTER ASSY, CLEARANCE WARNING","DSI"],["131110E010","RING, COMPRESSION, NO.1","PT.NTPRI"],["131110E020","RING, COMPRESSION, NO.1","PT.NTPRI"],["256300E010","VALVE ASSY, EGR, NO.2","AISAN NASMOCO INDUSTRI"],["261000E020","BODY ASSY, DIESEL THROTTLE","AISAN NASMOCO INDUSTRI"],["122810Y11000","HANGER, ENGINE, NO.1","SETIA GUNA SEJATI"],["130500Y02000","GEAR ASSY, CAMSHAFT TIMING","DENSO INDONESIA CORPORATION (FAJAR)"],["25051BZ15000","CONVERTER SUB-ASSY, EXHAUST MANIFOLD","FUTABA INDONESIA"],["25051BZ26000","CONVERTER SUB-ASSY, EXHAUST MANIFOLD","FUTABA INDONESIA"],["22030BZ15000","BODY ASSY, THROTTLE W/MOTOR","AISAN NASMOCO INDUSTRI"],["90210T000200","WASHER, SEAL","ARAI RUBBER SEAL INDONESIA"],["90430T002300","GASKET","ARAI RUBBER SEAL INDONESIA"],["111150Y03000","GASKET, CYLINDER HEAD","ASTRA NIPPON GASKET INDONESIA"],["11115BZ16000","GASKET, CYLINDER HEAD","ASTRA NIPPON GASKET INDONESIA"],["171730Y03000","GASKET, EXHAUST MANIFOLD","ASTRA NIPPON GASKET INDONESIA"],["17173BZ13000","GASKET, EXHAUST MANIFOLD","ASTRA NIPPON GASKET INDONESIA"],["115110Y04000","CAP, CRANKSHAFT BEARING, NO.1","AT INDONESIA"],["115130Y04000","CAP, CRANKSHAFT BEARING, NO.3","AT INDONESIA"],["16261BZ75000","HOSE, WATER BY-PASS, NO.1","CATURINDO AGUNGJAYA RUBBER"],["16261BZ76000","HOSE, WATER BY-PASS, NO.1","CATURINDO AGUNGJAYA RUBBER"],["16264BZ38000","HOSE, WATER BY-PASS, NO.2","CATURINDO AGUNGJAYA RUBBER"],["16264BZ39000","HOSE, WATER BY-PASS, NO.2","CATURINDO AGUNGJAYA RUBBER"],["16282BZ11000","HOSE, WATER BY-PASS, NO.5","CATURINDO AGUNGJAYA RUBBER"],["89467BZ02000","SENSOR, AIR FUEL RATIO","DENSO INDONESIA CORPORATION (SIP C)"],["111910Y01000","TUBE, SPARK PLUG","FUJIKINZOKU INDONESIA"],["90406T001100","TUBE, UNION","FUJIKINZOKU INDONESIA"],["90406T001300","TUBE, UNION","FUJIKINZOKU INDONESIA"],["23209BZ10000","INJECTOR SET, FUEL","HITACHI ASTEMO BEKASI POWERTRAIN SYS"],["90466T006100","CLIP, HOSE","INDOCIPTA HASTA PERKASA"],["90466T006200","CLIP, HOSE","INDOCIPTA HASTA PERKASA"],["32101BZ10000","GEAR SUB-ASSY DRIVE PLATE & RING","INTI GANDA PERDANA"],["157080Y04000","NOZZLE SUB-ASSY, OIL","ITOKIN"],["90360T001200","BALL","JTEKT INDONESIA"],["90105T027300","BOLT, FLANGE","MEIDOH INDONESIA"],["90119T044400","BOLT, W/WASHER","MEIDOH INDONESIA"],["9004A1020000","BOLT WASHER BASED HEAD HEXAGON","MEIDOH INDONESIA"]];function Ce({show:s=!1,onClose:a,onSelect:o,zIndex:t=4e3,mode:n="multi"}){function m(k,L,M){const J=((k+1)*9301+49297)%233280/233280;return Math.floor(L+J*(M-L+1))}const j=Fs.map((k,L)=>{const M=m(L,50,1400),H=m(L+3,20,600),J=m(L+7,10,800),se=Number((M*H*J/1e6).toFixed(3)),W="P"+String(1e5+m(L,1,9999)),Y="S"+String(200+L%999);return{partNo:k[0],partName:k[1],supplierName:k[2],parentPartNo:W,supplierId:Y,L:M,W:H,H:J,boxM3:se}}),[h,r]=l.useState({partNo:"",partName:"",supplierName:""}),[u,i]=l.useState(n==="multi"?{}:null),[p,c]=l.useState(1),[f,y]=l.useState(10);if(l.useEffect(()=>(s?(r({partNo:"",partName:"",supplierName:""}),i(n==="multi"?{}:null),c(1),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s]),!s)return null;function N(k){const{name:L,value:M}=k.target;r(H=>({...H,[L]:M})),c(1)}function T(){const k=h.partNo.trim().toLowerCase(),L=h.partName.trim().toLowerCase(),M=h.supplierName.trim().toLowerCase();return j.filter(H=>!(k&&!H.partNo.toLowerCase().includes(k)||L&&!H.partName.toLowerCase().includes(L)||M&&!H.supplierName.toLowerCase().includes(M)))}const g=T(),b=g.length,C=Math.max(1,Math.ceil(b/f)),v=g.slice((p-1)*f,p*f);function E(k){i(n==="multi"?L=>({...L,[k]:!L[k]}):k)}function A(k){if(n!=="multi")return;const L=(p-1)*f,M={};v.forEach((H,J)=>{M[L+J]=k}),i(H=>({...H,...M}))}function F(){if(n==="multi"){const k=Object.keys(u).filter(L=>u[L]).map(L=>g[Number(L)]);o&&o(k),a&&a()}else if(u!==null){const k=g[u];o&&o(k),a&&a()}else a&&a()}function P(k){c(Math.min(Math.max(1,k),C))}const I={flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},S={position:"sticky",top:0,zIndex:5,background:"white",padding:"1rem 1rem 0.5rem 1rem",borderBottom:"1px solid #e9ecef"},K={overflow:"auto",padding:"0 1rem 1rem 1rem"};return e.jsx("div",{className:"part-picker-modal-backdrop",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",zIndex:t,display:"flex",alignItems:"center",justifyContent:"center"},onMouseDown:k=>{k.target===k.currentTarget&&a()},children:e.jsxs("div",{className:"part-picker-modal",style:{background:"#fff",borderRadius:8,boxShadow:"0 2px 16px rgba(0,0,0,0.2)",zIndex:t+1,minWidth:600,minHeight:400,position:"relative"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"Select Parts"})}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"modal-body",style:I,children:[e.jsx("div",{style:S,children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12 col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{name:"partNo",value:h.partNo,onChange:N,className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Part Name"}),e.jsx("input",{name:"partName",value:h.partName,onChange:N,className:"form-control form-control-sm"})]}),e.jsxs("div",{className:"form-group col-12 col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{name:"supplierName",value:h.supplierName,onChange:N,className:"form-control form-control-sm"})]})]})}),e.jsx("div",{style:K,children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-striped table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:36},children:n==="multi"&&e.jsx("input",{type:"checkbox",onChange:k=>A(k.target.checked)})}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Part Name"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Supplier ID"}),e.jsx("th",{children:"Parent Part No"}),e.jsx("th",{children:"L (mm)"}),e.jsx("th",{children:"W (mm)"}),e.jsx("th",{children:"H (mm)"}),e.jsx("th",{children:"Box M3"})]})}),e.jsx("tbody",{children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center text-muted py-4",children:"No Data Found"})}):v.map((k,L)=>{const M=(p-1)*f+L;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:n==="multi"?e.jsx("input",{type:"checkbox",checked:!!u[M],onChange:()=>E(M)}):e.jsx("input",{type:"radio",name:"part-picker-radio",checked:u===M,onChange:()=>E(M)})}),e.jsx("td",{children:k.partNo}),e.jsx("td",{className:"text-left",children:k.partName}),e.jsx("td",{children:k.supplierName}),e.jsx("td",{children:k.supplierId}),e.jsx("td",{children:k.parentPartNo}),e.jsx("td",{children:k.L}),e.jsx("td",{children:k.W}),e.jsx("td",{children:k.H}),e.jsx("td",{children:k.boxM3})]},M)})})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>P(1),children:"<<"}),e.jsx("button",{className:"btn btn-sm btn-light mr-1",onClick:()=>P(Math.max(1,p-1)),children:"<"}),[...Array(C).keys()].map(k=>e.jsx("button",{className:`btn btn-sm mr-1 ${p===k+1?"btn-primary":"btn-light"}`,onClick:()=>P(k+1),children:k+1},k)),e.jsx("button",{className:"btn btn-sm btn-light",onClick:()=>P(Math.min(C,p+1)),children:">"}),e.jsxs("span",{className:"ml-2 small text-muted",children:["Total: ",b]})]}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-2",onClick:F,children:"Add Selected"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:a,children:"Cancel"})]})]})]})})}function as({show:s,onClose:a,onAdd:o,selectionMode:t="multi"}){const[n,m]=l.useState([]),[j,h]=l.useState(""),[r,u]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(""),[y,N]=l.useState(""),[T,g]=l.useState(""),[b,C]=l.useState(""),[v,E]=l.useState(t==="multi"?[]:null),[A,F]=l.useState([]),[P,I]=l.useState(1),S=15;l.useEffect(()=>{fetch("/models.json").then(R=>R.json()).then(R=>{m(R),F(R)})},[]),l.useEffect(()=>{s&&(h(""),u(""),p(""),f(""),N(""),g(""),C(""),E(t==="multi"?[]:null),F(n),I(1))},[s,t]);const K=R=>{E(t==="multi"?Q=>Q.includes(R)?Q.filter(D=>D!==R):[...Q,R]:R)},k=()=>{const R=n.filter(Q=>Q.model_code.toLowerCase().includes(j.toLowerCase())&&Q.model_name.toLowerCase().includes(r.toLowerCase())&&(Q.model_cfc||"").toLowerCase().includes(i.toLowerCase())&&(Q.destination_code||"").toLowerCase().includes(c.toLowerCase())&&(Q.model_implementation_period||"").toLowerCase().includes(y.toLowerCase())&&(Q.model_type||"").toLowerCase().includes(T.toLowerCase())&&Q.model_remark.toLowerCase().includes(b.toLowerCase()));F(R),I(1)},L=()=>{h(""),u(""),p(""),f(""),N(""),g(""),C(""),F(n),I(1)},M=()=>{if(typeof o=="function")if(t==="multi")o(v.map(R=>n.find(Q=>Q.model_code===R)));else{const R=n.find(Q=>Q.model_code===v);o(R)}E(t==="multi"?[]:null),typeof a=="function"&&a()},H=P*S,J=H-S,se=A.slice(J,H),W=Math.ceil(A.length/S);if(!s)return null;const Y=e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",inset:0,zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("div",{className:"modal-dialog modal-lg",role:"document",style:{zIndex:2100},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Model"}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row align-items-end mb-3",children:[e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Model Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:R=>h(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:R=>u(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-1",children:[e.jsx("label",{className:"small",children:"CFC"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:i,onChange:R=>p(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Dest Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:R=>f(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small",children:"Impl. Period"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,onChange:R=>N(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-1",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T,onChange:R=>g(R.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2 text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-1",onClick:k,type:"button",children:"Search"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:L,type:"button",children:"Clear"})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Model Code"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"CFC"}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Impl. Period"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Remark"})]})}),e.jsx("tbody",{children:se.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No models found"})}):se.map(R=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:t==="multi"?"checkbox":"radio",name:"model-selection",checked:t==="multi"?v.includes(R.model_code):v===R.model_code,onChange:()=>K(R.model_code)})}),e.jsx("td",{children:R.model_code}),e.jsx("td",{children:R.model_name}),e.jsx("td",{children:R.model_cfc}),e.jsx("td",{children:R.destination_code}),e.jsx("td",{children:R.model_implementation_period}),e.jsx("td",{children:R.model_type}),e.jsx("td",{children:R.model_remark})]},R.model_code))})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>I(R=>Math.max(1,R-1)),disabled:P===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",P," of ",W]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>I(R=>Math.min(W,R+1)),disabled:P===W,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:M,type:"button",children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:a,type:"button",children:"Cancel"})]})]})]})})});return ws.createPortal(Y,typeof document<"u"?document.body:null)}function Yt({show:s=!1,onClose:a=()=>{},onAdd:o=()=>{},selectionMode:t="single",zIndex:n=1050,filter:m="all"}){const[j,h]=l.useState([]),[r,u]=l.useState(""),[i,p]=l.useState(1),[c,f]=l.useState(""),[y,N]=l.useState(""),[T,g]=l.useState(""),[b,C]=l.useState(t==="multi"?[]:null),[v,E]=l.useState([]),A=15;l.useEffect(()=>{fetch("/packing-cost-fe/dpi.json").then(Y=>Y.json()).then(Y=>h(Y)).catch(Y=>console.error("Error fetching materials:",Y))},[]),l.useEffect(()=>{if(s&&j.length>0){let W=j;m&&(m==="module"?W=j.filter(Y=>Y.materialType.toLowerCase()==="module"):m==="outer"?W=j.filter(Y=>Y.materialType.toLowerCase()==="outer"):m==="inner"?W=j.filter(Y=>Y.materialType.toLowerCase()==="inner"):m==="box"&&(W=j.filter(Y=>Y.materialType.toLowerCase()==="box"))),E(W)}else E([]),u(""),p(1)},[s,m,j]);function F(W){C(t==="multi"?Y=>Y.includes(W)?Y.filter(R=>R!==W):[...Y,W]:W)}const P=()=>{const W=j.filter(Y=>(Y.materialNo||"").toLowerCase().includes(c.toLowerCase())&&(Y.materialName||"").toLowerCase().includes(y.toLowerCase())&&(Y.materialType||"").toLowerCase().includes(T.toLowerCase()));E(W),p(1)},I=()=>{f(""),N(""),g(""),E(j),p(1)},S=()=>{if(typeof o=="function")if(t==="multi")o(b.map(W=>j.find(Y=>Y.materialNo===W)));else{const W=j.find(Y=>Y.materialNo===b);console.log(">>>>"+W),o(W)}C(t==="multi"?[]:null),typeof a=="function"&&a()},K=i*A,k=K-A,L=v.slice(k,K),M=Math.ceil(v.length/A),H=W=>typeof W!="number"?W:W.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),J=W=>typeof W!="number"?W:W.toLocaleString("en-US");if(!s)return null;const se=e.jsx("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)",zIndex:n},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Select Material"}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row align-items-end mb-3",children:[e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small",children:"Material No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:W=>f(W.target.value)})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small",children:"Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,onChange:W=>N(W.target.value)})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T,onChange:W=>g(W.target.value)})]}),e.jsxs("div",{className:"form-group col-md-2 text-right",children:[e.jsx("button",{className:"btn btn-sm btn-primary mr-1",onClick:P,type:"button",children:"Search"}),e.jsx("button",{className:"btn btn-sm btn-secondary",onClick:I,type:"button",children:"Clear"})]})]}),e.jsx("div",{style:{height:"450px"},children:e.jsx("div",{className:"table-responsive",style:{height:"100%",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"Material No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Type"}),e.jsx("th",{style:{textAlign:"right"},children:"L"}),e.jsx("th",{style:{textAlign:"right"},children:"W"}),e.jsx("th",{style:{textAlign:"right"},children:"H"}),e.jsx("th",{style:{textAlign:"right"},children:"Inner"}),e.jsx("th",{style:{textAlign:"right"},children:"Outer"})]})}),e.jsx("tbody",{children:L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted",style:{paddingTop:"100px",paddingBottom:"100px"},children:"No materials found"})}):L.map(W=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:t==="multi"?"checkbox":"radio",name:"material-selection",checked:t==="multi"?b.includes(W.materialNo):b===W.materialNo,onChange:()=>F(W.materialNo)})}),e.jsx("td",{children:W.materialNo}),e.jsx("td",{children:W.materialName}),e.jsx("td",{children:W.materialType}),e.jsx("td",{style:{textAlign:"right"},children:J(W.dimension_length)}),e.jsx("td",{style:{textAlign:"right"},children:J(W.dimension_width)}),e.jsx("td",{style:{textAlign:"right"},children:J(W.dimension_height)}),e.jsx("td",{style:{textAlign:"right"},children:H(W.dimension_inner_length*W.dimension_inner_width*W.dimension_inner_height/1e6)}),e.jsx("td",{style:{textAlign:"right"},children:H(W.dimension_outer_length*W.dimension_outer_width*W.dimension_outer_height/1e6)})]},W.materialNo))})]})})})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>p(W=>Math.max(1,W-1)),disabled:i===1,children:"Previous"}),e.jsxs("span",{className:"mx-2",children:["Page ",i," of ",M]}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>p(W=>Math.min(M,W+1)),disabled:i===M,children:"Next"})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-primary",onClick:S,type:"button",children:["Add ",e.jsx("i",{className:"fas fa-check"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:a,type:"button",children:"Cancel"})]})]})]})})});return ws.createPortal(se,typeof document<"u"?document.body:null)}function zt(s){const{cpsNo:a,setCpsNo:o,refCpsNo:t,setRefCpsNo:n,cfcPjtCode:m,setCfcPjtCode:j,model:h,setModel:r,partNo:u,setPartNo:i,partName:p,setPartName:c,supplier:f,setSupplier:y,plantCode:N,setPlantCode:T,dockCode:g,setDockCode:b,openPartPicker:C,openModelPicker:v,setComparisonOpen:E}=s;return e.jsxs("div",{children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"CPS/PSI/ECI No."})}),e.jsx("input",{className:"form-control form-control-sm",value:a,onChange:A=>o(A.target.value),placeholder:"CPSxxxx..."})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"CFC/Model"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:h,onChange:A=>r(A.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:v,children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Part No"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:u,onChange:A=>i(A.target.value)}),e.jsxs("div",{className:"input-group-append",children:[e.jsx("button",{id:"partPickerBtn",type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part",onClick:C,children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Compare",style:{marginLeft:6},onClick:()=>E(!0),children:"Compare"})]})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Ref CPS No."})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:t,onChange:A=>n(A.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Ref CPS",onClick:()=>alert("Search Ref CPS placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Project Code"})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:m,onChange:A=>j(A.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>alert("Search CFC/PJT placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Part Name"})}),e.jsx("input",{className:"form-control form-control-sm",value:p,readOnly:!0})]})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:e.jsx("b",{children:"Supplier"})}),e.jsx("input",{className:"form-control form-control-sm",value:f,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Plant Code"}),e.jsx("input",{className:"form-control form-control-sm",value:N,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Dock Code"}),e.jsx("input",{className:"form-control form-control-sm",value:g,readOnly:!0})]})]})]})}function Jt(s){const{config:a,pseOpen:o,setPseOpen:t,packingPlantCurr:n,setPackingPlantCurr:m,packingPlantNext:j,setPackingPlantNext:h,vanningPlantCurr:r,setVanningPlantCurr:u,vanningPlantNext:i,setVanningPlantNext:p,orderPatternCurr:c,setOrderPatternCurr:f,orderPatternNext:y,setOrderPatternNext:N,category:T,setCategory:g,katashiki:b,setKatashiki:C,importerLineProcess:v,setImporterLineProcess:E,caseCode:A,setCaseCode:F,boxNumber:P,setBoxNumber:I,renban:S,setRenban:K,renbanEff:k,setRenbanEff:L,packingProcessBoxing:M,setPackingProcessBoxing:H,packingProcessStacking:J,setPackingProcessStacking:se,pseOuterRows:W,setPseOuterRows:Y,newPseOuter:R,setNewPseOuter:Q,openMaterialPicker:D}=s,[X,$]=l.useState(!1),[U,O]=l.useState(null),B=()=>{if(!R.materialNo.trim()){alert("Enter Pack Material No");return}Y(x=>[...x,{...R}]),Q({materialNo:"",suffix:"",name:"",supplier:"",L:"",W:"",H:"",wtPerPc:"",qty:"",totalWt:""}),$(!1)},z=x=>{Y(w=>w.filter((V,_)=>_!==x))},q=(x,w,V)=>{const _=W.map((G,Z)=>{if(Z===x){const te={...G,[w]:V};return(w==="qty"||w==="wtPerPc")&&(te.totalWt=(parseFloat(te.qty)||0)*(parseFloat(te.wtPerPc)||0)),te}return G});Y(_)},d=(x,w)=>{const V=U===w;return e.jsxs("tr",{children:[e.jsx("td",{children:V?e.jsxs("div",{className:"input-group",children:[e.jsx("input",{value:x.materialNo,onChange:_=>q(w,"materialNo",_.target.value),className:"form-control form-control-sm"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",onClick:()=>D(w===0?"Module":"outer",w),children:e.jsx("i",{className:"fas fa-search"})})})]}):x.materialNo}),e.jsx("td",{children:V?e.jsx("input",{readOnly:!0,value:x.suffix,onChange:_=>q(w,"suffix",_.target.value),className:"form-control form-control-sm"}):x.suffix}),e.jsx("td",{children:x.name}),e.jsx("td",{children:x.supplier}),e.jsx("td",{children:V?e.jsx("input",{readOnly:!0,value:x.L,onChange:_=>q(w,"L",_.target.value),className:"form-control form-control-sm"}):x.L}),e.jsx("td",{children:V?e.jsx("input",{readOnly:!0,value:x.W,onChange:_=>q(w,"W",_.target.value),className:"form-control form-control-sm"}):x.W}),e.jsx("td",{children:V?e.jsx("input",{readOnly:!0,value:x.H,onChange:_=>q(w,"H",_.target.value),className:"form-control form-control-sm"}):x.H}),e.jsx("td",{children:V?e.jsx("input",{value:x.wtPerPc,onChange:_=>q(w,"wtPerPc",_.target.value),className:"form-control form-control-sm"}):x.wtPerPc}),e.jsx("td",{children:V?e.jsx("input",{value:x.qty,onChange:_=>q(w,"qty",_.target.value),className:"form-control form-control-sm"}):x.qty}),e.jsx("td",{children:x.totalWt}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-link",children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-link",children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:V?e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>O(null),disabled:!a.editable,children:"Save"}):e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:_=>{_.stopPropagation(),z(w)},disabled:!a.editable,children:e.jsx("i",{className:"fas fa-trash"})})})]},w)};return e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>t(x=>!x),children:[e.jsx("i",{className:`fas ${o?"fa-chevron-down":"fa-chevron-right"} mr-2`}),e.jsx("strong",{children:"PSE Information"})]}),o&&e.jsx("div",{className:"card card-body mt-2",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Plant (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:n,onChange:x=>m(x.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Packing Plant (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:j,onChange:x=>h(x.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Vanning Plant (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:x=>u(x.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Vanning Plant (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:i,onChange:x=>p(x.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Order Pattern (Curr)"}),e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:x=>f(x.target.value),disabled:!a.editable}),e.jsx("label",{className:"small mb-1 mt-2",children:"Order Pattern (Next)"}),e.jsx("input",{className:"form-control form-control-sm",value:y,onChange:x=>N(x.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsx("label",{className:"small mb-1",children:"Category"}),e.jsxs("select",{className:"form-control form-control-sm",value:T,onChange:x=>g(x.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"Trim",children:"Trim"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"col-12 mt-2",children:[e.jsx("label",{className:"small mb-1",children:"Katashiki (AD/AU/AF/AX)"}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"col",children:e.jsx("input",{className:"form-control form-control-sm",placeholder:"AD",value:b.AD,onChange:x=>C(w=>({...w,AD:x.target.value})),disabled:!a.editable})}),e.jsx("div",{className:"col",children:e.jsx("input",{className:"form-control form-control-sm",placeholder:"AU",value:b.AU,onChange:x=>C(w=>({...w,AU:x.target.value})),disabled:!a.editable})}),e.jsx("div",{className:"col",children:e.jsx("input",{className:"form-control form-control-sm",placeholder:"AF",value:b.AF,onChange:x=>C(w=>({...w,AF:x.target.value})),disabled:!a.editable})}),e.jsx("div",{className:"col",children:e.jsx("input",{className:"form-control form-control-sm",placeholder:"AX",value:b.AX,onChange:x=>C(w=>({...w,AX:x.target.value})),disabled:!a.editable})})]})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Importer Line Process"}),e.jsx("input",{className:"form-control form-control-sm",value:v,onChange:x=>E(x.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Case Code"}),e.jsx("input",{className:"form-control form-control-sm",value:A,onChange:x=>F(x.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Box Number"}),e.jsx("input",{className:"form-control form-control-sm",value:P,onChange:x=>I(x.target.value),disabled:!a.editable})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Renban"}),e.jsx("input",{className:"form-control form-control-sm",value:S,onChange:x=>K(x.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Renban Eff"}),e.jsx("input",{className:"form-control form-control-sm",value:k,onChange:x=>L(x.target.value),disabled:!a.editable})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Process - Boxing"}),e.jsxs("select",{className:"form-control form-control-sm",value:M,onChange:x=>H(x.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"SUPPLIER",children:"SUPPLIER"})]})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Packing Process - Stacking"}),e.jsxs("select",{className:"form-control form-control-sm",value:J,onChange:x=>se(x.target.value),disabled:!a.editable,children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"TMMIN",children:"TMMIN"})]})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"small mb-1",children:"OUTER (Pack Material)"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{O(null),$(!0)},disabled:X||!a.editable,children:"Add"})})]}),e.jsx("div",{className:"table-responsive mt-2",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 small",children:[e.jsx("thead",{style:{backgroundColor:"#cfcfcfff"},children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{style:{width:30},children:"No"}),e.jsx("th",{style:{width:120},children:"Pack Material No"}),e.jsx("th",{style:{width:40},children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{width:60},children:"L"}),e.jsx("th",{style:{width:60},children:"W"}),e.jsx("th",{style:{width:60},children:"H"}),e.jsx("th",{style:{width:60},children:"Wt/pc"}),e.jsx("th",{style:{width:60},children:"Qty"}),e.jsx("th",{style:{width:80},children:"Total Wt"}),e.jsx("th",{style:{width:10},children:"msds"}),e.jsx("th",{style:{width:10},children:"draw"}),e.jsx("th",{style:{width:80},children:"Action"})]})}),e.jsxs("tbody",{children:[W.length===0&&!X?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-3",children:"No Data Found"})}):W.map(d),X&&e.jsxs("tr",{children:[e.jsx("td",{children:"+"}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:R.materialNo,onChange:x=>Q(w=>({...w,materialNo:x.target.value}))}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>D("Outer","new"),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:R.suffix,onChange:x=>Q(w=>({...w,suffix:x.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:R.name})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:R.supplier})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:R.L,onChange:x=>Q(w=>({...w,L:x.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:R.W,onChange:x=>Q(w=>({...w,W:x.target.value}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:R.H,onChange:x=>Q(w=>({...w,H:x.target.value}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:R.wtPerPc,onChange:x=>Q(w=>({...w,wtPerPc:x.target.value,totalWt:(parseFloat(x.target.value)||0)*(parseFloat(w.qty)||0)}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:R.qty,onChange:x=>Q(w=>({...w,qty:x.target.value,totalWt:(parseFloat(x.target.value)||0)*(parseFloat(w.wtPerPc)||0)}))})}),e.jsx("td",{children:e.jsx("input",{readOnly:!0,className:"form-control form-control-sm",value:R.totalWt})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:B,disabled:!a.editable,children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>$(!1),disabled:!a.editable,children:"Cancel"})]})})]})]})]})})]})]})})]})})}const Qt=de.memo(({file:s,index:a,onRemove:o})=>{const[t,n]=l.useState(null);l.useEffect(()=>{if(!s)return;const j=URL.createObjectURL(s);return n(j),()=>URL.revokeObjectURL(j)},[s]);const m=l.useCallback(()=>{o(a)},[a,o]);return t?e.jsxs("div",{style:{position:"relative",display:"inline-block",marginRight:"10px",marginBottom:"10px"},children:[e.jsx("img",{src:t,alt:s.name,className:"border",style:{width:"100px",height:"100px",objectFit:"cover"}}),e.jsx("button",{onClick:m,className:"btn btn-danger btn-sm",style:{position:"absolute",top:"0",right:"0",borderRadius:"50%",width:"24px",height:"24px",lineHeight:"1",padding:"0"},children:"×"})]}):null}),Zt=({imagesPart:s,setImagesPart:a,imagesPacking:o,setImagesPacking:t,imagesOuter:n,setImagesOuter:m,imagesQkp:j,setImagesQkp:h,imagesBkp:r,setImagesBkp:u,imagesOpen:i,setImagesOpen:p})=>{const c=T=>g=>{const b=g.target.value;T(C=>({...C,caption:b}))},f=T=>g=>{const b=Array.from(g.target.files);b.length>0&&T(C=>({...C,files:[...C.files,...b]}))},y=T=>g=>{T(b=>{const C=[...b.files];return C.splice(g,1),{...b,files:C}})},N=[{id:"part",title:"Part Images",state:s,setter:a},{id:"packing",title:"Packing Images",state:o,setter:t},{id:"outer",title:"Outer Images",state:n,setter:m},{id:"qkp",title:"QKP Images",state:j,setter:h},{id:"bkp",title:"BKP Images",state:r,setter:u}];return e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>p(T=>!T),"aria-expanded":i,"aria-controls":"imagesSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${i?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Images"]})}),i&&e.jsx("div",{id:"imagesSection",children:e.jsx("div",{className:"row mt-2",children:N.map(({id:T,title:g,state:b,setter:C})=>e.jsxs("div",{className:"col-md-6 mt-2",children:[e.jsx("label",{className:"small",children:g}),e.jsxs("div",{className:"border p-2 mb-2",children:[e.jsx("textarea",{value:b.caption,onChange:c(C),placeholder:"Enter a caption...",rows:"2",className:"form-control mb-2"}),e.jsx("div",{className:"d-flex flex-wrap",children:b.files.length===0?e.jsx("div",{className:"text-muted small",children:"No images"}):b.files.map((v,E)=>e.jsx(Qt,{file:v,index:E,onRemove:y(C)},`${v.name}-${v.lastModified}-${E}`))}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:`${T}-image-input`,className:"btn btn-sm btn-outline-primary",children:"+ Add"}),e.jsx("input",{type:"file",id:`${T}-image-input`,accept:".jpg,.jpeg,.png",multiple:!0,style:{display:"none"},onChange:f(C)})]})]})]},T))})})]})};function Xt(s){const{config:a,innerRows:o,setInnerRows:t,newInner:n,setNewInner:m,handleRemoveInnerRow:j,openMaterialPicker:h,materials:r}=s,[u,i]=l.useState(!1),[p,c]=l.useState(null),f=l.useRef(null);l.useEffect(()=>{p!==null&&f.current&&f.current.focus()},[p]);const y=()=>{if(!n.materialNo.trim()){alert("Enter Pack Material No");return}t(g=>[...g,{...n}]),m({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})},N=(g,b,C)=>{const v=o.map((E,A)=>A===g?{...E,[b]:C}:E);t(v)},T=(g,b)=>{const C=r.find(v=>v.materialNo===g);if(console.log("Blurred ->>"),C){console.log("Material FOund -->",JSON.stringify(C));const v={name:C.materialName,supplierName:C.supplier.supplier_name,L:C.dimension_inner_length,W:C.dimension_inner_width,H:C.dimension_inner_height};if(b==="new")console.log("New Inner -->",n),m(E=>({...E,...v}));else{const E=o.map((A,F)=>F===b?{...A,...v}:A);t(E)}}};return e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"small mb-1",children:"INNER (Pack Material)"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{c(null),i(!0)},disabled:u||!a.editable,children:"Add"})})]}),e.jsx("div",{className:"table-responsive mt-2",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 small",children:[e.jsx("thead",{style:{backgroundColor:"#cfcfcfff"},children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{style:{width:30},children:"No"}),e.jsx("th",{style:{width:120},children:"Pack Material No"}),e.jsx("th",{style:{width:40},children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{style:{width:60},children:"L"}),e.jsx("th",{style:{width:60},children:"W"}),e.jsx("th",{style:{width:60},children:"H"}),e.jsx("th",{style:{width:60},children:"Wt/pc"}),e.jsx("th",{style:{width:60},children:"Qty"}),e.jsx("th",{style:{width:80},children:"Total Wt"}),e.jsx("th",{style:{width:10},children:"msds"}),e.jsx("th",{style:{width:10},children:"draw"}),e.jsx("th",{style:{width:80},children:"Action"})]})}),e.jsxs("tbody",{children:[o.length===0&&!u?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-3",children:"No Data Found"})}):o.map((g,b)=>p===b?e.jsxs("tr",{children:[e.jsx("td",{children:b+1}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{ref:f,value:g.materialNo,onChange:v=>N(b,"materialNo",v.target.value),onBlur:v=>T(v.target.value,b),className:"form-control form-control-sm",disabled:!a.editable}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>h(b===0?"box":"inner",b),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{value:g.suffix,onChange:v=>N(b,"suffix",v.target.value),readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:g.name,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:g.supplierName,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:g.L,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:g.W,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:g.H,readOnly:!0,className:"form-control form-control-sm"})}),e.jsx("td",{children:e.jsx("input",{value:g.wtPerPc,onChange:v=>N(b,"wtPerPc",v.target.value),className:"form-control form-control-sm",disabled:!a.editable})}),e.jsx("td",{children:e.jsx("input",{value:g.qty,onChange:v=>N(b,"qty",v.target.value),className:"form-control form-control-sm",disabled:!a.editable})}),e.jsx("td",{children:(Number(g.wtPerPc||0)*Number(g.qty||0)).toFixed(2)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show MSDS doc for "+g.materialNo),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show Drawing doc for "+g.materialNo),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>c(null),disabled:!a.editable,children:"Save"})})]},b):e.jsxs("tr",{onClick:()=>{a.editable&&(c(b),i(!1))},children:[e.jsx("td",{children:b+1}),e.jsx("td",{children:g.materialNo}),e.jsx("td",{children:g.suffix}),e.jsx("td",{children:g.name}),e.jsx("td",{children:g.supplierName}),e.jsx("td",{children:g.L}),e.jsx("td",{children:g.W}),e.jsx("td",{children:g.H}),e.jsx("td",{children:g.wtPerPc}),e.jsx("td",{children:g.qty}),e.jsx("td",{children:(Number(g.wtPerPc||0)*Number(g.qty||0)).toFixed(2)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:v=>{v.stopPropagation(),alert("Show MSDS doc for "+g.materialNo)},children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:v=>{v.stopPropagation(),alert("Show Drawing doc for "+g.materialNo)},children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:v=>{v.stopPropagation(),j(b)},disabled:!a.editable,children:e.jsx("i",{className:"fas fa-trash"})})})]},b)),u&&e.jsxs("tr",{children:[e.jsx("td",{children:"+"}),e.jsx("td",{children:e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:n.materialNo,onChange:g=>m(b=>({...b,materialNo:g.target.value})),onBlur:g=>T(g.target.value,"new")}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>h(o.length===0?"box":"inner"),disabled:!a.editable,children:"..."})})]})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.suffix,onChange:g=>m(b=>({...b,suffix:g.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.name,onChange:g=>m(b=>({...b,name:g.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.supplierName,onChange:g=>m(b=>({...b,supplierName:g.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.L,onChange:g=>m(b=>({...b,L:g.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.W,onChange:g=>m(b=>({...b,W:g.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.H,onChange:g=>m(b=>({...b,H:g.target.value})),readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.wtPerPc,onChange:g=>m(b=>({...b,wtPerPc:g.target.value}))})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:n.qty,onChange:g=>m(b=>({...b,qty:g.target.value}))})}),e.jsx("td",{children:"-"}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show MSDS doc for new material"),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>alert("Show Drawing doc for new material"),children:e.jsx("i",{className:"fas fa-file-alt"})})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:y,disabled:!a.editable,children:"Add"}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>{m({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),i(!1)},disabled:!a.editable,children:"Cancel"})]})})]})]})]})})]})})}function el(s){const{packingOpen:a,setPackingOpen:o}=s;return e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>o(t=>!t),"aria-expanded":a,"aria-controls":"packingSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${a?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Packing"]})}),a&&e.jsx("div",{id:"packingSection",children:e.jsx(Xt,{...s})})]})})}function sl(s){const{logisticOpen:a,setLogisticOpen:o,tmmindDestDockCode:t,setTmmindDestDockCode:n,logisticRemark:m,setLogisticRemark:j,processType:h,setProcessType:r,addressRack:u,setAddressRack:i}=s;return e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-link p-0 section-header",onClick:()=>o(p=>!p),"aria-expanded":a,"aria-controls":"logisticSection",children:e.jsxs("strong",{children:[e.jsx("i",{className:`fas ${a?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"Logistic Information"]})}),a&&e.jsxs("div",{id:"logisticSection",className:"mt-2",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"TMMIN Dest Dock Code"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{className:"form-control form-control-sm",value:t,onChange:p=>n(p.target.value),placeholder:"Dock Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Address Rack"}),e.jsx("input",{className:"form-control form-control-sm",value:u,onChange:p=>i(p.target.value),placeholder:"Address Rack"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Remark"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:3,value:m,onChange:p=>j(p.target.value),placeholder:"Remark"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Process Type"}),e.jsx("div",{children:["N","W","X","Y"].map(p=>e.jsxs("label",{className:"mr-3",children:[e.jsx("input",{type:"radio",name:"processType",value:p,checked:h===p,onChange:()=>r(p)})," ",p]},p))})]})]})]})}const tl=s=>({cpsNo:s.cpsNo,refCpsNo:s.refCpsNo,issueDate:s.issueDate,effectiveDate:s.effectiveDate,cfcPjtCode:s.cfcPjtCode,model:s.model,partNo:s.partNo,partName:s.partName,supplier:s.supplier,plantCode:s.plantCode,dockCode:s.dockCode,pseInfo:{packingPlantCurr:s.pseInfo.packingPlantCurr,packingPlantNext:s.pseInfo.packingPlantNext,vanningPlantCurr:s.pseInfo.vanningPlantCurr,vanningPlantNext:s.pseInfo.vanningPlantNext,orderPatternCurr:s.pseInfo.orderPatternCurr,orderPatternNext:s.pseInfo.orderPatternNext,category:s.pseInfo.category,katashiki:s.pseInfo.katashiki,importerLineProcess:s.pseInfo.importerLineProcess,caseCode:s.pseInfo.caseCode,boxNumber:s.pseInfo.boxNumber,renban:s.pseInfo.renban,renbanEff:s.pseInfo.renbanEff,packingProcessBoxing:s.pseInfo.packingProcessBoxing,packingProcessStacking:s.pseInfo.packingProcessStacking},images:{part:s.images.part,packing:s.images.packing,outer:s.images.outer,qkp:s.images.qkp,bkp:s.images.bkp},packing:{outerModuleType:s.packing.outerModuleType,outerDimension:s.packing.outerDimension,innerVolume:s.packing.innerVolume,outerVolume:s.packing.outerVolume,innerRows:s.packing.innerRows},notes:s.notes,logistic:{tmmindDestDockCode:s.logistic.tmmindDestDockCode,logisticRemark:s.logistic.logisticRemark,processType:s.logistic.processType,addressRack:s.logistic.addressRack}}),ll=s=>{s.setCpsNo(""),s.setRefCpsNo(""),s.setIssueDate(""),s.setEffectiveDate(""),s.setCfcPjtCode(""),s.setModel(""),s.setPartNo(""),s.setPartName(""),s.setSupplier(""),s.setPlantCode(""),s.setDockCode(""),s.setPseOpen(!1),s.setPackingPlantCurr(""),s.setPackingPlantNext(""),s.setVanningPlantCurr(""),s.setVanningPlantNext(""),s.setOrderPatternCurr(""),s.setOrderPatternNext(""),s.setCategory(""),s.setKatashiki({AD:"",AU:"",AF:"",AX:""}),s.setImporterLineProcess(""),s.setCaseCode(""),s.setBoxNumber(""),s.setRenban(""),s.setRenbanEff(""),s.setPackingProcessBoxing(""),s.setPackingProcessStacking(""),s.setImagesPart({caption:"",files:[]}),s.setImagesPacking({caption:"",files:[]}),s.setImagesOuter({caption:"",files:[]}),s.setImagesQkp({caption:"",files:[]}),s.setImagesBkp({caption:"",files:[]}),s.setOuterModuleType(""),s.setOuterMaterialName(""),s.setOuterDimension({L:"",W:"",H:""}),s.setInnerVolume(""),s.setOuterVolume(""),s.setInnerRows([]),s.setNotes(""),s.setNewInner({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),s.setLogisticOpen(!0),s.setTmmindDestDockCode(""),s.setLogisticRemark(""),s.setProcessType("N"),s.setAddressRack("")};function al({show:s,onClose:a,onSave:o,editData:t,config:n}){const[m,j]=l.useState("general"),[h,r]=l.useState({current:{},comparisons:[]}),[u,i]=l.useState([]),[p,c]=l.useState(""),[f,y]=l.useState(""),[N,T]=l.useState(""),[g,b]=l.useState(""),[C,v]=l.useState(""),[E,A]=l.useState(""),[F,P]=l.useState(""),[I,S]=l.useState(""),[K,k]=l.useState(""),[L,M]=l.useState(""),[H,J]=l.useState(""),[se,W]=l.useState(!1),[Y,R]=l.useState(""),[Q,D]=l.useState(""),[X,$]=l.useState(""),[U,O]=l.useState(""),[B,z]=l.useState(""),[q,d]=l.useState(""),[x,w]=l.useState(""),[V,_]=l.useState({AD:"",AU:"",AF:"",AX:""}),[G,Z]=l.useState(""),[te,re]=l.useState(""),[me,he]=l.useState(""),[ye,pe]=l.useState(""),[Ie,Ae]=l.useState(""),[ns,Me]=l.useState(""),[rs,Te]=l.useState(""),[Ye,Se]=l.useState([]),[qs,ze]=l.useState({materialNo:"",suffix:"",name:"",supplier:"",L:"",W:"",H:"",wtPerPc:"",qty:"",totalWt:""}),[os,Le]=l.useState({caption:"",files:[]}),[is,De]=l.useState({caption:"",files:[]}),[cs,Ee]=l.useState({caption:"",files:[]}),[ds,Re]=l.useState({caption:"",files:[]}),[ms,Oe]=l.useState({caption:"",files:[]}),[$s,Je]=l.useState(""),[us,ve]=l.useState([]),[hs,Fe]=l.useState(""),[We,we]=l.useState({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),[Ks,Vs]=l.useState(!0),[Gs,Ys]=l.useState(!0),[zs,xs]=l.useState(!1),[Js,Qe]=l.useState(!1),[Qs,Ze]=l.useState(!1),[Zs,Xe]=l.useState(!1),[Be,Xs]=l.useState("all"),[et,st]=l.useState(null),[tt,es]=l.useState(!0),[ps,He]=l.useState(""),[js,Ue]=l.useState(""),[fs,qe]=l.useState("N"),[Ns,$e]=l.useState("");l.useEffect(()=>{fetch("/cpsComparison.json").then(ee=>ee.json()).then(ee=>r(ee)),fetch("/materials.json").then(ee=>ee.json()).then(ee=>i(ee))},[]);const lt=h.current,at=h.comparisons;l.useEffect(()=>{s&&(t?(c(t.cpsNo||""),y(t.refCpsNo||""),T(t.issueDate||""),b(t.effectiveDate||""),v(t.cfcPjtCode||""),A(t.model||""),P(t.partNo||""),S(t.partName||""),k(t.supplier||""),M(t.plantCode||""),J(t.dockCode||""),t.pseInfo&&(R(t.pseInfo.packingPlantCurr||""),D(t.pseInfo.packingPlantNext||""),$(t.pseInfo.vanningPlantCurr||""),O(t.pseInfo.vanningPlantNext||""),z(t.pseInfo.orderPatternCurr||""),d(t.pseInfo.orderPatternNext||""),w(t.pseInfo.category||""),_(t.pseInfo.katashiki||{AD:"",AU:"",AF:"",AX:""}),Z(t.pseInfo.importerLineProcess||""),re(t.pseInfo.caseCode||""),he(t.pseInfo.boxNumber||""),pe(t.pseInfo.renban||""),Ae(t.pseInfo.renbanEff||""),Me(t.pseInfo.packingProcessBoxing||""),Te(t.pseInfo.packingProcessStacking||""),Se(t.pseInfo.outerRows||[])),t.images&&(Le(t.images.part||{caption:"",files:[]}),De(t.images.packing||{caption:"",files:[]}),Ee(t.images.outer||{caption:"",files:[]}),Re(t.images.qkp||{caption:"",files:[]}),Oe(t.images.bkp||{caption:"",files:[]})),t.packing&&(Je(t.packing.innerVolume||""),ve(t.packing.innerRows||[])),Fe(t.notes||""),t.logistic&&(He(t.logistic.tmmindDestDockCode||""),Ue(t.logistic.logisticRemark||""),qe(t.logistic.processType||"N"),$e(t.logistic.addressRack||""))):(c(""),y(""),T(""),b(""),v(""),A(""),P(""),S(""),k(""),M(""),J(""),W(!1),R(""),D(""),$(""),O(""),z(""),d(""),w(""),_({AD:"",AU:"",AF:"",AX:""}),Z(""),re(""),he(""),pe(""),Ae(""),Me(""),Te(""),Se([]),Le({caption:"",files:[]}),De({caption:"",files:[]}),Ee({caption:"",files:[]}),Re({caption:"",files:[]}),Oe({caption:"",files:[]}),Je(""),ve([]),Fe(""),we({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),es(!0),He(""),Ue(""),qe("N"),$e("")))},[s,t]);function nt(){if(!We.materialNo.trim()){alert("Enter Pack Material No");return}ve(ee=>[...ee,{...We}]),we({materialNo:"",suffix:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})}function rt(ee){ve(xe=>xe.filter((ss,be)=>be!==ee))}function ot(ee){ee&&(P(ee.partNo),S(ee.partName),k(ee.supplierName)),Qe(!1)}const it=()=>{const ee=tl({cpsNo:p,refCpsNo:f,issueDate:N,effectiveDate:g,cfcPjtCode:C,model:E,partNo:F,partName:I,supplier:K,plantCode:L,dockCode:H,pseInfo:{packingPlantCurr:Y,packingPlantNext:Q,vanningPlantCurr:X,vanningPlantNext:U,orderPatternCurr:B,orderPatternNext:q,category:x,katashiki:V,importerLineProcess:G,caseCode:te,boxNumber:me,renban:ye,renbanEff:Ie,packingProcessBoxing:ns,packingProcessStacking:rs,outerRows:Ye},images:{part:os,packing:is,outer:cs,qkp:ds,bkp:ms},packing:{innerVolume:$s,innerRows:us},notes:hs,logistic:{tmmindDestDockCode:ps,logisticRemark:js,processType:fs,addressRack:Ns}});o(ee),bs()},bs=()=>{ll({setCpsNo:c,setRefCpsNo:y,setIssueDate:T,setEffectiveDate:b,setCfcPjtCode:v,setModel:A,setPartNo:P,setPartName:S,setSupplier:k,setPlantCode:M,setDockCode:J,setPseOpen:W,setPackingPlantCurr:R,setPackingPlantNext:D,setVanningPlantCurr:$,setVanningPlantNext:O,setOrderPatternCurr:z,setOrderPatternNext:d,setCategory:w,setKatashiki:_,setImporterLineProcess:Z,setCaseCode:re,setBoxNumber:he,setRenban:pe,setRenbanEff:Ae,setPackingProcessBoxing:Me,setPackingProcessStacking:Te,setPseOuterRows:Se,setNewPseOuter:ze,setImagesPart:Le,setImagesPacking:De,setImagesOuter:Ee,setImagesQkp:Re,setImagesBkp:Oe,setInnerVolume:Je,setInnerRows:ve,setNotes:Fe,setNewInner:we,setLogisticOpen:es,setTmmindDestDockCode:He,setLogisticRemark:Ue,setProcessType:qe,setAddressRack:$e}),a()};function ct(ee){ee&&(Array.isArray(ee)?A(ee.map(xe=>xe.code).join(", ")):A(ee.code||"")),Ze(!1)}function dt(ee){if(ee){const xe=et;if(Be==="outer"||Be==="module"){const ss={materialNo:ee.materialNo,name:ee.materialName,supplier:ee.supplierName,L:ee.dimension_length,W:ee.dimension_width,H:ee.dimension_height,wtPerPc:ee.unitWeight};if(xe==="new")ze(be=>({...be,...ss}));else{const be=[...Ye];be[xe]={...be[xe],...ss},Se(be)}}else Be==="inner"&&we({...We,materialNo:ee.materialNo,name:ee.materialName,L:ee.dimension_length,W:ee.dimension_width,H:ee.dimension_height,wtPerPc:ee.unitWeight})}Xe(!1)}const mt=()=>Ze(!0),gs=(ee,xe=null)=>{Xs(ee),st(xe),Xe(!0)};return s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:ee=>{ee.target===ee.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1200},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:t?"CPS - Edit":"CPS - New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[n.general.visible&&e.jsxs(e.Fragment,{children:[e.jsx(zt,{config:n.general,cpsNo:p,setCpsNo:c,refCpsNo:f,setRefCpsNo:y,cfcPjtCode:C,setCfcPjtCode:v,model:E,setModel:A,partNo:F,setPartNo:P,partName:I,setPartName:S,supplier:K,setSupplier:k,plantCode:L,setPlantCode:M,dockCode:H,setDockCode:J,openPartPicker:()=>Qe(!0),openModelPicker:mt,setComparisonOpen:xs}),n.pse.visible&&e.jsx("hr",{})]}),n.pse.visible&&e.jsxs(e.Fragment,{children:[e.jsx(Jt,{config:n.pse,pseOpen:se,setPseOpen:W,packingPlantCurr:Y,setPackingPlantCurr:R,packingPlantNext:Q,setPackingPlantNext:D,vanningPlantCurr:X,setVanningPlantCurr:$,vanningPlantNext:U,setVanningPlantNext:O,orderPatternCurr:B,setOrderPatternCurr:z,orderPatternNext:q,setOrderPatternNext:d,category:x,setCategory:w,katashiki:V,setKatashiki:_,importerLineProcess:G,setImporterLineProcess:Z,caseCode:te,setCaseCode:re,boxNumber:me,setBoxNumber:he,renban:ye,setRenban:pe,renbanEff:Ie,setRenbanEff:Ae,packingProcessBoxing:ns,setPackingProcessBoxing:Me,packingProcessStacking:rs,setPackingProcessStacking:Te,pseOuterRows:Ye,setPseOuterRows:Se,newPseOuter:qs,setNewPseOuter:ze,openMaterialPicker:gs}),n.images.visible&&e.jsx("hr",{})]}),n.images.visible&&e.jsxs(e.Fragment,{children:[e.jsx(Zt,{config:n.images,imagesOpen:Ks,setImagesOpen:Vs,imagesPart:os,setImagesPart:Le,imagesPacking:is,setImagesPacking:De,imagesOuter:cs,setImagesOuter:Ee,imagesQkp:ds,setImagesQkp:Re,imagesBkp:ms,setImagesBkp:Oe}),n.packing.visible&&e.jsx("hr",{})]}),n.packing.visible&&e.jsxs(e.Fragment,{children:[e.jsx(el,{config:n.packing,materials:u,packingOpen:Gs,setPackingOpen:Ys,innerRows:us,setInnerRows:ve,newInner:We,setNewInner:we,handleAddInnerRow:nt,handleRemoveInnerRow:rt,openMaterialPicker:gs}),n.logistic.visible&&e.jsx("hr",{})]}),n.logistic.visible&&e.jsx(sl,{config:n.logistic,logisticOpen:tt,setLogisticOpen:es,tmmindDestDockCode:ps,setTmmindDestDockCode:He,logisticRemark:js,setLogisticRemark:Ue,processType:fs,setProcessType:qe,addressRack:Ns,setAddressRack:$e}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Note"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:hs,onChange:ee=>Fe(ee.target.value)})]})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-secondary",onClick:bs,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary ml-2",onClick:it,children:"Save"}),e.jsx("button",{className:"btn btn-success ml-2",onClick:()=>alert("Submit action to be implemented."),children:"Submit"})]})]}),e.jsx("style",{children:`
          .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
          .np-modal { width: 100%; max-height: 95vh; overflow: auto; z-index: 2001; }
          .table-sm td, .table-sm th { vertical-align: middle; }
        `})]}),e.jsx(Gt,{isOpen:zs,onClose:()=>xs(!1),parts:at,current:lt,extraClass:"multi-parts-comparison"}),e.jsx(Ce,{show:Js,onClose:()=>Qe(!1),onSelect:ot,zIndex:4e3,mode:"single"}),e.jsx(as,{show:Qs,onClose:()=>Ze(!1),onAdd:ct,selectionMode:"single"}),e.jsx(Yt,{show:Zs,onClose:()=>Xe(!1),onAdd:dt,zIndex:3e3,filter:Be})]}):null}const ys=[{userId:"12345",name:"Rollin Khaider",dept:"PSE",role:"Dept Head"},{userId:"22345",name:"Asep Sumarna",dept:"PPM",role:"Section Head"},{userId:"32345",name:"Khalil Gibran",dept:"PSE",role:"Staff"},{userId:"42345",name:"Jaka T. Mulyo",dept:"PCD",role:"Staff"},{userId:"52345",name:"W.H. Jeanette",dept:"PPM",role:"Staff"}];function nl({show:s=!1,onClose:a,onSelect:o}){const[t,n]=l.useState({userId:"",name:"",dept:"",role:""}),[m,j]=l.useState(null);if(!s)return null;const h=i=>{n({...t,[i.target.name]:i.target.value})},r=()=>n({userId:"",name:"",dept:"",role:""}),u=ys.filter(i=>(!t.userId||i.userId.includes(t.userId))&&(!t.name||i.name.toLowerCase().includes(t.name.toLowerCase()))&&(!t.dept||i.dept.toLowerCase().includes(t.dept.toLowerCase()))&&(!t.role||i.role.toLowerCase().includes(t.role.toLowerCase())));return e.jsxs("div",{className:"np-modal-backdrop",style:{zIndex:3e3},children:[e.jsxs("div",{className:"np-modal card card-outline card-info",style:{maxWidth:600},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0",style:{fontSize:20},children:e.jsx("b",{children:"Select a Person"})}),e.jsx("button",{className:"btn btn-tool ml-auto",onClick:a,children:e.jsx("span",{style:{fontSize:25},children:"×"})})]}),e.jsxs("div",{className:"card-body pb-2",children:[e.jsxs("div",{className:"form-row align-items-end",children:[e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"User Id"}),e.jsx("input",{name:"userId",className:"form-control form-control-sm",value:t.userId,onChange:h})]}),e.jsxs("div",{className:"form-group col-md-3",children:[e.jsx("label",{className:"small mb-1",children:"Name"}),e.jsx("input",{name:"name",className:"form-control form-control-sm",value:t.name,onChange:h})]}),e.jsxs("div",{className:"form-group col-md-2",children:[e.jsx("label",{className:"small mb-1",children:"Dept"}),e.jsx("input",{name:"dept",className:"form-control form-control-sm",value:t.dept,onChange:h})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{className:"small mb-1",children:"Role"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{name:"role",className:"form-control form-control-sm",value:t.role,onChange:h}),e.jsxs("div",{className:"input-group-append",children:[e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:r,children:e.jsx("i",{className:"fas fa-times"})})]})]})]})]}),e.jsx("div",{style:{maxHeight:260,overflowY:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:30}}),e.jsx("th",{children:"User ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Dept"}),e.jsx("th",{children:"Role"})]})}),e.jsx("tbody",{children:u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center text-muted",children:"No Data Found"})}):u.map((i,p)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"radio",checked:m===i.userId,onChange:()=>j(i.userId)})}),e.jsx("td",{children:i.userId}),e.jsx("td",{children:i.name}),e.jsx("td",{children:i.dept}),e.jsx("td",{children:i.role})]},i.userId))})]})})]}),e.jsx("div",{className:"card-footer text-right",children:e.jsxs("button",{className:"btn btn-success",disabled:!m,onClick:()=>{const i=ys.find(p=>p.userId===m);i&&o&&o(i),a&&a()},children:[e.jsx("i",{className:"fas fa-check mr-1"})," Select"]})})]}),e.jsx("style",{children:`
        .np-modal-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.35);
          z-index: 3000;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 1rem;
        }
        .np-modal { width: 100%; z-index: 3001; }
        .table-sm td, .table-sm th { vertical-align: middle; }
      `})]})}const Ge=[{destCode:"301B",code:"TAR",country:"ARGENTINA",company:"Toyota Argentina"},{destCode:"301B",code:"TASA",country:"ARGENTINA",company:"Toyota Argentina S.A."},{destCode:"537B",code:"TSM",country:"AFRIKA",company:"Toyota South Africa Motors"},{destCode:"709B",code:"TKM",country:"INDIA",company:"Toyota Kirloskar Motor"},{destCode:"715B",code:"TMV",country:"VIETNAM",company:"Toyota Motor Vietnam"},{destCode:"717C",code:"IMC",country:"PAKISTAN",company:"Indus Motor Company"},{destCode:"721B",code:"KUO",country:"KUOZUI",company:"Kuozui Motors"},{destCode:"721C",code:"KUO",country:"KUOZUI",company:"Kuozui Motors"},{destCode:"722C",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"722F",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"722B",code:"TMT",country:"THAILAND",company:"Toyota Motor Thailand"},{destCode:"811C",code:"TMP",country:"PHILIPINE",company:"Toyota Motor Philippines"},{destCode:"812B",code:"UMW",country:"MALAYSIA",company:"UMW Toyota Motor"},{destCode:"812K",code:"UMW",country:"MALAYSIA",company:"UMW Toyota Motor"},{destCode:"547A",code:"TEE",country:"MESIR",company:"Toyota Egypt Enterprise"},{destCode:"303B",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"303E",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"303D",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"D55E",code:"TDB",country:"BRAZIL",company:"Toyota do Brasil"},{destCode:"704B",code:"TMY",country:"MYANMAR",company:"Toyota Motor Myanmar"},{destCode:"705A",code:"CAM",country:"CAMBOJA",company:"Cambodia Toyota Motor"},{destCode:"709C",code:"TKAP",country:"INDIA 2",company:"Toyota Kirloskar Auto Parts"},{destCode:"709D",code:"TIEI",country:"INDIA 3",company:"Toyota Industries Engine India"},{destCode:"722S",code:"STM",country:"SIAM THAILAND",company:"Siam Toyota Motor"},{destCode:"811W",code:"TAP",country:"PHILIPINE 2",company:"Toyota Auto Parts Philippines"},{destCode:"807B",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"},{destCode:"807D",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"},{destCode:"807J",code:"TMMIN",country:"INDONESIA",company:"Toyota Motor Manufacturing Indonesia"}],rl=[{id:1,cpsNo:"CPS-2024-001",refCpsNo:"",issueDate:"2024-07-01",effectiveDate:"2024-07-10",dpiNo:"DPI-2024-001",cfcPjtCode:"PJT-A",model:"579W",partNo:"90466T006200",partName:"CLIP, MOULDING",supplier:"Supplier A",plantCode:"TMMIN",dockCode:"D01",pseInfo:{packingPlantCurr:"PLANT-1",packingPlantNext:"PLANT-1",vanningPlantCurr:"VPLANT-A",vanningPlantNext:"VPLANT-A",orderPatternCurr:"A1",orderPatternNext:"A1",category:"CAT-1",katashiki:{AD:"AD1",AU:"AU1",AF:"AF1",AX:"AX1"},importerLineProcess:"ILP-1",caseCode:"CC-001",boxNumber:"B-001",renban:"R-001",renbanEff:"2024-07-10",packingProcessBoxing:"Manual",packingProcessStacking:"Auto"},images:{part:{caption:"Part Image",files:[]},packing:{caption:"Packing Image",files:[]},outer:{caption:"Outer Image",files:[]},qkp:{caption:"QKP Image",files:[]},bkp:{caption:"BKP Image",files:[]}},packing:{outerModuleType:"MOD-A",outerDimension:{L:"100",W:"80",H:"60"},innerVolume:"0.0384",outerVolume:"0.048",innerRows:[{materialNo:"MAT-001",suffix:"S1",name:"Inner Box",parent:"",supplierId:"SUP-001",supplierName:"Supplier Inner",L:"50",W:"40",H:"30",wtPerPc:"0.1",qty:"10"}]},notes:"This is a note for the first CPS.",numParts:5,fromUser:"User A",toUser:"User B",status:"Approved"},{id:2,cpsNo:"CPS-2024-002",refCpsNo:"CPS-2024-001",issueDate:"2024-07-05",effectiveDate:"2024-07-15",dpiNo:"DPI-2024-002",cfcPjtCode:"PJT-B",model:"579W",partNo:"32101BZ10000",partName:"Part B",supplier:"Supplier B",plantCode:"TMMIN",dockCode:"D02",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:8,fromUser:"User C",toUser:"User D",status:"Submitted"},{id:3,cpsNo:"CPS-2024-003",refCpsNo:"",issueDate:"2024-07-12",effectiveDate:"2024-07-20",dpiNo:"DPI-2024-003",cfcPjtCode:"PJT-C",model:"579W",partNo:"90466T006200",partName:"Part C",supplier:"Supplier C",plantCode:"TMMIN",dockCode:"D03",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:3,fromUser:"User E",toUser:"User F",status:"Draft"},{id:4,cpsNo:"CPS-2024-004",refCpsNo:"",issueDate:"2024-07-15",effectiveDate:"2024-07-25",dpiNo:"DPI-2024-004",cfcPjtCode:"PJT-A",model:"579W",partNo:"32101BZ10000",partName:"Part D",supplier:"Supplier D",plantCode:"TMMIN",dockCode:"D04",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:12,fromUser:"User A",toUser:"User G",status:"Rejected"},{id:5,cpsNo:"CPS-2024-005",refCpsNo:"CPS-2024-004",issueDate:"2024-07-20",effectiveDate:"2024-08-01",dpiNo:"DPI-2024-005",cfcPjtCode:"PJT-D",model:"579W",partNo:"90466T006200",partName:"Part E",supplier:"Supplier E",plantCode:"TMMIN",dockCode:"D05",pseInfo:{},images:{},packing:{innerRows:[]},notes:"",numParts:7,fromUser:"User H",toUser:"User I",status:"Approved"}],ol=({onNewCps:s,onUpload:a,onDownload:o,onCreatePsi:t,onCreateEci:n,onComparePcs:m})=>e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:s,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create CPS"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:t,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create PSI"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:n,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create ECI"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-info",onClick:m,children:[e.jsx("i",{className:"fas fa-exchange-alt mr-1"})," Compare PCS"]}),e.jsxs("div",{className:"btn-group ml-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Upload",onClick:a,children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Download Template",onClick:o,children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),il=()=>{const{user:s}=Ne(),o=(()=>{if(s&&s.department&&s.role){const _=Cs[s.department];if(_&&_[s.role])return _[s.role]}return Cs.default})(),[t,n]=l.useState(rl),[m,j]=l.useState([]),[h,r]=l.useState(!1),[u,i]=l.useState(null),[p,c]=l.useState(!1),[f,y]=l.useState(null),[N,T]=l.useState(""),[g,b]=l.useState(""),[C,v]=l.useState(""),[E,A]=l.useState(""),[F,P]=l.useState(""),[I,S]=l.useState(""),[K,k]=l.useState(""),[L,M]=l.useState(""),[H,J]=l.useState(""),[se,W]=l.useState(""),[Y,R]=l.useState(""),[Q,D]=l.useState({currentPage:1,perPage:5}),X=()=>{T(""),b(""),v(""),A(""),P(""),S(""),k(""),M(""),J(""),W(""),R(""),j([])},$=_=>{const G=w,Z=t.filter(te=>(G.cpsNo?te.cpsNo.includes(G.cpsNo):!0)&&(G.refCpsNo?te.refCpsNo.includes(G.refCpsNo):!0)&&(G.model?te.model.toLowerCase().includes(G.model.toLowerCase()):!0)&&(G.partNo?te.partNo.includes(G.partNo):!0)&&(G.cfcPjt?te.cfcPjtCode.includes(G.cfcPjt):!0)&&(G.fromUser?new Date(te.issuedDate)>=new Date(G.fromUser):!0)&&(G.toUser?new Date(te.issuedDate)<=new Date(G.toUser):!0)&&(G.status?te.status===G.status:!0)&&(G.destCode?te.destCode===G.destCode:!0)&&(G.cpsPsiEci?te.docType===G.cpsPsiEci:!0));j(Z),D(te=>({...te,currentPage:1}))},U=_=>{let G;if(u)G=t.map(Z=>Z.id===u.id?{...Z,..._}:Z);else{const Z=t.length>0?Math.max(...t.map(te=>te.id))+1:1;G=[...t,{..._,id:Z}]}n(G),j(G),r(!1),i(null)},O=_=>{i(_),r(!0)},B=()=>{r(!1),i(null)},z=()=>{console.log("Create PSI clicked")},q=()=>{console.log("Create ECI clicked")},d=()=>{console.log("Compare PCS clicked")},x=_=>{y(_),c(!0)},w={cpsNo:N,refCpsNo:g,model:C,partNo:E,cfcPjt:F,fromUser:I,toUser:K,status:L,destCode:H,destCountry:se,cpsPsiEci:Y},V={setCpsNo:T,setRefCpsNo:b,setModel:v,setPartNo:A,setCfcPjt:P,setFromUser:S,setToUser:k,setStatus:M,setDestCode:J,setDestCountry:W,setCpsPsiEci:R};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-secondary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"CPS List"})}),e.jsx(ol,{onNewCps:()=>r(!0),onCreatePsi:z,onCreateEci:q,onComparePcs:d})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(Lt,{filters:w,setters:V,onSearch:()=>$(),onClear:X,onPersonPicker:x,destinations:Ge}),e.jsx("hr",{}),e.jsx(Dt,{filteredCps:m,page:Q.currentPage,perPage:Q.perPage,setPage:_=>D(G=>({...G,currentPage:_})),setPerPage:_=>D(G=>({...G,perPage:_})),onEdit:O})]})]}),e.jsx(al,{show:h,onClose:B,onSave:U,editData:u,config:o}),p&&e.jsx(nl,{show:p,onClose:()=>c(!1),onSelect:_=>{c(!1)}})]})};function cl({show:s=!1,onClose:a,initial:o=null,onSave:t,onSubmit:n}){const m={dpiNo:"",refDpiNo:"",issuedDate:"",effectiveDate:"",cfcPjt:"",model:"",from:"",to:"",supplier:"",numParts:0,numCps:0,status:"Draft",notes:""},[j,h]=l.useState(o||m),[r,u]=l.useState([]);if(l.useEffect(()=>(s?(h(o||m),u(o&&o.parts||[]),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s,o]),!s)return null;function i(b){const{name:C,value:v}=b.target;h(E=>({...E,[C]:v}))}function p(){const b={cps:"",partNo:"",suffix:"",name:"",parent:"",supplierCode:"",supplierName:"",L:"",W:"",H:"",wtPc:"",qtyBox:"",totalWt:""};u(C=>[...C,b])}function c(b,C,v){u(E=>E.map((A,F)=>F===b?{...A,[C]:v}:A))}function f(b){u(C=>C.filter((v,E)=>E!==b))}async function y(b){return await new Promise(C=>setTimeout(C,200)),null}async function N(){const b=(j.refDpiNo||"").trim();if(b)try{const C=await y(b);C&&(h(v=>({...v,...C})),u(C.parts||[]))}catch(C){console.error("fetch dpi by ref failed",C)}}function T(b){b&&b.preventDefault&&b.preventDefault();const C={...j,status:"Draft",parts:r};t&&t(C)}function g(b){b&&b.preventDefault&&b.preventDefault();const C={...j,status:"Submitted",parts:r};n&&n(C)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,role:"dialog","aria-modal":"true",children:e.jsx("div",{className:"modal-dialog modal-xl",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("strong",{children:"DPI New"})}),e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:e.jsx("strong",{children:"DPI No."})}),e.jsx("input",{name:"dpiNo",className:"form-control form-control-sm",value:j.dpiNo,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CFC / PJT"}),e.jsx("input",{name:"cfcPjt",className:"form-control form-control-sm",value:j.cfcPjt,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Issued Date"}),e.jsx("input",{type:"date",name:"issuedDate",className:"form-control form-control-sm",value:j.issuedDate,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"From"}),e.jsx("input",{name:"from",className:"form-control form-control-sm",value:j.from,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier"}),e.jsx("input",{name:"supplier",className:"form-control form-control-sm",value:j.supplier,onChange:i})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:e.jsx("strong",{children:"DPI Ref No."})}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{name:"refDpiNo",className:"form-control form-control-sm",value:j.refDpiNo,onChange:i,onBlur:N}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model"}),e.jsx("input",{name:"model",className:"form-control form-control-sm",value:j.model,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Effective Date"}),e.jsx("input",{type:"date",name:"effectiveDate",className:"form-control form-control-sm",value:j.effectiveDate,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"To"}),e.jsx("input",{name:"to",className:"form-control form-control-sm",value:j.to,onChange:i})]})]})]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3 mb-2",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"fas fa-chevron-down"})," ",e.jsx("strong",{children:"Parts"})]}),e.jsx("div",{children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:p,children:[e.jsx("i",{className:"fas fa-plus"})," add"]})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered",children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"CPS"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Parent"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"L"}),e.jsx("th",{children:"W"}),e.jsx("th",{children:"H"}),e.jsx("th",{children:"Wt/pc"}),e.jsx("th",{children:"Qty/box"}),e.jsx("th",{children:"Total Wt"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsx("tbody",{children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center text-muted py-4",children:'No parts. Click "add" to insert a new part.'})}):r.map((b,C)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.cps,onChange:v=>c(C,"cps",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.partNo,onChange:v=>c(C,"partNo",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.suffix,onChange:v=>c(C,"suffix",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.name,onChange:v=>c(C,"name",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.parent,onChange:v=>c(C,"parent",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.supplierCode,onChange:v=>c(C,"supplierCode",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.supplierName,onChange:v=>c(C,"supplierName",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.L,onChange:v=>c(C,"L",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.W,onChange:v=>c(C,"W",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.H,onChange:v=>c(C,"H",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.wtPc,onChange:v=>c(C,"wtPc",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.qtyBox,onChange:v=>c(C,"qtyBox",v.target.value)})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:b.totalWt,onChange:v=>c(C,"totalWt",v.target.value)})}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Edit",children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>f(C),title:"Delete",children:e.jsx("i",{className:"fas fa-trash"})})]})]},C))})]})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{children:e.jsx("strong",{children:"Note :"})}),e.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:j.notes,onChange:b=>h(C=>({...C,notes:b.target.value}))})]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-success mr-2",onClick:T,children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:g,children:"Submit"})]})]})]})})}),e.jsx("div",{className:"modal-backdrop fade show"})]})}function dl(s){console.log("Props received by SearchSection:",s);const{filters:a,setters:o,onSearch:t,onClear:n,onPartSearch:m}=s,{modelCode:j,destCode:h,partNo:r,supplierCode:u,cpsNo:i,implementationPeriod:p}=a||{},{setModelCode:c,setDestCode:f,setPartNo:y,setSupplierCode:N,setCpsNo:T,setImplementationPeriod:g}=o||{},[b,C]=l.useState(""),v=F=>{if(F.key===" "||F.key===","){F.preventDefault();const P=b.trim();P&&y(I=>[...new Set([...I,P])]),C("")}},E=F=>{y(P=>P.filter(I=>I!==F))},A=()=>{console.log("Search button clicked in SearchSection"),t?t():console.error("onSearch prop is NOT DEFINED in SearchSection. Check the parent component.")};return e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Model Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:j||"",onChange:F=>c&&c(F.target.value),placeholder:"Model Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Model Code",onClick:()=>alert("Search Model Code placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Implementation Period"}),e.jsx("div",{className:"input-group input-group-sm",children:e.jsx("input",{className:"form-control form-control-sm",value:p||"",onChange:F=>g&&g(F.target.value),placeholder:"Implementation Period"})})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"4px"},children:[r.map(F=>e.jsxs("span",{className:"badge badge-primary",style:{display:"flex",alignItems:"center",padding:"4px 8px"},children:[F,e.jsx("button",{type:"button",className:"close","aria-label":"Remove",onClick:()=>E(F),style:{color:"white",marginLeft:"8px",textShadow:"none",opacity:1,fontSize:"1rem"},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},F)),e.jsx("input",{style:{border:"none",outline:"none",flex:"1",minWidth:"100px"},value:b,onChange:F=>C(F.target.value),onKeyDown:v,placeholder:"Type and press space"})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part No",onClick:m,children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:h||"",onChange:F=>f&&f(F.target.value),placeholder:"Dest Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Dest Code",onClick:()=>alert("Search Dest Code placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"CPS No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:i||"",onChange:F=>T&&T(F.target.value),placeholder:"CPS No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search CPS No",onClick:()=>alert("Search CPS No placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:u||"",onChange:F=>N&&N(F.target.value),placeholder:"Supplier Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Supplier",onClick:()=>alert("Search Supplier placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})}),e.jsxs("div",{className:"col-12 d-flex",children:[e.jsx("div",{className:"col-md-6"}),e.jsxs("div",{className:"col-md-6 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:A,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:n,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})]})]})})}function Ws({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsx(de.Fragment,{children:o===0?e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Length"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Width"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Height"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Volume Inner"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Volume Outer"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Usage"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Source"})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Mat No"}),e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Usage"})]})},`matLeafHdr-${o}`))})}function Bs({arr:s=[],count:a=1}){return e.jsx(e.Fragment,{children:s.map((o,t)=>e.jsx(de.Fragment,{children:t===0?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:o.material_no||"-"}),e.jsx("td",{children:o.dimension_length||"-"}),e.jsx("td",{children:o.dimension_width||"-"}),e.jsx("td",{children:o.dimension_height||"-"}),e.jsx("td",{children:o.volume_inner||"-"}),e.jsx("td",{children:o.volume_outer||"-"}),e.jsx("td",{children:o.qty||"-"}),e.jsx("td",{children:o.source||"-"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:o.material_no||"+"}),e.jsx("td",{children:o.qty||"+"})]})},`matLeafCell-${t}`))})}function ml({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:o===0?8:2,children:o===0?"Box":`Inner ${o}`},`innerGrp-${o}`))})}const ul=({count:s})=>e.jsx(Ws,{count:s}),hl=({data:s,count:a})=>e.jsx(Bs,{arr:s,count:a});function xl({count:s=1}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr text-nowrap",colSpan:o===0?8:2,children:o===0?"Module":`Outer ${o}`},`outerGrp-${o}`))})}const pl=({count:s})=>e.jsx(Ws,{count:s}),jl=({data:s,count:a})=>e.jsx(Bs,{arr:s,count:a});function fl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("destination")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Destination"}),s.includes("model")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Model"}),s.includes("impl_period")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Impl Period"}),s.includes("cps_no")&&e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"CPS No"})]})}function Nl({mainInfo:s,checked:a}){var j,h,r,u;const{destination:o,model_name:t,impl_period:n,cps_no:m}=s||{};debugger;return e.jsxs(e.Fragment,{children:[a.includes("destination")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((r=(h=(j=s==null?void 0:s.cps)==null?void 0:j.model)==null?void 0:h.destination)==null?void 0:r.code)??"-"}),a.includes("model")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(s==null?void 0:s.model_code)??"-"}),a.includes("impl_period")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(s==null?void 0:s.implementation_period)??"-"}),a.includes("cps_no")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((u=s==null?void 0:s.cps)==null?void 0:u.cps_no)??"-"})]})}function bl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("part_no_part")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part No "}),s.includes("part_name")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Name"}),s.includes("parent_part")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Parent Part"}),s.includes("supplier_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Supplier Code"}),s.includes("supplier_name")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Supplier Name"}),s.includes("part_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part Status"}),s.includes("dtl_part_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Dtl Part Status"}),s.includes("pack_spec_status")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Pack Spec Status"}),s.includes("weight_pc")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Weight/Pc (Kg)"}),s.includes("qty_box")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qty/Box"})]})}function gl({partInfo:s,checked:a}){var o,t;return e.jsxs(e.Fragment,{children:[a.includes("part_no_part")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.part_no??"-"}),a.includes("part_name")&&e.jsx("td",{className:"align-middle",children:s.part_name??"-"}),a.includes("parent_part")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.parent_no??"-"}),a.includes("supplier_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:((o=s.supplier)==null?void 0:o.supplier_code)??"-"}),a.includes("supplier_name")&&e.jsx("td",{className:"align-middle",children:((t=s.supplier)==null?void 0:t.supplier_name)??"-"}),a.includes("part_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.part_status??"-"}),a.includes("dtl_part_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.detail_part_status??"-"}),a.includes("pack_spec_status")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.packing_spec_status??"-"}),a.includes("weight_pc")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.weightPerPc??"-"}),a.includes("qty_box")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:s.qtyPerBox??"-"})]})}function vl({checked:s}){const a=s.includes("packing_plant_current")||s.includes("packing_plant_next"),o=[s.includes("packing_plant_current"),s.includes("packing_plant_next")].filter(Boolean).length,t=s.includes("vanning_plant_current")||s.includes("vanning_plant_next"),n=[s.includes("vanning_plant_current"),s.includes("vanning_plant_next")].filter(Boolean).length,m=s.includes("order_pattern_current")||s.includes("order_pattern_next"),j=[s.includes("order_pattern_current"),s.includes("order_pattern_next")].filter(Boolean).length,h=s.includes("katashiiki_ad")||s.includes("katashiiki_au")||s.includes("katashiiki_af")||s.includes("katashiiki_ax"),r=[s.includes("katashiiki_ad"),s.includes("katashiiki_au"),s.includes("katashiiki_af"),s.includes("katashiiki_ax")].filter(Boolean).length,u=s.includes("packing_process_boxing")||s.includes("packing_process_stacking"),i=[s.includes("packing_process_boxing"),s.includes("packing_process_stacking")].filter(Boolean).length;return e.jsxs(e.Fragment,{children:[a&&e.jsx("th",{colSpan:o,className:"align-middle border text-center tbl-row2-hdr",children:"Packing Plant"}),t&&e.jsx("th",{colSpan:n,className:"align-middle border text-center tbl-row2-hdr",children:"Vanning Plant"}),m&&e.jsx("th",{colSpan:j,className:"align-middle border text-center tbl-row2-hdr",children:"Order Pattern"}),h&&e.jsx("th",{colSpan:r,className:"align-middle border text-center tbl-row2-hdr",children:"Katashiiki"}),s.includes("importer_line_process")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Importer Line Process"}),s.includes("case_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Case code"}),s.includes("box_number")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Box Number"}),s.includes("renban")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Renban"}),s.includes("renban_eff")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr",children:"Renban Eff"}),u&&e.jsx("th",{colSpan:i,className:"align-middle border text-center tbl-row2-hdr",children:"Packing Process"})]})}function Cl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("packing_plant_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("packing_plant_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("vanning_plant_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("vanning_plant_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("order_pattern_current")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Current"}),s.includes("order_pattern_next")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Next"}),s.includes("katashiiki_ad")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"AD"}),s.includes("katashiiki_au")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"AU"}),s.includes("katashiiki_af")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"AF"}),s.includes("katashiiki_ax")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"AX"}),s.includes("packing_process_boxing")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Boxing"}),s.includes("packing_process_stacking")&&e.jsx("th",{className:"align-middle border text-center tbl-row2-hdr",children:"Stacking"})]})}function yl({pseInfo:s,checked:a}){const{packing_plant_curr:o,packing_plant_next:t,vanning_plant_curr:n,vanning_plant_next:m,order_pattern_curr:j,order_pattern_next:h,katashiki:r,importer_line_process:u,case_code:i,box_number:p,renban:c,renban_eff:f,packing_process_boxing:y,packing_process_stacking:N}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("packing_plant_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:o??"-"}),a.includes("packing_plant_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t??"-"}),a.includes("vanning_plant_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:n??"-"}),a.includes("vanning_plant_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:m??"-"}),a.includes("order_pattern_current")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:j??"-"}),a.includes("order_pattern_next")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:h??"-"}),a.includes("katashiiki_ad")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(r==null?void 0:r.AD)??"-"}),a.includes("katashiiki_au")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(r==null?void 0:r.AU)??"-"}),a.includes("katashiiki_af")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(r==null?void 0:r.AF)??"-"}),a.includes("katashiiki_ax")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:(r==null?void 0:r.AX)??"-"}),a.includes("importer_line_process")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:u??"-"}),a.includes("case_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:i??"-"}),a.includes("box_number")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:p??"-"}),a.includes("renban")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:c??"-"}),a.includes("renban_eff")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:f??"-"}),a.includes("packing_process_boxing")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:y??"-"}),a.includes("packing_process_stacking")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:N??"-"})]})}function Sl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("dock_code")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Dock Code"}),s.includes("address")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Address"}),s.includes("process_type")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Process Type"})]})}function wl({logisticInfo:s,checked:a}){const{dock_code:o,address_rack:t,process_type:n}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("dock_code")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:o??"-"}),a.includes("address")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:t??"-"}),a.includes("process_type")&&e.jsx("td",{className:"align-middle",style:{whiteSpace:"nowrap"},children:n??"-"})]})}const Ke={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},content:{position:"relative",background:"#fff",padding:"20px",borderRadius:"5px",maxWidth:"80vw",maxHeight:"80vh"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer"},image:{maxWidth:"calc(80vw - 40px)",maxHeight:"calc(80vh - 40px)"}};function Pl({imageUrl:s,isOpen:a,onClose:o}){return!a||!s?null:e.jsx("div",{style:Ke.overlay,onClick:o,children:e.jsxs("div",{style:Ke.content,onClick:t=>t.stopPropagation(),children:[e.jsx("button",{style:Ke.closeButton,onClick:o,children:"×"}),e.jsx("img",{src:s,alt:"Enlarged view",style:Ke.image})]})})}function kl({checked:s}){return e.jsxs(e.Fragment,{children:[s.includes("part_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Part"}),s.includes("packing_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Packing"}),s.includes("outer_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Outer"}),s.includes("qkp_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Qkp"}),s.includes("bkp_image")&&e.jsx("th",{rowSpan:2,className:"align-middle border text-center tbl-row2-hdr text-nowrap",children:"Bkp"})]})}function Pe({files:s}){const[a,o]=l.useState(!1);if(!s||s.length===0)return"-";const t=s[0],n=()=>o(!0),m=()=>o(!1);return e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t,alt:"thumbnail",style:{width:"50px",height:"auto",cursor:"pointer"},onClick:n}),e.jsx(Pl,{imageUrl:t,isOpen:a,onClose:m})]})}function _l({images:s,checked:a}){const{part:o,packing:t,outer:n,qkp:m,bkp:j}=s||{};return e.jsxs(e.Fragment,{children:[a.includes("part_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:o==null?void 0:o.files})}),a.includes("packing_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:t==null?void 0:t.files})}),a.includes("outer_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:n==null?void 0:n.files})}),a.includes("qkp_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:m==null?void 0:m.files})}),a.includes("bkp_image")&&e.jsx("td",{className:"align-middle",children:e.jsx(Pe,{files:j==null?void 0:j.files})})]})}function Il({rows:s,visibleRows:a,page:o,perPage:t,total:n,totalPages:m,goToPage:j,setPerPage:h,checked:r}){var P,I,S,K,k;const u=((P=a[0])==null?void 0:P.cps)||{},i=((S=(I=u.packing)==null?void 0:I.inner)==null?void 0:S.length)||1,p=((k=(K=u.packing)==null?void 0:K.outer)==null?void 0:k.length)||1,f=["part_no_part","part_name","parent_part","supplier_code","supplier_name","part_status","dtl_part_status","pack_spec_status","weight_pc","qty_box"].filter(L=>r.includes(L)).length,y=f>0,T=["packing_plant_current","packing_plant_next","vanning_plant_current","vanning_plant_next","order_pattern_current","order_pattern_next","katashiiki_ad","katashiiki_au","katashiiki_af","katashiiki_ax","importer_line_process","case_code","box_number","renban","renban_eff","packing_process_boxing","packing_process_stacking"].filter(L=>r.includes(L)).length,g=T>0,C=["dock_code","address","process_type"].filter(L=>r.includes(L)).length,v=C>0,A=["part_image","packing_image","outer_image","qkp_image","bkp_image"].filter(L=>r.includes(L)).length,F=A>0;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2"}),e.jsx("div",{className:"table-responsive mt-2",style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{className:"table table-sm table-bordered mb-0 text-center",style:{tableLayout:"fixed",width:"auto"},children:[e.jsxs("thead",{style:{fontSize:"8pt"},children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:3,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"No"}),e.jsx(fl,{checked:r}),y&&e.jsx("th",{colSpan:f,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Part Information"}),g&&e.jsx("th",{colSpan:T,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"PSE Information"}),v&&e.jsx("th",{colSpan:C,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Logistic Information"}),F&&e.jsx("th",{colSpan:A,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Images"}),e.jsx("th",{colSpan:i>0?i*2+6:0,className:"align-middle border text-center tbl-row1-hdr text-nowrap",children:"Inner Materials"}),e.jsx("th",{colSpan:p>0?p*2+6:0,className:"align-middle border text-center tbl-row1-hdr text-nowrap\\",children:"Outer Materials"})]}),e.jsxs("tr",{children:[e.jsx(bl,{checked:r}),e.jsx(vl,{checked:r}),e.jsx(Sl,{checked:r}),e.jsx(kl,{checked:r}),e.jsx(ml,{count:i}),e.jsx(xl,{count:p})]}),e.jsxs("tr",{children:[e.jsx(Cl,{checked:r}),e.jsx(ul,{count:i}),e.jsx(pl,{count:p})]})]}),e.jsx("tbody",{style:{fontSize:"8pt"},children:a.map((L,M)=>{var Q,D;const H=L.cps||{},J=H.pse_info||{},se=H.logistic_info||{},W=H.images||{},Y=((Q=H.packing)==null?void 0:Q.inner)||[],R=((D=H.packing)==null?void 0:D.outer)||[];return H.labor,H.inland,e.jsxs("tr",{children:[e.jsx("td",{children:(o-1)*t+M+1}),e.jsx(Nl,{mainInfo:L,checked:r}),e.jsx(gl,{partInfo:H,checked:r}),e.jsx(yl,{pseInfo:J,checked:r}),e.jsx(wl,{logisticInfo:se,checked:r}),e.jsx(_l,{images:W,checked:r}),e.jsx(hl,{data:Y,count:i}),e.jsx(jl,{data:R,count:p})]},M)})})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>j(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>j(Math.max(1,o-1)),children:"<"}),[...Array(m).keys()].map(L=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${o===L+1?"btn-primary":"btn-light"}`,onClick:()=>j(L+1),children:L+1},L)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>j(Math.min(m,o+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",n]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[t," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{h(10),j(1)},children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{h(25),j(1)},children:"25"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{h(50),j(1)},children:"50"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})}function Al({onViewDpi:s,onUpload:a,onTemplate:o,onCreateDpi:t,onCreatePci:n,onToggleColumnSelector:m,viewDpiDisabled:j}){return e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:s,title:"View DPI",disabled:j,children:[e.jsx("i",{className:"fas fa-eye"})," View DPI"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:m,title:"Select Columns",children:e.jsx("i",{className:"fas fa-cog"})}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:a,title:"Upload",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-2",onClick:o,title:"Template",children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})}const je=[{value:"main_info",label:"Main Info",children:[{value:"destination",label:"Destination"},{value:"model",label:"Model"},{value:"impl_period",label:"Implementation Period"},{value:"cps_no",label:"CPS No"}]},{value:"part_info",label:"Part Info",children:[{value:"part_no_part",label:"Part No"},{value:"part_name",label:"Part Name"},{value:"parent_part",label:"Parent Part"},{value:"supplier_code",label:"Supplier Code"},{value:"supplier_name",label:"Supplier Name"},{value:"part_status",label:"Part Status"},{value:"dtl_part_status",label:"Dtl Part Status"},{value:"pack_spec_status",label:"Pack Spec Status"},{value:"weight_pc",label:"Weight/Pc"},{value:"qty_box",label:"Qty/Box"}]},{value:"pse_info",label:"PSE Info",children:[{value:"packing_plant",label:"Packing Plant",children:[{value:"packing_plant_current",label:"Current"},{value:"packing_plant_next",label:"Next"}]},{value:"vanning_plant",label:"Vanning Plant",children:[{value:"vanning_plant_current",label:"Current"},{value:"vanning_plant_next",label:"Next"}]},{value:"order_pattern",label:"Order Pattern",children:[{value:"order_pattern_current",label:"Current"},{value:"order_pattern_next",label:"Next"}]},{value:"katashiiki",label:"Katashiiki",children:[{value:"katashiiki_ad",label:"AD"},{value:"katashiiki_au",label:"AU"},{value:"katashiiki_af",label:"AF"},{value:"katashiiki_ax",label:"AX"}]},{value:"importer_line_process",label:"Importer Line Process"},{value:"case_code",label:"Case Code"},{value:"box_number",label:"Box Number"},{value:"renban",label:"Renban"},{value:"renban_eff",label:"Renban Eff"},{value:"packing_process",label:"Packing Process",children:[{value:"packing_process_boxing",label:"Boxing"},{value:"packing_process_stacking",label:"Stacking"}]}]},{value:"logistic_info",label:"Logistic Info",children:[{value:"dock_code",label:"Dock Code"},{value:"address",label:"Address"},{value:"process_type",label:"Process Type"}]},{value:"images",label:"Images",children:[{value:"part_image",label:"Part"},{value:"packing_image",label:"Packing"},{value:"outer_image",label:"Outer"},{value:"qkp_image",label:"QKP"},{value:"bkp_image",label:"BKP"}]},{value:"inner_materials",label:"Inner Materials",children:[{value:"box",label:"Box",children:[{value:"box_mat_no",label:"Mat No"},{value:"box_length",label:"Length"},{value:"box_width",label:"Width"},{value:"box_height",label:"Height"},{value:"box_volume_inner",label:"Volume Inner"},{value:"box_volume_outer",label:"Volume Outer"},{value:"box_usage",label:"Usage"},{value:"box_source",label:"Source"}]},...[...Array(9).keys()].map(s=>({value:`outer_${s+1}`,label:`Outer ${s+1}`,children:[{value:`outer_${s+1}_mat_no`,label:"Mat No"},{value:`outer_${s+1}_usage`,label:"Usage"}]}))]},{value:"outer_materials",label:"Outer Materials",children:[{value:"module",label:"Module",children:[{value:"module_mat_no",label:"Mat No"},{value:"module_length",label:"Length"},{value:"module_width",label:"Width"},{value:"module_height",label:"Height"},{value:"module_volume_inner",label:"Volume Inner"},{value:"module_usage",label:"Usage"}]}]}],Ml=({isOpen:s,toggle:a,checked:o,onCheckedChange:t})=>{const[n,m]=l.useState([]);l.useEffect(()=>{if(s){let p=[...o],c=!1;const f=y=>{y.forEach(N=>{N.children&&(N.children.every(g=>p.includes(g.value))&&!p.includes(N.value)&&(p.push(N.value),c=!0),f(N.children))})};f(je),c&&t([...new Set(p)])}},[s,o,t]);const j=(p,c=[])=>(p.children&&p.children.forEach(f=>{c.push(f.value),j(f,c)}),c),h=(p,c)=>{var f;for(const y of c){if((f=y.children)!=null&&f.some(N=>N.value===p))return y;if(y.children){const N=h(p,y.children);if(N)return N}}return null},r=p=>{let c=[...o];const f=c.includes(p.value),y=j(p);if(f){c=c.filter(T=>T!==p.value&&!y.includes(T));let N=h(p.value,je);for(;N;)c=c.filter(T=>T!==N.value),N=h(N.value,je)}else{c.push(p.value),p.children&&c.push(...y);let N=h(p.value,je);for(;N;)N.children.every(g=>c.includes(g.value))&&(c.includes(N.value)||c.push(N.value)),N=h(N.value,je)}t([...new Set(c)])},u=p=>{m(c=>c.includes(p)?c.filter(f=>f!==p):[...c,p])},i=(p,c=0)=>p.map(f=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",paddingLeft:`${c*20}px`},children:[f.children&&e.jsx("span",{style:{cursor:"pointer",marginRight:"5px"},onClick:()=>u(f.value),children:n.includes(f.value)?"−":"+"}),e.jsx(gt,{check:!0,style:{margin:0,marginLeft:f.children?"0":"20px"},children:e.jsxs(vt,{check:!0,children:[e.jsx(Ct,{type:"checkbox",checked:o.includes(f.value),onChange:()=>r(f)})," ",c===0?e.jsx("strong",{children:f.label}):f.label]})})]}),f.children&&n.includes(f.value)&&e.jsx("div",{children:i(f.children,c+1)})]},f.value));return e.jsxs(jt,{isOpen:s,toggle:a,zIndex:9999,size:"lg",children:[e.jsx(ft,{toggle:a,children:"Column Selection"}),e.jsx(Nt,{children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:i(je.slice(0,3))}),e.jsx("div",{className:"col-md-4",children:i(je.slice(3,5))}),e.jsx("div",{className:"col-md-4",children:i(je.slice(5))})]})}),e.jsxs(bt,{children:[e.jsx(vs,{color:"primary",onClick:a,children:"Apply"}),e.jsx(vs,{color:"secondary",onClick:a,children:"Cancel"})]})]})};function Tl(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState([]),[j,h]=l.useState(""),[r,u]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(!1),[y,N]=l.useState(!1),[T,g]=l.useState(!1),[b,C]=l.useState(["main_info","destination","model","impl_period","cps_no","part_info","part_no_part","part_name","parent_part","supplier_code","supplier_name","part_status","dtl_part_status","pack_spec_status","weight_pc","qty_box","pse_info","packing_plant","packing_plant_current","packing_plant_next","vanning_plant","vanning_plant_current","vanning_plant_next","order_pattern","order_pattern_current","order_pattern_next","katashiiki","katashiiki_ad","katashiiki_au","katashiiki_af","katashiiki_ax","importer_line_process","case_code","box_number","renban","renban_eff","packing_process","packing_process_boxing","packing_process_stacking","logistic_info","dock_code","address","process_type","images","part_image","packing_image","outer_image","qkp_image","bkp_image"]),[v,E]=l.useState([]),[A,F]=l.useState([]),[P,I]=l.useState(10),[S,K]=l.useState(1),k=v.length,L=Math.max(1,Math.ceil(k/P));l.useEffect(()=>{fetch("/dpi.json").then(d=>d.json()).then(d=>{const w=[...d.dpiData||[]].sort((V,_)=>(_.implementation_period||"").localeCompare(V.implementation_period||""));F(w),E(w)})},[]);function M(){let d=[...A];if(s&&(d=d.filter(w=>{var V;return(V=w.model_code)==null?void 0:V.toLowerCase().includes(s.toLowerCase())})),n&&n.length>0){const w=n.map(V=>V.toLowerCase());d=d.filter(V=>{var _,G,Z;return w.includes((_=V.part_no)==null?void 0:_.toLowerCase())||w.includes((Z=(G=V.cps)==null?void 0:G.part_no)==null?void 0:Z.toLowerCase())})}o&&(d=d.filter(w=>{var V,_,G,Z;return(Z=(G=(_=(V=w.cps)==null?void 0:V.model)==null?void 0:_.destination)==null?void 0:G.code)==null?void 0:Z.toLowerCase().includes(o.toLowerCase())})),j&&(d=d.filter(w=>{var V,_,G;return(G=(_=(V=w.cps)==null?void 0:V.supplier)==null?void 0:_.supplier_code)==null?void 0:G.toLowerCase().includes(j.toLowerCase())})),r&&(d=d.filter(w=>{var V,_;return(_=(V=w.cps)==null?void 0:V.cps_no)==null?void 0:_.toLowerCase().includes(r.toLowerCase())})),i&&(d=d.filter(w=>{var V;return(V=w.implementation_period)==null?void 0:V.toLowerCase().includes(i.toLowerCase())}));const x=d.sort((w,V)=>(V.implementation_period||"").localeCompare(w.implementation_period||""));E(x),K(1)}function H(d){if(d&&d.length>0){const x=d.map(w=>w.partNo);m(w=>[...new Set([...w,...x])])}N(!1)}function J(){a(""),t(""),m([]),h(""),u(""),p(""),E(A),K(1)}function se(){f(!0)}function W(){alert("Create PCI - placeholder")}function Y(){alert("Upload placeholder")}function R(){alert("Download template placeholder")}function Q(){g(d=>!d)}function D(d){C(d)}function X(){const d=window.open("","_blank","fullscreen=yes");d.document.write("<html><head><title>DPI View</title>"),d.document.write('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />'),d.document.write('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">'),d.document.write("</head><body>"),d.document.write('<button id="download-pdf">Download PDF</button>'),d.document.write('<button id="download-csv">Download CSV</button>'),d.document.write('<div id="dpi-content" class="card card-outline card-primary"></div>'),d.document.write("</body></html>"),d.document.close();const x=document.getElementById("result-section").innerHTML,w=d.document.getElementById("dpi-content");w&&(w.innerHTML=x),d.document.getElementById("download-pdf").addEventListener("click",()=>d.print()),d.document.getElementById("download-csv").addEventListener("click",()=>{const V=w.querySelector("table");let _=[];for(const re of V.rows){const me=[];for(const he of re.cells)me.push(he.innerText);_.push(me.join(","))}const G="data:text/csv;charset=utf-8,"+_.join("\\n"),Z=encodeURI(G),te=document.createElement("a");te.setAttribute("href",Z),te.setAttribute("download","dpi_data.csv"),document.body.appendChild(te),te.click(),document.body.removeChild(te)})}function $(d){const x=Math.min(Math.max(1,d),L);K(x)}const U=v.slice((S-1)*P,S*P);function O(d){const x={dpiNo:d.dpiNo||"",refDpiNo:d.refDpiNo||"",issuedDate:d.issuedDate||"",effectiveDate:d.effectiveDate||"",cfcPjt:d.cfcPjt||"",model:d.model||"",parts:d.parts||[],numCps:d.numCps||0,supplier:d.supplier||"",fromUser:d.from||"",toUser:d.to||"",status:"Draft",raw:d};E(w=>[x,...w]),f(!1),K(1)}function B(d){const x={dpiNo:d.dpiNo||"",refDpiNo:d.refDpiNo||"",issuedDate:d.issuedDate||"",effectiveDate:d.effectiveDate||"",cfcPjt:d.cfcPjt||"",model:d.model||"",parts:d.parts||[],numCps:d.numCps||0,supplier:d.supplier||"",fromUser:d.from||"",toUser:d.to||"",status:"Submitted",raw:d};E(w=>[x,...w]),f(!1),K(1)}const z={modelCode:s,destCode:o,partNo:n,supplierCode:j,cpsNo:r,implementationPeriod:i},q={setModelCode:a,setDestCode:t,setPartNo:m,setSupplierCode:h,setCpsNo:u,setImplementationPeriod:p};return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"DPI List"})}),e.jsx(Al,{onViewDpi:X,onUpload:Y,onTemplate:R,onCreateDpi:se,onCreatePci:W,onToggleColumnSelector:Q,viewDpiDisabled:v.length===0})]}),e.jsx(dl,{filters:z,setters:q,onSearch:M,onClear:J,onPartSearch:()=>N(!0)}),e.jsx("div",{id:"result-section",children:e.jsx(Il,{rows:v,visibleRows:U,page:S,perPage:P,total:k,totalPages:L,goToPage:$,setPerPage:I,checked:b})})]}),e.jsx(cl,{show:c,onClose:()=>f(!1),onSave:O,onSubmit:B}),e.jsx(Ce,{show:y,onClose:()=>N(!1),onSelect:H,mode:"multi"}),e.jsx(Ml,{isOpen:T,toggle:Q,checked:b,onCheckedChange:D})]})}function Ll({form:s,change:a,setShowPartPicker:o,setShowModelPicker:t,handleCalculate:n,handleClear:m,onModelRemove:j,onPartRemove:h,onModelCfcKeyDown:r,onPartKeyDown:u}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model CFC"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:[s.modelCfc.map(i=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[i,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>j(i),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},i)),e.jsx("input",{type:"text",name:"modelCfcInput",value:s.modelCfcInput,onChange:a,onKeyDown:r,style:{border:"none",outline:"none",flexGrow:1,padding:0,margin:0,height:"20px"}})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Model CFC",onClick:()=>t(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Implementation Period"}),e.jsxs("select",{className:"form-control form-control-sm",name:"period",value:s.period,onChange:a,children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"01.2025"}),e.jsx("option",{children:"02.2025"})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dest Code"}),e.jsxs("select",{className:"form-control form-control-sm",name:"destCode",value:s.destCode,onChange:a,children:[e.jsx("option",{children:"All"}),e.jsx("option",{value:"TASA",children:"TASA - Argentina"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Part"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("div",{className:"form-control form-control-sm",style:{height:"auto",display:"flex",flexWrap:"wrap",gap:"5px",alignItems:"center"},children:[Array.isArray(s.part)&&s.part.map(i=>e.jsxs("span",{className:"badge badge-pill badge-info",style:{display:"flex",alignItems:"center"},children:[i,e.jsx("button",{type:"button",className:"close","aria-label":"Close",style:{color:"white",marginLeft:"5px",textShadow:"none",opacity:.7,fontSize:"1.2em",lineHeight:"0.8"},onClick:()=>h(i),children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]},i)),e.jsx("input",{type:"text",name:"partInput",value:s.partInput,onChange:a,onKeyDown:u,style:{border:"none",outline:"none",flexGrow:1,padding:0,margin:0,height:"20px"}})]}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Part",onClick:()=>o(!0),children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-end my-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:n,children:[e.jsx("i",{className:"fas fa-calculator mr-1"})," Calculate"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:m,children:[e.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]})]})}function Dl({count:s=10}){return e.jsx(e.Fragment,{children:Array.from({length:s}).map((a,o)=>e.jsxs(de.Fragment,{children:[e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Part No"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Qty"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Price"}),e.jsx("th",{className:"align-middle border text-center text-nowrap",children:"Sum"})]},`mat-leaf-hdr-${o}`))})}function El({arr:s=[],count:a=10}){const o=[];for(let t=0;t<a;t++){const n=s[t];o.push(e.jsxs(de.Fragment,{children:[e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.materialNo)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.qty)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.price)??"-"}),e.jsx("td",{className:"align-middle",children:(n==null?void 0:n.sum)??"-"})]},`mat-leaf-cell-${t}`))}return e.jsx(e.Fragment,{children:o})}const Hs=({part:s})=>{var r,u,i,p,c,f,y;const[a,o]=l.useState({inner:!0,outer:!0,labor:!0,inland:!0}),t=N=>{o(T=>({...T,[N]:!T[N]}))};if(!s)return null;const n=N=>{if(N==null||N==="")return"";const T=Number(N);return isNaN(T)?String(N):T.toFixed(2)},m=(N,T)=>{const g=T.toLowerCase(),b=a[g],C=10,v=[];for(let E=1;E<=C;E++)v.push(e.jsxs("th",{colSpan:"4",children:["Material ",E]},`material-header-${T}-${E}`));return e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t(g),children:[e.jsx("i",{className:`fas ${b?"fa-chevron-down":"fa-chevron-right"} mr-2`}),T.toUpperCase()]}),b&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"2000px"},children:[e.jsxs("thead",{style:{backgroundColor:"#e9ecef"},children:[e.jsx("tr",{children:v}),e.jsx("tr",{children:e.jsx(Dl,{count:C})})]}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx(El,{arr:N,count:C})})})]})})]})},j=(N,T)=>{const g=a.labor;return!N||!T?null:e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t("labor"),children:[e.jsx("i",{className:`fas ${g?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"LABOR"]}),g&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"1500px"},children:[e.jsx("thead",{style:{backgroundColor:"#e9ecef"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Receiving"}),e.jsx("th",{children:"Inspection"}),e.jsx("th",{children:"Delivery Course (Pallet)"}),e.jsx("th",{children:"Supply"}),e.jsx("th",{children:"Binding"}),e.jsx("th",{children:"Sorting & Supply"}),e.jsx("th",{children:"Pick & Packing"}),e.jsx("th",{children:"Vanning"}),e.jsx("th",{children:"Box/Valet Return"}),e.jsx("th",{children:"Mix Van"}),e.jsx("th",{children:"Lashing"}),e.jsx("th",{children:"Total Time"}),e.jsx("th",{children:"Requirement"}),e.jsx("th",{children:"Current DL"}),e.jsx("th",{children:"IDL"}),e.jsx("th",{children:"Facility Others"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:n(N.receiving)}),e.jsx("td",{children:n(N.inspection)}),e.jsx("td",{children:n(N.deliveryCourse)}),e.jsx("td",{children:n(N.supply)}),e.jsx("td",{children:n(N.binding)}),e.jsx("td",{children:n(N.sortingSupply)}),e.jsx("td",{children:n(N.pickPacking)}),e.jsx("td",{children:n(N.vanning)}),e.jsx("td",{children:n(N.boxValetReturn)}),e.jsx("td",{children:n(N.mixVan)}),e.jsx("td",{children:n(N.lashing)}),e.jsx("td",{children:n(N.totalTime)}),e.jsx("td",{children:n(N.requirement)}),e.jsx("td",{children:n(N.currentDL)}),e.jsx("td",{children:n(T.idl)}),e.jsx("td",{children:n(T.facility)})]})})]})})]})},h=N=>{const T=a.inland;return N?e.jsxs(e.Fragment,{children:[e.jsxs("h5",{style:{fontSize:"8pt",textAlign:"left",fontWeight:"bold",cursor:"pointer",backgroundColor:"#f7fbff"},onClick:()=>t("inland"),children:[e.jsx("i",{className:`fas ${T?"fa-chevron-down":"fa-chevron-right"} mr-2`}),"INLAND"]}),T&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm",style:{minWidth:"800px"},children:[e.jsx("thead",{style:{backgroundColor:"#e9ecef"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Pack Time (V-PASS)"}),e.jsx("th",{children:"Inland Cost"}),e.jsx("th",{children:"Inland Cost M3"}),e.jsx("th",{children:"Diff"}),e.jsx("th",{children:"Milkrun cost"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:N.packing_time||"-"}),e.jsx("td",{children:n(N.inland_cost)||"-"}),e.jsx("td",{children:n(N.inlandCostM3)||"-"}),e.jsx("td",{children:N.diff||"-"}),e.jsx("td",{children:n(N.milkrun_cost)||"-"})]})})]})})]}):null};return e.jsx("td",{colSpan:"32",children:e.jsxs("div",{className:"p-2",children:[m((u=(r=s.cps)==null?void 0:r.packing)==null?void 0:u.inner,"Inner"),m((p=(i=s.cps)==null?void 0:i.packing)==null?void 0:p.outer,"Outer"),j((c=s.cps)==null?void 0:c.manhour,(f=s.cps)==null?void 0:f.labor),h((y=s.cps)==null?void 0:y.inland)]})})},ne=s=>{if(s==null||s==="")return"";const a=Number(s);return isNaN(a)?String(s):a.toFixed(2)};function Rl({visibleParts:s,selectedRows:a,handleCheckboxChange:o,page:t,perPage:n,remarks:m,handleRemarkChange:j,expandedRows:h,handleToggleExpand:r,threshold_percentage:u=5}){return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-sm text-center w-100",style:{fontSize:"8pt"},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{backgroundColor:"#f7fbff"},children:[e.jsx("th",{rowSpan:2,style:{width:40},children:e.jsx("input",{type:"checkbox",checked:s.length>0&&s.every((i,p)=>a[(t-1)*n+p]),onChange:i=>{const p=i.target.checked,c={...a};s.forEach((f,y)=>{c[(t-1)*n+y]=p}),o(c)}})}),e.jsx("th",{rowSpan:2,style:{width:40}}),e.jsx("th",{rowSpan:2,style:{width:40},children:"No"}),e.jsx("th",{rowSpan:2,children:"Model CFC"}),e.jsx("th",{rowSpan:2,children:"Dest Code"}),e.jsx("th",{rowSpan:2,children:"Implementation Period"}),e.jsx("th",{rowSpan:2,children:"Part No"}),e.jsx("th",{rowSpan:2,children:"Suffix"}),e.jsx("th",{rowSpan:2,children:"Part Name"}),e.jsx("th",{rowSpan:2,children:"Parent Part No"}),e.jsx("th",{rowSpan:2,children:"Supplier Code"}),e.jsx("th",{rowSpan:2,children:"Supplier Name"}),e.jsx("th",{rowSpan:2,children:"L"}),e.jsx("th",{rowSpan:2,children:"W"}),e.jsx("th",{rowSpan:2,children:"H"}),e.jsx("th",{rowSpan:2,children:"Box M3"}),e.jsx("th",{colSpan:3,children:"INNER"}),e.jsx("th",{colSpan:3,children:"OUTER"}),e.jsx("th",{colSpan:3,children:"MATERIAL"}),e.jsx("th",{colSpan:3,children:"LABOR"}),e.jsx("th",{colSpan:3,children:"INLAND"}),e.jsx("th",{colSpan:3,children:"TOTAL"}),e.jsx("th",{rowSpan:2,children:"Remark"})]}),e.jsx("tr",{style:{backgroundColor:"#dee2e6"},children:[...Array(6)].map((i,p)=>e.jsxs(de.Fragment,{children:[e.jsx("th",{children:"Prev"}),e.jsx("th",{children:"Current"}),e.jsx("th",{children:"Diff"})]},p))})]}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:35,className:"text-center py-4 text-muted",children:"No Data Found"})}):s.map((i,p)=>{var T,g,b,C,v,E,A,F,P,I,S,K,k,L,M,H,J,se,W,Y,R,Q,D,X,$,U,O,B,z,q,d,x,w,V,_,G,Z,te,re,me,he,ye;debugger;if(!i)return null;const c=(t-1)*n+p,f=h&&h[c];Number(((g=(T=i.subtotals)==null?void 0:T.total)==null?void 0:g.total)??0),Number(((C=(b=i.subtotals)==null?void 0:b.total)==null?void 0:C.prev_year)??0);const y=Number(((E=(v=i.subtotals)==null?void 0:v.total)==null?void 0:E.diff)??0),N=y>u;debugger;return e.jsxs(de.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:!!(a&&a[c]),onChange:pe=>{const Ie={...a,[c]:pe.target.checked};o(Ie)}})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-xs btn-link",onClick:()=>r(c),children:e.jsx("i",{className:`fas ${f?"fa-chevron-up":"fa-chevron-down"}`})})}),e.jsx("td",{children:c+1}),e.jsx("td",{children:i.model_cfc}),e.jsx("td",{children:i.destination}),e.jsx("td",{children:i.implementation_period}),e.jsx("td",{children:i.partNo}),e.jsx("td",{children:i.suffix}),e.jsx("td",{children:i.partName}),e.jsx("td",{children:i.parentPartNo}),e.jsx("td",{children:i.supplierCode}),e.jsx("td",{children:i.supplierName}),e.jsx("td",{children:ne(i.L)}),e.jsx("td",{children:ne(i.W)}),e.jsx("td",{children:ne(i.H)}),e.jsx("td",{children:ne(i.boxM3)}),e.jsx("td",{children:ne((F=(A=i.subtotals)==null?void 0:A.inner)==null?void 0:F.prev_year)}),e.jsx("td",{children:ne((I=(P=i.subtotals)==null?void 0:P.inner)==null?void 0:I.total)}),e.jsx("td",{children:ne((K=(S=i.subtotals)==null?void 0:S.inner)==null?void 0:K.diff)}),e.jsx("td",{children:ne((L=(k=i.subtotals)==null?void 0:k.outer)==null?void 0:L.prev_year)}),e.jsx("td",{children:ne((H=(M=i.subtotals)==null?void 0:M.outer)==null?void 0:H.total)}),e.jsx("td",{children:ne((se=(J=i.subtotals)==null?void 0:J.outer)==null?void 0:se.diff)}),e.jsx("td",{children:ne((Y=(W=i.subtotals)==null?void 0:W.material)==null?void 0:Y.prev_year)}),e.jsx("td",{children:ne((Q=(R=i.subtotals)==null?void 0:R.material)==null?void 0:Q.total)}),e.jsx("td",{children:ne((X=(D=i.subtotals)==null?void 0:D.material)==null?void 0:X.diff)}),e.jsx("td",{children:ne((U=($=i.subtotals)==null?void 0:$.labor)==null?void 0:U.prev_year)}),e.jsx("td",{children:ne((B=(O=i.subtotals)==null?void 0:O.labor)==null?void 0:B.total)}),e.jsx("td",{children:ne((q=(z=i.subtotals)==null?void 0:z.labor)==null?void 0:q.diff)}),e.jsx("td",{children:ne((x=(d=i.subtotals)==null?void 0:d.inland)==null?void 0:x.prev_year)}),e.jsx("td",{children:ne((V=(w=i.subtotals)==null?void 0:w.inland)==null?void 0:V.total)}),e.jsx("td",{children:ne((G=(_=i.subtotals)==null?void 0:_.inland)==null?void 0:G.diff)}),e.jsx("td",{children:ne((te=(Z=i.subtotals)==null?void 0:Z.total)==null?void 0:te.prev_year)}),e.jsx("td",{children:ne((me=(re=i.subtotals)==null?void 0:re.total)==null?void 0:me.total)}),e.jsx("td",{style:{color:y>u?"red":void 0,fontWeight:y>u?"bold":void 0},children:ne((ye=(he=i.subtotals)==null?void 0:he.total)==null?void 0:ye.diff)}),e.jsx("td",{children:N?e.jsx("textarea",{className:"form-control form-control-sm",style:{minWidth:220,width:"100%"},value:m&&m[c]||"",onChange:pe=>j(c,pe.target.value),placeholder:"Enter remark",rows:3}):null})]}),f&&e.jsx("tr",{className:"expandable-row",children:e.jsx(Hs,{part:i})})]},c)})})]})})}function Ol({page:s,totalPages:a,goToPage:o,perPage:t}){return e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-2",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>o(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>o(Math.max(1,s-1)),children:"<"}),[...Array(a).keys()].map(n=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${s===n+1?"btn-primary":"btn-light"}`,onClick:()=>o(n+1),children:n+1},n)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>o(Math.min(a,s+1)),children:">"})]}),e.jsx("div",{className:"form-inline small",children:e.jsxs("span",{className:"mr-3",children:[t," per page"]})})]})}const ts={part:[],partInput:"",period:"All",destCode:"All",modelCfc:[],modelCfcInput:"",type:"PxP"};function Fl({show:s=!1,onClose:a,onSave:o}){const[t,n]=l.useState(ts),[m,j]=l.useState([]),[h,r]=l.useState([]),[u,i]=l.useState(5),[p,c]=l.useState(1),[f,y]=l.useState(!1),[N,T]=l.useState(!1),[g,b]=l.useState({}),[C,v]=l.useState({}),[E,A]=l.useState({}),[F,P]=l.useState([]);if(l.useEffect(()=>(s?(n(ts),j([]),r([]),c(1),A({}),document.body.classList.add("modal-open")):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[s]),l.useEffect(()=>{fetch("/generatedData.json").then(B=>B.json()).then(B=>{P(B.cpsData)}).catch(B=>console.error("Error loading generated data:",B))},[]),!s)return null;function I(B){const{name:z,value:q}=B.target;n(d=>({...d,[z]:q}))}function S(B){if(B.key===" "&&t.modelCfcInput.trim()){B.preventDefault();const z=t.modelCfcInput.trim();n(q=>q.modelCfc.includes(z)?{...q,modelCfcInput:""}:{...q,modelCfc:[...q.modelCfc,z],modelCfcInput:""})}}function K(B){if(B.key===" "&&t.partInput.trim()){B.preventDefault();const z=t.partInput.trim();n(q=>q.part.includes(z)?{...q,partInput:""}:{...q,part:[...q.part,z],partInput:""}),r(q=>q.some(x=>x.partNo===z)?q:[...q,{partNo:z}])}}const k=()=>{if(!F||!F.length){console.error("CPS data is not loaded yet.");return}let B=F;t.modelCfc.length>0&&(B=B.filter(q=>q.model_cfc&&t.modelCfc.includes(q.model_cfc)));let z=[];h.length>0?z=h.flatMap(q=>{const d=B.filter(x=>x&&x.part_no===q.partNo);return d.length===0?[{partNo:q.partNo,description:"NOT FOUND",calculationTime:new Date().toISOString()}]:d.map(x=>{var w,V;return{partNo:q.partNo,description:((w=x.part)==null?void 0:w.description)||"NOT FOUND",partName:x.partName,supplierName:x.supplierName,supplierCode:x.supplierCcode,destination:x.model?`${x.model.destinationCode} - ${x.model.destinationName}`:"N/A",model:(V=x.model)==null?void 0:V.name,parentNo:x.parentNo,cpsNo:x.cpsNo,calculationTime:new Date().toISOString(),subtotals:x.subtotals,total:x.total,cps:x.cps}})}):t.modelCfc.length>0&&(z=B.map(q=>{var d,x;return{partNo:q.part_no,description:((d=q.part)==null?void 0:d.description)||"NOT FOUND",partName:q.partName,supplierName:q.supplierName,supplierCode:q.supplierCcode,destination:q.model?`${q.model.destinationCode} - ${q.model.destinationName}`:"N/A",model:(x=q.model)==null?void 0:x.name,parentNo:q.parentNo,cpsNo:q.cpsNo,calculationTime:new Date().toISOString(),subtotals:q.subtotals,total:q.total,cps:q.cps}})),j(z)};function L(){n(ts),j([]),r([])}function M(B){if(Array.isArray(B)&&B.length>0){const z=B.map(q=>q.cfc);n(q=>{const d=q.modelCfc||[],x=z.filter(w=>!d.includes(w));return{...q,modelCfc:[...d,...x],modelCfcInput:""}})}T(!1)}function H(B){n(z=>({...z,modelCfc:z.modelCfc.filter(q=>q!==B)}))}function J(){const B={...t,parts:m};o&&o(B)}function se(){a&&a()}function W(B){if(!Array.isArray(B)||B.length===0){y(!1);return}const z=B.map(d=>({partNo:d.partNo,suffix:"",partName:d.partName,parentPartNo:d.parentPartNo||d.parent||"",supplierId:d.supplierName&&(d.supplierId||d.supplierCode)||"",supplierName:d.supplierName,L:d.L||"",W:d.W||"",H:d.H||"",boxM3:d.boxM3||"",inner:{totalCost:d.innerTotal??0,prevYear:d.prevYear??0,diff:d.diffPerc??"0%",materials:d.innerMaterials||[]},outer:{totalCost:d.outerTotal??0,prevYear:d.prevYear??0,diff:d.diffPerc??"0%",materials:d.outerMaterials||[]},material:{totalCost:d.materialTotal??0,prevYear:d.prevYear??0,diff:d.diffPerc??"0%"},labor:{totalCost:d.laborTotal??20,prevYear:d.prevYear??0,diff:d.diffPerc??"0%",manHour:d.laborManHour??1.5,cost:d.laborCost??25,receiving:.1,inspection:.2,deliveryCourse:.1,supply:.1,binding:.1,sortingSupply:.2,pickPacking:.3,vanning:.2,boxValetReturn:.1,mixVan:.1,lashing:.1,totalTime:1.5,requirement:1,currentDL:1,idl:0,facilityOthers:0},inland:{totalCost:d.inlandTotal??30,prevYear:d.prevYear??0,diff:d.diffPerc??"0%",cost:d.inlandCost??35,packTime:d.inlandPackTime??"10:00",inlandCost:d.inlandInlandCost??40,inlandCostM3:d.inlandInlandCostM3??5,milkrunCost:d.inlandMilkrunCost??15},total:{totalCost:d.totalCost??0,prevYear:d.prevYear??0,diff:d.diffPerc??"0%"}}));r(d=>{const x=d.map(V=>V.partNo),w=z.filter(V=>!x.includes(V.partNo));return[...d,...w]});const q=z.map(d=>d.partNo);n(d=>{const x=d.part||[],w=q.filter(V=>!x.includes(V));return{...d,part:[...x,...w]}}),y(!1)}function Y(B){n(z=>({...z,part:z.part.filter(q=>q!==B)})),r(z=>z.filter(q=>q.partNo!==B))}const R=m.length,Q=Math.max(1,Math.ceil(R/u));function D(B){c(Math.min(Math.max(1,B),Q))}const X=m.slice((p-1)*u,p*u);function $(B,z){b(q=>({...q,[B]:z}))}function U(B){v(B)}function O(B){A(z=>({...z,[B]:!z[B]}))}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"np-modal-backdrop",onMouseDown:B=>{B.target===B.currentTarget&&se()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:"95vw",maxHeight:"90vh",width:"95vw",height:"90vh"},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h5",{className:"card-title mb-0",children:e.jsx("strong",{children:"Packing Cost Calculation New"})}),e.jsx("button",{type:"button",className:"close",onClick:se,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":!0,children:"×"})})]}),e.jsxs("div",{className:"card-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsx(Ll,{form:t,change:I,setShowPartPicker:y,setShowModelPicker:T,handleCalculate:k,handleClear:L,onModelRemove:H,onPartRemove:Y,onModelCfcKeyDown:S,onPartKeyDown:K}),e.jsx(Rl,{visibleParts:X,selectedRows:C,handleCheckboxChange:U,page:p,perPage:u,remarks:g,handleRemarkChange:$,expandedRows:E,handleToggleExpand:O,threshold_percentage:5}),e.jsx(Ol,{page:p,totalPages:Q,goToPage:D,perPage:u})]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-success mr-2",onClick:J,children:[e.jsx("i",{className:"fas fa-download mr-1"})," Save"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:se,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]})}),f&&e.jsx(Ce,{show:f,onClose:()=>y(!1),onSelect:W}),N&&e.jsx(as,{show:N,onClose:()=>T(!1),onAdd:M,selectionMode:"multi"})]})}function Wl({calCode:s,setCalCode:a,period:o,setPeriod:t,destCode:n,setDestCode:m,modelCode:j,setModelCode:h,type:r,setType:u,handleFilter:i,handleClear:p}){return e.jsxs("div",{className:"card-body",children:[e.jsx("form",{onSubmit:i,className:"mb-3",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Pack Cost Cal Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:s,onChange:c=>a(c.target.value),placeholder:"Pack Cost Cal Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Dest Code"}),e.jsxs("select",{className:"form-control form-control-sm",value:n,onChange:c=>m(c.target.value),children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"024W",children:"024W"}),e.jsx("option",{value:"ARG",children:"ARG"})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Type"}),e.jsxs("div",{className:"form-control form-control-sm",style:{minHeight:44},children:[e.jsxs("div",{className:"form-check form-check-inline mr-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_all",value:"All",checked:r==="All",onChange:()=>u("All")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_all",children:"All"})]}),e.jsxs("div",{className:"form-check form-check-inline mr-3",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_pxp",value:"PxP",checked:r==="PxP",onChange:()=>u("PxP")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_pxp",children:"PxP"})]}),e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"typeRadio",id:"type_lot",value:"Lot",checked:r==="Lot",onChange:()=>u("Lot")}),e.jsx("label",{className:"form-check-label ml-2",htmlFor:"type_lot",children:"Lot"})]})]})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Period"}),e.jsxs("select",{className:"form-control form-control-sm",value:o,onChange:c=>t(c.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"01.2025"}),e.jsx("option",{children:"02.2025"}),e.jsx("option",{children:"03.2025"})]})]}),e.jsxs("div",{className:"form-group col-12",children:[e.jsx("label",{className:"small mb-1",children:"Model Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:j,onChange:c=>h(c.target.value),placeholder:"Model Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search",children:e.jsx("i",{className:"fas fa-search"})})})]})]})]})})]})}),e.jsxs("div",{className:"d-flex justify-content-end mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:i,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:p,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})]})}function Bl({rows:s,visibleRows:a,page:o,totalPages:t,goToPage:n,perPage:m,setPerPage:j,total:h}){const[r,u]=l.useState(null),i=c=>{if(c==null||c==="")return"";const f=Number(c);return isNaN(f)?String(c):f.toFixed(2)},p=c=>{u(r===c?null:c)};return e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Pack Cost Cal Code"}),e.jsx("th",{children:"Period"}),e.jsx("th",{children:"Dest Code"}),e.jsx("th",{children:"Dest Country"}),e.jsx("th",{children:"Model Code"}),e.jsx("th",{children:"# Parts"}),e.jsx("th",{children:"Type"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-4 text-muted",children:"No Data Found"})}):a.map((c,f)=>{const y=(o-1)*m+f;return e.jsxs(de.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:String(y+1).padStart(2,"0")}),e.jsx("td",{children:c.calCode}),e.jsx("td",{children:c.period}),e.jsx("td",{children:c.destCode}),e.jsx("td",{children:c.destCountry}),e.jsx("td",{children:c.modelCode}),e.jsx("td",{children:i(c.numParts)}),e.jsx("td",{children:c.type}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>p(y),children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>alert("Delete placeholder"),children:e.jsx("i",{className:"fas fa-trash"})})]})]}),r===y&&e.jsx("tr",{children:e.jsx("td",{colSpan:"9",children:c.parts.map((N,T)=>e.jsx(Hs,{part:N},T))})})]},f)})})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>n(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>n(Math.max(1,o-1)),children:"<"}),[...Array(t).keys()].map(c=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${o===c+1?"btn-primary":"btn-light"}`,onClick:()=>n(c+1),children:c+1},c)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>n(Math.min(t,o+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",h]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[m," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{j(3),setPage(1)},children:"3"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{j(10),setPage(1)},children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>{j(25),setPage(1)},children:"25"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})}const Hl=[{calCode:"PC001",period:"03.2025",destCode:"ID",destCountry:"Indonesia",modelCode:"579W",numParts:5,type:"PxP",parts:[]},{calCode:"PC002",period:"03.2025",destCode:"TH",destCountry:"Thailand",modelCode:"579W",numParts:3,type:"Lot",parts:[]}];function Ul(){const[s,a]=l.useState(""),[o,t]=l.useState("All"),[n,m]=l.useState("All"),[j,h]=l.useState(""),[r,u]=l.useState("All"),[i,p]=l.useState(Hl),[c,f]=l.useState(3),[y,N]=l.useState(1),T=i.length,g=Math.max(1,Math.ceil(T/c)),[b,C]=l.useState(!1);function v(I){I&&I.preventDefault&&I.preventDefault(),console.log("Filter with",{calCode:s,period:o,destCode:n,modelCode:j,type:r}),N(1)}function E(){a(""),t("All"),m("All"),h(""),u("All"),p([]),N(1)}function A(I){const S=Math.min(Math.max(1,I),g);N(S)}const F=i.slice((y-1)*c,y*c);function P(I){console.log("Packing cost saved payload:",I);const S={...I,numParts:I.parts.length};p(K=>[...K,S]),C(!1)}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Packing Cost Calculation List"})}),e.jsxs("div",{className:"card-tools ml-auto d-flex align-items-center gap-2",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",title:"Calculate Packing Cost",onClick:()=>C(!0),children:[e.jsx("i",{className:"fas fa-calculator mr-1"})," Calculate Packing Cost"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Template",children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})]}),e.jsx(Wl,{calCode:s,setCalCode:a,period:o,setPeriod:t,destCode:n,setDestCode:m,modelCode:j,setModelCode:h,type:r,setType:u,handleFilter:v,handleClear:E}),e.jsx(Bl,{rows:i,visibleRows:F,page:y,totalPages:g,goToPage:A,perPage:c,setPerPage:f,total:T})]}),e.jsx(Fl,{show:b,onClose:()=>C(!1),onSave:P})]})}function ke({title:s,value1:a,value2:o,diff:t,children:n}){const[m,j]=l.useState(!0),h=s.match(/^(.*?)\s*(\([^)]*\))?$/),r=h?h[1].trim():s,u=h&&h[2]?h[2]:"",i=c=>{if(c==null||c==="")return!1;if(typeof c=="number")return!0;let f=String(c).trim();return f.endsWith("%")&&(f=f.slice(0,-1)),f=f.replace(/[^0-9.\-]/g,""),f===""||f==="-"||f==="."||f==="-."?!1:/^-?\d+(\.\d+)?$/.test(f)},p=c=>({textAlign:i(c)?"right":"left",whiteSpace:"nowrap"});return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{style:{backgroundColor:"#f9f9f9",cursor:"pointer"},onClick:()=>j(!m),children:[e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{marginRight:6},children:m?"▼":"▶"}),e.jsx("span",{children:e.jsx("strong",{children:r})})]}),u&&e.jsx("span",{children:u})]})}),e.jsx("td",{style:p(a),children:a}),e.jsx("td",{style:p(o),children:o}),e.jsx("td",{style:p(t),children:t})]}),m&&n]})}const le=s=>{if(s==null||s==="")return"";const a=Number(s);return isNaN(a)?String(s):a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},Ve=s=>`Rp ${Number(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,ce=(s,a)=>{if(s==null||a==null)return"";const o=Number(s),t=Number(a);return isNaN(o)||isNaN(t)||o===0?"":`${((t-o)/o*100).toFixed(2)}%`},ae={textAlign:"right",whiteSpace:"nowrap"};function ql(){const[s,a]=l.useState(0),[o,t]=l.useState(1),[n,m]=l.useState("2025"),[j,h]=l.useState("2026"),[r,u]=l.useState([]),[i,p]=l.useState([]);if(l.useEffect(()=>{fetch("/comparison.json").then(P=>P.json()).then(P=>u(P)),fetch("/cpsComparison.json").then(P=>P.json()).then(P=>p(P))},[]),r.length===0)return e.jsx("div",{children:"Loading..."});const c=r[s],f=r[o],y=c.materials.inner.reduce((P,I)=>P+I.value,0),N=f.materials.inner.reduce((P,I)=>P+I.value,0),T=c.materials.outer.reduce((P,I)=>P+I.value,0),g=f.materials.outer.reduce((P,I)=>P+I.value,0),b=y+T,C=N+g,v=c.labor.dl+c.labor.idl+c.labor.facility,E=f.labor.dl+f.labor.idl+f.labor.facility,A=c.inland.inlandCost+c.inland.milkrunCost,F=f.inland.inlandCost+f.inland.milkrunCost;return e.jsxs("div",{className:"container mt-3",children:[e.jsx("h5",{children:"Packing Cost Comparison"}),e.jsxs("table",{className:"table table-bordered table-sm",style:{fontSize:"0.85rem"},children:[e.jsxs("thead",{style:{backgroundColor:"#efefef"},children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Part No"}),e.jsx("th",{children:e.jsx("select",{className:"form-control form-control-sm",value:s,onChange:P=>a(Number(P.target.value)),children:r.map((P,I)=>e.jsxs("option",{value:I,children:[P.partNo," - ",P.code]},I))})}),e.jsx("th",{children:e.jsx("select",{className:"form-control form-control-sm",value:o,onChange:P=>t(Number(P.target.value)),children:r.map((P,I)=>e.jsxs("option",{value:I,children:[P.partNo," - ",P.code]},I))})}),e.jsx("th",{children:"Diff"})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Periode"}),e.jsx("th",{children:e.jsx("input",{value:n,onChange:P=>m(P.target.value),className:"form-control form-control-sm"})}),e.jsx("th",{children:e.jsx("input",{value:j,onChange:P=>h(P.target.value),className:"form-control form-control-sm"})}),e.jsx("th",{})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Part Name"}),e.jsx("td",{children:(c==null?void 0:c.name)||""}),e.jsx("td",{children:(f==null?void 0:f.name)||""}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Supplier"}),e.jsx("td",{children:(c==null?void 0:c.supplier)||""}),e.jsx("td",{children:(f==null?void 0:f.supplier)||""}),e.jsx("td",{})]}),e.jsxs("tr",{style:{fontWeight:"bold"},children:[e.jsx("td",{children:"TOTAL COST (Rp)"}),e.jsx("td",{style:ae,children:le(c==null?void 0:c.totalCost)}),e.jsx("td",{style:ae,children:le(f==null?void 0:f.totalCost)}),e.jsx("td",{style:ae,children:ce(c==null?void 0:c.totalCost,f==null?void 0:f.totalCost)})]}),e.jsxs(ke,{title:"Material (Rp)",value1:le(b),value2:le(C),diff:ce(b,C),children:[e.jsx(ke,{title:"Inner (Rp)",value1:le(y),value2:le(N),diff:ce(y,N),children:c.materials.inner.map((P,I)=>{const S=f.materials.inner[I];return e.jsxs(de.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:P.name}),e.jsx("td",{style:ae,children:le(P.value)}),e.jsx("td",{style:ae,children:le(S==null?void 0:S.value)}),e.jsx("td",{style:ae,children:ce(P.value,S==null?void 0:S.value)})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",P.detail.partNo]}),e.jsxs("div",{children:["- Code: ",P.detail.code]}),e.jsxs("div",{children:["- Qty: ",le(P.detail.qty)]}),e.jsxs("div",{children:["- Price: ",Ve(P.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",le(P.detail.qty*P.detail.price)]})]}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",S==null?void 0:S.detail.partNo]}),e.jsxs("div",{children:["- Code: ",S==null?void 0:S.detail.code]}),e.jsxs("div",{children:["- Qty: ",le(S==null?void 0:S.detail.qty)]}),e.jsxs("div",{children:["- Price: ",Ve(S==null?void 0:S.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",le((S==null?void 0:S.detail.qty)*(S==null?void 0:S.detail.price))]})]}),e.jsx("td",{})]})]},`inner-${I}`)})}),e.jsx(ke,{title:"Outer (Rp)",value1:le(T),value2:le(g),diff:ce(T,g),children:c.materials.outer.map((P,I)=>{const S=f.materials.outer[I];return e.jsxs(de.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:P.name}),e.jsx("td",{style:ae,children:le(P.value)}),e.jsx("td",{style:ae,children:le(S==null?void 0:S.value)}),e.jsx("td",{style:ae,children:ce(P.value,S==null?void 0:S.value)})]}),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",P.detail.partNo]}),e.jsxs("div",{children:["- Code: ",P.detail.code]}),e.jsxs("div",{children:["- Qty: ",le(P.detail.qty)]}),e.jsxs("div",{children:["- Price: ",Ve(P.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",le(P.detail.qty*P.detail.price)]})]}),e.jsxs("td",{style:{paddingLeft:"40px",verticalAlign:"top"},children:[e.jsxs("div",{children:["- Part No: ",S==null?void 0:S.detail.partNo]}),e.jsxs("div",{children:["- Code: ",S==null?void 0:S.detail.code]}),e.jsxs("div",{children:["- Qty: ",le(S==null?void 0:S.detail.qty)]}),e.jsxs("div",{children:["- Price: ",Ve(S==null?void 0:S.detail.price)]}),e.jsxs("div",{children:["- Subtotal: ",le((S==null?void 0:S.detail.qty)*(S==null?void 0:S.detail.price))]})]}),e.jsx("td",{})]})]},`outer-${I}`)})})]}),e.jsxs(ke,{title:"Labor (Rp)",value1:le(v),value2:le(E),diff:ce(v,E),children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- DL"}),e.jsx("td",{style:ae,children:le(c.labor.dl)}),e.jsx("td",{style:ae,children:le(f.labor.dl)}),e.jsx("td",{style:ae,children:ce(c.labor.dl,f.labor.dl)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- IDL"}),e.jsx("td",{style:ae,children:le(c.labor.idl)}),e.jsx("td",{style:ae,children:le(f.labor.idl)}),e.jsx("td",{style:ae,children:ce(c.labor.idl,f.labor.idl)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Facility/Others"}),e.jsx("td",{style:ae,children:le(c.labor.facility)}),e.jsx("td",{style:ae,children:le(f.labor.facility)}),e.jsx("td",{style:ae,children:ce(c.labor.facility,f.labor.facility)})]})]}),e.jsxs(ke,{title:"Inland (Rp)",value1:le(A),value2:le(F),diff:ce(A,F),children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Inland Cost"}),e.jsx("td",{style:ae,children:le(c.inland.inlandCost)}),e.jsx("td",{style:ae,children:le(f.inland.inlandCost)}),e.jsx("td",{style:ae,children:ce(c.inland.inlandCost,f.inland.inlandCost)})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"20px"},children:"- Milkrun Cost"}),e.jsx("td",{style:ae,children:le(c.inland.milkrunCost)}),e.jsx("td",{style:ae,children:le(f.inland.milkrunCost)}),e.jsx("td",{style:ae,children:ce(c.inland.milkrunCost,f.inland.milkrunCost)})]})]})]})]})]})}function $l({show:s,onClose:a,onSave:o,initialData:t=null,mode:n="new"}){const[m,j]=l.useState(""),[h,r]=l.useState(""),[u,i]=l.useState(""),[p,c]=l.useState(""),[f,y]=l.useState(""),[N,T]=l.useState(""),[g,b]=l.useState(""),[C,v]=l.useState(""),[E,A]=l.useState(""),[F,P]=l.useState(""),[I,S]=l.useState(""),[K,k]=l.useState(""),[L,M]=l.useState(""),[H,J]=l.useState(""),[se,W]=l.useState(""),[Y,R]=l.useState(""),[Q,D]=l.useState(""),[X,$]=l.useState("");l.useEffect(()=>{s&&t?(j(t.materialNo||""),r(t.materialName||""),i(t.price??""),c(t.materialType||""),y(t.supplierCode||""),T(t.supplierName||""),b(t.address||""),v(t.plantCode||""),A(t.eWarehouse||""),P(t.eWarehousePrice||""),S(t.dimLength||""),k(t.dimWeightPc||""),M(t.dimWidth||""),J(t.dimQtyBundling||""),W(t.dimHeight||""),R(t.totalDimWeight||""),D(t.docMSDS||""),$(t.docDrawing||"")):s||O()},[s,t]);function U(){if(!m||!h||!p){alert("Please fill in Material No, Material Name, and Material Type");return}const x={id:t==null?void 0:t.id,materialNo:m,materialName:h,price:u,materialType:p,supplierCode:f,supplierName:N,address:g,plantCode:C,eWarehouse:E,eWarehousePrice:F,dimLength:I,dimWeightPc:K,dimWidth:L,dimQtyBundling:H,dimHeight:se,totalDimWeight:Y,docMSDS:Q,docDrawing:X,createdDate:n==="edit"?(t==null?void 0:t.createdDate)||new Date().toLocaleDateString():new Date().toLocaleDateString()};o(x,n),O()}function O(){j(""),r(""),i(""),c(""),y(""),T(""),b(""),v(""),A(""),P(""),S(""),k(""),M(""),J(""),W(""),R(""),D(""),$("")}function B(){const x=`EWH-${Math.random().toString(36).substr(2,9).toUpperCase()}`,w=(Math.random()*1e3).toFixed(2);A(x),P(w),i(w)}function z(){O(),a()}if(!s)return null;const q=n==="edit"?"Material - Edit":"Material - New",d=n==="edit"?"Save Changes":"Save Material";return e.jsx("div",{className:"np-modal-backdrop",onMouseDown:x=>{x.target===x.currentTarget&&z()},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:800},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:q})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:z,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",style:{fontSize:"0.7rem"},children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Item No ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",value:m,onChange:x=>j(x.target.value),placeholder:"Enter Item No",autoFocus:!0}),e.jsx("div",{className:"input-group-append",children:e.jsxs("button",{className:"btn btn-primary",type:"button",style:{fontSize:"0.8rem"},onClick:B,disabled:!m,children:[e.jsx("i",{className:"fas fa-search mr-1"}),"Search eWH"]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Material Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:h,onChange:x=>r(x.target.value),placeholder:"Enter Material Name"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:u,onChange:x=>i(x.target.value),placeholder:"Enter Price",step:"0.01",min:"0"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"eWarehouse Price"}),e.jsx("input",{type:"number",className:"form-control",value:F,onChange:x=>P(x.target.value),placeholder:"eWarehouse Price",step:"0.01",min:"0",readOnly:!0})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Material Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:p,onChange:x=>c(x.target.value),children:[e.jsx("option",{value:"",children:"Select Material Type"}),e.jsx("option",{value:"Inner",children:"Inner"}),e.jsx("option",{value:"Outer",children:"Outer"}),e.jsx("option",{value:"Module",children:"Module"}),e.jsx("option",{value:"Module",children:"Box"})]})]})]})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Supplier"})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Code"}),e.jsx("input",{type:"text",className:"form-control",value:f,onChange:x=>y(x.target.value),placeholder:"Enter Supplier Code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Address"}),e.jsx("input",{type:"text",className:"form-control",value:g,readOnly:!0,placeholder:"Address"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("input",{type:"text",className:"form-control",value:N,readOnly:!0,placeholder:"Supplier Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Plant Code"}),e.jsx("input",{type:"text",className:"form-control",value:C,readOnly:!0,placeholder:"Plant Code"})]})]})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Dimension"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Length (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:I,onChange:x=>S(x.target.value),placeholder:"Length (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Weight/pc (gr)"}),e.jsx("input",{type:"number",className:"form-control",value:K,onChange:x=>k(x.target.value),placeholder:"Weight/pc (gr)"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Width (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:L,onChange:x=>M(x.target.value),placeholder:" Width (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Qty/Bundling"}),e.jsx("input",{type:"number",className:"form-control",value:H,onChange:x=>J(x.target.value),placeholder:"Qty/Bundling"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Height (mm) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:se,onChange:x=>W(x.target.value),placeholder:"Height (mm)"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Total Weight (gr)"}),e.jsx("input",{type:"number",className:"form-control",value:Y,onChange:x=>R(x.target.value),placeholder:"Total Weight (gr)"})]})})]}),e.jsx("h6",{className:"mt-3",children:e.jsx("b",{children:"Documents"})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"MSDS"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-image"})})}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:x=>{var w;return D(((w=x.target.files[0])==null?void 0:w.name)||"")}})]})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Drawing"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-image"})})}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:x=>{var w;return $(((w=x.target.files[0])==null?void 0:w.name)||"")}})]})]})})]})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary mr-2",onClick:z,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Cancel"]}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:U,children:[e.jsx("i",{className:"fas fa-save mr-1"}),d]})]})]})})}function Kl({materialNo:s,setMaterialNo:a,materialName:o,setMaterialName:t,parentMaterial:n,setParentMaterial:m,itemNo:j,setItemNo:h,price:r,setPrice:u,materialType:i,setMaterialType:p,onFilter:c,onClearFilters:f}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Item No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:y=>a(y.target.value),placeholder:"Material No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Material Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:y=>t(y.target.value),placeholder:"Material Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Parent Material"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:y=>m(y.target.value),placeholder:"Parent Material"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"eWarehouse Item No"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:y=>h(y.target.value),placeholder:"Item No"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Price"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:y=>u(y.target.value),placeholder:"Price"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Material Type"}),e.jsxs("select",{className:"form-control form-control-sm",value:i,onChange:y=>p(y.target.value),children:[e.jsx("option",{value:"",children:"Select Material Type"}),e.jsx("option",{value:"Inner",children:"Inner"}),e.jsx("option",{value:"Outer",children:"Outer"}),e.jsx("option",{value:"Module",children:"Module"}),e.jsx("option",{value:"Box",children:"Module"})]})]})]})]}),e.jsxs("div",{className:"form-group text-right mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:c,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:f,children:[e.jsx("i",{className:"fas fa-undo mr-1"})," Clear"]})]})]})}function Vl({materials:s,allMaterials:a,totalMaterials:o,currentPage:t,totalPages:n,pageSize:m,onPageChange:j,onDeleteMaterial:h,onEditMaterial:r}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50},className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"Item No"}),e.jsx("th",{className:"text-center",children:"Material Name"}),e.jsx("th",{className:"text-center",children:"Price"}),e.jsx("th",{className:"text-center",children:"eWH Item No"}),e.jsx("th",{className:"text-center",children:"eWH Price"}),e.jsx("th",{className:"text-center",children:"Material Type"}),e.jsx("th",{style:{width:120},className:"text-center",children:"Action"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-4 text-muted text-center",children:"No Data Found"})}):s.map((u,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:(t-1)*m+i+1}),e.jsx("td",{className:"text-center",children:u.materialNo}),e.jsx("td",{children:u.materialName}),e.jsx("td",{className:"text-center",children:u.price}),e.jsx("td",{className:"text-center",children:u.eWarehouse}),e.jsx("td",{className:"text-center",children:u.eWarehousePrice}),e.jsx("td",{className:"text-center",children:u.materialType}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>r&&r(u),title:"Edit Material",children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>h&&h(i),title:"Delete Material",children:e.jsx("i",{className:"fas fa-trash"})})]})]},u.id||i))})]})}),n>1&&e.jsx(_e,{currentPage:t,totalPages:n,totalItems:o,pageSize:m,onPageChange:j})]})}function Ss(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(!1),[y,N]=l.useState("new"),[T,g]=l.useState(null),[b,C]=l.useState(1),v=10,[E,A]=l.useState([]),[F,P]=l.useState([]);l.useEffect(()=>{fetch("/materials.json").then(R=>R.json()).then(R=>{A(R),P([])})},[]);const I=Math.ceil(F.length/v),S=(b-1)*v,K=S+v,k=F.slice(S,K);function L(){let R=E.filter(D=>{const X=!s||D.materialNo&&D.materialNo.toLowerCase().includes(s.toLowerCase()),$=!o||D.materialName&&D.materialName.toLowerCase().includes(o.toLowerCase()),U=!n||D.parentMaterial&&D.parentMaterial.toLowerCase().includes(n.toLowerCase()),O=!j||D.itemNo&&D.itemNo.toLowerCase().includes(j.toLowerCase()),B=!r||D.price&&D.price.toString().includes(r),z=!i||D.materialType===i;return X&&$&&U&&O&&B&&z});P(!s&&!o&&!n&&!j&&!r&&!i?[...E].reverse():R),C(1),console.log(`Filtered ${R.length} materials from ${E.length} total`)}function M(){a(""),t(""),m(""),h(""),u(""),p(""),P([]),C(1)}function H(){g(null),N("new"),f(!0)}function J(){f(!1),g(null),N("new")}function se(R,Q="new"){if(Q==="edit"&&T){const D=T.materialNo,X=E.map(U=>U.materialNo===D?{...U,...R}:U),$=F.map(U=>U.materialNo===D?{...U,...R}:U);A(X),P($)}else A(D=>[R,...D]),P(D=>[R,...D]);f(!1),g(null),N("new")}function W(R){if(!confirm("Delete this material?"))return;const Q=(b-1)*v+R,D=F[Q];if(!D)return;const X=F.filter((O,B)=>B!==Q),$=E.filter(O=>O.materialNo!==D.materialNo);P(X),A($);const U=Math.ceil(X.length/v);b>U&&U>0&&C(U)}function Y(R){g(R),N("edit"),f(!0)}return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Material List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:H,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Material"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Upload placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Download template placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(Kl,{materialNo:s,setMaterialNo:a,materialName:o,setMaterialName:t,parentMaterial:n,setParentMaterial:m,itemNo:j,setItemNo:h,price:r,setPrice:u,materialType:i,setMaterialType:p,onFilter:L,onClearFilters:M}),e.jsx(Vl,{materials:k,allMaterials:E,totalMaterials:F.length,currentPage:b,totalPages:I,pageSize:v,onPageChange:C,onDeleteMaterial:W,onEditMaterial:Y})]}),e.jsx($l,{show:c,onClose:J,onSave:se,initialData:T,mode:y})]})})}function Gl(){const s=Ne(),[a,o]=l.useState(!1),[t,n]=l.useState(!1),m=Ps(),j=ls();l.useEffect(()=>{const u=(m.pathname||"").toLowerCase();u.startsWith("/projects")||u.startsWith("/models")||u.startsWith("/parts")||u.startsWith("/suppliers")||u.startsWith("/material")||u.startsWith("/module-type")||u.startsWith("/params")?o(!0):o(!1),u.startsWith("/packing")||u.startsWith("/cps")||u.startsWith("/dpi")||u.startsWith("/calculate-packing-cost")||u.startsWith("/calculate")?n(!0):n(!1)},[m.pathname]);const h=({isActive:u})=>"nav-link"+(u?" active":"");function r(u){u&&u.preventDefault&&u.preventDefault();try{s&&typeof s.logout=="function"&&s.logout()}catch{}j("/login")}return e.jsxs("aside",{className:"main-sidebar sidebar-dark-primary elevation-4",style:{minHeight:"100vh"},children:[e.jsx("div",{className:"brand-link",children:e.jsx(ie,{to:"/",className:"d-block text-decoration-none",children:e.jsx("span",{className:"brand-text font-weight-light",children:"My App"})})}),e.jsx("div",{className:"sidebar d-flex flex-column",style:{minHeight:"calc(100vh - 56px)"},children:e.jsx("nav",{className:"mt-2 flex-grow-1",children:e.jsxs("ul",{className:"nav nav-pills nav-sidebar flex-column",role:"menu","aria-orientation":"vertical",style:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/",className:h,end:!0,children:[e.jsx("i",{className:"nav-icon fas fa-tachometer-alt"}),e.jsx("p",{children:"Dashboard"})]})}),e.jsxs("li",{className:`nav-item has-treeview ${a?"menu-open":""}`,children:[e.jsxs("div",{role:"button",onClick:()=>o(u=>!u),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&o(i=>!i)},tabIndex:0,"aria-expanded":a,className:`nav-link d-flex align-items-center ${a?"active":""}`,style:{cursor:"pointer",userSelect:"none"},children:[e.jsx("i",{className:"nav-icon fas fa-database"}),e.jsx("p",{className:"flex-grow-1 mb-0 ml-2",children:"Master"}),e.jsx("i",{className:`right fas ${a?"fa-angle-down":"fa-angle-left"}`})]}),e.jsxs("ul",{className:"nav nav-treeview",style:{display:a?"block":"none"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/projects",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Projects"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/models",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Models"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/material",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Material"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/parts",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Parts"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/suppliers",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Suppliers"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/params",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Parameters"})]})})]})]}),e.jsxs("li",{className:`nav-item has-treeview ${t?"menu-open":""}`,children:[e.jsxs("div",{role:"button",onClick:()=>n(u=>!u),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&n(i=>!i)},tabIndex:0,"aria-expanded":t,className:`nav-link d-flex align-items-center ${t?"active":""}`,style:{cursor:"pointer",userSelect:"none"},children:[e.jsx("i",{className:"nav-icon fas fa-box-open"}),e.jsx("p",{className:"flex-grow-1 mb-0 ml-2",children:"Packing Spec"}),e.jsx("i",{className:`right fas ${t?"fa-angle-down":"fa-angle-left"}`})]}),e.jsxs("ul",{className:"nav nav-treeview",style:{display:t?"block":"none"},children:[e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/packing/cps",className:({isActive:u})=>"nav-link"+(u?" active":""),children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"CPS"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/packing/DPI",className:({isActive:u})=>"nav-link"+(u?" active":""),children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"DPI"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/packing/CalculatePackingCost",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Calculate Packing Cost"})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs(ie,{to:"/packing/ComparisonPage",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Comparison"})]})})]})]}),e.jsx("li",{style:{marginTop:"auto"}}),e.jsx("li",{className:"nav-item",style:{padding:"0.5rem 0"},children:e.jsxs(ie,{to:"/settings",className:h,children:[e.jsx("i",{className:"far fa-circle nav-icon"}),e.jsx("p",{children:"Settings"})]})}),e.jsx("li",{className:"nav-item",style:{padding:"0.5rem 0"},children:e.jsxs("button",{type:"button",onClick:r,className:"btn btn-block btn-outline-danger d-flex align-items-center",style:{justifyContent:"flex-start"},children:[e.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),e.jsx("span",{children:"Logout"})]})})]})})})]})}function Yl(){const s=Ne();return e.jsxs("nav",{className:"main-header navbar navbar-expand navbar-white navbar-light",children:[e.jsxs("ul",{className:"navbar-nav",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link","data-widget":"pushmenu",href:"#",role:"button",children:e.jsx("i",{className:"fas fa-bars"})})}),e.jsx("li",{className:"nav-item d-none d-sm-inline-block",children:e.jsx("a",{href:"#",className:"nav-link",children:"Home"})})]}),e.jsxs("ul",{className:"navbar-nav ml-auto",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link","data-widget":"fullscreen",href:"#",role:"button",children:e.jsx("i",{className:"fas fa-expand-arrows-alt"})})}),s.user&&e.jsx("li",{className:"nav-item d-none d-sm-inline-block",children:e.jsx("span",{className:"nav-link",children:s.user.username})})]})]})}St.register(wt,Pt,kt,_t,It,At);const zl={labels:["Jan","Feb","Mar","Apr","May"],datasets:[{label:"Orders",data:[12,19,7,14,10],backgroundColor:"#007bff"}]};function Jl(){return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Sales"})}),e.jsx("div",{className:"card-body",children:e.jsx(yt,{data:zl})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Quick Stats"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"info-box mb-3 bg-info",children:[e.jsx("span",{className:"info-box-icon",children:e.jsx("i",{className:"fas fa-shopping-cart"})}),e.jsxs("div",{className:"info-box-content",children:[e.jsx("span",{className:"info-box-text",children:"Orders"}),e.jsx("span",{className:"info-box-number",children:"1,250"})]})]})})]})}),e.jsx("div",{className:"col-12 mt-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Recent Items"})}),e.jsx("div",{className:"card-body p-0",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Qty"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"1"}),e.jsx("td",{children:"33504-BZ292-C1"}),e.jsx("td",{children:"Hose"}),e.jsx("td",{children:"10"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"2"}),e.jsx("td",{children:"122810Y110"}),e.jsx("td",{children:"Hanger"}),e.jsx("td",{children:"2"})]})]})]})})]})})]})}function Ql(){const s=Ne(),[a,o]=l.useState(""),[t,n]=l.useState(""),[m,j]=l.useState(""),h=r=>{r.preventDefault(),s.login(a,t)||j("Invalid username or password")};return e.jsx("div",{className:"login-page bg-light min-vh-100 d-flex align-items-center justify-content-center",children:e.jsx("div",{className:"card shadow-sm",style:{width:"360px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{className:"mb-4 text-center",children:"Sign In"}),m&&e.jsx("div",{className:"alert alert-danger py-2",role:"alert",children:m}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:"Username"}),e.jsx("input",{type:"text",id:"username",className:"form-control",value:a,onChange:r=>o(r.target.value),placeholder:"Enter username",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",className:"form-control",value:t,onChange:r=>n(r.target.value),placeholder:"Enter password",required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Login"})]})]})})})}function Zl({visible:s,onClose:a,onSave:o,initialData:t}){const[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState("Draft"),[i,p]=l.useState(""),[c,f]=l.useState(""),[y,N]=l.useState(""),[T,g]=l.useState([]),[b,C]=l.useState(!1);l.useEffect(()=>{t?(m(t.project_code||""),h(t.project_name||""),u(t.project_status||"Draft"),p(t.project_manager||""),f(t.description||""),N(t.note||""),g(t.models||[])):(m(""),h(""),u("Draft"),p(""),f(""),N(""),g([]))},[t,s]);const v=()=>{C(!0)},E=I=>{g(S=>[...S,...I]),C(!1)},A=(I,S,K)=>{g(k=>k.map((L,M)=>M===I?{...L,[S]:K}:L))},F=I=>{g(S=>S.filter((K,k)=>k!==I))},P=()=>{o&&o({code:n,name:j,status:r,manager:i,description:c,note:y,models:T})};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"np-modal-backdrop",style:{position:"fixed",inset:0,zIndex:1040},children:e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:1e3,margin:"40px auto",zIndex:1041},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:t?"Project - Edit":"Project - New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool","aria-label":"Close",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"small",children:["Project Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:n,onChange:I=>m(I.target.value),placeholder:"Project Code"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Project Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:j,onChange:I=>h(I.target.value),placeholder:"Project Name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"small",children:["Status ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{className:"form-control form-control-sm mb-2",value:r,onChange:I=>u(I.target.value),children:[e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"On Hold"}),e.jsx("option",{children:"Completed"})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Project Manager"}),e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{className:"form-control form-control-sm",value:i,onChange:I=>p(I.target.value),placeholder:"Project Manager"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-user"})})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Description"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:c,onChange:I=>f(I.target.value),placeholder:"Description"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small",children:"Note"}),e.jsx("textarea",{className:"form-control form-control-sm mb-2",value:y,onChange:I=>N(I.target.value),rows:2,placeholder:"Note"})]})]})]}),e.jsx("div",{className:"card mt-3",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:v,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Model"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",children:[e.jsx("i",{className:"fas fa-cloud-upload-alt"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",children:[e.jsx("i",{className:"fas fa-cloud-download-alt"})," Template"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40,textAlign:"center"},children:"No"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Code"}),e.jsx("th",{style:{textAlign:"center"},children:"CFC"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Impl. Period"}),e.jsx("th",{style:{textAlign:"center"},children:"Dest. Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Remark"}),e.jsx("th",{style:{width:90,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:T.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center text-muted py-4",children:"No Data Found"})}):T.map((I,S)=>e.jsxs("tr",{children:[e.jsx("td",{children:S+1}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:I.model_code,onChange:K=>A(S,"model_code",K.target.value),placeholder:"Model Code"})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:I.model_cfc,onChange:K=>A(S,"model_cfc",K.target.value),placeholder:"CFC",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:I.model_name,onChange:K=>A(S,"model_name",K.target.value),placeholder:"Model Name",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:I.model_implementation_period,onChange:K=>A(S,"model_implementation_period",K.target.value),placeholder:"Implementation Period",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:I.model_destination_code,onChange:K=>A(S,"model_destination_code",K.target.value),placeholder:"Destination Code",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:I.model_type,onChange:K=>A(S,"model_type",K.target.value),placeholder:"Type",readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:I.model_remark,onChange:K=>A(S,"model_remark",K.target.value),placeholder:"Remark",readOnly:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>F(S),children:e.jsx("i",{className:"fas fa-trash"})})})]},S))})]})})]})})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{type:"button",className:"btn btn-primary mr-2",onClick:P,children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"})]})]})}),e.jsx(as,{show:b,onClose:()=>C(!1),onAdd:E})]}):null}function Xl({code:s,setCode:a,name:o,setName:t,models:n,setModels:m,manager:j,setManager:h,statuses:r,setStatuses:u,handleSearch:i,clearFilters:p,handleOpenNew:c}){function f(y){if(y==="all"){const N=!r.all;u({all:N,draft:!1,active:!1,onhold:!1,completed:!1})}else u(N=>({...N,[y]:!N[y],all:!1}))}return e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:s,onChange:y=>a(y.target.value),className:"form-control form-control-sm",placeholder:"Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search code",children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Name"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:o,onChange:y=>t(y.target.value),className:"form-control form-control-sm",placeholder:"Project name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search name",children:e.jsx("i",{className:"fas fa-search"})})})]})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Related Models"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:n,onChange:y=>m(y.target.value),className:"form-control form-control-sm",placeholder:"Model code / name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Select Model",children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Project Manager"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:j,onChange:y=>h(y.target.value),className:"form-control form-control-sm",placeholder:"Manager name"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-user"})})})]})]})})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{className:"small mb-1 d-block",children:"Status"}),e.jsx("div",{className:"form-inline flex-wrap",children:["all","draft","active","onhold","completed"].map(y=>{const N=`status-${y}`;return e.jsxs("div",{className:"form-check mr-3",children:[e.jsx("input",{id:N,type:"checkbox",className:"form-check-input",checked:r[y],onChange:()=>f(y)}),e.jsx("label",{className:"form-check-label small ml-1",htmlFor:N,children:y==="onhold"?"On Hold":y.charAt(0).toUpperCase()+y.slice(1)})]},y)})})]})}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-end",children:[e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm mr-2",onClick:i,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:p,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})})]})}function ea({results:s,handleEdit:a,handleDelete:o,currentPage:t,setCurrentPage:n,pageSize:m}){const j=Math.ceil(s.length/m),h=s.slice((t-1)*m,t*m);return e.jsxs("div",{className:"card-body pt-0",children:[e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{className:"thead-light",style:{position:"sticky",top:0,zIndex:5},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50},children:"No"}),e.jsx("th",{children:"Project Code"}),e.jsx("th",{children:"Project Name"}),e.jsx("th",{children:"Project Manager"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Models"}),e.jsx("th",{style:{width:120},children:"Action"})]})}),e.jsxs("tbody",{children:[h.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-4 text-muted",children:"No Data Found"})}),h.map((r,u)=>e.jsxs("tr",{children:[e.jsx("td",{children:(t-1)*m+u+1}),e.jsx("td",{children:r.project_code}),e.jsx("td",{children:r.project_name}),e.jsx("td",{children:r.project_manager}),e.jsx("td",{children:r.project_status}),e.jsx("td",{children:Array.isArray(r.models)?r.models.map(i=>typeof i=="string"?i:i.model_code).join(", "):r.models}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>a((t-1)*m+u),children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>o((t-1)*m+u),children:e.jsx("i",{className:"fas fa-trash"})})]})]},u))]})]})}),e.jsx(_e,{currentPage:t,totalPages:j,totalItems:s.length,pageSize:m,onPageChange:n})]})}function sa(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState({all:!0,draft:!1,active:!1,onhold:!1,completed:!1}),[i,p]=l.useState(!1),[c,f]=l.useState(null),[y,N]=l.useState([]),[T,g]=l.useState([]),[b,C]=l.useState(1),v=10;l.useEffect(()=>{fetch("/packing-cost-fe/projects.json").then(L=>{if(!L.ok)throw new Error("Network response was not ok");return L.json()}).then(L=>{g(L)}).catch(L=>{console.error("Error fetching projects:",L)})},[]);function E(){a(""),t(""),m(""),h(""),u({all:!0,draft:!1,active:!1,onhold:!1,completed:!1}),N([]),C(1)}function A(){const k=!s&&!o&&!n&&!j&&r.all;let L=T.filter(M=>{var H,J,se;return(!s||((H=M.code)==null?void 0:H.toLowerCase().includes(s.toLowerCase())))&&(!o||((J=M.name)==null?void 0:J.toLowerCase().includes(o.toLowerCase())))&&(!n||(Array.isArray(M.models)?M.models.join(", ").toLowerCase().includes(n.toLowerCase()):(M.models||"").toLowerCase().includes(n.toLowerCase())))&&(!j||((se=M.manager)==null?void 0:se.toLowerCase().includes(j.toLowerCase())))});if(!r.all){const M=[];r.draft&&M.push("Draft"),r.active&&M.push("Active"),r.onhold&&M.push("On Hold"),r.completed&&M.push("Completed"),M.length>0&&(L=L.filter(H=>M.includes(H.status)))}N(k?[...L].reverse():L),C(1)}function F(){f(null),p(!0)}function P(){p(!1)}function I(k){if(c!==null)N(L=>L.map((M,H)=>H!==c?M:{...M,project_code:k.code,project_name:k.name,project_manager:k.manager,project_status:k.status,description:k.description,note:k.note,models:k.models}));else{const L={project_code:k.code||`CFC-${((y||[]).length+1).toString().padStart(3,"0")}`,project_name:k.name||"(No name)",project_manager:k.manager||"",project_status:k.status||"Draft",description:k.description,note:k.note,models:k.models};N(M=>[L,...M||[]])}p(!1),f(null)}function S(k){f(k),p(!0)}function K(k){N(L=>L.filter((M,H)=>H!==k))}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-secondary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Project List"})}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:F,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," New Project"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Download Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(Xl,{code:s,setCode:a,name:o,setName:t,models:n,setModels:m,manager:j,setManager:h,statuses:r,setStatuses:u,handleSearch:A,clearFilters:E,handleOpenNew:F}),e.jsx(ea,{results:y,handleEdit:S,handleDelete:K,currentPage:b,setCurrentPage:C,pageSize:v})]}),e.jsx(Zl,{visible:i,onClose:P,onSave:I,initialData:c!==null&&y&&y[c]?{...y[c],models:Array.isArray(y[c].models)?y[c].models.map(k=>typeof k=="string"?{code:k,name:"",remark:""}:k):(y[c].models||"").split(",").map(k=>({code:k.trim(),name:"",remark:""}))}:null})]})}function ta({show:s,onClose:a,onSave:o,initialData:t}){const[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(""),[y,N]=l.useState(""),[T,g]=l.useState(""),[b,C]=l.useState(""),[v,E]=l.useState(""),[A,F]=l.useState(""),[P,I]=l.useState(""),[S,K]=l.useState([]),[k,L]=l.useState(!1),[M,H]=l.useState([]);l.useEffect(()=>{var D,X;s&&(t?(m(((D=t.project)==null?void 0:D.project_code)||""),h(((X=t.project)==null?void 0:X.project_name)||""),u(t.model_code||""),p(t.model_name||""),f(t.model_remark||""),C(t.model_implementation_period||""),E(t.model_destination_code||""),F(t.destinationCountryCode||""),I(t.country||""),K(t.parts||[]),N(t.model_cfc||""),g(t.model_type||"")):(m(""),h(""),u(""),p(""),f(""),C(""),E(""),F(""),I(""),K([]),N(""),g("")),L(!1))},[s,t]),l.useEffect(()=>{fetch("/projects.json").then(D=>D.json()).then(D=>H(D))},[]),l.useEffect(()=>{if(n){const D=M.find(X=>X.project_code===n);h(D?D.project_name:"")}else h("")},[n]);function J(){L(!0)}function se(D){const X=D.map($=>({partNo:$.partNo||"",suffix:"",name:$.partName||"",parent:$.parentPartNo||"",supplierId:$.supplierId||"",supplierName:$.supplierName||"",L:$.L||0,W:$.W||0,H:$.H||0,wtPerPc:$.wtPerPc||0,qty:1,totalWt:$.wtPerPc?(1*$.wtPerPc).toFixed(2):0}));K($=>[...$,...X]),L(!1)}function W(D){K(X=>X.filter(($,U)=>U!==D))}function Y(D,X,$){const U=[...S],O={...U[D]};if(O[X]=$,X==="qty"||X==="wtPerPc"){const B=X==="qty"?$:O.qty,z=X==="wtPerPc"?$:O.wtPerPc;O.totalWt=(Number(B)*Number(z)).toFixed(2)}U[D]=O,K(U)}function R(D){E(D);const X=Ge.find($=>$.destCode===D);X?(F(X.code),I(X.country)):(F(""),I(""))}function Q(){if(!r.trim()){alert("Please enter Model Code");return}const D={...t||{},model_code:r,model_name:i,model_remark:c,model_implementation_period:b,model_destination_code:v,destinationCountryCode:A,country:P,parts:S.slice(),model_cfc:y,model_type:T,project:{...(t==null?void 0:t.project)||{},project_code:n,project_name:j}};console.log("Saving model:",D),o(D)}return s?e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:D=>{D.target===D.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-success",style:{maxWidth:1200},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsxs("b",{children:["Model - ",t?"Edit":"New"]})}),e.jsx("div",{className:"ml-2 text-muted small",style:{marginLeft:8},children:"|"}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Model Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:r,onChange:D=>u(D.target.value),placeholder:"Model Code"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Model Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:i,onChange:D=>p(D.target.value),placeholder:"Model Name"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"CFC"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:y,onChange:D=>N(D.target.value),placeholder:"CFC"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Type"}),e.jsxs("select",{className:"form-control form-control-sm mb-2",value:T,onChange:D=>g(D.target.value),children:[e.jsx("option",{value:"",children:"-- Select Type --"}),e.jsx("option",{value:"PxP",children:"PxP"}),e.jsx("option",{value:"Lot",children:"Lot"}),e.jsx("option",{value:"Engine",children:"Engine"})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Project Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:n,onChange:D=>m(D.target.value),placeholder:"Project Code"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Project Name"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:j,placeholder:"Project Name",readOnly:!0,style:{backgroundColor:"#f8f9fa"}})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Implementation Period ",e.jsx("span",{style:{color:"red"},children:"*"})," ",e.jsx("span",{className:"text-muted ml-2",children:e.jsx("i",{children:"e.g., 02.2025"})})]}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:b,onChange:D=>C(D.target.value),placeholder:"Implementation Period"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"small",children:["Destination Code ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("div",{className:"input-group input-group-sm mb-2",children:[e.jsx("input",{className:"form-control form-control-sm",value:v,onChange:D=>R(D.target.value),placeholder:"Destination Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-map-marker-alt"})})})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Destination Country Code"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:A,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"small",children:"Country"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:P,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"small",children:"Remark"}),e.jsx("input",{className:"form-control form-control-sm mb-2",value:c,onChange:D=>f(D.target.value),placeholder:"Remark"})]})}),e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-2",onClick:J,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Part"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-2",onClick:()=>alert("Upload placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-upload-alt mr-1"})," Upload"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Download template placeholder"),children:[e.jsx("i",{className:"fas fa-cloud-download-alt mr-1"})," Template"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",style:{fontSize:"0.8rem"},children:[e.jsx("thead",{className:"thead-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:130,textAlign:"center"},children:"Part No"}),e.jsx("th",{style:{width:50,textAlign:"center"},children:"Suffix"}),e.jsx("th",{style:{textAlign:"center"},children:"Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Parent"}),e.jsx("th",{style:{width:50,textAlign:"center"},children:"Supplier ID"}),e.jsx("th",{style:{textAlign:"center"},children:"Supplier Name"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"L"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"W"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"H"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"Wt/pc"}),e.jsx("th",{style:{width:60,textAlign:"center"},children:"Qty"}),e.jsx("th",{style:{width:70,textAlign:"center"},children:"Total Wt"}),e.jsx("th",{style:{width:70,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{children:S.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"13",className:"text-center text-muted",children:"- No parts added yet -"})}):S.map((D,X)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:D.partNo,onChange:$=>Y(X,"partNo",$.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:D.suffix,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:D.name,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:D.parent,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:D.supplierId,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:D.supplierName,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:D.L,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:D.W,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:D.H,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",style:{textAlign:"right"},value:D.wtPerPc,readOnly:!0})}),e.jsx("td",{children:e.jsx("input",{type:"number",className:"form-control form-control-sm",style:{textAlign:"right"},value:D.qty,onChange:$=>Y(X,"qty",$.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"form-control form-control-sm",value:D.totalWt,readOnly:!0})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>W(X),children:e.jsx("i",{className:"fas fa-trash"})})})]},X))})]})})]}),e.jsxs("div",{className:"card-footer text-right",style:{marginTop:8},children:[e.jsxs("button",{type:"button",className:"btn btn-primary mr-2",onClick:Q,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{type:"button",className:"btn btn-outline-secondary",onClick:a,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),k&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(Ce,{show:k,onClose:()=>L(!1),onSelect:se})}),e.jsx("style",{children:`
        /* Modal Backdrop Styling */
        .np-modal-backdrop {
          position: fixed;                    /* Fixed position overlay */
          inset: 0;                          /* Cover entire viewport */
          background: rgba(0,0,0,0.35);      /* Semi-transparent dark background */
          z-index: 2000;                     /* High z-index for overlay */
          display: flex;                     /* Flexbox for centering */
          align-items: center;               /* Vertical centering */
          justify-content: center;           /* Horizontal centering */
          padding: 1rem;                     /* Padding around modal */
        }
        
        /* Modal Container Styling */
        .np-modal { 
          width: 100%;                       /* Full width within constraints */
          z-index: 2001;                     /* Higher z-index than backdrop */
        }
        
        /* Table Cell Alignment */
        .table-sm td, .table-sm th { 
          vertical-align: middle;            /* Middle vertical alignment for table cells */
        }
      `})]}):null}function la({code:s,setCode:a,filterName:o,setFilterName:t,filterCfc:n,setFilterCfc:m,filterType:j,setFilterType:h,filterRemark:r,setFilterRemark:u,implementationPeriod:i,setImplementationPeriod:p,destinationCode:c,setDestinationCode:f,destinationCountryCode:y,setDestinationCountryCode:N,country:T,setCountry:g,handleFilter:b,handleClearFilters:C,handleOpenNew:v}){const E=A=>{f(A);const F=Ge.find(P=>P.destCode===A);F?(N(F.code),g(F.country)):(N(""),g(""))};return e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"form-row mb-3",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Model Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{value:s,onChange:A=>a(A.target.value),className:"form-control form-control-sm",placeholder:"Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search code",onClick:()=>alert("Search code placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Model Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:o,onChange:A=>t(A.target.value),placeholder:"Name"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"CFC"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:A=>m(A.target.value),placeholder:"CFC"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Type"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:A=>h(A.target.value),placeholder:"Type"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Implementation Period"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:i,onChange:A=>p(A.target.value),placeholder:"Implementation Period"})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Destination Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:A=>E(A.target.value),placeholder:"Destination Code"}),e.jsx("div",{className:"input-group-append",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fas fa-map-marker-alt"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Destination Country Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:y,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Country"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:T,readOnly:!0,placeholder:"Auto-filled",style:{backgroundColor:"#f8f9fa"}})]}),e.jsxs("div",{className:"form-group col-md-12",children:[e.jsx("label",{className:"small mb-1",children:"Remark"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:A=>u(A.target.value),placeholder:"Remark"})]}),e.jsxs("div",{className:"form-group col-md-12 text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:b,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:C,children:[e.jsx("i",{className:"fas fa-undo mr-1"})," Reset"]})]})]})})}function aa({models:s,handleDeleteModel:a,handleEditModel:o,currentPage:t,setCurrentPage:n,pageSize:m}){const j=Math.ceil(s.length/m),h=s.slice((t-1)*m,t*m);return e.jsxs("div",{className:"card-body pt-0",children:[e.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{className:"thead-light",style:{position:"sticky",top:0,zIndex:5,fontSize:"0.8rem"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:50,textAlign:"center"},children:"No"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Model Name"}),e.jsx("th",{style:{textAlign:"center"},children:"CFC"}),e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Project Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Impl Period"}),e.jsx("th",{style:{textAlign:"center"},children:"Dest Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country"}),e.jsx("th",{style:{textAlign:"center"},children:"Remark"}),e.jsx("th",{style:{textAlign:"center"},children:"Parts"}),e.jsx("th",{style:{width:120,textAlign:"center"},children:"Action"})]})}),e.jsx("tbody",{style:{fontSize:"0.8rem"},children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"13",className:"text-center",children:"No models found"})}):h.map((r,u)=>{var p;const i=Ge.find(c=>c.destCode===r.model_destination_code);return e.jsxs("tr",{children:[e.jsx("td",{children:(t-1)*m+u+1}),e.jsx("td",{style:{textAlign:"center"},children:r.model_code}),e.jsx("td",{style:{textAlign:"center"},children:r.model_name}),e.jsx("td",{style:{textAlign:"center"},children:r.model_cfc}),e.jsx("td",{style:{textAlign:"center"},children:r.model_type}),e.jsx("td",{style:{textAlign:"center"},children:(p=r.project)==null?void 0:p.project_code}),e.jsx("td",{style:{textAlign:"center"},children:r.model_implementation_period}),e.jsx("td",{style:{textAlign:"center"},children:r.model_destination_code}),e.jsx("td",{style:{textAlign:"center"},children:i?i.code:""}),e.jsx("td",{style:{textAlign:"center"},children:i?i.country:""}),e.jsx("td",{style:{textAlign:"center"},children:r.model_remark}),e.jsx("td",{style:{textAlign:"right"},children:Array.isArray(r.parts)?r.parts.length:0}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>o((t-1)*m+u),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>a((t-1)*m+u),children:e.jsx("i",{className:"fas fa-trash"})})]})]},u)})})]})}),e.jsx(_e,{currentPage:t,totalPages:j,totalItems:s.length,pageSize:m,onPageChange:n})]})}function na(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(""),[y,N]=l.useState(""),[T,g]=l.useState(""),[b,C]=l.useState(""),[v,E]=l.useState(!1),[A,F]=l.useState(null),[P,I]=l.useState(null),[S,K]=l.useState([]),[k,L]=l.useState([]),[M,H]=l.useState(1),J=10;l.useEffect(()=>{fetch("/packing-cost-fe/models.json").then(U=>{if(!U.ok)throw new Error("Network response was not ok");return U.json()}).then(U=>{const O=U.sort((B,z)=>new Date(z.model_implementation_period)-new Date(B.model_implementation_period));K(O),L([])}).catch(U=>{console.error("Error fetching models:",U)})},[]);function se(){if(!s&&!o&&!n&&!j&&!r&&!i&&!c&&!y){L([...S].reverse()),H(1);return}let U=S.filter(O=>{var B,z,q,d,x,w,V,_;return(!s||((B=O.model_code)==null?void 0:B.toLowerCase().includes(s.toLowerCase())))&&(!o||((z=O.project.project_code)==null?void 0:z.toLowerCase().includes(o.toLowerCase())))&&(!n||((q=O.model_name)==null?void 0:q.toLowerCase().includes(n.toLowerCase())))&&(!j||((d=O.model_cfc)==null?void 0:d.toLowerCase().includes(j.toLowerCase())))&&(!r||((x=O.model_type)==null?void 0:x.toLowerCase().includes(r.toLowerCase())))&&(!i||((w=O.model_remark)==null?void 0:w.toLowerCase().includes(i.toLowerCase())))&&(!c||((V=O.model_implementation_period)==null?void 0:V.toLowerCase().includes(c.toLowerCase())))&&(!y||((_=O.model_destination_code)==null?void 0:_.toLowerCase().includes(y.toLowerCase())))});L(U),H(1)}function W(){a(""),t(""),m(""),h(""),u(""),p(""),f(""),N(""),g(""),C(""),L([]),H(1)}function Y(){F(null),I(null),E(!0)}function R(){E(!1),F(null),I(null)}function Q($){var U,O,B,z,q,d,x,w;if(A!==null){const V=S.map((G,Z)=>Z===A?$:G);K(V);const _=k.map(G=>G.model_code===P.model_code&&G.model_name===P.model_name&&G.model_remark===P.model_remark?$:G);L(_)}else{const V=[$,...S];K(V),(!s||((U=$.model_code)==null?void 0:U.toLowerCase().includes(s.toLowerCase())))&&(!o||((O=$.project.project_code)==null?void 0:O.toLowerCase().includes(o.toLowerCase())))&&(!n||((B=$.model_name)==null?void 0:B.toLowerCase().includes(n.toLowerCase())))&&(!j||((z=$.model_cfc)==null?void 0:z.toLowerCase().includes(j.toLowerCase())))&&(!r||((q=$.model_type)==null?void 0:q.toLowerCase().includes(r.toLowerCase())))&&(!i||((d=$.model_remark)==null?void 0:d.toLowerCase().includes(i.toLowerCase())))&&(!c||((x=$.model_implementation_period)==null?void 0:x.toLowerCase().includes(c.toLowerCase())))&&(!y||((w=$.model_destination_code)==null?void 0:w.toLowerCase().includes(y.toLowerCase())))&&L([$,...k])}console.log("Model saved:",$),E(!1),F(null),I(null)}function D($){const U=k[$],O=S.findIndex(B=>B.model_code===U.model_code&&B.model_name===U.model_name&&B.model_remark===U.model_remark);console.log("Editing model:",U),console.log("Original index:",O),F(O),I(U),E(!0)}function X($){if(!confirm("Delete this model?"))return;const U=k[$],O=S.findIndex(B=>B.model_code===U.model_code&&B.model_name===U.model_name&&B.model_remark===U.model_remark);if(O!==-1){const B=S.filter((q,d)=>d!==O);K(B);const z=k.filter((q,d)=>d!==$);L(z)}}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Model List"})}),e.jsxs("div",{className:"ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:Y,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add New Model"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",title:"Upload",onClick:()=>alert("Upload placeholder"),children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",title:"Template",onClick:()=>alert("Download template placeholder"),children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsx(la,{code:s,setCode:a,projectCode:o,setProjectCode:t,filterName:n,setFilterName:m,filterCfc:j,setFilterCfc:h,filterType:r,setFilterType:u,filterRemark:i,setFilterRemark:p,implementationPeriod:c,setImplementationPeriod:f,destinationCode:y,setDestinationCode:N,destinationCountryCode:T,setDestinationCountryCode:g,country:b,setCountry:C,handleFilter:se,handleClearFilters:W,handleOpenNew:Y}),e.jsx(aa,{models:k,handleDeleteModel:X,handleEditModel:D,currentPage:M,setCurrentPage:H,pageSize:J})]}),e.jsx(ta,{show:v,onClose:R,onSave:Q,initialData:P})]})}function ra({show:s=!1,onClose:a=()=>{},onSave:o=()=>{},initialData:t=null}){const[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState(""),[y,N]=l.useState(""),[T,g]=l.useState(""),[b,C]=l.useState(""),[v,E]=l.useState(""),[A,F]=l.useState(""),[P,I]=l.useState(""),[S,K]=l.useState(""),[k,L]=l.useState(""),[M,H]=l.useState(""),[J,se]=l.useState(""),[W,Y]=l.useState([]),[R,Q]=l.useState(!1),[D,X]=l.useState({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""}),[$,U]=l.useState(!1),[O,B]=l.useState("parent");l.useEffect(()=>{var _,G,Z;s&&(t?(m(t.partNo||""),h(t.uniqueNo||""),u(t.suffixCode||""),p(t.partName||""),f(t.parentPartNo||""),N(t.suppCode||""),g(t.supplierName||""),C(t.supplierAddress||""),E(t.plantCode||""),F(t.uniqueNo2||""),I(((_=t.dimensions)==null?void 0:_.L)||""),K(((G=t.dimensions)==null?void 0:G.W)||""),L(((Z=t.dimensions)==null?void 0:Z.H)||""),H(t.weightPerPc||""),se(t.qtyBox||""),Y(t.childParts||[]),Q(!1),X({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})):(m(""),h(""),u(""),p(""),f(""),N(""),g(""),C(""),E(""),F(""),I(""),K(""),L(""),H(""),se(""),Y([]),Q(!1),X({partNo:"",suffix:"",uniqueNo:"",name:"",parent:"",supplierId:"",supplierName:"",L:"",W:"",H:"",wtPerPc:"",qty:""})))},[s,t]);function z(_,G,Z){const te=Number(_)||0,re=Number(G)||0,me=Number(Z)||0;return!te||!re||!me?"":(te*re*me/1e6).toFixed(3)}function q(_,G){const Z=Number(_)||0,te=Number(G)||0;return!Z||!te?"":(Z*te).toFixed(3)}function d(_){Y(G=>G.filter((Z,te)=>te!==_))}function x(){if(!n.trim()){alert("Please enter Part No");return}const _={partNo:n,uniqueNo:j,suffixCode:r,partName:i,parentPartNo:c,suppCode:y,supplierName:T,supplierAddress:b,plantCode:v,uniqueNo2:A,dimensions:{L:P,W:S,H:k},weightPerPc:Number(M)||0,qtyBox:Number(J)||0,totalWeight:Number(q(M,J))||0,childParts:W.slice()};o(_)}function w(_){_&&f(_.partNo),U(!1)}function V(_){if(_&&_.length>0){const G=_.map(Z=>({partNo:Z.partNo||Z[0]||"",suffix:Z.suffix||Z[1]||"",uniqueNo:Z.uniqueNo||"",name:Z.name||Z[2]||"",parent:Z.parent||"",supplierId:Z.supplierId||"",supplierName:Z.supplierName||Z[3]||"",L:Z.L||"",W:Z.W||"",H:Z.H||"",wtPerPc:Z.wtPerPc||"",qty:Z.qty||"",totalWt:Z.totalWt||""}));Y(Z=>[...Z,...G])}U(!1)}return s?e.jsxs("div",{className:"np-modal-backdrop",onMouseDown:_=>{_.target===_.currentTarget&&a()},children:[e.jsxs("div",{className:"np-modal card card-outline card-primary",style:{maxWidth:980},children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Part New"})}),e.jsx("div",{className:"card-tools ml-auto",children:e.jsx("button",{type:"button",className:"btn btn-tool",onClick:a,children:e.jsx("i",{className:"fas fa-times"})})})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6 d-flex",children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsx("input",{className:"form-control form-control-sm mb-1",value:n,onChange:_=>m(_.target.value)})]}),e.jsxs("div",{style:{width:"30%",marginLeft:8},children:[e.jsx("label",{className:"small mb-1",children:"Suffix Code"}),e.jsx("input",{className:"form-control form-control-sm mb-1",value:r,onChange:_=>u(_.target.value)})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Parent Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:c,onChange:_=>f(_.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>{B("parent"),U(!0)},children:e.jsx("i",{className:"fas fa-search"})})})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Unique No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:j,onChange:_=>h(_.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>alert("Flash/Generate Unique No"),children:e.jsx("i",{className:"fas fa-bolt"})})})]})]}),e.jsx("div",{className:"form-group col-md-6"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:y,onChange:_=>N(_.target.value)}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",type:"button",onClick:()=>alert("Search Supplier placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",value:T,readOnly:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Address"}),e.jsx("input",{className:"form-control form-control-sm",value:b,readOnly:!0})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Plant Code"}),e.jsx("input",{className:"form-control form-control-sm",value:v,readOnly:!0})]})]}),e.jsxs("div",{className:"form-row align-items-end",children:[e.jsxs("div",{className:"form-group col-md-6 mb-0",children:[e.jsx("label",{className:"small",children:"Dimension (mm)"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4 mb-0",children:[e.jsx("label",{className:"small mb-1",children:"Length"}),e.jsx("input",{className:"form-control form-control-sm",value:P,onChange:_=>I(_.target.value)})]}),e.jsxs("div",{className:"form-group col-md-4 mb-0",children:[e.jsx("label",{className:"small mb-1",children:"Width"}),e.jsx("input",{className:"form-control form-control-sm",value:S,onChange:_=>K(_.target.value)})]}),e.jsxs("div",{className:"form-group col-md-4 mb-0",children:[e.jsx("label",{className:"small mb-1",children:"Height"}),e.jsx("input",{className:"form-control form-control-sm",value:k,onChange:_=>L(_.target.value)})]})]})]}),e.jsx("div",{className:"form-group col-md-6 mb-0 d-flex align-items-end",children:e.jsxs("div",{style:{width:"100%"},children:[e.jsx("label",{className:"small mb-1",children:"Volume (m³)"}),e.jsx("input",{className:"form-control form-control-sm",value:z(P,S,k),readOnly:!0})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6 d-flex",children:[e.jsxs("div",{style:{flex:1,marginRight:8},children:[e.jsx("label",{className:"small mb-1",children:"Weight/PC (gr)"}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:M,onChange:_=>H(_.target.value)})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"small mb-1",children:"Qty/Box"}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:J,onChange:_=>se(_.target.value)})]})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{className:"small mb-1",children:"Total Weight (gr)"}),e.jsx("input",{className:"form-control form-control-sm",value:q(M,J),readOnly:!0})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{B("child"),U(!0)},children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Child Part"]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"No"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Unique No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Parent"}),e.jsx("th",{children:"Supplier ID"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"L"}),e.jsx("th",{children:"W"}),e.jsx("th",{children:"H"}),e.jsx("th",{children:"Wt/PC"}),e.jsx("th",{children:"Qty"}),e.jsx("th",{children:"Total Wt"}),e.jsx("th",{style:{width:90},children:"Action"})]})}),e.jsx("tbody",{children:W.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"15",className:"text-center py-4 text-muted",children:"No Data Found"})}):W.map((_,G)=>e.jsxs("tr",{children:[e.jsx("td",{children:G+1}),e.jsx("td",{children:_.partNo}),e.jsx("td",{children:_.suffix}),e.jsx("td",{children:_.uniqueNo}),e.jsx("td",{children:_.name}),e.jsx("td",{children:_.parent}),e.jsx("td",{children:_.supplierId}),e.jsx("td",{children:_.supplierName}),e.jsx("td",{children:_.L}),e.jsx("td",{children:_.W}),e.jsx("td",{children:_.H}),e.jsx("td",{children:_.wtPerPc}),e.jsx("td",{children:_.qty}),e.jsx("td",{children:_.totalWt}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>d(G),children:e.jsx("i",{className:"fas fa-trash"})})})]},G))})]})})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsxs("button",{className:"btn btn-primary mr-2",onClick:x,children:[e.jsx("i",{className:"fas fa-save mr-1"})," Save"]}),e.jsxs("button",{className:"btn btn-outline-secondary",onClick:a,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Cancel"]})]})]}),$&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:3e3},children:e.jsx(Ce,{show:$,mode:O==="parent"?"single":"multi",onClose:()=>U(!1),onSelect:O==="parent"?w:V})}),e.jsx("style",{children:`
        .np-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: 2000; display:flex; align-items:center; justify-content:center; padding:1rem; }
        .np-modal { width: 100%; max-height: 95vh; overflow: auto; z-index: 2001; }
        .table-sm td, .table-sm th { vertical-align: middle; }
      `})]}):null}function Us({show:s=!1,onClose:a=()=>{},onConfirm:o=()=>{},title:t="Confirmation",message:n="Are you sure?"}){return s?e.jsxs("div",{className:"modal-backdrop",children:[e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:t}),e.jsx("button",{type:"button",className:"close",onClick:a,children:e.jsx("span",{children:"×"})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:n})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:o,children:"Delete"})]})]})}),e.jsx("style",{jsx:!0,children:`
        .modal-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1050;
        }
        .modal-dialog {
          width: 500px;
        }
      `})]}):null}const oa=Fs.map((s,a)=>({id:a,partNo:s[0],name:s[1],supplierName:s[2],suffix:"A",uniqueNo:`UN-00${a+1}`,parentPartNo:null,childParts:[],dimensions:{L:10,W:10,H:10},qtyBox:1,totalWeight:1}));function ia(){const[s,a]=l.useState(""),[o,t]=l.useState(""),[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState(""),[i,p]=l.useState(""),[c,f]=l.useState([]),[y,N]=l.useState([]),[T,g]=l.useState(!1),[b,C]=l.useState(null),[v,E]=l.useState(!1),[A,F]=l.useState(null),[P,I]=l.useState(!1),[S,K]=l.useState(null),[k,L]=l.useState(10),[M,H]=l.useState(1),J=y.length;l.useEffect(()=>{f(oa),N([])},[]);function se(){if(!s&&!o&&!n&&!j&&!r&&!i){N([...c].reverse()),H(1);return}let x=c.filter(w=>{const V=!s||w.partNo.toLowerCase().includes(s.toLowerCase()),_=!o||w.uniqueNo&&w.uniqueNo.toLowerCase().includes(o.toLowerCase()),G=!n||w.supplierId&&w.supplierId.toLowerCase().includes(n.toLowerCase()),Z=!j||w.supplierName.toLowerCase().includes(j.toLowerCase()),te=!r||w.parentPartNo&&w.parentPartNo.toLowerCase().includes(r.toLowerCase()),re=!i||i==="Yes"&&w.childParts&&w.childParts.length>0||i==="No"&&(!w.childParts||w.childParts.length===0);return V&&_&&G&&Z&&te&&re});N(x),H(1)}function W(){a(""),t(""),m(""),h(""),u(""),p(""),N([]),H(1)}function Y(){C(null),g(!0)}function R(){C(null),g(!1)}function Q(d){if(b){const x=c.map(V=>V.id===b.id?{...V,...d}:V);f(x);const w=y.map(V=>V.id===b.id?{...V,...d}:V);N(w)}else{const x={...d,id:c.length};f(w=>[x,...w])}g(!1),C(null)}function D(d){C(d),g(!0)}function X(){alert("Upload placeholder")}function $(){alert("Template placeholder")}function U(d){F(d),E(!0)}function O(){if(A){const d=c.filter(w=>w.id!==A.id);f(d);const x=y.filter(w=>w.id!==A.id);N(x),F(null)}E(!1)}function B(d){H(d)}function z(d){K(d),I(!0)}function q(d){if(!d){I(!1),K(null);return}const x=Array.isArray(d)?d[0]:d;if(!x){I(!1),K(null);return}const w=x.partNo??x.part_number??x.code??"",V=x.partNo??x.partNoParent??x.parentPartNo??"";S==="partNo"?a(w):S==="parentPart"&&u(V||w),I(!1),K(null)}return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Part List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-success mr-2",onClick:Y,children:[e.jsx("i",{className:"fas fa-file mr-1"})," Add Part"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:X,title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:$,title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Part No"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:s,onChange:d=>a(d.target.value),placeholder:"Part No"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Pick Part",onClick:()=>z("partNo"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Unique No"}),e.jsx("input",{className:"form-control form-control-sm",value:o,onChange:d=>t(d.target.value),placeholder:"Unique No"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier ID"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:n,onChange:d=>m(d.target.value),placeholder:"Supplier ID"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Search Supplier",onClick:()=>alert("search supplier placeholder"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{className:"form-control form-control-sm",value:j,onChange:d=>h(d.target.value),placeholder:"Supplier Name"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Parent Part"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("input",{className:"form-control form-control-sm",value:r,onChange:d=>u(d.target.value),placeholder:"Parent Part"}),e.jsx("div",{className:"input-group-append",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",title:"Pick Parent Part",onClick:()=>z("parentPart"),children:e.jsx("i",{className:"fas fa-search"})})})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Has Subparts?"}),e.jsxs("select",{className:"form-control form-control-sm",value:i,onChange:d=>p(d.target.value),children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-right",children:[e.jsxs("button",{type:"button",className:"btn btn-sm btn-primary mr-2",onClick:se,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Search"]}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:W,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx("div",{className:"table-responsive mb-3",children:e.jsxs("table",{className:"table table-striped table-sm mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"#"}),e.jsx("th",{children:"Part No"}),e.jsx("th",{children:"Suffix"}),e.jsx("th",{children:"Unique No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Parent Part No"}),e.jsx("th",{children:"Subparts"}),e.jsx("th",{children:"L"}),e.jsx("th",{children:"W"}),e.jsx("th",{children:"H"}),e.jsx("th",{children:"Qty/Box"}),e.jsx("th",{children:"Total Wt"}),e.jsx("th",{style:{width:110},children:"Action"})]})}),e.jsx("tbody",{children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"14",className:"text-center py-4 text-muted",children:"No Data Found"})}):y.slice((M-1)*k,M*k).map((d,x)=>{var w,V,_;return e.jsxs("tr",{children:[e.jsx("td",{children:(M-1)*k+x+1}),e.jsx("td",{children:d.partNo}),e.jsx("td",{children:d.suffixCode??d.suffix}),e.jsx("td",{children:d.uniqueNo}),e.jsx("td",{children:d.partName??d.name}),e.jsx("td",{children:d.supplierName}),e.jsx("td",{children:d.parentPartNo??d.parent}),e.jsx("td",{children:d.childParts?d.childParts.length:d.subparts?d.subparts.length:0}),e.jsx("td",{children:((w=d.dimensions)==null?void 0:w.L)??d.L}),e.jsx("td",{children:((V=d.dimensions)==null?void 0:V.W)??d.W}),e.jsx("td",{children:((_=d.dimensions)==null?void 0:_.H)??d.H}),e.jsx("td",{children:d.qtyBox??d.qty}),e.jsx("td",{children:d.totalWeight??d.totalWt}),e.jsxs("td",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>D(d),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>U(d),children:e.jsx("i",{className:"fas fa-trash"})})]})]},x)})})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>B(1),children:"<<"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-light mr-1",onClick:()=>B(Math.max(1,M-1)),children:"<"}),[...Array(Math.max(1,Math.ceil(J/k))).keys()].map(d=>e.jsx("button",{type:"button",className:`btn btn-sm mr-1 ${M===d+1?"btn-primary":"btn-light"}`,onClick:()=>B(d+1),children:d+1},d)),e.jsx("button",{type:"button",className:"btn btn-sm btn-light ml-2",onClick:()=>B(Math.min(Math.ceil(J/k)||1,M+1)),children:">"})]}),e.jsxs("div",{className:"form-inline small",children:[e.jsxs("span",{className:"mr-3",children:["Total: ",J]}),e.jsxs("div",{className:"dropdown mr-2",children:[e.jsxs("button",{className:"btn btn-sm btn-light dropdown-toggle",type:"button","data-toggle":"dropdown",children:[k," per page"]}),e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>L(10),children:"10"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>L(25),children:"25"}),e.jsx("button",{className:"dropdown-item",type:"button",onClick:()=>L(50),children:"50"})]})]}),e.jsx("i",{className:"fas fa-chevron-down"})]})]})]})]}),e.jsx(ra,{show:T,onClose:R,onSave:Q,initialData:b}),e.jsx(Us,{show:v,onClose:()=>E(!1),onConfirm:O,title:"Deletion Confirmation",message:"Do you want to delete this data?"}),e.jsx(Ce,{show:P,onClose:()=>{I(!1),K(null)},onSelect:q})]})}const ca=[{code:"5062",name:"MENARA TERUS MAKMUR",address:"Jl. Jababeka XI Blok H-3 No.12, Kawasan Industri Jababeka, Cikarang, Bekasi"},{code:"722E",name:"TOYOTA MOTOR THAILAND",address:"186/1 Moo 1, Old Railway Road, Samrong Tai, Phra Pradaeng, Samut Prakan 10130, Thailand"},{code:"5453",name:"VELASTO INDONESIA",address:"Kp. Nagrog RT04 / RW02 Desa Kertamukti, Kecamatan Campaka, Purwakarta, Jawa Barat"},{code:"5365",name:"TOKAI RUBBER INDONESIA",address:"Jl. Mitra Timur II Blok E No. 13-14, Parungmulya, Ciampel, Karawang, Jawa Barat"},{code:"5150",name:"NAMICOH INDONESIA",address:"EJIP Industrial Park, Plot 6B-1, Cikarang Selatan, Bekasi, Jawa Barat"},{code:"5028",name:"GARUDA METAL UTAMA",address:"Jl. Kapuk Kamal Raya No.28, RT.6/RW.2, Kamal Muara, Kec. Penjaringan, Jkt Utara, Daerah Khusus Ibukota Jakarta 14470"},{code:"5335",name:"DINAR MAKMUR",address:"Jl. Raya Serang No.KM. 78, RW.3, Cijeruk, Kec. Kibin, Kabupaten Serang, Banten 42185"},{code:"5006",name:"NUSAHADI CITRAHARMONIS",address:"Jl. Raya Bekasi No.KM. 28, RT.005/RW.004, Medan Satria, Kecamatan Medan Satria, Kota Bks, Jawa Barat 17132"},{code:"5151",name:"SAKURA JAVA INDONESIA",address:"Kawasan Industri EJIP, Plot 8C/D, Cikarang Selatan, Bekasi, Jawa Barat 17530"},{code:"5010",name:"3 M INDONESIA",address:"Perkantoran Hijau Arkadia, Tower F, 8th Floor, Jl. TB Simatupang No.Kav. 88, RT.1/RW.1, Kebagusan, Ps. Minggu, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12520"},{code:"5002",name:"ASALTA MANDIRI AGUNG",address:"Jl. Pulo Buaran Raya No.1A, RT.1/RW.8, Pulo Gadung, Kota Jakarta Timur, Daerah Khusus Ibukota Jakarta 13930"}];function da({show:s=!1,onClose:a=()=>{},onSave:o=()=>{},initialData:t=null}){const[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState("");l.useEffect(()=>{s&&(t?(m(t.code||""),h(t.name||""),u(t.address||"")):(m(""),h(""),u("")))},[s,t]);function i(){if(!n.trim()||!j.trim()){alert("Please enter Supplier Code and Name");return}o({code:n,name:j,address:r})}return s?e.jsxs("div",{className:"modal-backdrop",children:[e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:t?"Edit Supplier":"Add Supplier"}),e.jsx("button",{type:"button",className:"close",onClick:a,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control",value:n,onChange:p=>m(p.target.value),readOnly:!!t})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Supplier Name"}),e.jsx("input",{type:"text",className:"form-control",value:j,onChange:p=>h(p.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Address"}),e.jsx("textarea",{className:"form-control",rows:"3",value:r,onChange:p=>u(p.target.value)})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:i,children:"Save"})]})]})}),e.jsx("style",{jsx:!0,children:`
        .modal-backdrop {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1050;
        }
        .modal-dialog {
          width: 500px;
        }
      `})]}):null}function ma(){const[s,a]=l.useState([]),[o,t]=l.useState([]),[n,m]=l.useState(""),[j,h]=l.useState(""),[r,u]=l.useState(""),[i,p]=l.useState(!1),[c,f]=l.useState(null),[y,N]=l.useState(!1),[T,g]=l.useState(null),[b,C]=l.useState(1),[v,E]=l.useState(5);l.useEffect(()=>{const M=ca.map((H,J)=>({...H,id:J}));a(M),t([])},[]);function A(){let M=s.filter(H=>(!n||H.code.toLowerCase().includes(n.toLowerCase()))&&(!j||H.name.toLowerCase().includes(j.toLowerCase()))&&(!r||H.address.toLowerCase().includes(r.toLowerCase())));t(M),C(1)}function F(){m(""),h(""),u(""),t([]),C(1)}function P(){f(null),p(!0)}function I(M){f(M),p(!0)}function S(M){if(c){const H=s.map(J=>J.id===c.id?{...c,...M}:J);a(H),t(H)}else{const J=[{...M,id:s.length},...s];a(J),t(J)}p(!1),f(null)}function K(M){g(M),N(!0)}function k(){if(T){const M=s.filter(H=>H.id!==T.id);a(M),t(M),g(null)}N(!1)}const L=o.slice((b-1)*v,b*v);return e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Supplier List"})}),e.jsxs("div",{className:"card-tools ml-auto",children:[e.jsxs("button",{className:"btn btn-sm btn-success mr-2",onClick:P,children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Add Supplier"]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary mr-1",onClick:()=>alert("Upload placeholder"),title:"Upload",children:e.jsx("i",{className:"fas fa-cloud-upload-alt"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>alert("Template placeholder"),title:"Template",children:e.jsx("i",{className:"fas fa-cloud-download-alt"})})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Code"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:M=>m(M.target.value),placeholder:"Supplier Code"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:j,onChange:M=>h(M.target.value),placeholder:"Supplier Name"})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"small mb-1",children:"Address"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:M=>u(M.target.value),placeholder:"Address"})]})})}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col-12 text-right",children:[e.jsxs("button",{className:"btn btn-sm btn-primary mr-2",onClick:A,children:[e.jsx("i",{className:"fas fa-search mr-1"})," Filter"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:F,children:[e.jsx("i",{className:"fas fa-times mr-1"})," Clear"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:40},children:"#"}),e.jsx("th",{children:"Supplier Code"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Address"}),e.jsx("th",{style:{width:110},children:"Action"})]})}),e.jsx("tbody",{children:L.length>0?L.map((M,H)=>e.jsxs("tr",{children:[e.jsx("td",{children:(b-1)*v+H+1}),e.jsx("td",{children:M.code}),e.jsx("td",{children:M.name}),e.jsx("td",{children:M.address}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>I(M),children:e.jsx("i",{className:"fas fa-pencil-alt"})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>K(M),children:e.jsx("i",{className:"fas fa-trash"})})]})]},M.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4 text-muted",children:"No Data Found"})})})]})}),e.jsx(_e,{currentPage:b,totalItems:o.length,itemsPerPage:v,onPageChange:C,onItemsPerPageChange:E})]})]}),e.jsx(da,{show:i,onClose:()=>p(!1),onSave:S,initialData:c}),e.jsx(Us,{show:y,onClose:()=>N(!1),onConfirm:k,title:"Deletion Confirmation",message:"Do you want to delete this data?"})]})}function ua(){const s=ls(),a=()=>{window.confirm("Are you sure you want to clear all saved data?")&&(localStorage.clear(),alert("All data cleared!"),s("/"))};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Settings"})})}),e.jsx("div",{className:"card-body",children:e.jsx("button",{className:"btn btn-danger",onClick:a,children:"Clear All Data"})})]})})}function ha({onSave:s}){const[a,o]=l.useState("inland"),[t,n]=l.useState("02.2025"),[m,j]=l.useState("47.7"),[h,r]=l.useState("86.177"),[u,i]=l.useState("86.177"),[p,c]=l.useState("60.577"),[f,y]=l.useState("64"),[N,T]=l.useState("86.177"),[g,b]=l.useState("106.835"),[C,v]=l.useState("63.249"),[E,A]=l.useState("1"),[F,P]=l.useState("0,31"),[I,S]=l.useState("6"),[K,k]=l.useState("0,31"),[L,M]=l.useState("5,83"),[H,J]=l.useState(""),[se,W]=l.useState("0,60"),[Y,R]=l.useState("5"),[Q,D]=l.useState(!1),X=()=>{const O={tab:a,inland:{period:t,containerM3:m,rent40ft:h,rent20ft:u,milkrunRate:p,milkrunEff:f},labor:{period:t,dlRate:N,idlRate:g,facilityRate:C},manHour:{period:t,receiving:E,inspection:F,deliveryCourse:I,supplyPallet:K,sortingSupply:L,pickPacking:H,vanning:se,emptyBox:Y}};D(!0),typeof s=="function"&&s(O),setTimeout(()=>D(!1),1500)},$=()=>{n("02.2025"),j("47.7"),r("86.177"),i("86.177"),c("60.577"),y("64"),T("86.177"),b("106.835"),v("63.249"),A("1"),P("0,31"),S("6"),k("0,31"),M("5,83"),J(""),W("0,60"),R("5")},U="form-control form-control-sm";return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"card card-outline card-primary",children:[e.jsxs("div",{className:"card-header d-flex align-items-center",children:[e.jsx("h3",{className:"card-title mb-0",children:e.jsx("b",{children:"Parameters"})}),e.jsx("div",{className:"ml-auto btn-group btn-group-sm",children:["inland","labor","manHour","history"].map(O=>e.jsxs("button",{className:`btn btn-sm ${a===O?"btn-primary":"btn-outline-secondary"}`,onClick:()=>o(O),children:[O==="inland"&&"Inland",O==="labor"&&"Labor Cost",O==="manHour"&&"Man Hour",O==="history"&&"History"]},O))})]}),e.jsxs("div",{className:"card-body",children:[a==="inland"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:U,value:t,onChange:O=>n(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Container Volume M3"}),e.jsx("input",{className:U,value:m,onChange:O=>j(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"40 feet container rent rate"}),e.jsx("input",{className:U,value:h,onChange:O=>r(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"20 feet container rent rate"}),e.jsx("input",{className:U,value:u,onChange:O=>i(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Milkrun rate (per m3)"}),e.jsx("input",{className:U,value:p,onChange:O=>c(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Milkrun efficiency rate (%)"}),e.jsx("input",{className:U,value:f,onChange:O=>y(O.target.value)})]})]}),a==="labor"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:U,value:t,onChange:O=>n(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Direct Labor Rate (DL) Rp/Hour"}),e.jsx("input",{className:U,value:N,onChange:O=>T(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Indirect Labor Rate (IDL) Rp/M3"}),e.jsx("input",{className:U,value:g,onChange:O=>b(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Facility Others Rate"}),e.jsx("input",{className:U,value:C,onChange:O=>v(O.target.value)})]})]}),a==="manHour"&&e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Period"}),e.jsx("input",{className:U,value:t,onChange:O=>n(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Receiving"}),e.jsx("input",{className:U,value:E,onChange:O=>A(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Inspection"}),e.jsx("input",{className:U,value:F,onChange:O=>P(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Delivery Course"}),e.jsx("input",{className:U,value:I,onChange:O=>S(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Supply (Pallet)"}),e.jsx("input",{className:U,value:K,onChange:O=>k(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Sorting & Supply (Non Pallet)"}),e.jsx("input",{className:U,value:L,onChange:O=>M(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Pick & Packing"}),e.jsx("input",{className:U,value:H,onChange:O=>J(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Vanning"}),e.jsx("input",{className:U,value:se,onChange:O=>W(O.target.value)})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Empty Box/Pallet Return"}),e.jsx("input",{className:U,value:Y,onChange:O=>R(O.target.value)})]})]}),a==="history"&&e.jsx("div",{className:"text-center text-muted py-4",children:"History tab content will appear here."})]}),e.jsxs("div",{className:"card-footer text-right",children:[e.jsx("button",{className:"btn btn-primary mr-2",onClick:X,children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:$,children:"Cancel"}),Q&&e.jsx("span",{className:"ml-3 text-success",children:"Parameters saved"})]})]})})}function ge({children:s}){return Ne().user?s:e.jsx(pt,{to:"/login",replace:!0})}function xa(){const s=Ne(),o=Ps().pathname==="/login",t=!!s.user&&!o;return e.jsxs("div",{className:"wrapper",children:[t&&e.jsx(Yl,{}),t&&e.jsx(Gl,{}),e.jsx("div",{className:t?"content-wrapper":"",children:e.jsxs(xt,{children:[e.jsx(oe,{path:"/login",element:e.jsx(Ql,{})}),e.jsx(oe,{path:"/",element:e.jsx(ge,{children:e.jsx(pa,{})})}),e.jsx(oe,{path:"/projects",element:e.jsx(ge,{children:e.jsx(sa,{})})}),e.jsx(oe,{path:"/models",element:e.jsx(ge,{children:e.jsx(na,{})})}),e.jsx(oe,{path:"/parts",element:e.jsx(ge,{children:e.jsx(ia,{})})}),e.jsx(oe,{path:"/suppliers",element:e.jsx(ge,{children:e.jsx(ma,{})})}),e.jsx(oe,{path:"/packing/cps",element:e.jsx(il,{})}),e.jsx(oe,{path:"/packing/dpi",element:e.jsx(Tl,{})}),e.jsx(oe,{path:"/packing/CalculatePackingCost",element:e.jsx(Ul,{})}),e.jsx(oe,{path:"/packing/ComparisonPage",element:e.jsx(ql,{})}),e.jsx(oe,{path:"/module-type",element:e.jsx(Ss,{})}),e.jsx(oe,{path:"/material",element:e.jsx(Ss,{})}),e.jsx(oe,{path:"/settings",element:e.jsx(ge,{children:e.jsx(ua,{})})}),e.jsx(oe,{path:"/params",element:e.jsx(ge,{children:e.jsx(ha,{})})})]})}),t&&e.jsxs("footer",{className:"main-footer",children:[e.jsxs("div",{className:"float-right d-none d-sm-block",children:[e.jsx("b",{children:"Version"})," 0.1.0"]}),e.jsxs("strong",{children:["© ",new Date().getFullYear()," My Company."]})]})]})}function pa(){var a,o,t;const s=Ne();return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"content-header",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-sm-6",children:[e.jsx("h1",{children:"Dashboard"}),e.jsxs("small",{children:["User: ",(a=s.user)==null?void 0:a.username," | Dept: ",(o=s.user)==null?void 0:o.department," | Role: ",(t=s.user)==null?void 0:t.role]})]})})})}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid",children:e.jsx(Jl,{})})})]})}const ja="/packing-cost-fe/";ut(document.getElementById("root")).render(e.jsx(de.StrictMode,{children:e.jsx(ht,{basename:ja,children:e.jsx(Tt,{children:e.jsx(xa,{})})})}));
